###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.20.2.41139 for 8051             07/May/2014  17:02:25 #
# Copyright 2004-2013 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#                                                                             #
#    Source file        =  D:\Texas Instruments\Z-Stack Lighting              #
#                          1.0.2\Projects\zstack\ZLL\Source\zll_initiator.c   #
#    Command line       =  -f "D:\Texas Instruments\Z-Stack Lighting          #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\Tools\CC2530DB\f8wRouter.cfg" (-DCPU32MHZ        #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f "D:\Texas         #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\Tools\CC2530DB\f8wConfig.cfg" (-DZIGBEEPRO       #
#                          -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100    #
#                          -DREJOIN_POLL_RATE=440) -f "D:\Texas               #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\Tools\CC2530DB\f8wZCL.cfg" "D:\Texas             #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\Source\zll_initiator.c"  #
#                          -D FEATURE_GREEN_POWER -D SECURE=1 -D              #
#                          TC_LINKKEY_JOIN -D ZDSECMGR_TC_DEVICE_MAX=2 -D     #
#                          NV_RESTORE -D HOLD_AUTO_START -D INTER_PAN -D      #
#                          ZTOOL_P1 -D MT_TASK -D MT_APP_FUNC -D MT_SYS_FUNC  #
#                          -D MT_ZDO_FUNC -D MT_ZDO_CB_FUNC -D MT_UTIL_FUNC   #
#                          -D MT_ZDO_MGMT -D LCD_SUPPORTED -D HAL_LCD=FALSE   #
#                          -D HAL_KEY=FALSE -D ZCL_BASIC -D ZCL_READ -D       #
#                          ZCL_WRITE -D ZCL_IDENTIFY -D ZCL_ON_OFF -D         #
#                          ZCL_SCENES -D ZCL_GROUPS -D                        #
#                          ZCL_LIGHT_LINK_ENHANCE -D ZCL_LEVEL_CTRL -D        #
#                          ZCL_COLOR_CTRL -D xMAX_CHANNELS_24GHZ=0x02108800   #
#                          -lC "D:\Texas Instruments\Z-Stack Lighting         #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\BridgeE #
#                          B-Pro\List\" -lA "D:\Texas Instruments\Z-Stack     #
#                          Lighting 1.0.2\Projects\zstack\ZLL\SampleApp\CC253 #
#                          x\BridgeEB-Pro\List\" --diag_suppress Pe001,Pa010  #
#                          -o "D:\Texas Instruments\Z-Stack Lighting          #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\BridgeE #
#                          B-Pro\Obj\" -e --debug --core=plain --dptr=16,1    #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I "D:\Texas Instruments\Z-Stack Lighting          #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\" -I    #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\Sour #
#                          ce\" -I "D:\Texas Instruments\Z-Stack Lighting     #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\S #
#                          ource\" -I "D:\Texas Instruments\Z-Stack Lighting  #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\HomeAutomation\Source\" -I "D:\Texas             #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\HomeAutomation\SampleLight\Source\" -I           #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\ZMain\TI2530DB\" -I "D:\Texas                    #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\hal\include\" -I "D:\Texas      #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\hal\target\CC2530EB\" -I        #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\include\" -I "D:\Texas      #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\high_level\" -I "D:\Texas   #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\low_level\srf04\" -I        #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\low_level\srf04\single_chip #
#                          \" -I "D:\Texas Instruments\Z-Stack Lighting       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mt\" -I "D:\Texas               #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\osal\include\" -I "D:\Texas     #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\services\saddr\" -I "D:\Texas   #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\services\sdata\" -I "D:\Texas   #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\af\" -I "D:\Texas         #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\nwk\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\sapi\" -I "D:\Texas       #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\sec\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\sys\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\zcl\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\zdo\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\zmac\" -I "D:\Texas             #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\zmac\f8w\" -Ohz                 #
#                          --require_prototypes                               #
#    List file          =  D:\Texas Instruments\Z-Stack Lighting              #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\BridgeE #
#                          B-Pro\List\zll_initiator.lst                       #
#    Object file        =  D:\Texas Instruments\Z-Stack Lighting              #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\BridgeE #
#                          B-Pro\Obj\zll_initiator.r51                        #
#                                                                             #
#                                                                             #
###############################################################################

D:\Texas Instruments\Z-Stack Lighting 1.0.2\Projects\zstack\ZLL\Source\zll_initiator.c
      1          /**************************************************************************************************
      2            Filename:       zll_initiator.c
      3            Revised:        $Date: 2013-11-22 16:17:23 -0800 (Fri, 22 Nov 2013) $
      4            Revision:       $Revision: 36220 $
      5          
      6            Description:    Zigbee Cluster Library - Light Link Initiator.
      7          
      8          
      9            Copyright 2011-2013 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          
     41          /*********************************************************************
     42           * INCLUDES
     43           */
     44          #include "ZComDef.h"
     45          #include "OSAL.h"
     46          #include "OSAL_Tasks.h"
     47          #include "OSAL_Nv.h"
     48          #include "AF.h"
     49          #include "ZDApp.h"
     50          #include "ZDSecMgr.h"
     51          #include "ZDObject.h"
     52          #include "nwk_util.h"
     53          
     54          #if defined ( POWER_SAVING )
     55          #include "OSAL_PwrMgr.h"
     56          #endif
     57          
     58          #if defined( INTER_PAN )
     59            #include "stub_aps.h"
     60          #endif
     61          
     62          #include "zcl.h"
     63          #include "zcl_general.h"
     64          #include "zcl_ll.h"
     65          #include "zll.h"
     66          
     67          #if defined ( MT_APP_FUNC )
     68          #include "MT_APP.h"
     69          #include "zll_rpc.h"
     70          #endif
     71          
     72          #include "zll_initiator.h"
     73          
     74          
     75          /*********************************************************************
     76           * MACROS
     77           */
     78          
     79          /*********************************************************************
     80           * CONSTANTS
     81           */
     82          
     83          #define ZLL_INITIATOR_REJOIN_TIMEOUT             2500 // 2.5 sec
     84          
     85          // for non-polling end-devices only
     86          #define ZLL_INITIATOR_TEMP_POST_TL_POLL_RATE     1000
     87          
     88          #define DEV_INFO_INVALID_EP                      0xFE
     89          
     90          #define ZLL_ENDDEVICE_JOIN_EVT                             ZLL_NWK_JOIN_EVT
     91          #define ZLL_TL_SCAN_BASE_EVT                               ZLL_AUX_1_EVT
     92          #define ZLL_CFG_TARGET_EVT                                 ZLL_AUX_2_EVT
     93          #define ZLL_W4_NWK_START_RSP_EVT                           ZLL_AUX_3_EVT
     94          #define ZLL_W4_NWK_JOIN_RSP_EVT                            ZLL_AUX_4_EVT
     95          #define ZLL_DISABLE_RX_EVT                                 ZLL_AUX_5_EVT
     96          #define ZLL_W4_REJOIN_EVT                                  ZLL_AUX_6_EVT
     97          #define ZLL_NOTIFY_APP_EVT                                 ZLL_AUX_7_EVT
     98          
     99          #define ZLL_INITIATOR_NUM_SCAN_REQ_PRIMARY       8  // 5 times on 1st channel, plus once for each remianing primary channel
    100          #define ZLL_INITIATOR_NUM_SCAN_REQ_EXTENDED      20 // (ZLL_NUM_SCAN_REQ_PRIMARY + sizeof(ZLL_SECONDARY_CHANNELS_SET))
    101          
    102          /*********************************************************************
    103           * TYPEDEFS
    104           */
    105          typedef union
    106          {
    107            zclLLNwkStartRsp_t nwkStartRsp;
    108            zclLLNwkJoinRsp_t nwkJoinRsp;
    109          } zclLLRsp_t;
    110          
    111          typedef struct
    112          {
    113            zclLLScanRsp_t scanRsp;
    114            afAddrType_t srcAddr;
    115            uint16 newNwkAddr;
    116            uint8 rxChannel;  // channel scan response was heard on
    117            int8 lastRssi;    // receieved RSSI
    118          } targetCandidate_t;
    119          
    120          /*********************************************************************
    121           * GLOBAL VARIABLES
    122           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    123          uint8 zllInitiator_TaskID;
   \                     zllInitiator_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    124          
    125          /*********************************************************************
    126           * EXTERNAL VARIABLES
    127           */
    128          extern devStartModes_t devStartMode;
    129          extern uint8 _tmpRejoinState;
    130          extern uint8 zllJoinedHANetwork;
    131          
    132          /*********************************************************************
    133           * EXTERNAL FUNCTIONS
    134           */
    135          
    136          /*********************************************************************
    137           * LOCAL VARIABLES
    138           */
    139          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    140          static uint8 initiatorSeqNum;
   \                     initiatorSeqNum:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    141          
    142          // Touch Link channel tracking

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    143          static uint8 numScanReqSent;
   \                     numScanReqSent:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    144          static uint8 scanReqChannels;
   \                     scanReqChannels:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    145          
    146          // Network key sent to the target to start the network with

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    147          static uint8 keyIndexSent;
   \                     keyIndexSent:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    148          static uint8 encKeySent[SEC_KEY_LEN];
   \                     encKeySent:
   \   000000                DS 16
   \   000010                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    149          static uint32 responseIDSent;
   \                     responseIDSent:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
    150          
    151          // Info related to the received request

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    152          static zclLLNwkJoinReq_t joinReq;
   \                     joinReq:
   \   000000                DS 47
   \   00002F                REQUIRE __INIT_XDATA_Z
    153          
    154          // Info related to the received response

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    155          static targetCandidate_t selectedTarget;
   \                     selectedTarget:
   \   000000                DS 54
   \   000036                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    156          static zclLLRsp_t rxRsp; // network start or join response
   \                     rxRsp:
   \   000000                DS 17
   \   000011                REQUIRE __INIT_XDATA_Z
    157          
    158          // Addresses used for sending/receiving messages

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    159          static afAddrType_t bcastAddr;
   \                     bcastAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    160          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    161          static uint16 savedPollRate;
   \                     savedPollRate:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    162          static uint16 savedQueuedPollRate;
   \                     savedQueuedPollRate:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    163          static uint16 savedResponsePollRate;
   \                     savedResponsePollRate:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    164          static uint8 savedRxOnIdle;
   \                     savedRxOnIdle:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    165          
    166          // Application callback

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    167          static zclGCB_BasicReset_t pfnResetAppCB = NULL;
   \                     pfnResetAppCB:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    168          static zclGCB_Identify_t pfnIdentifyCB = NULL;
   \                     pfnIdentifyCB:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    169          static zll_NotifyAppTLCB_t pfnNotifyAppCB = NULL;
   \                     pfnNotifyAppCB:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    170          static zll_SelectDiscDevCB_t pfnSelectDiscDevCB = NULL;
   \                     pfnSelectDiscDevCB:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    171          

   \                                 In  segment XDATA_I, align 1, keep-with-next
    172          static uint8 initiatorRegisteredMsgAppTaskID = TASK_NO_TASK;
   \                     initiatorRegisteredMsgAppTaskID:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for initiatorRegisteredMsgAppTas`
   \   000001                REQUIRE __INIT_XDATA_I
    173          
    174          /*********************************************************************
    175           * LOCAL FUNCTIONS
    176           */
    177          
    178          // This callback is called to process a Scan Request command
    179          static ZStatus_t initiatorScanReqCB( afAddrType_t *srcAddr, zclLLScanReq_t *pReq, uint8 seqNum );
    180          
    181          // This callback is called to process a Device Information Request command
    182          static ZStatus_t initiatorDeviceInfoReqCB( afAddrType_t *srcAddr, zclLLDeviceInfoReq_t *pReq, uint8 seqNum );
    183          
    184          // This callback is called to process an Identify Request command
    185          static ZStatus_t initiatorIdentifyReqCB( afAddrType_t *srcAddr, zclLLIdentifyReq_t *pReq );
    186          
    187          // This callback is called to process a Reset to Factory New Request command
    188          static ZStatus_t initiatorResetToFNReqCB( afAddrType_t *srcAddr, zclLLResetToFNReq_t *pReq );
    189          
    190          // This callback is called to process a Network Join End Device Request command
    191          static ZStatus_t initiatorNwkJoinReqCB( afAddrType_t *srcAddr, zclLLNwkJoinReq_t *pReq, uint8 seqNum );
    192          
    193          // This callback is called to process a Network Update Request command
    194          static ZStatus_t initiatorNwkUpdateReqCB( afAddrType_t *srcAddr, zclLLNwkUpdateReq_t *pReq );
    195          
    196          // This callback is called to process a Scan Response command
    197          static ZStatus_t initiatorScanRspCB( afAddrType_t *srcAddr, zclLLScanRsp_t *pRsp );
    198          
    199          // This callback is called to process a Device Information Response command
    200          static ZStatus_t initiatorDeviceInfoRspCB( afAddrType_t *srcAddr, zclLLDeviceInfoRsp_t *pRsp );
    201          
    202          // This callback is called to process a Network Start Response command
    203          static ZStatus_t initiatorNwkStartRspCB( afAddrType_t *srcAddr, zclLLNwkStartRsp_t *pRsp );
    204          
    205          // This callback is called to process a Network Join Router Response command
    206          static ZStatus_t initiatorNwkJoinRtrRspCB( afAddrType_t *srcAddr, zclLLNwkJoinRsp_t *pRsp );
    207          
    208          // This callback is called to process a Network Join End Device Response command
    209          static ZStatus_t initiatorNwkJoinEDRspCB( afAddrType_t *srcAddr, zclLLNwkJoinRsp_t *pRsp );
    210          
    211          // This callback is called to process a Leave Confirmation message
    212          static void *initiatorZdoLeaveCnfCB( void *pParam );
    213          
    214          static void initiatorProcessStateChange( devStates_t state );
    215          void initiatorSelectNwkParams( void );
    216          static void initiatorSetNwkToInitState( void );
    217          static void initiatorJoinNwk( void );
    218          static void initiatorReJoinNwk( devStartModes_t startMode );
    219          static void initiatorSendScanReq( bool freshScan );
    220          static ZStatus_t initiatorSendNwkStartReq( zclLLScanRsp_t *pRsp );
    221          static ZStatus_t initiatorSendNwkJoinReq( zclLLScanRsp_t *pRsp );
    222          static ZStatus_t initiatorSendNwkUpdateReq( zclLLScanRsp_t *pRsp );
    223          static void initiatorClearSelectedTarget( void );
    224          
    225          #if defined ( MT_APP_FUNC )
    226          static ZStatus_t initiatorProcessRpcMsg( uint8 srcEP, uint8 len, uint8 *msg );
    227          #endif
    228          
    229          /*********************************************************************
    230           * ZLL Initiator Callback Table
    231           */
    232          // Initiator Command Callbacks table

   \                                 In  segment XDATA_I, align 1, keep-with-next
    233          static zclLL_InterPANCallbacks_t zllInitiator_CmdCBs =
   \                     zllInitiator_CmdCBs:
   \   000000                DS 26
   \   00001A                REQUIRE `?<Initializer for zllInitiator_CmdCBs>`
   \   00001A                REQUIRE __INIT_XDATA_I
    234          {
    235            // Received Server Commands
    236            initiatorScanReqCB,       // Scan Request command
    237            initiatorDeviceInfoReqCB, // Device Information Request command
    238            initiatorIdentifyReqCB,   // Identify Request command
    239            initiatorResetToFNReqCB,  // Reset to Factory New Request command
    240            NULL,                     // Network Start Request command
    241          #if ( ZSTACK_ROUTER_BUILD )
    242            initiatorNwkJoinReqCB,    // Network Join Router Request command
    243            NULL,                     // Network Join End Device Request command
    244          #else
    245            NULL,                     // Network Join Router Request command
    246            initiatorNwkJoinReqCB,    // Network Join End Device Request command
    247          #endif
    248            initiatorNwkUpdateReqCB,  // Network Update Request command
    249          
    250            // Received Client Commands
    251            initiatorScanRspCB,       // Scan Response command
    252            initiatorDeviceInfoRspCB, // Device Information Response command
    253            initiatorNwkStartRspCB,   // Network Start Response command
    254            initiatorNwkJoinRtrRspCB, // Network Join Router Response command
    255            initiatorNwkJoinEDRspCB   // Network Join End Device Response command
    256          };
    257          
    258          /*********************************************************************
    259           * PUBLIC FUNCTIONS
    260           */
    261          
    262          /*********************************************************************
    263           * @fn      zllInitiator_InitDevice
    264           *
    265           * @brief   Start the ZLL Initiator device in the network if it's not
    266           *          factory new. Otherwise, determine the network parameters
    267           *          and wait for a touchlink command.
    268           *
    269           * @param   none
    270           *
    271           * @return  status
    272           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    273          ZStatus_t zllInitiator_InitDevice( void )
   \                     zllInitiator_InitDevice:
    274          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    275            if ( !zll_IsFactoryNew() )
   \   000004                ; Setup parameters for call to function zll_IsFactoryNew
   \   000004   12....       LCALL   ??zll_IsFactoryNew?relay
   \   000007   E9           MOV     A,R1
   \   000008   7007         JNZ     ??zllInitiator_InitDevice_0
    276            {
    277              // Resume ZigBee functionality based on the info stored in NV
    278              initiatorReJoinNwk( MODE_RESUME );
   \   00000A                ; Setup parameters for call to function initiatorReJoinNwk
   \   00000A   7901         MOV     R1,#0x1
   \   00000C   12....       LCALL   ??initiatorReJoinNwk?relay
   \   00000F   8003         SJMP    ??zllInitiator_InitDevice_1
    279            }
    280            else
    281            {
    282              initiatorSelectNwkParams();
   \                     ??zllInitiator_InitDevice_0:
   \   000011                ; Setup parameters for call to function initiatorSelectNwkParams
   \   000011   12....       LCALL   ??initiatorSelectNwkParams?relay
    283          #ifndef HOLD_AUTO_START
    284              zllInitiator_ClassicalCommissioningStart();
    285          #endif
    286            }
    287          
    288          #if defined ( POWER_SAVING )
    289            osal_pwrmgr_device( PWRMGR_BATTERY );
    290          #endif
    291          
    292          #if ( ZSTACK_ROUTER_BUILD )
    293            // Enable our receiver
    294            savedRxOnIdle = TRUE;
   \                     ??zllInitiator_InitDevice_1:
   \   000014   90....       MOV     DPTR,#savedRxOnIdle
   \   000017   7401         MOV     A,#0x1
   \   000019   F0           MOVX    @DPTR,A
    295            ZMacSetReq( ZMacRxOnIdle, &savedRxOnIdle );
   \   00001A                ; Setup parameters for call to function ZMacSetReq
   \   00001A   7A..         MOV     R2,#savedRxOnIdle & 0xff
   \   00001C   7B..         MOV     R3,#(savedRxOnIdle >> 8) & 0xff
   \   00001E   7952         MOV     R1,#0x52
   \   000020   12....       LCALL   ??ZMacSetReq?relay
    296            zll_PermitJoin(0);
   \   000023                ; Setup parameters for call to function zll_PermitJoin
   \   000023   7900         MOV     R1,#0x0
   \   000025   12....       LCALL   ??zll_PermitJoin?relay
    297          #endif
    298          
    299            return ( ZSuccess );
   \   000028   7900         MOV     R1,#0x0
   \   00002A   02....       LJMP    ??Subroutine35_0 & 0xFFFF
    300          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine35_0:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    301          
    302          
    303          /*********************************************************************
    304           * @fn      zllInitiator_ResetToFactoryNew
    305           *
    306           * @brief   Call to Reset the Initiator to factory new
    307           *
    308           * @param   none
    309           *
    310           * @return  none
    311           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    312          void zllInitiator_ResetToFactoryNew()
   \                     zllInitiator_ResetToFactoryNew:
    313          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    314            if ( pfnResetAppCB )
   \   000004   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_36:
   \   000007   6006         JZ      ??zllInitiator_ResetToFactoryNew_0
    315            {
    316              pfnResetAppCB();
   \   000009                ; Setup parameters for indirect call
   \   000009   12....       LCALL   ??Subroutine43_0 & 0xFFFF
    317            }
   \                     ??CrossCallReturnLabel_98:
   \   00000C   12....       LCALL   ?CALL_IND
    318            zll_ResetToFactoryNew( TRUE );
   \                     ??zllInitiator_ResetToFactoryNew_0:
   \   00000F                ; Setup parameters for call to function zll_ResetToFactoryNew
   \   00000F   7901         MOV     R1,#0x1
   \   000011   12....       LCALL   ??zll_ResetToFactoryNew?relay
    319          }
   \   000014   02....       LJMP    ??Subroutine35_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   90....       MOV     DPTR,#pfnResetAppCB
   \   000003                REQUIRE ??Subroutine33_0
   \   000003                ; // Fall through to label ??Subroutine33_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine33_0:
   \   000000   12....       LCALL   ??Subroutine41_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_96:
   \   000003   E8           MOV     A,R0
   \   000004   49           ORL     A,R1
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine41_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine43_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F583         MOV     DPH,A
   \   000003   8882         MOV     DPL,R0
   \   000005   22           RET
    320          
    321          /*********************************************************************
    322           * @fn      zllInitiator_RegisterIdentifyCB
    323           *
    324           * @brief   Register an Application's Identify callback function.
    325           *
    326           * @param   pfnIdentify - application callback
    327           *
    328           * @return  none
    329           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    330          void zllInitiator_RegisterIdentifyCB( zclGCB_Identify_t pfnIdentify )
   \                     zllInitiator_RegisterIdentifyCB:
    331          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    332            pfnIdentifyCB = pfnIdentify;
   \   000004   90....       MOV     DPTR,#pfnIdentifyCB
   \   000007   02....       LJMP    ?Subroutine0 & 0xFFFF
    333          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   EA           MOV     A,R2
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   EB           MOV     A,R3
   \   000004                REQUIRE ??Subroutine34_0
   \   000004                ; // Fall through to label ??Subroutine34_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine34_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001                REQUIRE ??Subroutine35_0
   \   000001                ; // Fall through to label ??Subroutine35_0
    334          
    335          /*********************************************************************
    336           * @fn      zllInitiator_RegisterNotifyTLCB
    337           *
    338           * @brief   Register an Application's Touch-Link Notify callback function.
    339           *
    340           * @param   pfnNotifyApp - application callback
    341           *
    342           * @return  none
    343           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    344          void zllInitiator_RegisterNotifyTLCB( zll_NotifyAppTLCB_t pfnNotifyApp )
   \                     zllInitiator_RegisterNotifyTLCB:
    345          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    346            pfnNotifyAppCB = pfnNotifyApp;
   \   000004   90....       MOV     DPTR,#pfnNotifyAppCB
   \   000007   02....       LJMP    ?Subroutine0 & 0xFFFF
    347          }
    348          
    349          /*********************************************************************
    350           * @fn      zllInitiator_RegisterResetAppCB
    351           *
    352           * @brief   Register an Application's Reset callback function.
    353           *
    354           * @param   pfnResetApp - application callback
    355           *
    356           * @return  none
    357           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    358          void zllInitiator_RegisterResetAppCB( zclGCB_BasicReset_t pfnResetApp )
   \                     zllInitiator_RegisterResetAppCB:
    359          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    360            pfnResetAppCB = pfnResetApp;
   \   000004   90....       MOV     DPTR,#pfnResetAppCB
   \   000007   02....       LJMP    ?Subroutine0 & 0xFFFF
    361          }
    362          
    363          /*********************************************************************
    364           * @fn      zllInitiator_RegisterSelectDiscDevCB
    365           *
    366           * @brief   Register an Application's Selection callback function, to select
    367           *          a target from the discovered devices during a Touch-link scan.
    368           *
    369           * @param   pfnSelectDiscDev - application callback
    370           *
    371           * @return  none
    372           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    373          void zllInitiator_RegisterSelectDiscDevCB( zll_SelectDiscDevCB_t pfnSelectDiscDev )
   \                     zllInitiator_RegisterSelectDiscDevCB:
    374          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    375            pfnSelectDiscDevCB = pfnSelectDiscDev;
   \   000004   90....       MOV     DPTR,#pfnSelectDiscDevCB
   \   000007   02....       LJMP    ?Subroutine0 & 0xFFFF
    376          }
    377          
    378          /*********************************************************************
    379           * @fn      zllInitiator_StartDevDisc
    380           *
    381           * @brief   Start device discovery, scanning for other devices in the vicinity
    382           *          of the originator (initiating first part of the Touch-Link process).
    383           *          Device discovery shall only be initiated by address assignment capable
    384           *          devices. To perform device discovery, the initiator shall broadcast
    385           *          inter-PAN Scan Requests, spaced at an interval of
    386           *          ZLL_APLC_SCAN_TIME_BASE_DURATION seconds.
    387           *
    388           * @param   none
    389           *
    390           * @return  status
    391           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    392          ZStatus_t zllInitiator_StartDevDisc( void )
   \                     zllInitiator_StartDevDisc:
    393          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    394            osal_clear_event( ZDAppTaskID, ZDO_NETWORK_INIT ); // in case orphaned rejoin was called
   \   00000A                ; Setup parameters for call to function osal_clear_event
   \   00000A   7A01         MOV     R2,#0x1
   \   00000C   7B00         MOV     R3,#0x0
   \   00000E   90....       MOV     DPTR,#ZDAppTaskID
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   12....       LCALL   ??osal_clear_event?relay
    395            ZDApp_StopJoiningCycle();
   \   000016                ; Setup parameters for call to function ZDApp_StopJoiningCycle
   \   000016   12....       LCALL   ??ZDApp_StopJoiningCycle?relay
    396            zllHAScanInitiated = FALSE;
   \   000019   90....       MOV     DPTR,#zllHAScanInitiated
   \   00001C   E4           CLR     A
   \   00001D   F0           MOVX    @DPTR,A
    397            //abort any touchlink in progress and start the new dev discovery.
    398            zllInitiator_AbortTL();
   \   00001E                ; Setup parameters for call to function zllInitiator_AbortTL
   \   00001E   12....       LCALL   ??zllInitiator_AbortTL?relay
    399          
    400            // To perform device discovery, switch to channel 11 and broadcast five
    401            // consecutive inter-PAN Scan Requests. Then switch to each remaining
    402            // ZLL channels in turn (i.e., 15, 20, and 25) and broadcast a single
    403            // inter-PAN Scan Request on each channel.
    404            if ( !osal_get_timeoutEx( zllInitiator_TaskID, ZLL_TL_SCAN_BASE_EVT ) )
   \   000021                ; Setup parameters for call to function osal_get_timeoutEx
   \   000021   7A40         MOV     R2,#0x40
   \   000023   7B00         MOV     R3,#0x0
   \   000025   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000028   E0           MOVX    A,@DPTR
   \   000029   F9           MOV     R1,A
   \   00002A   12....       LCALL   ??osal_get_timeoutEx?relay
   \   00002D   EA           MOV     A,R2
   \   00002E   4B           ORL     A,R3
   \   00002F   4C           ORL     A,R4
   \   000030   4D           ORL     A,R5
   \   000031   6003         JZ      $+5
   \   000033   02....       LJMP    ??zllInitiator_StartDevDisc_0 & 0xFFFF
    405            {
    406              uint8 x = TRUE;
   \   000036   85..82       MOV     DPL,?XSP + 0
   \   000039   85..83       MOV     DPH,?XSP + 1
   \   00003C   7401         MOV     A,#0x1
   \   00003E   F0           MOVX    @DPTR,A
    407          
    408              // Generate a new Transaction Id
    409              zllTransID = ( ( (uint32)osal_rand() ) << 16 ) + osal_rand();
   \   00003F                ; Setup parameters for call to function osal_rand
   \   00003F   12....       LCALL   ??osal_rand?relay
   \   000042   8A..         MOV     ?V0 + 4,R2
   \   000044   8B..         MOV     ?V0 + 5,R3
   \   000046   E4           CLR     A
   \   000047   F5..         MOV     ?V0 + 6,A
   \   000049   F5..         MOV     ?V0 + 7,A
   \   00004B   7410         MOV     A,#0x10
   \   00004D   78..         MOV     R0,#?V0 + 4
   \   00004F   12....       LCALL   ?L_SHL
   \   000052                ; Setup parameters for call to function osal_rand
   \   000052   12....       LCALL   ??osal_rand?relay
   \   000055   8A..         MOV     ?V0 + 0,R2
   \   000057   8B..         MOV     ?V0 + 1,R3
   \   000059   E4           CLR     A
   \   00005A   F5..         MOV     ?V0 + 2,A
   \   00005C   F5..         MOV     ?V0 + 3,A
   \   00005E   78..         MOV     R0,#?V0 + 4
   \   000060   79..         MOV     R1,#?V0 + 0
   \   000062   12....       LCALL   ?L_ADD
   \   000065   90....       MOV     DPTR,#zllTransID
   \   000068   78..         MOV     R0,#?V0 + 4
   \   00006A   12....       LCALL   ?L_MOV_TO_X
    410              osal_start_timerEx( zllInitiator_TaskID, ZLL_TRANS_LIFETIME_EXPIRED_EVT,
    411                                  ZLL_APLC_INTER_PAN_TRANS_ID_LIFETIME );
   \   00006D                ; Setup parameters for call to function osal_start_timerEx
   \   00006D   90....       MOV     DPTR,#__Constant_1f40
   \   000070   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000073   7A20         MOV     R2,#0x20
   \   000075   7B00         MOV     R3,#0x0
   \   000077   90....       MOV     DPTR,#zllInitiator_TaskID
   \   00007A   E0           MOVX    A,@DPTR
   \   00007B   F9           MOV     R1,A
   \   00007C   12....       LCALL   ??osal_start_timerEx?relay
   \   00007F   7404         MOV     A,#0x4
   \   000081   12....       LCALL   ?DEALLOC_XSTACK8
    412          
    413              if ( !zll_IsFactoryNew() )
   \   000084                ; Setup parameters for call to function zll_IsFactoryNew
   \   000084   12....       LCALL   ??zll_IsFactoryNew?relay
   \   000087   E9           MOV     A,R1
   \   000088   7039         JNZ     ??zllInitiator_StartDevDisc_1
    414              {
    415                // Turn off polling during touch-link procedure
    416                savedPollRate = zgPollRate;
   \   00008A   90....       MOV     DPTR,#zgPollRate
   \   00008D   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_74:
   \   000090   90....       MOV     DPTR,#savedPollRate
   \   000093   12....       LCALL   ??Subroutine39_0 & 0xFFFF
    417                savedQueuedPollRate = zgQueuedPollRate;
   \                     ??CrossCallReturnLabel_54:
   \   000096   90....       MOV     DPTR,#zgQueuedPollRate
   \   000099   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_75:
   \   00009C   90....       MOV     DPTR,#savedQueuedPollRate
   \   00009F   12....       LCALL   ??Subroutine39_0 & 0xFFFF
    418                savedResponsePollRate = zgResponsePollRate;
   \                     ??CrossCallReturnLabel_55:
   \   0000A2   90....       MOV     DPTR,#zgResponsePollRate
   \   0000A5   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_76:
   \   0000A8   90....       MOV     DPTR,#savedResponsePollRate
   \   0000AB   12....       LCALL   ??Subroutine39_0 & 0xFFFF
    419          
    420                NLME_SetPollRate( 0 );
   \                     ??CrossCallReturnLabel_56:
   \   0000AE                ; Setup parameters for call to function NLME_SetPollRate
   \   0000AE   7A00         MOV     R2,#0x0
   \   0000B0   7B00         MOV     R3,#0x0
   \   0000B2   12....       LCALL   ??NLME_SetPollRate?relay
    421                NLME_SetQueuedPollRate( 0 );
   \   0000B5                ; Setup parameters for call to function NLME_SetQueuedPollRate
   \   0000B5   7A00         MOV     R2,#0x0
   \   0000B7   7B00         MOV     R3,#0x0
   \   0000B9   12....       LCALL   ??NLME_SetQueuedPollRate?relay
    422                NLME_SetResponseRate( 0 );
   \   0000BC                ; Setup parameters for call to function NLME_SetResponseRate
   \   0000BC   7A00         MOV     R2,#0x0
   \   0000BE   7B00         MOV     R3,#0x0
   \   0000C0   12....       LCALL   ??NLME_SetResponseRate?relay
    423              }
    424          
    425              // Set NWK task to idle
    426              nwk_setStateIdle( TRUE );
   \                     ??zllInitiator_StartDevDisc_1:
   \   0000C3                ; Setup parameters for call to function nwk_setStateIdle
   \   0000C3   7901         MOV     R1,#0x1
   \   0000C5   12....       LCALL   ??nwk_setStateIdle?relay
    427          
    428              // Remember current rx state
    429              ZMacGetReq( ZMacRxOnIdle, &savedRxOnIdle );
   \   0000C8                ; Setup parameters for call to function ZMacGetReq
   \   0000C8   7A..         MOV     R2,#savedRxOnIdle & 0xff
   \   0000CA   7B..         MOV     R3,#(savedRxOnIdle >> 8) & 0xff
   \   0000CC   7952         MOV     R1,#0x52
   \   0000CE   12....       LCALL   ??ZMacGetReq?relay
    430          
    431              // MAC receiver should be on during touch-link procedure
    432              ZMacSetReq( ZMacRxOnIdle, &x );
   \   0000D1                ; Setup parameters for call to function ZMacSetReq
   \   0000D1   85..82       MOV     DPL,?XSP + 0
   \   0000D4   85..83       MOV     DPH,?XSP + 1
   \   0000D7   AA82         MOV     R2,DPL
   \   0000D9   AB83         MOV     R3,DPH
   \   0000DB   7952         MOV     R1,#0x52
   \   0000DD   12....       LCALL   ??ZMacSetReq?relay
    433          
    434              scanReqChannels = ZLL_SCAN_PRIMARY_CHANNELS;
   \   0000E0   90....       MOV     DPTR,#scanReqChannels
   \   0000E3   7401         MOV     A,#0x1
   \   0000E5   F0           MOVX    @DPTR,A
    435              numScanReqSent = 0;
   \   0000E6   90....       MOV     DPTR,#numScanReqSent
   \   0000E9   E4           CLR     A
   \   0000EA   F0           MOVX    @DPTR,A
    436          
    437              // Send out the first Scan Request
    438              initiatorSendScanReq( TRUE );
   \   0000EB                ; Setup parameters for call to function initiatorSendScanReq
   \   0000EB   7901         MOV     R1,#0x1
   \   0000ED   12....       LCALL   ??initiatorSendScanReq?relay
    439          
    440              return ( ZSuccess );
   \   0000F0   7900         MOV     R1,#0x0
   \   0000F2   8002         SJMP    ??zllInitiator_StartDevDisc_2
    441            }
    442          
    443            return ( ZFailure );
   \                     ??zllInitiator_StartDevDisc_0:
   \   0000F4   7901         MOV     R1,#0x1
   \                     ??zllInitiator_StartDevDisc_2:
   \   0000F6   7401         MOV     A,#0x1
   \   0000F8                REQUIRE ?Subroutine1
   \   0000F8                ; // Fall through to label ?Subroutine1
    444          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F08         MOV     R7,#0x8
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine39_0:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004   F0           MOVX    @DPTR,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine42_0:
   \   000000   12....       LCALL   ??Subroutine41_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_97:
   \   000003   22           RET
    445          
    446          /*********************************************************************
    447           * @fn      zllInitiator_AbortTL
    448           *
    449           * @brief   Abort Touch-link device discovery.
    450           *          Successful execution could be done before Network Start/Join
    451           *          commands are sent. Until then, since no device parameters
    452           *          such as network settings are altered, the Touch-Link is
    453           *          still reversible.
    454           *
    455           * @param   none
    456           *
    457           * @return  status
    458           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    459          ZStatus_t zllInitiator_AbortTL( void )
   \                     zllInitiator_AbortTL:
    460          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    461            if ( ( osal_stop_timerEx( zllInitiator_TaskID, ZLL_TL_SCAN_BASE_EVT ) == SUCCESS )
    462                 || ( osal_stop_timerEx( zllInitiator_TaskID, ZLL_CFG_TARGET_EVT ) == SUCCESS )
    463                 || ( osal_stop_timerEx( zllInitiator_TaskID, ZLL_W4_NWK_START_RSP_EVT ) == SUCCESS )
    464                 || ( osal_stop_timerEx( zllInitiator_TaskID, ZLL_W4_NWK_JOIN_RSP_EVT ) == SUCCESS ) )
   \   000005                ; Setup parameters for call to function osal_stop_timerEx
   \   000005   7A40         MOV     R2,#0x40
   \   000007   7B00         MOV     R3,#0x0
   \   000009   90....       MOV     DPTR,#zllInitiator_TaskID
   \   00000C   E0           MOVX    A,@DPTR
   \   00000D   F9           MOV     R1,A
   \   00000E   12....       LCALL   ??osal_stop_timerEx?relay
   \   000011   E9           MOV     A,R1
   \   000012   602D         JZ      ??zllInitiator_AbortTL_0
   \   000014                ; Setup parameters for call to function osal_stop_timerEx
   \   000014   7A80         MOV     R2,#-0x80
   \   000016   7B00         MOV     R3,#0x0
   \   000018   90....       MOV     DPTR,#zllInitiator_TaskID
   \   00001B   E0           MOVX    A,@DPTR
   \   00001C   F9           MOV     R1,A
   \   00001D   12....       LCALL   ??osal_stop_timerEx?relay
   \   000020   E9           MOV     A,R1
   \   000021   601E         JZ      ??zllInitiator_AbortTL_0
   \   000023                ; Setup parameters for call to function osal_stop_timerEx
   \   000023   7A00         MOV     R2,#0x0
   \   000025   7B01         MOV     R3,#0x1
   \   000027   90....       MOV     DPTR,#zllInitiator_TaskID
   \   00002A   E0           MOVX    A,@DPTR
   \   00002B   F9           MOV     R1,A
   \   00002C   12....       LCALL   ??osal_stop_timerEx?relay
   \   00002F   E9           MOV     A,R1
   \   000030   600F         JZ      ??zllInitiator_AbortTL_0
   \   000032                ; Setup parameters for call to function osal_stop_timerEx
   \   000032   7A00         MOV     R2,#0x0
   \   000034   7B02         MOV     R3,#0x2
   \   000036   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000039   E0           MOVX    A,@DPTR
   \   00003A   F9           MOV     R1,A
   \   00003B   12....       LCALL   ??osal_stop_timerEx?relay
   \   00003E   E9           MOV     A,R1
   \   00003F   7019         JNZ     ??zllInitiator_AbortTL_1
    465            {
    466              initiatorSetNwkToInitState();
   \                     ??zllInitiator_AbortTL_0:
   \   000041                ; Setup parameters for call to function initiatorSetNwkToInitState
   \   000041   12....       LCALL   ??initiatorSetNwkToInitState?relay
    467              zllTransID = 0;
   \   000044   90....       MOV     DPTR,#zllTransID
   \   000047   E4           CLR     A
   \   000048   F0           MOVX    @DPTR,A
   \   000049   A3           INC     DPTR
   \   00004A   F0           MOVX    @DPTR,A
   \   00004B   A3           INC     DPTR
   \   00004C   F0           MOVX    @DPTR,A
   \   00004D   A3           INC     DPTR
   \   00004E   F0           MOVX    @DPTR,A
    468              numScanReqSent = 0;
   \   00004F   90....       MOV     DPTR,#numScanReqSent
   \   000052   F0           MOVX    @DPTR,A
    469              initiatorClearSelectedTarget();
   \   000053                ; Setup parameters for call to function initiatorClearSelectedTarget
   \   000053   12....       LCALL   ??initiatorClearSelectedTarget?relay
    470          
    471              return ( ZSuccess );
   \   000056   7900         MOV     R1,#0x0
   \   000058   8002         SJMP    ??zllInitiator_AbortTL_2
    472            }
    473          
    474            return ( ZFailure );
   \                     ??zllInitiator_AbortTL_1:
   \   00005A   7901         MOV     R1,#0x1
   \                     ??zllInitiator_AbortTL_2:
   \   00005C   02....       LJMP    ?Subroutine2 & 0xFFFF
    475          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    476          
    477          /*********************************************************************
    478           * @fn      initiatorProcessStateChange
    479           *
    480           * @brief   Process ZDO device state change
    481           *
    482           * @param   state - The device's network state
    483           *
    484           * @return  none
    485           */
    486          static void initiatorProcessStateChange( devStates_t state )
    487          {
    488            if ( ( state == DEV_ROUTER ) || ( state == DEV_END_DEVICE ) )
    489            {
    490              // Save the latest NIB to update our parent's address
    491              zll_UpdateNV( ZLL_UPDATE_NV_NIB );
    492          
    493              if ( ZSTACK_ROUTER_BUILD )
    494              {
    495                ZDP_DeviceAnnce( NLME_GetShortAddr(), NLME_GetExtAddr(),
    496                                 ZDO_Config_Node_Descriptor.CapabilityFlags, 0 );
    497              }
    498          
    499              // We found our parent
    500              osal_stop_timerEx( zllInitiator_TaskID, ZLL_W4_REJOIN_EVT );
    501            }
    502            else if ( ( state == DEV_NWK_ORPHAN ) || ( state == DEV_NWK_DISC ) )
    503            {
    504              // Device has lost information about its parent; give it some time to rejoin
    505              if ( !osal_get_timeoutEx( zllInitiator_TaskID, ZLL_W4_REJOIN_EVT ) )
    506              {
    507                osal_start_timerEx( zllInitiator_TaskID, ZLL_W4_REJOIN_EVT,
    508                                    (NUM_DISC_ATTEMPTS + 1) * ZLL_INITIATOR_REJOIN_TIMEOUT );
    509              }
    510            }
    511          }
    512          
    513          /*********************************************************************
    514           * @fn          zllInitiator_Init
    515           *
    516           * @brief       Initialization function for the ZLL Initiator task.
    517           *
    518           * @param       task_id - ZLL Initiator task id
    519           *
    520           * @return      none
    521           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    522          void zllInitiator_Init( uint8 task_id )
   \                     zllInitiator_Init:
    523          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
    524            // Save our own Task ID
    525            zllInitiator_TaskID = task_id;
   \   000006   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000009   F0           MOVX    @DPTR,A
    526          
    527            zll_SetZllTaskId( zllInitiator_TaskID );
   \   00000A                ; Setup parameters for call to function zll_SetZllTaskId
   \   00000A   12....       LCALL   ??zll_SetZllTaskId?relay
    528          
    529          
    530            // Build a broadcast address for the Scan Request
    531            bcastAddr.addrMode = afAddrBroadcast;
   \   00000D   90....       MOV     DPTR,#bcastAddr + 8
   \   000010   740F         MOV     A,#0xf
   \   000012   F0           MOVX    @DPTR,A
    532            bcastAddr.addr.shortAddr = NWK_BROADCAST_SHORTADDR_DEVALL;
   \   000013   90....       MOV     DPTR,#bcastAddr
   \   000016   74FF         MOV     A,#-0x1
   \   000018   F0           MOVX    @DPTR,A
   \   000019   A3           INC     DPTR
   \   00001A   F0           MOVX    @DPTR,A
    533            bcastAddr.panId = 0xFFFF;
   \   00001B   90....       MOV     DPTR,#bcastAddr + 10
   \   00001E   F0           MOVX    @DPTR,A
   \   00001F   A3           INC     DPTR
   \   000020   F0           MOVX    @DPTR,A
    534            bcastAddr.endPoint = STUBAPS_INTER_PAN_EP;
   \   000021   90....       MOV     DPTR,#bcastAddr + 9
   \   000024   14           DEC     A
   \   000025   F0           MOVX    @DPTR,A
    535          
    536            // Initialize ZLL common variables
    537            zll_InitVariables( TRUE );
   \   000026                ; Setup parameters for call to function zll_InitVariables
   \   000026   7901         MOV     R1,#0x1
   \   000028   12....       LCALL   ??zll_InitVariables?relay
    538          
    539            savedPollRate = POLL_RATE;
   \   00002B   90....       MOV     DPTR,#savedPollRate
   \   00002E   74E8         MOV     A,#-0x18
   \   000030   F0           MOVX    @DPTR,A
   \   000031   A3           INC     DPTR
   \   000032   7403         MOV     A,#0x3
   \   000034   F0           MOVX    @DPTR,A
    540            savedQueuedPollRate = QUEUED_POLL_RATE;
   \   000035   90....       MOV     DPTR,#savedQueuedPollRate
   \   000038   7464         MOV     A,#0x64
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   E4           CLR     A
   \   00003D   F0           MOVX    @DPTR,A
    541            savedResponsePollRate = RESPONSE_POLL_RATE;
   \   00003E   90....       MOV     DPTR,#savedResponsePollRate
   \   000041   7464         MOV     A,#0x64
   \   000043   F0           MOVX    @DPTR,A
   \   000044   A3           INC     DPTR
   \   000045   E4           CLR     A
   \   000046   F0           MOVX    @DPTR,A
    542          
    543            numScanReqSent = 0;
   \   000047   90....       MOV     DPTR,#numScanReqSent
   \   00004A   F0           MOVX    @DPTR,A
    544            initiatorClearSelectedTarget();
   \   00004B                ; Setup parameters for call to function initiatorClearSelectedTarget
   \   00004B   12....       LCALL   ??initiatorClearSelectedTarget?relay
    545            scanReqChannels = ZLL_SCAN_PRIMARY_CHANNELS;
   \   00004E   90....       MOV     DPTR,#scanReqChannels
   \   000051   7401         MOV     A,#0x1
   \   000053   F0           MOVX    @DPTR,A
    546          
    547            initiatorSeqNum = 0;
   \   000054   90....       MOV     DPTR,#initiatorSeqNum
   \   000057   E4           CLR     A
   \   000058   F0           MOVX    @DPTR,A
    548          
    549            // Register to receive the unprocessed Foundation command/response messages
    550            zcl_registerForMsg( zllInitiator_TaskID );
   \   000059                ; Setup parameters for call to function zcl_registerForMsg
   \   000059   90....       MOV     DPTR,#zllInitiator_TaskID
   \   00005C   E0           MOVX    A,@DPTR
   \   00005D   F9           MOV     R1,A
   \   00005E   12....       LCALL   ??zcl_registerForMsg?relay
    551          
    552            // Register for ZLL Initiator callbacks (for Inter-PAN commands)
    553            zclLL_RegisterInterPANCmdCallbacks( &zllInitiator_CmdCBs );
   \   000061                ; Setup parameters for call to function zclLL_RegisterInterPANCmdCallbacks
   \   000061   7A..         MOV     R2,#zllInitiator_CmdCBs & 0xff
   \   000063   7B..         MOV     R3,#(zllInitiator_CmdCBs >> 8) & 0xff
   \   000065   12....       LCALL   ??zclLL_RegisterInterPANCmdCallbacks?relay
    554          
    555            // Register for Initiator to receive Leave Confirm
    556            ZDO_RegisterForZdoCB( ZDO_LEAVE_CNF_CBID, initiatorZdoLeaveCnfCB );
   \   000068                ; Setup parameters for call to function ZDO_RegisterForZdoCB
   \   000068   7A..         MOV     R2,#??initiatorZdoLeaveCnfCB?relay & 0xff
   \   00006A   7B..         MOV     R3,#(??initiatorZdoLeaveCnfCB?relay >> 8) & 0xff
   \   00006C   7905         MOV     R1,#0x5
   \   00006E   12....       LCALL   ??ZDO_RegisterForZdoCB?relay
    557          
    558          #if (ZSTACK_ROUTER_BUILD)
    559            // Register to process ZDO messages
    560            ZDO_RegisterForZDOMsg( zllInitiator_TaskID, Mgmt_Permit_Join_req );
   \   000071                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   000071   7A36         MOV     R2,#0x36
   \   000073   7B00         MOV     R3,#0x0
   \   000075   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000078   E0           MOVX    A,@DPTR
   \   000079   F9           MOV     R1,A
   \   00007A   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
    561            ZDO_RegisterForZDOMsg( zllInitiator_TaskID, Device_annce );
   \   00007D                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   00007D   7A13         MOV     R2,#0x13
   \   00007F   7B00         MOV     R3,#0x0
   \   000081   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000084   E0           MOVX    A,@DPTR
   \   000085   F9           MOV     R1,A
   \   000086   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
    562          #endif
    563          }
   \   000089   02....       LJMP    ?Subroutine2 & 0xFFFF
    564          
    565          /*********************************************************************
    566           * @fn      zllInitiator_RegisterApp
    567           *
    568           * @brief   Register an Application's EndPoint with the ZLL profile.
    569           *
    570           * @param   simpleDesc - application simple description
    571           * @param   pDeviceInfo - ZLL application device info
    572           *
    573           * @return  ZSuccess - Registered
    574           *          ZInvalidParameter - invalid or duplicate endpoint
    575           *          ZMemError - not enough memory to add
    576           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    577          ZStatus_t zllInitiator_RegisterApp( SimpleDescriptionFormat_t *simpleDesc, zclLLDeviceInfo_t *pDeviceInfo )
   \                     zllInitiator_RegisterApp:
    578          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    579            return zll_RegisterApp( simpleDesc, pDeviceInfo );
   \   000004                ; Setup parameters for call to function zll_RegisterApp
   \   000004   12....       LCALL   ??zll_RegisterApp?relay
   \   000007   80..         SJMP    ??Subroutine35_0
    580          }
    581          
    582          /*********************************************************************
    583           * @fn      zllInitiator_RegisterForMsg
    584           *
    585           * @brief   Register application task to receive unprocessed messages
    586           *          received by the initiator endpoint.
    587           *
    588           * @param   taskId - task Id of the Application where commands will be sent to
    589           *
    590           * @return  ZSuccess if task registration successful
    591           *********************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    592          ZStatus_t zllInitiator_RegisterForMsg( uint8 taskId )
   \                     zllInitiator_RegisterForMsg:
    593          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   \   000004   E9           MOV     A,R1
   \   000005   F8           MOV     R0,A
    594            if ( initiatorRegisteredMsgAppTaskID == TASK_NO_TASK )
   \   000006   90....       MOV     DPTR,#initiatorRegisteredMsgAppTaskID
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   F4           CPL     A
   \   00000B   7006         JNZ     ??zllInitiator_RegisterForMsg_0
    595            {
    596              initiatorRegisteredMsgAppTaskID = taskId;
   \   00000D   E8           MOV     A,R0
   \   00000E   F0           MOVX    @DPTR,A
    597              return ( ZSuccess );
   \   00000F   7900         MOV     R1,#0x0
   \   000011   8002         SJMP    ??zllInitiator_RegisterForMsg_1
    598            }
    599            return ( ZFailure );
   \                     ??zllInitiator_RegisterForMsg_0:
   \   000013   7901         MOV     R1,#0x1
   \                     ??zllInitiator_RegisterForMsg_1:
   \   000015   80..         SJMP    ??Subroutine35_0
    600          }
    601          
    602          /*********************************************************************
    603           * @fn          zllInitiator_event_loop
    604           *
    605           * @brief       Event Loop Processor for ZLL Initiator.
    606           *
    607           * @param       task_id - task id
    608           * @param       events - event bitmap
    609           *
    610           * @return      unprocessed events
    611           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    612          uint16 zllInitiator_event_loop( uint8 task_id, uint16 events )
   \                     zllInitiator_event_loop:
    613          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 14
   \   000005   74F2         MOV     A,#-0xe
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    614            if ( events & SYS_EVENT_MSG )
   \   00000E   5480         ANL     A,#0x80
   \   000010   7003         JNZ     $+5
   \   000012   02....       LJMP    ??zllInitiator_event_loop_0 & 0xFFFF
    615            {
    616              osal_event_hdr_t *pMsg;
    617              ZStatus_t stat = ZFailure;
    618          
    619              if ( (pMsg = (osal_event_hdr_t *)osal_msg_receive( task_id )) != NULL )
   \   000015                ; Setup parameters for call to function osal_msg_receive
   \   000015   12....       LCALL   ??osal_msg_receive?relay
   \   000018   8A..         MOV     ?V0 + 0,R2
   \   00001A   8B..         MOV     ?V0 + 1,R3
   \   00001C   EA           MOV     A,R2
   \   00001D   45..         ORL     A,?V0 + 1
   \   00001F   7003         JNZ     $+5
   \   000021   02....       LJMP    ??zllInitiator_event_loop_1 & 0xFFFF
    620              {
    621                switch ( pMsg->event )
   \   000024   8A82         MOV     DPL,R2
   \   000026   8B83         MOV     DPH,R3
   \   000028   E0           MOVX    A,@DPTR
   \   000029   24DD         ADD     A,#-0x23
   \   00002B   6011         JZ      ??zllInitiator_event_loop_2
   \   00002D   2452         ADD     A,#0x52
   \   00002F   7003         JNZ     $+5
   \   000031   02....       LJMP    ??zllInitiator_event_loop_3 & 0xFFFF
   \   000034   24FE         ADD     A,#-0x2
   \   000036   7003         JNZ     $+5
   \   000038   02....       LJMP    ??zllInitiator_event_loop_4 & 0xFFFF
   \   00003B   02....       LJMP    ??zllInitiator_event_loop_5 & 0xFFFF
    622                {
    623          #if defined (MT_APP_FUNC)
    624                  case MT_SYS_APP_MSG:
    625                    // Message received from MT
    626                    stat = initiatorProcessRpcMsg( ((mtSysAppMsg_t *)pMsg)->endpoint,
    627                                                   ((mtSysAppMsg_t *)pMsg)->appDataLen,
    628                                                   ((mtSysAppMsg_t *)pMsg)->appData );
   \                     ??zllInitiator_event_loop_2:
   \   00003E   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_87:
   \   000041   8A82         MOV     DPL,R2
   \   000043   8B83         MOV     DPH,R3
   \   000045   A3           INC     DPTR
   \   000046   A3           INC     DPTR
   \   000047   A3           INC     DPTR
   \   000048   E0           MOVX    A,@DPTR
   \   000049   F5..         MOV     ?V0 + 2,A
   \   00004B   8882         MOV     DPL,R0
   \   00004D   8983         MOV     DPH,R1
   \   00004F   A3           INC     DPTR
   \   000050   A3           INC     DPTR
   \   000051   A3           INC     DPTR
   \   000052   E0           MOVX    A,@DPTR
   \   000053   FC           MOV     R4,A
   \   000054   8882         MOV     DPL,R0
   \   000056   8983         MOV     DPH,R1
   \   000058   A3           INC     DPTR
   \   000059   A3           INC     DPTR
   \   00005A   A3           INC     DPTR
   \   00005B   A3           INC     DPTR
   \   00005C   E0           MOVX    A,@DPTR
   \   00005D   FB           MOV     R3,A
   \   00005E   EC           MOV     A,R4
   \   00005F   FA           MOV     R2,A
   \   000060   74FF         MOV     A,#-0x1
   \   000062   6A           XRL     A,R2
   \   000063   7003         JNZ     ??zllInitiator_event_loop_6
   \   000065   74FF         MOV     A,#-0x1
   \   000067   6B           XRL     A,R3
   \                     ??zllInitiator_event_loop_6:
   \   000068   6003         JZ      $+5
   \   00006A   02....       LJMP    ??zllInitiator_event_loop_5 & 0xFFFF
   \   00006D   8882         MOV     DPL,R0
   \   00006F   8983         MOV     DPH,R1
   \   000071   A3           INC     DPTR
   \   000072   A3           INC     DPTR
   \   000073   A3           INC     DPTR
   \   000074   A3           INC     DPTR
   \   000075   A3           INC     DPTR
   \   000076   A3           INC     DPTR
   \   000077   A3           INC     DPTR
   \   000078   A3           INC     DPTR
   \   000079   A3           INC     DPTR
   \   00007A   E0           MOVX    A,@DPTR
   \   00007B   14           DEC     A
   \   00007C   606F         JZ      ??zllInitiator_event_loop_7
   \   00007E   14           DEC     A
   \   00007F   6066         JZ      ??zllInitiator_event_loop_8
   \   000081   14           DEC     A
   \   000082   6042         JZ      ??zllInitiator_event_loop_9
   \   000084   14           DEC     A
   \   000085   6039         JZ      ??zllInitiator_event_loop_10
   \   000087   14           DEC     A
   \   000088   600F         JZ      ??zllInitiator_event_loop_11
   \   00008A   14           DEC     A
   \   00008B   602D         JZ      ??zllInitiator_event_loop_12
   \   00008D   14           DEC     A
   \   00008E   6003         JZ      $+5
   \   000090   02....       LJMP    ??zllInitiator_event_loop_13 & 0xFFFF
   \   000093                ; Setup parameters for call to function zllInitiator_BridgeStartNetwork
   \   000093   12....       LCALL   ??zllInitiator_BridgeStartNetwork?relay
   \   000096   02....       LJMP    ??zllInitiator_event_loop_13 & 0xFFFF
   \                     ??zllInitiator_event_loop_11:
   \   000099   E5..         MOV     A,?V0 + 2
   \   00009B   C3           CLR     C
   \   00009C   9409         SUBB    A,#0x9
   \   00009E   4012         JC      ??zllInitiator_event_loop_14
   \   0000A0   8882         MOV     DPL,R0
   \   0000A2   8983         MOV     DPH,R1
   \   0000A4   A3           INC     DPTR
   \   0000A5   A3           INC     DPTR
   \   0000A6   A3           INC     DPTR
   \   0000A7   A3           INC     DPTR
   \   0000A8   A3           INC     DPTR
   \   0000A9   A3           INC     DPTR
   \   0000AA   A3           INC     DPTR
   \   0000AB   A3           INC     DPTR
   \   0000AC   A3           INC     DPTR
   \   0000AD   A3           INC     DPTR
   \   0000AE   E0           MOVX    A,@DPTR
   \   0000AF   F9           MOV     R1,A
   \   0000B0   8002         SJMP    ??zllInitiator_event_loop_15
   \                     ??zllInitiator_event_loop_14:
   \   0000B2   7900         MOV     R1,#0x0
   \                     ??zllInitiator_event_loop_15:
   \   0000B4                ; Setup parameters for call to function zll_PermitJoin
   \   0000B4   12....       LCALL   ??zll_PermitJoin?relay
   \   0000B7   02....       LJMP    ??zllInitiator_event_loop_13 & 0xFFFF
   \                     ??zllInitiator_event_loop_12:
   \   0000BA                ; Setup parameters for call to function zllInitiator_ResetToFNSelectedTarget
   \   0000BA   12....       LCALL   ??zllInitiator_ResetToFNSelectedTarget?relay
   \   0000BD   02....       LJMP    ??zllInitiator_event_loop_13 & 0xFFFF
   \                     ??zllInitiator_event_loop_10:
   \   0000C0                ; Setup parameters for call to function zllInitiator_ClassicalCommissioningStart
   \   0000C0   12....       LCALL   ??zllInitiator_ClassicalCommissioningStart?rela
   \   0000C3   02....       LJMP    ??zllInitiator_event_loop_13 & 0xFFFF
   \                     ??zllInitiator_event_loop_9:
   \   0000C6   E5..         MOV     A,?V0 + 2
   \   0000C8   C3           CLR     C
   \   0000C9   9409         SUBB    A,#0x9
   \   0000CB   4012         JC      ??zllInitiator_event_loop_16
   \   0000CD   8882         MOV     DPL,R0
   \   0000CF   8983         MOV     DPH,R1
   \   0000D1   A3           INC     DPTR
   \   0000D2   A3           INC     DPTR
   \   0000D3   A3           INC     DPTR
   \   0000D4   A3           INC     DPTR
   \   0000D5   A3           INC     DPTR
   \   0000D6   A3           INC     DPTR
   \   0000D7   A3           INC     DPTR
   \   0000D8   A3           INC     DPTR
   \   0000D9   A3           INC     DPTR
   \   0000DA   A3           INC     DPTR
   \   0000DB   E0           MOVX    A,@DPTR
   \   0000DC   F9           MOV     R1,A
   \   0000DD   8002         SJMP    ??zllInitiator_event_loop_17
   \                     ??zllInitiator_event_loop_16:
   \   0000DF   7900         MOV     R1,#0x0
   \                     ??zllInitiator_event_loop_17:
   \   0000E1                ; Setup parameters for call to function zllInitiator_ChannelChange
   \   0000E1   12....       LCALL   ??zllInitiator_ChannelChange?relay
   \   0000E4   02....       LJMP    ??zllInitiator_event_loop_13 & 0xFFFF
   \                     ??zllInitiator_event_loop_8:
   \   0000E7                ; Setup parameters for call to function zllInitiator_ResetToFactoryNew
   \   0000E7   12....       LCALL   ??zllInitiator_ResetToFactoryNew?relay
   \   0000EA   02....       LJMP    ??zllInitiator_event_loop_13 & 0xFFFF
   \                     ??zllInitiator_event_loop_7:
   \   0000ED                ; Setup parameters for call to function zllInitiator_StartDevDisc
   \   0000ED   12....       LCALL   ??zllInitiator_StartDevDisc?relay
   \   0000F0   807B         SJMP    ??zllInitiator_event_loop_13
    629                    break;
    630          #endif
    631          #if (ZSTACK_ROUTER_BUILD)
    632                  case ZDO_CB_MSG:
    633                    // ZDO sends the message that we registered for
    634                    zll_RouterProcessZDOMsg( (zdoIncomingMsg_t *)pMsg );
   \                     ??zllInitiator_event_loop_4:
   \   0000F2                ; Setup parameters for call to function zll_RouterProcessZDOMsg
   \   0000F2   12....       LCALL   ??zll_RouterProcessZDOMsg?relay
   \   0000F5   8076         SJMP    ??zllInitiator_event_loop_13
    635                    stat = ZSuccess;
    636                    break;
    637          #endif
    638                  case ZDO_STATE_CHANGE:
    639                    initiatorProcessStateChange( (devStates_t)pMsg->status );
   \                     ??zllInitiator_event_loop_3:
   \   0000F7   A3           INC     DPTR
   \   0000F8   E0           MOVX    A,@DPTR
   \   0000F9   F8           MOV     R0,A
   \   0000FA   7407         MOV     A,#0x7
   \   0000FC   68           XRL     A,R0
   \   0000FD   603A         JZ      ??zllInitiator_event_loop_18
   \   0000FF   7406         MOV     A,#0x6
   \   000101   68           XRL     A,R0
   \   000102   6035         JZ      ??zllInitiator_event_loop_18
   \   000104   740A         MOV     A,#0xa
   \   000106   68           XRL     A,R0
   \   000107   6005         JZ      ??zllInitiator_event_loop_19
   \   000109   7402         MOV     A,#0x2
   \   00010B   68           XRL     A,R0
   \   00010C   705F         JNZ     ??zllInitiator_event_loop_13
   \                     ??zllInitiator_event_loop_19:
   \   00010E                ; Setup parameters for call to function osal_get_timeoutEx
   \   00010E   7A00         MOV     R2,#0x0
   \   000110   7B08         MOV     R3,#0x8
   \   000112   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000115   E0           MOVX    A,@DPTR
   \   000116   F9           MOV     R1,A
   \   000117   12....       LCALL   ??osal_get_timeoutEx?relay
   \   00011A   EA           MOV     A,R2
   \   00011B   4B           ORL     A,R3
   \   00011C   4C           ORL     A,R4
   \   00011D   4D           ORL     A,R5
   \   00011E   704D         JNZ     ??zllInitiator_event_loop_13
   \   000120                ; Setup parameters for call to function osal_start_timerEx
   \   000120   90....       MOV     DPTR,#__Constant_1d4c
   \   000123   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000126   7A00         MOV     R2,#0x0
   \   000128   7B08         MOV     R3,#0x8
   \   00012A   90....       MOV     DPTR,#zllInitiator_TaskID
   \   00012D   E0           MOVX    A,@DPTR
   \   00012E   F9           MOV     R1,A
   \   00012F   12....       LCALL   ??osal_start_timerEx?relay
   \   000132   7404         MOV     A,#0x4
   \   000134   12....       LCALL   ?DEALLOC_XSTACK8
   \   000137   8034         SJMP    ??zllInitiator_event_loop_13
   \                     ??zllInitiator_event_loop_18:
   \   000139                ; Setup parameters for call to function zll_UpdateNV
   \   000139   7901         MOV     R1,#0x1
   \   00013B   12....       LCALL   ??zll_UpdateNV?relay
   \   00013E                ; Setup parameters for call to function NLME_GetExtAddr
   \   00013E   12....       LCALL   ??NLME_GetExtAddr?relay
   \   000141   8A..         MOV     ?V0 + 2,R2
   \   000143   8B..         MOV     ?V0 + 3,R3
   \   000145                ; Setup parameters for call to function NLME_GetShortAddr
   \   000145   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000148                ; Setup parameters for call to function ZDP_DeviceAnnce
   \   000148   75..00       MOV     ?V0 + 5,#0x0
   \   00014B   78..         MOV     R0,#?V0 + 5
   \   00014D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000150   90....       MOV     DPTR,#ZDO_Config_Node_Descriptor + 2
   \   000153   E0           MOVX    A,@DPTR
   \   000154   F9           MOV     R1,A
   \   000155   AC..         MOV     R4,?V0 + 2
   \   000157   AD..         MOV     R5,?V0 + 3
   \   000159   12....       LCALL   ??ZDP_DeviceAnnce?relay
   \   00015C   7401         MOV     A,#0x1
   \   00015E   12....       LCALL   ?DEALLOC_XSTACK8
   \   000161                ; Setup parameters for call to function osal_stop_timerEx
   \   000161   7A00         MOV     R2,#0x0
   \   000163   7B08         MOV     R3,#0x8
   \   000165   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000168   E0           MOVX    A,@DPTR
   \   000169   F9           MOV     R1,A
   \   00016A   12....       LCALL   ??osal_stop_timerEx?relay
    640                    stat = ZSuccess;
    641                    break;
    642          
    643                  default:
    644                    break;
    645                }
    646          
    647                if ( stat == ZSuccess )
    648                {
    649                  // Release the OSAL message
    650                  VOID osal_msg_deallocate( (uint8 *)pMsg );
   \                     ??zllInitiator_event_loop_13:
   \   00016D                ; Setup parameters for call to function osal_msg_deallocate
   \   00016D   AA..         MOV     R2,?V0 + 0
   \   00016F   AB..         MOV     R3,?V0 + 1
   \   000171   12....       LCALL   ??osal_msg_deallocate?relay
   \   000174   800C         SJMP    ??zllInitiator_event_loop_1
    651                }
    652                else
    653                {
    654                  // forward to the application
    655                  osal_msg_send( initiatorRegisteredMsgAppTaskID, (uint8 *)pMsg );
   \                     ??zllInitiator_event_loop_5:
   \   000176                ; Setup parameters for call to function osal_msg_send
   \   000176   AA..         MOV     R2,?V0 + 0
   \   000178   AB..         MOV     R3,?V0 + 1
   \   00017A   90....       MOV     DPTR,#initiatorRegisteredMsgAppTaskID
   \   00017D   E0           MOVX    A,@DPTR
   \   00017E   F9           MOV     R1,A
   \   00017F   12....       LCALL   ??osal_msg_send?relay
    656                }
    657              }
    658          
    659              // return unprocessed events
    660              return ( events ^ SYS_EVENT_MSG );
   \                     ??zllInitiator_event_loop_1:
   \   000182   EE           MOV     A,R6
   \   000183   FA           MOV     R2,A
   \   000184   EF           MOV     A,R7
   \   000185   6480         XRL     A,#0x80
   \   000187   02....       LJMP    ??zllInitiator_event_loop_20 & 0xFFFF
    661            }
    662          
    663            if ( events & ZLL_TL_SCAN_BASE_EVT )
   \                     ??zllInitiator_event_loop_0:
   \   00018A   EE           MOV     A,R6
   \   00018B   5440         ANL     A,#0x40
   \   00018D   7003         JNZ     $+5
   \   00018F   02....       LJMP    ??zllInitiator_event_loop_21 & 0xFFFF
    664            {
    665              if ( ( ( scanReqChannels == ZLL_SCAN_PRIMARY_CHANNELS ) && ( numScanReqSent < ZLL_INITIATOR_NUM_SCAN_REQ_PRIMARY  ) ) ||
    666                   ( ( scanReqChannels == ZLL_SCAN_SECONDARY_CHANNELS ) && ( numScanReqSent < ZLL_INITIATOR_NUM_SCAN_REQ_EXTENDED ) ) )
   \   000192   90....       MOV     DPTR,#scanReqChannels
   \   000195   E0           MOVX    A,@DPTR
   \   000196   6401         XRL     A,#0x1
   \   000198   701F         JNZ     ??zllInitiator_event_loop_22
   \   00019A   90....       MOV     DPTR,#numScanReqSent
   \   00019D   E0           MOVX    A,@DPTR
   \   00019E   C3           CLR     C
   \   00019F   9408         SUBB    A,#0x8
   \   0001A1   4024         JC      ??zllInitiator_event_loop_23
   \   0001A3                ; Setup parameters for call to function zll_IsFactoryNew
   \   0001A3   12....       LCALL   ??zll_IsFactoryNew?relay
   \   0001A6   E9           MOV     A,R1
   \   0001A7   7008         JNZ     ??zllInitiator_event_loop_24
   \   0001A9   90....       MOV     DPTR,#zllJoinedHANetwork
   \   0001AC   E0           MOVX    A,@DPTR
   \   0001AD   6401         XRL     A,#0x1
   \   0001AF   701D         JNZ     ??zllInitiator_event_loop_25
    667              {
    668                // Send another Scan Request on the next channel
    669                initiatorSendScanReq( FALSE );
    670              }
    671              else // Channels scan is complete
    672              {
    673                if ( ( scanReqChannels == ZLL_SCAN_PRIMARY_CHANNELS )
    674                    && ( zll_IsFactoryNew() || ( zllJoinedHANetwork == TRUE ) ) )
    675                {
    676                  // Extended scan is required, lets scan secondary channels
    677                  scanReqChannels = ZLL_SCAN_SECONDARY_CHANNELS;
   \                     ??zllInitiator_event_loop_24:
   \   0001B1   90....       MOV     DPTR,#scanReqChannels
   \   0001B4   7402         MOV     A,#0x2
   \   0001B6   F0           MOVX    @DPTR,A
    678          
    679                  // Send another Scan Request on the next channel
    680                  initiatorSendScanReq( FALSE );
   \   0001B7                ; Setup parameters for call to function initiatorSendScanReq
   \   0001B7   800E         SJMP    ??zllInitiator_event_loop_23
    681                }
   \                     ??zllInitiator_event_loop_22:
   \   0001B9   E0           MOVX    A,@DPTR
   \   0001BA   6402         XRL     A,#0x2
   \   0001BC   7010         JNZ     ??zllInitiator_event_loop_25
   \   0001BE   90....       MOV     DPTR,#numScanReqSent
   \   0001C1   E0           MOVX    A,@DPTR
   \   0001C2   C3           CLR     C
   \   0001C3   9414         SUBB    A,#0x14
   \   0001C5   5007         JNC     ??zllInitiator_event_loop_25
   \                     ??zllInitiator_event_loop_23:
   \   0001C7                ; Setup parameters for call to function initiatorSendScanReq
   \   0001C7   7900         MOV     R1,#0x0
   \   0001C9   12....       LCALL   ??initiatorSendScanReq?relay
   \   0001CC   807D         SJMP    ??zllInitiator_event_loop_26
    682                // See if we've received any Scan Responses back
    683                else if ( ( selectedTarget.lastRssi != ZLL_TL_WORST_RSSI )
    684                         && ( selectedTarget.scanRsp.deviceInfo.endpoint != DEV_INFO_INVALID_EP ) )
   \                     ??zllInitiator_event_loop_25:
   \   0001CE   90....       MOV     DPTR,#selectedTarget + 53
   \   0001D1   E0           MOVX    A,@DPTR
   \   0001D2   64D8         XRL     A,#0xd8
   \   0001D4   6069         JZ      ??zllInitiator_event_loop_27
   \   0001D6   90....       MOV     DPTR,#selectedTarget + 31
   \   0001D9   E0           MOVX    A,@DPTR
   \   0001DA   64FE         XRL     A,#0xfe
   \   0001DC   6061         JZ      ??zllInitiator_event_loop_27
    685                {
    686                  // Make sure the responder is not a factory new remote if this controller is
    687                  if ( !zll_IsFactoryNew() || ( selectedTarget.scanRsp.zllLinkInitiator == FALSE ) )
   \   0001DE                ; Setup parameters for call to function zll_IsFactoryNew
   \   0001DE   12....       LCALL   ??zll_IsFactoryNew?relay
   \   0001E1   E9           MOV     A,R1
   \   0001E2   6008         JZ      ??zllInitiator_event_loop_28
   \   0001E4   90....       MOV     DPTR,#selectedTarget + 7
   \   0001E7   E0           MOVX    A,@DPTR
   \   0001E8   5410         ANL     A,#0x10
   \   0001EA   705F         JNZ     ??zllInitiator_event_loop_26
    688                  {
    689                    zclLLIdentifyReq_t req;
    690          
    691                    // Tune to the channel that the Scan Response was heard on
    692                    zll_SetChannel( selectedTarget.rxChannel );
   \                     ??zllInitiator_event_loop_28:
   \   0001EC                ; Setup parameters for call to function zll_SetChannel
   \   0001EC   90....       MOV     DPTR,#selectedTarget + 52
   \   0001EF   E0           MOVX    A,@DPTR
   \   0001F0   F9           MOV     R1,A
   \   0001F1   12....       LCALL   ??zll_SetChannel?relay
    693          
    694                    req.transID = selectedTarget.scanRsp.transID;
   \   0001F4   90....       MOV     DPTR,#selectedTarget
   \   0001F7   12....       LCALL   ?XLOAD_R2345
   \   0001FA   7408         MOV     A,#0x8
   \   0001FC   12....       LCALL   ?XSTACK_DISP0_8
   \   0001FF   12....       LCALL   ?XSTORE_R2345
    695                    req.IdDuration = 0xffff;
   \   000202   740C         MOV     A,#0xc
   \   000204   12....       LCALL   ?XSTACK_DISP0_8
   \   000207   74FF         MOV     A,#-0x1
   \   000209   12....       LCALL   ?Subroutine7 & 0xFFFF
    696          
    697                    // Send an Identify Request first
    698                    zclLL_Send_IndentifyReq( ZLL_INTERNAL_ENDPOINT, &(selectedTarget.srcAddr), &req, initiatorSeqNum++ );
   \                     ??CrossCallReturnLabel_45:
   \   00020C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00020F   7409         MOV     A,#0x9
   \   000211   12....       LCALL   ?XSTACK_DISP0_8
   \   000214   AC82         MOV     R4,DPL
   \   000216   AD83         MOV     R5,DPH
   \   000218   7A..         MOV     R2,#(selectedTarget + 38) & 0xff
   \   00021A   7B..         MOV     R3,#((selectedTarget + 38) >> 8) & 0xff
   \   00021C   790D         MOV     R1,#0xd
   \   00021E   12....       LCALL   ??zclLL_Send_IndentifyReq?relay
   \   000221   7401         MOV     A,#0x1
   \   000223   12....       LCALL   ?DEALLOC_XSTACK8
    699          
    700                    // Notify our task to configure the target (if needed)
    701                    osal_start_timerEx( zllInitiator_TaskID, ZLL_CFG_TARGET_EVT, ZLL_INITIATOR_IDENTIFY_INTERVAL );
   \   000226                ; Setup parameters for call to function osal_start_timerEx
   \   000226   90....       MOV     DPTR,#__Constant_1f4
   \   000229   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00022C   7A80         MOV     R2,#-0x80
   \   00022E   7B00         MOV     R3,#0x0
   \   000230   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000233   E0           MOVX    A,@DPTR
   \   000234   F9           MOV     R1,A
   \   000235   12....       LCALL   ??osal_start_timerEx?relay
   \   000238   7404         MOV     A,#0x4
   \   00023A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00023D   800C         SJMP    ??zllInitiator_event_loop_26
    702                  }
    703                  // else wait for touch-link commands from the other initiator
    704                }
    705                else
    706                {
    707                  // We did not manage to select any target
    708                  // Let's just go back to our initial configuration
    709                  osal_set_event( zllInitiator_TaskID, ZLL_DISABLE_RX_EVT );
   \                     ??zllInitiator_event_loop_27:
   \   00023F                ; Setup parameters for call to function osal_set_event
   \   00023F   7A00         MOV     R2,#0x0
   \   000241   7B04         MOV     R3,#0x4
   \   000243   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000246   E0           MOVX    A,@DPTR
   \   000247   F9           MOV     R1,A
   \   000248   12....       LCALL   ??osal_set_event?relay
    710                }
    711              }
    712          
    713              // return unprocessed events
    714              return ( events ^ ZLL_TL_SCAN_BASE_EVT );
   \                     ??zllInitiator_event_loop_26:
   \   00024B   EE           MOV     A,R6
   \   00024C   6440         XRL     A,#0x40
   \   00024E   02....       LJMP    ??zllInitiator_event_loop_29 & 0xFFFF
    715            }
    716          
    717            if ( events & ZLL_CFG_TARGET_EVT )
   \                     ??zllInitiator_event_loop_21:
   \   000251   EE           MOV     A,R6
   \   000252   5480         ANL     A,#0x80
   \   000254   7003         JNZ     $+5
   \   000256   02....       LJMP    ??zllInitiator_event_loop_30 & 0xFFFF
    718            {
    719              ZStatus_t status = ZFailure;
    720          
    721              zclLLIdentifyReq_t req;
    722          
    723              req.transID = selectedTarget.scanRsp.transID;
   \   000259   90....       MOV     DPTR,#selectedTarget
   \   00025C   12....       LCALL   ?XLOAD_R2345
   \   00025F   7408         MOV     A,#0x8
   \   000261   12....       LCALL   ?XSTACK_DISP0_8
   \   000264   12....       LCALL   ?XSTORE_R2345
    724              req.IdDuration = 0x0;
   \   000267   740C         MOV     A,#0xc
   \   000269   12....       LCALL   ?XSTACK_DISP0_8
   \   00026C   E4           CLR     A
   \   00026D   12....       LCALL   ?Subroutine7 & 0xFFFF
    725          
    726              // Send an Identify stop Request
    727              zclLL_Send_IndentifyReq( ZLL_INTERNAL_ENDPOINT, &(selectedTarget.srcAddr), &req, initiatorSeqNum++ );
   \                     ??CrossCallReturnLabel_46:
   \   000270   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000273   7409         MOV     A,#0x9
   \   000275   12....       LCALL   ?XSTACK_DISP0_8
   \   000278   AC82         MOV     R4,DPL
   \   00027A   AD83         MOV     R5,DPH
   \   00027C   7A..         MOV     R2,#(selectedTarget + 38) & 0xff
   \   00027E   7B..         MOV     R3,#((selectedTarget + 38) >> 8) & 0xff
   \   000280   790D         MOV     R1,#0xd
   \   000282   12....       LCALL   ??zclLL_Send_IndentifyReq?relay
   \   000285   7401         MOV     A,#0x1
   \   000287   12....       LCALL   ?DEALLOC_XSTACK8
    728          
    729              // Configure the target
    730              if ( zll_IsFactoryNew() )
   \   00028A                ; Setup parameters for call to function zll_IsFactoryNew
   \   00028A   12....       LCALL   ??zll_IsFactoryNew?relay
   \   00028D   E9           MOV     A,R1
   \   00028E   6029         JZ      ??zllInitiator_event_loop_31
    731              {
    732                // verify address ranges split possible if required
    733                if ( !selectedTarget.scanRsp.zllAddressAssignment
    734                    || zll_IsValidSplitFreeRanges( selectedTarget.scanRsp.totalGrpIDs ) )
   \   000290   90....       MOV     DPTR,#selectedTarget + 7
   \   000293   E0           MOVX    A,@DPTR
   \   000294   5402         ANL     A,#0x2
   \   000296   600B         JZ      ??zllInitiator_event_loop_32
   \   000298                ; Setup parameters for call to function zll_IsValidSplitFreeRanges
   \   000298   90....       MOV     DPTR,#selectedTarget + 30
   \   00029B   E0           MOVX    A,@DPTR
   \   00029C   F9           MOV     R1,A
   \   00029D   12....       LCALL   ??zll_IsValidSplitFreeRanges?relay
   \   0002A0   E9           MOV     A,R1
   \   0002A1   6010         JZ      ??zllInitiator_event_loop_33
    735                {
    736                  // Must be the first light; ask the light to start the network
    737                  status = initiatorSendNwkStartReq( &(selectedTarget.scanRsp) );
   \                     ??zllInitiator_event_loop_32:
   \   0002A3                ; Setup parameters for call to function initiatorSendNwkStartReq
   \   0002A3   7A..         MOV     R2,#selectedTarget & 0xff
   \   0002A5   7B..         MOV     R3,#(selectedTarget >> 8) & 0xff
   \   0002A7   12....       LCALL   ??initiatorSendNwkStartReq?relay
   \                     ??zllInitiator_event_loop_34:
   \   0002AA   E9           MOV     A,R1
    738                }
    739              }
    740              else if ( !zllJoinedHANetwork || ( _NIB.nwkPanId == selectedTarget.scanRsp.PANID) )
    741              {
    742                // Tune to the channel that the Scan Response was heard on
    743                zll_SetChannel( selectedTarget.rxChannel );
    744          
    745                // See if the target is part of our network
    746                if ( !ZLL_SAME_NWK( selectedTarget.scanRsp.PANID, selectedTarget.scanRsp.extendedPANID ) )
    747                {
    748                  // verify address ranges split possible if required
    749                  if ( !selectedTarget.scanRsp.zllAddressAssignment
    750                      || zll_IsValidSplitFreeRanges( selectedTarget.scanRsp.totalGrpIDs ) )
    751                  {
    752                    // Ask the target to join our network
    753                    status = initiatorSendNwkJoinReq( &(selectedTarget.scanRsp) );
    754                  }
    755                }
    756                else if ( _NIB.nwkUpdateId != selectedTarget.scanRsp.nwkUpdateId )
    757                {
    758                  uint8 updateId = zll_NewNwkUpdateId( _NIB.nwkUpdateId, selectedTarget.scanRsp.nwkUpdateId );
    759          
    760                  // Target is already part of our network
    761                  if ( updateId != _NIB.nwkUpdateId )
    762                  {
    763                    // Update our network update id and logical channel
    764                    zll_ProcessNwkUpdate( updateId, selectedTarget.scanRsp.logicalChannel );
    765          
    766                    // Rejoin this network
    767                    _NIB.nwkState = NWK_REJOINING;
    768                    initiatorReJoinNwk( MODE_REJOIN );
    769          
    770                    // We're done here
    771                    status = ZSuccess;
    772                  }
    773                  else
    774                  {
    775                    // Inform the target to update its network update id and logical channel
    776                    initiatorSendNwkUpdateReq( &(selectedTarget.scanRsp) ); // there's no corresponding response!
    777          
    778                    // Notify the application about this device
    779                    osal_set_event( zllInitiator_TaskID, ZLL_NOTIFY_APP_EVT );
    780                  }
    781                }
    782                //we are touchlinking to a light in our network, just send application the device info
    783                else if ( selectedTarget.scanRsp.zllLinkInitiator == FALSE )
    784                {
    785                  epInfoRec_t rec;
    786                  rec.nwkAddr = selectedTarget.scanRsp.nwkAddr;
    787                  rec.endpoint = selectedTarget.scanRsp.deviceInfo.endpoint;
    788                  rec.profileID = selectedTarget.scanRsp.deviceInfo.profileID;
    789                  rec.deviceID = selectedTarget.scanRsp.deviceInfo.deviceID;
    790                  rec.version = selectedTarget.scanRsp.deviceInfo.version;
    791                  // Notify the application
    792                  if ( pfnNotifyAppCB )
    793                  {
    794                    (*pfnNotifyAppCB)( &rec );
    795                  }
    796          #if defined ( MT_APP_FUNC )
    797                  MT_ZllNotifyTL( &rec );
    798          #endif
    799                }
    800              }
    801          
    802              if ( status == ZSuccess )
   \   0002AB   7006         JNZ     ??zllInitiator_event_loop_33
    803              {
    804                // Wait for a response (if any), which will over write this
    805                rxRsp.nwkStartRsp.status = ZLL_NETWORK_START_RSP_STATUS_FAILURE;
   \                     ??zllInitiator_event_loop_35:
   \   0002AD   90....       MOV     DPTR,#rxRsp + 4
   \   0002B0   7401         MOV     A,#0x1
   \   0002B2   F0           MOVX    @DPTR,A
    806              }
    807          
    808              // return unprocessed events
    809              return ( events ^ ZLL_CFG_TARGET_EVT );
   \                     ??zllInitiator_event_loop_33:
   \   0002B3   EE           MOV     A,R6
   \   0002B4   6480         XRL     A,#0x80
   \   0002B6   02....       LJMP    ??zllInitiator_event_loop_29 & 0xFFFF
   \                     ??zllInitiator_event_loop_31:
   \   0002B9   90....       MOV     DPTR,#zllJoinedHANetwork
   \   0002BC   E0           MOVX    A,@DPTR
   \   0002BD   600A         JZ      ??zllInitiator_event_loop_36
   \   0002BF   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   0002C2   7003         JNZ     ??zllInitiator_event_loop_37
   \   0002C4   A3           INC     DPTR
   \   0002C5   E0           MOVX    A,@DPTR
   \   0002C6   69           XRL     A,R1
   \                     ??zllInitiator_event_loop_37:
   \   0002C7   70EA         JNZ     ??zllInitiator_event_loop_33
   \                     ??zllInitiator_event_loop_36:
   \   0002C9                ; Setup parameters for call to function zll_SetChannel
   \   0002C9   90....       MOV     DPTR,#selectedTarget + 52
   \   0002CC   E0           MOVX    A,@DPTR
   \   0002CD   F9           MOV     R1,A
   \   0002CE   12....       LCALL   ??zll_SetChannel?relay
   \   0002D1   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   0002D4   7003         JNZ     ??zllInitiator_event_loop_38
   \   0002D6   A3           INC     DPTR
   \   0002D7   E0           MOVX    A,@DPTR
   \   0002D8   69           XRL     A,R1
   \                     ??zllInitiator_event_loop_38:
   \   0002D9   700E         JNZ     ??zllInitiator_event_loop_39
   \   0002DB                ; Setup parameters for call to function sAddrExtCmp
   \   0002DB   7C..         MOV     R4,#(selectedTarget + 15) & 0xff
   \   0002DD   7D..         MOV     R5,#((selectedTarget + 15) >> 8) & 0xff
   \   0002DF   7A..         MOV     R2,#(_NIB + 53) & 0xff
   \   0002E1   7B..         MOV     R3,#((_NIB + 53) >> 8) & 0xff
   \   0002E3   12....       LCALL   ??sAddrExtCmp?relay
   \   0002E6   E9           MOV     A,R1
   \   0002E7   701C         JNZ     ??zllInitiator_event_loop_40
   \                     ??zllInitiator_event_loop_39:
   \   0002E9   90....       MOV     DPTR,#selectedTarget + 7
   \   0002EC   E0           MOVX    A,@DPTR
   \   0002ED   5402         ANL     A,#0x2
   \   0002EF   600B         JZ      ??zllInitiator_event_loop_41
   \   0002F1                ; Setup parameters for call to function zll_IsValidSplitFreeRanges
   \   0002F1   90....       MOV     DPTR,#selectedTarget + 30
   \   0002F4   E0           MOVX    A,@DPTR
   \   0002F5   F9           MOV     R1,A
   \   0002F6   12....       LCALL   ??zll_IsValidSplitFreeRanges?relay
   \   0002F9   E9           MOV     A,R1
   \   0002FA   60B7         JZ      ??zllInitiator_event_loop_33
   \                     ??zllInitiator_event_loop_41:
   \   0002FC                ; Setup parameters for call to function initiatorSendNwkJoinReq
   \   0002FC   7A..         MOV     R2,#selectedTarget & 0xff
   \   0002FE   7B..         MOV     R3,#(selectedTarget >> 8) & 0xff
   \   000300   12....       LCALL   ??initiatorSendNwkJoinReq?relay
   \   000303   80A5         SJMP    ??zllInitiator_event_loop_34
   \                     ??zllInitiator_event_loop_40:
   \   000305   90....       MOV     DPTR,#selectedTarget + 23
   \   000308   E0           MOVX    A,@DPTR
   \   000309   FA           MOV     R2,A
   \   00030A   90....       MOV     DPTR,#_NIB + 109
   \   00030D   E0           MOVX    A,@DPTR
   \   00030E   F9           MOV     R1,A
   \   00030F   EA           MOV     A,R2
   \   000310   69           XRL     A,R1
   \   000311   7003         JNZ     $+5
   \   000313   02....       LJMP    ??zllInitiator_event_loop_42 & 0xFFFF
   \   000316                ; Setup parameters for call to function zll_NewNwkUpdateId
   \   000316   12....       LCALL   ??zll_NewNwkUpdateId?relay
   \   000319   90....       MOV     DPTR,#_NIB + 109
   \   00031C   E0           MOVX    A,@DPTR
   \   00031D   69           XRL     A,R1
   \   00031E   6016         JZ      ??zllInitiator_event_loop_43
   \   000320                ; Setup parameters for call to function zll_ProcessNwkUpdate
   \   000320   90....       MOV     DPTR,#selectedTarget + 24
   \   000323   E0           MOVX    A,@DPTR
   \   000324   FA           MOV     R2,A
   \   000325   12....       LCALL   ??zll_ProcessNwkUpdate?relay
   \   000328   90....       MOV     DPTR,#_NIB + 35
   \   00032B   7409         MOV     A,#0x9
   \   00032D   F0           MOVX    @DPTR,A
   \   00032E                ; Setup parameters for call to function initiatorReJoinNwk
   \   00032E   7903         MOV     R1,#0x3
   \   000330   12....       LCALL   ??initiatorReJoinNwk?relay
   \   000333   02....       LJMP    ??zllInitiator_event_loop_35 & 0xFFFF
   \                     ??zllInitiator_event_loop_43:
   \   000336                ; Setup parameters for call to function osal_mem_alloc
   \   000336   7A12         MOV     R2,#0x12
   \   000338   7B00         MOV     R3,#0x0
   \   00033A   12....       LCALL   ??osal_mem_alloc?relay
   \   00033D   8A..         MOV     ?V0 + 0,R2
   \   00033F   8B..         MOV     ?V0 + 1,R3
   \   000341   EA           MOV     A,R2
   \   000342   45..         ORL     A,?V0 + 1
   \   000344   6075         JZ      ??zllInitiator_event_loop_44
   \   000346   90....       MOV     DPTR,#selectedTarget
   \   000349   12....       LCALL   ?XLOAD_R2345
   \   00034C   85..82       MOV     DPL,?V0 + 0
   \   00034F   85..83       MOV     DPH,?V0 + 1
   \   000352   12....       LCALL   ?XSTORE_R2345
   \   000355                ; Setup parameters for call to function sAddrExtCpy
   \   000355   7C..         MOV     R4,#(_NIB + 53) & 0xff
   \   000357   7D..         MOV     R5,#((_NIB + 53) >> 8) & 0xff
   \   000359   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   00035C   12....       LCALL   ??sAddrExtCpy?relay
   \   00035F   90....       MOV     DPTR,#_NIB + 109
   \   000362   E0           MOVX    A,@DPTR
   \   000363   C0E0         PUSH    A
   \   000365   E5..         MOV     A,?V0 + 0
   \   000367   240C         ADD     A,#0xc
   \   000369   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   00036C   D0E0         POP     A
   \   00036E   F0           MOVX    @DPTR,A
   \   00036F   90....       MOV     DPTR,#_NIB + 22
   \   000372   E0           MOVX    A,@DPTR
   \   000373   C0E0         PUSH    A
   \   000375   E5..         MOV     A,?V0 + 0
   \   000377   240D         ADD     A,#0xd
   \   000379   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   00037C   D0E0         POP     A
   \   00037E   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   000381   E5..         MOV     A,?V0 + 0
   \   000383   240E         ADD     A,#0xe
   \   000385   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   000388   12....       LCALL   ??Subroutine39_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   00038B   90....       MOV     DPTR,#selectedTarget + 27
   \   00038E   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_77:
   \   000391   E5..         MOV     A,?V0 + 0
   \   000393   2410         ADD     A,#0x10
   \   000395   F582         MOV     DPL,A
   \   000397   E5..         MOV     A,?V0 + 1
   \   000399   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   00039C   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   00039F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0003A2   AC..         MOV     R4,?V0 + 0
   \   0003A4   AD..         MOV     R5,?V0 + 1
   \   0003A6   7A..         MOV     R2,#(selectedTarget + 38) & 0xff
   \   0003A8   7B..         MOV     R3,#((selectedTarget + 38) >> 8) & 0xff
   \   0003AA   790D         MOV     R1,#0xd
   \   0003AC   12....       LCALL   ??zclLL_Send_NwkUpdateReq?relay
   \   0003AF   7401         MOV     A,#0x1
   \   0003B1   12....       LCALL   ?DEALLOC_XSTACK8
   \   0003B4                ; Setup parameters for call to function osal_mem_free
   \   0003B4   AA..         MOV     R2,?V0 + 0
   \   0003B6   AB..         MOV     R3,?V0 + 1
   \   0003B8   12....       LCALL   ??osal_mem_free?relay
   \                     ??zllInitiator_event_loop_44:
   \   0003BB                ; Setup parameters for call to function osal_set_event
   \   0003BB   7A00         MOV     R2,#0x0
   \   0003BD   7B10         MOV     R3,#0x10
   \   0003BF   90....       MOV     DPTR,#zllInitiator_TaskID
   \   0003C2   E0           MOVX    A,@DPTR
   \   0003C3   F9           MOV     R1,A
   \   0003C4   12....       LCALL   ??osal_set_event?relay
   \   0003C7   02....       LJMP    ??zllInitiator_event_loop_33 & 0xFFFF
   \                     ??zllInitiator_event_loop_42:
   \   0003CA   90....       MOV     DPTR,#selectedTarget + 7
   \   0003CD   E0           MOVX    A,@DPTR
   \   0003CE   5410         ANL     A,#0x10
   \   0003D0   6003         JZ      $+5
   \   0003D2   02....       LJMP    ??zllInitiator_event_loop_33 & 0xFFFF
   \   0003D5   90....       MOV     DPTR,#selectedTarget + 27
   \   0003D8   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   0003DB   C0E0         PUSH    A
   \   0003DD   7402         MOV     A,#0x2
   \   0003DF   12....       LCALL   ?XSTACK_DISP0_8
   \   0003E2   D0E0         POP     A
   \   0003E4   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   0003E7   12....       LCALL   ?XSTACK_DISP0_8
   \   0003EA   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   0003ED   12....       LCALL   ?XSTACK_DISP0_8
   \   0003F0   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   0003F3   C0E0         PUSH    A
   \   0003F5   7407         MOV     A,#0x7
   \   0003F7   12....       LCALL   ?XSTACK_DISP0_8
   \   0003FA   D0E0         POP     A
   \   0003FC   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   0003FF   6006         JZ      ??zllInitiator_event_loop_45
   \   000401                ; Setup parameters for indirect call
   \   000401   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_103:
   \   000404   12....       LCALL   ?CALL_IND
   \                     ??zllInitiator_event_loop_45:
   \   000407                ; Setup parameters for call to function MT_ZllNotifyTL
   \   000407   85..82       MOV     DPL,?XSP + 0
   \   00040A   85..83       MOV     DPH,?XSP + 1
   \   00040D   AA82         MOV     R2,DPL
   \   00040F   AB83         MOV     R3,DPH
   \   000411   12....       LCALL   ??MT_ZllNotifyTL?relay
   \   000414   02....       LJMP    ??zllInitiator_event_loop_33 & 0xFFFF
    810            }
    811          
    812            if ( events & ZLL_W4_NWK_START_RSP_EVT )
   \                     ??zllInitiator_event_loop_30:
   \   000417   EF           MOV     A,R7
   \   000418   5401         ANL     A,#0x1
   \   00041A   7003         JNZ     $+5
   \   00041C   02....       LJMP    ??zllInitiator_event_loop_46 & 0xFFFF
    813            {
    814              zclLLNwkStartRsp_t *pRsp = &(rxRsp.nwkStartRsp);
    815          
    816              if ( ( pRsp->status == ZLL_NETWORK_START_RSP_STATUS_SUCCESS )
    817                 && nwk_ExtPANIDValid( pRsp->extendedPANID ) )
   \   00041F   90....       MOV     DPTR,#rxRsp + 4
   \   000422   E0           MOVX    A,@DPTR
   \   000423   707A         JNZ     ??zllInitiator_event_loop_47
   \   000425                ; Setup parameters for call to function nwk_ExtPANIDValid
   \   000425   7A..         MOV     R2,#(rxRsp + 5) & 0xff
   \   000427   7B..         MOV     R3,#((rxRsp + 5) >> 8) & 0xff
   \   000429   12....       LCALL   ??nwk_ExtPANIDValid?relay
   \   00042C   E9           MOV     A,R1
   \   00042D   6070         JZ      ??zllInitiator_event_loop_47
    818              {
    819                // Copy the new network parameters to NIB
    820                zll_SetNIB( ( ZSTACK_ROUTER_BUILD ? NWK_ROUTER : NWK_REJOINING ),
    821                            _NIB.nwkDevAddress, pRsp->extendedPANID,
    822                            pRsp->logicalChannel, pRsp->panId, pRsp->nwkUpdateId );
   \   00042F                ; Setup parameters for call to function zll_SetNIB
   \   00042F   90....       MOV     DPTR,#rxRsp + 13
   \   000432   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   000435   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000438   90....       MOV     DPTR,#rxRsp + 15
   \   00043B   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   00043E   90....       MOV     DPTR,#rxRsp + 14
   \   000441   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   000444   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000447   7C..         MOV     R4,#(rxRsp + 5) & 0xff
   \   000449   7D..         MOV     R5,#((rxRsp + 5) >> 8) & 0xff
   \   00044B   12....       LCALL   ??Subroutine46_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_113:
   \   00044E   7908         MOV     R1,#0x8
   \   000450   12....       LCALL   ??zll_SetNIB?relay
   \   000453   7404         MOV     A,#0x4
   \   000455   12....       LCALL   ?DEALLOC_XSTACK8
    823          
    824                // Apply the received network key
    825                zll_DecryptNwkKey( encKeySent, keyIndexSent, pRsp->transID, responseIDSent );
   \   000458                ; Setup parameters for call to function zll_DecryptNwkKey
   \   000458   90....       MOV     DPTR,#responseIDSent
   \   00045B   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00045E   90....       MOV     DPTR,#rxRsp
   \   000461   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000464   90....       MOV     DPTR,#keyIndexSent
   \   000467   E0           MOVX    A,@DPTR
   \   000468   F9           MOV     R1,A
   \   000469   7A..         MOV     R2,#encKeySent & 0xff
   \   00046B   7B..         MOV     R3,#(encKeySent >> 8) & 0xff
   \   00046D   12....       LCALL   ??zll_DecryptNwkKey?relay
   \   000470   7408         MOV     A,#0x8
   \   000472   12....       LCALL   ?DEALLOC_XSTACK8
    826          
    827                // This is not a usual Trust Center protected network
    828                ZDSecMgrUpdateTCAddress( NULL );
   \   000475                ; Setup parameters for call to function ZDSecMgrUpdateTCAddress
   \   000475   7A00         MOV     R2,#0x0
   \   000477   7B00         MOV     R3,#0x0
   \   000479   12....       LCALL   ??ZDSecMgrUpdateTCAddress?relay
    829          
    830                // Notify the application about this device
    831                osal_set_event( zllInitiator_TaskID, ZLL_NOTIFY_APP_EVT );
   \   00047C                ; Setup parameters for call to function osal_set_event
   \   00047C   7A00         MOV     R2,#0x0
   \   00047E   7B10         MOV     R3,#0x10
   \   000480   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000483   E0           MOVX    A,@DPTR
   \   000484   F9           MOV     R1,A
   \   000485   12....       LCALL   ??osal_set_event?relay
    832          
    833                // Wait at least ZLL_APLC_MIN_STARTUP_DELAY_TIME seconds to allow the
    834                // target to start the network correctly. Join the target afterwards.
    835                osal_start_timerEx( zllInitiator_TaskID, ZLL_START_NWK_EVT, ZLL_APLC_MIN_STARTUP_DELAY_TIME );
   \   000488                ; Setup parameters for call to function osal_start_timerEx
   \   000488   90....       MOV     DPTR,#__Constant_7d0
   \   00048B   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00048E   7A08         MOV     R2,#0x8
   \   000490   7B00         MOV     R3,#0x0
   \   000492   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000495   E0           MOVX    A,@DPTR
   \   000496   F9           MOV     R1,A
   \   000497   12....       LCALL   ??osal_start_timerEx?relay
   \   00049A   7404         MOV     A,#0x4
   \   00049C   12....       LCALL   ?DEALLOC_XSTACK8
    836              }
    837          
    838              // return unprocessed events
    839              return ( events ^ ZLL_W4_NWK_START_RSP_EVT );
   \                     ??zllInitiator_event_loop_47:
   \   00049F   EE           MOV     A,R6
   \   0004A0   FA           MOV     R2,A
   \   0004A1   EF           MOV     A,R7
   \   0004A2   6401         XRL     A,#0x1
   \   0004A4   02....       LJMP    ??zllInitiator_event_loop_20 & 0xFFFF
    840            }
    841          
    842            if ( events & ZLL_START_NWK_EVT )
   \                     ??zllInitiator_event_loop_46:
   \   0004A7   EE           MOV     A,R6
   \   0004A8   5408         ANL     A,#0x8
   \   0004AA   6009         JZ      ??zllInitiator_event_loop_48
    843            {
    844              // Let's join the network started by the target
    845              initiatorJoinNwk();
   \   0004AC                ; Setup parameters for call to function initiatorJoinNwk
   \   0004AC   12....       LCALL   ??initiatorJoinNwk?relay
    846          
    847              // return unprocessed events
    848              return ( events ^ ZLL_START_NWK_EVT );
   \   0004AF   EE           MOV     A,R6
   \   0004B0   6408         XRL     A,#0x8
   \   0004B2   02....       LJMP    ??zllInitiator_event_loop_29 & 0xFFFF
    849            }
    850          
    851            if ( events & ZLL_W4_NWK_JOIN_RSP_EVT )
   \                     ??zllInitiator_event_loop_48:
   \   0004B5   EF           MOV     A,R7
   \   0004B6   5402         ANL     A,#0x2
   \   0004B8   602D         JZ      ??zllInitiator_event_loop_49
    852            {
    853              zclLLNwkJoinRsp_t *pRsp = &(rxRsp.nwkJoinRsp);
    854          
    855              if ( pRsp->status == ZLL_NETWORK_JOIN_RSP_STATUS_SUCCESS )
   \   0004BA   90....       MOV     DPTR,#rxRsp + 4
   \   0004BD   E0           MOVX    A,@DPTR
   \   0004BE   7017         JNZ     ??zllInitiator_event_loop_50
    856              {
    857                // Target has joined our network
    858          
    859                // Wait at least ZLL_APLC_MIN_STARTUP_DELAY_TIME seconds to allow the
    860                // target to start operating on the network correctly. Notify the
    861                // application afterwards.
    862                osal_start_timerEx( zllInitiator_TaskID, ZLL_NOTIFY_APP_EVT,
    863                                    ZLL_APLC_MIN_STARTUP_DELAY_TIME );
   \   0004C0                ; Setup parameters for call to function osal_start_timerEx
   \   0004C0   90....       MOV     DPTR,#__Constant_7d0
   \   0004C3   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0004C6   7A00         MOV     R2,#0x0
   \   0004C8   7B10         MOV     R3,#0x10
   \   0004CA   90....       MOV     DPTR,#zllInitiator_TaskID
   \   0004CD   E0           MOVX    A,@DPTR
   \   0004CE   F9           MOV     R1,A
   \   0004CF   12....       LCALL   ??osal_start_timerEx?relay
   \   0004D2   7404         MOV     A,#0x4
   \   0004D4   12....       LCALL   ?DEALLOC_XSTACK8
    864              }
    865          
    866              // We're done with touch-link procedure here
    867              initiatorSetNwkToInitState();
   \                     ??zllInitiator_event_loop_50:
   \   0004D7                ; Setup parameters for call to function initiatorSetNwkToInitState
   \   0004D7   12....       LCALL   ??initiatorSetNwkToInitState?relay
    868          
    869              zll_UpdateNV( ZLL_UPDATE_NV_RANGES );
   \   0004DA                ; Setup parameters for call to function zll_UpdateNV
   \   0004DA   7902         MOV     R1,#0x2
   \   0004DC   12....       LCALL   ??zll_UpdateNV?relay
    870          
    871              if ( ( POLL_RATE == 0 ) && ( selectedTarget.scanRsp.zLogicalType == ZG_DEVICETYPE_ENDDEVICE ) )
    872              {
    873                //allow to respond to ZLL commission utility commands after TL
    874                NLME_SetPollRate( ZLL_INITIATOR_TEMP_POST_TL_POLL_RATE );
    875                //polling should reset when TL life time expires
    876              }
    877          
    878              // return unprocessed events
    879              return ( events ^ ZLL_W4_NWK_JOIN_RSP_EVT );
   \   0004DF   EE           MOV     A,R6
   \   0004E0   FA           MOV     R2,A
   \   0004E1   EF           MOV     A,R7
   \   0004E2   6402         XRL     A,#0x2
   \   0004E4   02....       LJMP    ??zllInitiator_event_loop_20 & 0xFFFF
    880            }
    881          
    882            if ( events & ZLL_ENDDEVICE_JOIN_EVT )
   \                     ??zllInitiator_event_loop_49:
   \   0004E7   EE           MOV     A,R6
   \   0004E8   5402         ANL     A,#0x2
   \   0004EA   6026         JZ      ??zllInitiator_event_loop_51
    883            {
    884              // If not factory new, perform a Leave on our old network
    885              if ( !zll_IsFactoryNew() && ( zll_SendLeaveReq() == ZSuccess ) )
   \   0004EC                ; Setup parameters for call to function zll_IsFactoryNew
   \   0004EC   12....       LCALL   ??zll_IsFactoryNew?relay
   \   0004EF   E9           MOV     A,R1
   \   0004F0   700E         JNZ     ??zllInitiator_event_loop_52
   \   0004F2                ; Setup parameters for call to function zll_SendLeaveReq
   \   0004F2   12....       LCALL   ??zll_SendLeaveReq?relay
   \   0004F5   E9           MOV     A,R1
   \   0004F6   7008         JNZ     ??zllInitiator_event_loop_52
    886              {
    887                // Wait for Leave confirmation before joining the new network
    888                zllLeaveInitiated = ZLL_LEAVE_TO_JOIN_NWK;
   \   0004F8   90....       MOV     DPTR,#zllLeaveInitiated
   \   0004FB   7401         MOV     A,#0x1
   \   0004FD   F0           MOVX    @DPTR,A
   \   0004FE   800C         SJMP    ??zllInitiator_event_loop_53
    889              }
    890              else
    891              {
    892                // Notify our task to join this network
    893                osal_set_event( zllInitiator_TaskID, ZLL_JOIN_NWK_EVT );
   \                     ??zllInitiator_event_loop_52:
   \   000500                ; Setup parameters for call to function osal_set_event
   \   000500   7A10         MOV     R2,#0x10
   \   000502   7B00         MOV     R3,#0x0
   \   000504   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000507   E0           MOVX    A,@DPTR
   \   000508   F9           MOV     R1,A
   \   000509   12....       LCALL   ??osal_set_event?relay
    894              }
    895          
    896              // return unprocessed events
    897              return ( events ^ ZLL_ENDDEVICE_JOIN_EVT );
   \                     ??zllInitiator_event_loop_53:
   \   00050C   EE           MOV     A,R6
   \   00050D   6402         XRL     A,#0x2
   \   00050F   02....       LJMP    ??zllInitiator_event_loop_29 & 0xFFFF
    898            }
    899          
    900            if ( events & ZLL_JOIN_NWK_EVT )
   \                     ??zllInitiator_event_loop_51:
   \   000512   EE           MOV     A,R6
   \   000513   5410         ANL     A,#0x10
   \   000515   6063         JZ      ??zllInitiator_event_loop_54
    901            {
    902              if ( joinReq.nwkParams.nwkAddr != INVALID_NODE_ADDR ) // update only if valid, otherwise use our own values.
   \   000517   90....       MOV     DPTR,#joinReq + 32
   \   00051A   12....       LCALL   ??Subroutine47_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_108:
   \   00051D   74FE         MOV     A,#-0x2
   \   00051F   6A           XRL     A,R2
   \   000520   7003         JNZ     ??zllInitiator_event_loop_55
   \   000522   74FF         MOV     A,#-0x1
   \   000524   6B           XRL     A,R3
   \                     ??zllInitiator_event_loop_55:
   \   000525   604A         JZ      ??zllInitiator_event_loop_56
    903              {
    904                zclLLNwkParams_t *pParams = &(joinReq.nwkParams);
    905          
    906                // Copy the new network parameters to the NIB
    907                zll_SetNIB( ( ZSTACK_ROUTER_BUILD ? NWK_ROUTER : NWK_REJOINING ),
    908                            pParams->nwkAddr, pParams->extendedPANID,
    909                            pParams->logicalChannel, pParams->panId, joinReq.nwkUpdateId );
   \   000527                ; Setup parameters for call to function zll_SetNIB
   \   000527   90....       MOV     DPTR,#joinReq + 46
   \   00052A   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   00052D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000530   90....       MOV     DPTR,#joinReq + 30
   \   000533   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   000536   90....       MOV     DPTR,#joinReq + 29
   \   000539   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   00053C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00053F   7C..         MOV     R4,#(joinReq + 4) & 0xff
   \   000541   7D..         MOV     R5,#((joinReq + 4) >> 8) & 0xff
   \   000543   7908         MOV     R1,#0x8
   \   000545   12....       LCALL   ??zll_SetNIB?relay
   \   000548   7404         MOV     A,#0x4
   \   00054A   12....       LCALL   ?DEALLOC_XSTACK8
    910          
    911                // Apply the received network key
    912                zll_DecryptNwkKey( pParams->nwkKey, pParams->keyIndex, joinReq.transID, zllResponseID );
   \   00054D                ; Setup parameters for call to function zll_DecryptNwkKey
   \   00054D   90....       MOV     DPTR,#zllResponseID
   \   000550   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000553   90....       MOV     DPTR,#joinReq
   \   000556   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000559   90....       MOV     DPTR,#joinReq + 12
   \   00055C   E0           MOVX    A,@DPTR
   \   00055D   F9           MOV     R1,A
   \   00055E   7A..         MOV     R2,#(joinReq + 13) & 0xff
   \   000560   7B..         MOV     R3,#((joinReq + 13) >> 8) & 0xff
   \   000562   12....       LCALL   ??zll_DecryptNwkKey?relay
   \   000565   7408         MOV     A,#0x8
   \   000567   12....       LCALL   ?DEALLOC_XSTACK8
    913          
    914                zll_UpdateFreeRanges( pParams );
   \   00056A                ; Setup parameters for call to function zll_UpdateFreeRanges
   \   00056A   7A..         MOV     R2,#(joinReq + 4) & 0xff
   \   00056C   7B..         MOV     R3,#((joinReq + 4) >> 8) & 0xff
   \   00056E   12....       LCALL   ??zll_UpdateFreeRanges?relay
    915              }
    916          
    917              // We're asked to join a new network; let's do it!
    918              initiatorJoinNwk();
   \                     ??zllInitiator_event_loop_56:
   \   000571                ; Setup parameters for call to function initiatorJoinNwk
   \   000571   12....       LCALL   ??initiatorJoinNwk?relay
    919          
    920              // return unprocessed events
    921              return ( events ^ ZLL_JOIN_NWK_EVT );
   \   000574   EE           MOV     A,R6
   \   000575   6410         XRL     A,#0x10
   \   000577   02....       LJMP    ??zllInitiator_event_loop_29 & 0xFFFF
    922            }
    923          
    924            if ( events & ZLL_DISABLE_RX_EVT )
   \                     ??zllInitiator_event_loop_54:
   \   00057A   EF           MOV     A,R7
   \   00057B   5404         ANL     A,#0x4
   \   00057D   6019         JZ      ??zllInitiator_event_loop_57
    925            {
    926              // We're not asked to join a network
    927              initiatorSetNwkToInitState();
   \   00057F                ; Setup parameters for call to function initiatorSetNwkToInitState
   \   00057F   12....       LCALL   ??initiatorSetNwkToInitState?relay
    928          
    929              scanReqChannels = ZLL_SCAN_PRIMARY_CHANNELS;
   \   000582   90....       MOV     DPTR,#scanReqChannels
   \   000585   7401         MOV     A,#0x1
   \   000587   F0           MOVX    @DPTR,A
    930              numScanReqSent = 0;
   \   000588   90....       MOV     DPTR,#numScanReqSent
   \   00058B   E4           CLR     A
   \   00058C   F0           MOVX    @DPTR,A
    931              // Reset selected target
    932              initiatorClearSelectedTarget();
   \   00058D                ; Setup parameters for call to function initiatorClearSelectedTarget
   \   00058D   12....       LCALL   ??initiatorClearSelectedTarget?relay
    933          
    934              // return unprocessed events
    935              return ( events ^ ZLL_DISABLE_RX_EVT );
   \   000590   EE           MOV     A,R6
   \   000591   FA           MOV     R2,A
   \   000592   EF           MOV     A,R7
   \   000593   6404         XRL     A,#0x4
   \   000595   02....       LJMP    ??zllInitiator_event_loop_20 & 0xFFFF
    936            }
    937          
    938            if ( events & ZLL_W4_REJOIN_EVT )
   \                     ??zllInitiator_event_loop_57:
   \   000598   EF           MOV     A,R7
   \   000599   5408         ANL     A,#0x8
   \   00059B   600B         JZ      ??zllInitiator_event_loop_58
    939            {
    940              // Stop joining cycle
    941              ZDApp_StopJoiningCycle();
   \   00059D                ; Setup parameters for call to function ZDApp_StopJoiningCycle
   \   00059D   12....       LCALL   ??ZDApp_StopJoiningCycle?relay
    942          
    943              // return unprocessed events
    944              return ( events ^ ZLL_W4_REJOIN_EVT );
   \   0005A0   EE           MOV     A,R6
   \   0005A1   FA           MOV     R2,A
   \   0005A2   EF           MOV     A,R7
   \   0005A3   6408         XRL     A,#0x8
   \   0005A5   02....       LJMP    ??zllInitiator_event_loop_20 & 0xFFFF
    945            }
    946          
    947            if ( events & ZLL_NOTIFY_APP_EVT )
   \                     ??zllInitiator_event_loop_58:
   \   0005A8   EF           MOV     A,R7
   \   0005A9   5410         ANL     A,#0x10
   \   0005AB   604F         JZ      ??zllInitiator_event_loop_59
    948            {
    949              if ( selectedTarget.lastRssi > ZLL_TL_WORST_RSSI )
   \   0005AD   90....       MOV     DPTR,#selectedTarget + 53
   \   0005B0   E0           MOVX    A,@DPTR
   \   0005B1   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   0005B4   403F         JC      ??zllInitiator_event_loop_60
    950              {
    951                epInfoRec_t rec;
    952                rec.nwkAddr = selectedTarget.newNwkAddr; // newly assigned network address
   \   0005B6   90....       MOV     DPTR,#selectedTarget + 50
   \   0005B9   12....       LCALL   ?Subroutine13 & 0xFFFF
    953                rec.endpoint = selectedTarget.scanRsp.deviceInfo.endpoint;
   \                     ??CrossCallReturnLabel_12:
   \   0005BC   C0E0         PUSH    A
   \   0005BE   7402         MOV     A,#0x2
   \   0005C0   12....       LCALL   ?XSTACK_DISP0_8
   \   0005C3   D0E0         POP     A
   \   0005C5   12....       LCALL   ?Subroutine11 & 0xFFFF
    954                rec.profileID = selectedTarget.scanRsp.deviceInfo.profileID;
   \                     ??CrossCallReturnLabel_8:
   \   0005C8   12....       LCALL   ?XSTACK_DISP0_8
   \   0005CB   12....       LCALL   ?Subroutine10 & 0xFFFF
    955                rec.deviceID = selectedTarget.scanRsp.deviceInfo.deviceID;
   \                     ??CrossCallReturnLabel_6:
   \   0005CE   12....       LCALL   ?XSTACK_DISP0_8
   \   0005D1   12....       LCALL   ?Subroutine14 & 0xFFFF
    956                rec.version = selectedTarget.scanRsp.deviceInfo.version;
   \                     ??CrossCallReturnLabel_14:
   \   0005D4   C0E0         PUSH    A
   \   0005D6   7407         MOV     A,#0x7
   \   0005D8   12....       LCALL   ?XSTACK_DISP0_8
   \   0005DB   D0E0         POP     A
   \   0005DD   12....       LCALL   ?Subroutine12 & 0xFFFF
    957                // Notify the application
    958                if ( pfnNotifyAppCB )
   \                     ??CrossCallReturnLabel_10:
   \   0005E0   6006         JZ      ??zllInitiator_event_loop_61
    959                {
    960                  (*pfnNotifyAppCB)( &rec );
   \   0005E2                ; Setup parameters for indirect call
   \   0005E2   12....       LCALL   ?Subroutine18 & 0xFFFF
    961                }
   \                     ??CrossCallReturnLabel_104:
   \   0005E5   12....       LCALL   ?CALL_IND
    962          #if defined ( MT_APP_FUNC )
    963                MT_ZllNotifyTL( &rec );
   \                     ??zllInitiator_event_loop_61:
   \   0005E8                ; Setup parameters for call to function MT_ZllNotifyTL
   \   0005E8   85..82       MOV     DPL,?XSP + 0
   \   0005EB   85..83       MOV     DPH,?XSP + 1
   \   0005EE   AA82         MOV     R2,DPL
   \   0005F0   AB83         MOV     R3,DPH
   \   0005F2   12....       LCALL   ??MT_ZllNotifyTL?relay
    964          #endif
    965              }
    966              // return unprocessed events
    967              return ( events ^ ZLL_NOTIFY_APP_EVT );
   \                     ??zllInitiator_event_loop_60:
   \   0005F5   EE           MOV     A,R6
   \   0005F6   FA           MOV     R2,A
   \   0005F7   EF           MOV     A,R7
   \   0005F8   6410         XRL     A,#0x10
   \   0005FA   804C         SJMP    ??zllInitiator_event_loop_20
    968            }
    969          
    970            if ( events & ZLL_RESET_TO_FN_EVT )
   \                     ??zllInitiator_event_loop_59:
   \   0005FC   EE           MOV     A,R6
   \   0005FD   5404         ANL     A,#0x4
   \   0005FF   6008         JZ      ??zllInitiator_event_loop_62
    971            {
    972              zllInitiator_ResetToFactoryNew();
   \   000601                ; Setup parameters for call to function zllInitiator_ResetToFactoryNew
   \   000601   12....       LCALL   ??zllInitiator_ResetToFactoryNew?relay
    973          
    974              // return unprocessed events
    975              return ( events ^ ZLL_RESET_TO_FN_EVT );
   \   000604   EE           MOV     A,R6
   \   000605   6404         XRL     A,#0x4
   \   000607   803D         SJMP    ??zllInitiator_event_loop_29
    976            }
    977          
    978            if ( events & ZLL_NWK_DISC_CNF_EVT )
   \                     ??zllInitiator_event_loop_62:
   \   000609   EE           MOV     A,R6
   \   00060A   A2E0         MOV     C,0xE0 /* A   */.0
   \   00060C   5020         JNC     ??zllInitiator_event_loop_63
    979            {
    980              if ( zllHAScanInitiated && ( zllHAScanInitiated != ZLL_SCAN_FOUND_NOTHING ) )
   \   00060E   90....       MOV     DPTR,#zllHAScanInitiated
   \   000611   E0           MOVX    A,@DPTR
   \   000612   6015         JZ      ??zllInitiator_event_loop_64
   \   000614   6403         XRL     A,#0x3
   \   000616   6011         JZ      ??zllInitiator_event_loop_64
    981              {
    982                if ( ( zll_ClassicalCommissioningJoinDiscoveredNwk() == ZSuccess) &&
    983                     ( pfnResetAppCB ) )
   \   000618                ; Setup parameters for call to function zll_ClassicalCommissioningJoinDiscoveredNwk
   \   000618   12....       LCALL   ??zll_ClassicalCommissioningJoinDiscoveredNwk?r
   \   00061B   E9           MOV     A,R1
   \   00061C   700B         JNZ     ??zllInitiator_event_loop_64
   \   00061E   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_37:
   \   000621   6006         JZ      ??zllInitiator_event_loop_64
    984                {
    985                  pfnResetAppCB();
   \   000623                ; Setup parameters for indirect call
   \   000623   12....       LCALL   ??Subroutine43_0 & 0xFFFF
    986                }
    987              }
   \                     ??CrossCallReturnLabel_99:
   \   000626   12....       LCALL   ?CALL_IND
    988              // return unprocessed events
    989              return ( events ^ ZLL_NWK_DISC_CNF_EVT );
   \                     ??zllInitiator_event_loop_64:
   \   000629   EE           MOV     A,R6
   \   00062A   6401         XRL     A,#0x1
   \   00062C   8018         SJMP    ??zllInitiator_event_loop_29
    990            }
    991          
    992            if ( events & ZLL_TRANS_LIFETIME_EXPIRED_EVT )
   \                     ??zllInitiator_event_loop_63:
   \   00062E   5420         ANL     A,#0x20
   \   000630   6019         JZ      ??zllInitiator_event_loop_65
    993            {
    994              zllTransID = 0;
   \   000632   90....       MOV     DPTR,#zllTransID
   \   000635   E4           CLR     A
   \   000636   F0           MOVX    @DPTR,A
   \   000637   A3           INC     DPTR
   \   000638   F0           MOVX    @DPTR,A
   \   000639   A3           INC     DPTR
   \   00063A   F0           MOVX    @DPTR,A
   \   00063B   A3           INC     DPTR
   \   00063C   F0           MOVX    @DPTR,A
    995              initiatorClearSelectedTarget();
   \   00063D                ; Setup parameters for call to function initiatorClearSelectedTarget
   \   00063D   12....       LCALL   ??initiatorClearSelectedTarget?relay
    996              initiatorSetNwkToInitState();
   \   000640                ; Setup parameters for call to function initiatorSetNwkToInitState
   \   000640   12....       LCALL   ??initiatorSetNwkToInitState?relay
    997          
    998              // return unprocessed events
    999              return ( events ^ ZLL_TRANS_LIFETIME_EXPIRED_EVT );
   \   000643   EE           MOV     A,R6
   \   000644   6420         XRL     A,#0x20
   \                     ??zllInitiator_event_loop_29:
   \   000646   FA           MOV     R2,A
   \   000647   EF           MOV     A,R7
   \                     ??zllInitiator_event_loop_20:
   \   000648   FB           MOV     R3,A
   \   000649   8004         SJMP    ??zllInitiator_event_loop_66
   1000            }
   1001          
   1002            // If reach here, the events are unknown
   1003            // Discard or make more handlers
   1004            return 0;
   \                     ??zllInitiator_event_loop_65:
   \   00064B   7A00         MOV     R2,#0x0
   \   00064D   7B00         MOV     R3,#0x0
   \                     ??zllInitiator_event_loop_66:
   \   00064F   740E         MOV     A,#0xe
   \   000651   02....       LJMP    ?Subroutine1 & 0xFFFF
   1005          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_95:
   \   000003   90....       MOV     DPTR,#selectedTarget + 25
   \   000006   E0           MOVX    A,@DPTR
   \   000007   68           XRL     A,R0
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004   F0           MOVX    @DPTR,A
   \   000005   90....       MOV     DPTR,#selectedTarget + 36
   \   000008   E0           MOVX    A,@DPTR
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   12....       LCALL   ??Subroutine41_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_92:
   \   000003   85..82       MOV     DPL,?XSP + 0
   \   000006   85..83       MOV     DPH,?XSP + 1
   \   000009   E8           MOV     A,R0
   \   00000A   F0           MOVX    @DPTR,A
   \   00000B   A3           INC     DPTR
   \   00000C   E9           MOV     A,R1
   \   00000D   F0           MOVX    @DPTR,A
   \   00000E   90....       MOV     DPTR,#selectedTarget + 31
   \   000011   E0           MOVX    A,@DPTR
   \   000012   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   90....       MOV     DPTR,#pfnNotifyAppCB
   \   000004   12....       LCALL   ??Subroutine41_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_91:
   \   000007   E8           MOV     A,R0
   \   000008   49           ORL     A,R1
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   90....       MOV     DPTR,#selectedTarget + 32
   \   000004   12....       LCALL   ??Subroutine41_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_90:
   \   000007   7403         MOV     A,#0x3
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004   F0           MOVX    @DPTR,A
   \   000005   90....       MOV     DPTR,#selectedTarget + 34
   \   000008   12....       LCALL   ??Subroutine41_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_89:
   \   00000B   7405         MOV     A,#0x5
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002                REQUIRE ??Subroutine37_0
   \   000002                ; // Fall through to label ??Subroutine37_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine37_0:
   \   000000   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   000003   F5..         MOV     ?V0 + 0,A
   \   000005   78..         MOV     R0,#?V0 + 0
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine31:
   \   000000   90....       MOV     DPTR,#_NIB + 33
   \   000003                REQUIRE ??Subroutine41_0
   \   000003                ; // Fall through to label ??Subroutine41_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002   A3           INC     DPTR
   \   000003   A3           INC     DPTR
   \   000004                REQUIRE ??Subroutine42_0
   \   000004                ; // Fall through to label ??Subroutine42_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine26:
   \   000000   C3           CLR     C
   \   000001   94D9         SUBB    A,#-0x27
   \   000003   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000005   65D0         XRL     A,PSW
   \   000007   33           RLC     A
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   85..82       MOV     DPL,?XSP + 0
   \   000003   85..83       MOV     DPH,?XSP + 1
   \   000006   AA82         MOV     R2,DPL
   \   000008   AB83         MOV     R3,DPH
   \   00000A   90....       MOV     DPTR,#pfnNotifyAppCB + 1
   \   00000D                REQUIRE ??Subroutine43_0
   \   00000D                ; // Fall through to label ??Subroutine43_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine30:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_107:
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine32:
   \   000000   90....       MOV     DPTR,#initiatorSeqNum
   \   000003                REQUIRE ??Subroutine45_0
   \   000003                ; // Fall through to label ??Subroutine45_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine45_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   7401         MOV     A,#0x1
   \   000004   28           ADD     A,R0
   \   000005   F0           MOVX    @DPTR,A
   \   000006                ; Setup parameters for call to function zclLL_Send_IndentifyReq
   \   000006                ; Setup parameters for call to function zclLL_Send_IndentifyReq
   \   000006                ; Setup parameters for call to function zclLL_Send_NwkStartReq
   \   000006                ; Setup parameters for call to function zclLL_Send_NwkUpdateReq
   \   000006                ; Setup parameters for call to function zclLL_Send_DeviceInfoReq
   \   000006                ; Setup parameters for call to function zclLL_Send_ScanReq
   \   000006                ; Setup parameters for call to function zclLL_Send_ResetToFNReq
   \   000006                ; Setup parameters for call to function zclLL_Send_NwkJoinReq
   \   000006                ; Setup parameters for call to function zclLL_Send_NwkJoinReq
   \   000006   E8           MOV     A,R0
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F5..         MOV     ?V0 + 0,A
   \   000003   78..         MOV     R0,#?V0 + 0
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine46_0:
   \   000000   90....       MOV     DPTR,#_NIB + 20
   \   000003                REQUIRE ??Subroutine47_0
   \   000003                ; // Fall through to label ??Subroutine47_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine47_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FB           MOV     R3,A
   \   000005   22           RET
   1006          
   1007          /*********************************************************************
   1008           * @fn      initiatorJoinNwk
   1009           *
   1010           * @brief   Initiate a network join request.
   1011           *
   1012           * @param   void
   1013           *
   1014           * @return  void
   1015           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1016          static void initiatorJoinNwk( void )
   \                     initiatorJoinNwk:
   1017          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1018            // Save free ranges
   1019            zll_UpdateNV( ZLL_UPDATE_NV_RANGES );
   \   000004                ; Setup parameters for call to function zll_UpdateNV
   \   000004   7902         MOV     R1,#0x2
   \   000006   12....       LCALL   ??zll_UpdateNV?relay
   1020          
   1021            // In case we're here after a leave
   1022            zllLeaveInitiated = FALSE;
   \   000009   90....       MOV     DPTR,#zllLeaveInitiated
   \   00000C   E4           CLR     A
   \   00000D   F0           MOVX    @DPTR,A
   1023          
   1024            // Clear leave control logic
   1025            ZDApp_LeaveCtrlReset();
   \   00000E                ; Setup parameters for call to function ZDApp_LeaveCtrlReset
   \   00000E   12....       LCALL   ??ZDApp_LeaveCtrlReset?relay
   1026          
   1027            if ( POLL_RATE == 0 )
   1028            {
   1029              //allow to respond to ZLL commission utility commands after TL
   1030              NLME_SetPollRate( ZLL_INITIATOR_TEMP_POST_TL_POLL_RATE );
   1031              //polling should reset when TL life time expires
   1032            }
   1033          
   1034          #if ( ZSTACK_ROUTER_BUILD )
   1035            zllInitiator_PermitJoin( 0 );
   \   000011                ; Setup parameters for call to function zll_PermitJoin
   \   000011   7900         MOV     R1,#0x0
   \   000013   12....       LCALL   ??zll_PermitJoin?relay
   1036            ZDOInitDevice( 0 );
   \   000016                ; Setup parameters for call to function ZDOInitDevice
   \   000016   7A00         MOV     R2,#0x0
   \   000018   7B00         MOV     R3,#0x0
   \   00001A   12....       LCALL   ??ZDOInitDevice?relay
   1037          #else
   1038            // Perform a network rejoin request
   1039            initiatorReJoinNwk( MODE_REJOIN );
   1040          #endif
   1041          }
   \   00001D   02....       LJMP    ??Subroutine35_0 & 0xFFFF
   1042          
   1043          /*********************************************************************
   1044           * @fn      initiatorClearSelectedTarget
   1045           *
   1046           * @brief   clear selected target variable.
   1047           *
   1048           * @param   none
   1049           *
   1050           * @return  none
   1051           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1052          static void initiatorClearSelectedTarget( void )
   \                     initiatorClearSelectedTarget:
   1053          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1054            osal_memset( &selectedTarget, 0x00, sizeof(targetCandidate_t) );
   \   000004                ; Setup parameters for call to function osal_memset
   \   000004   7C36         MOV     R4,#0x36
   \   000006   7D00         MOV     R5,#0x0
   \   000008   7900         MOV     R1,#0x0
   \   00000A   7A..         MOV     R2,#selectedTarget & 0xff
   \   00000C   7B..         MOV     R3,#(selectedTarget >> 8) & 0xff
   \   00000E   12....       LCALL   ??osal_memset?relay
   1055            selectedTarget.lastRssi = ZLL_TL_WORST_RSSI;
   \   000011   90....       MOV     DPTR,#selectedTarget + 53
   \   000014   74D8         MOV     A,#-0x28
   \   000016   02....       LJMP    ??Subroutine34_0 & 0xFFFF
   1056          }
   1057          
   1058          /*********************************************************************
   1059           * @fn      initiatorSelectNwkParams
   1060           *
   1061           * @brief   Select a unique PAN ID and Extended PAN ID when compared to
   1062           *          the PAN IDs and Extended PAN IDs of the networks detected
   1063           *          on the ZLL channels. The selected Extended PAN ID must be
   1064           *          a random number (and not equal to our IEEE address).
   1065           *
   1066           * @param   void
   1067           *
   1068           * @return  void
   1069           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1070          void initiatorSelectNwkParams( void )
   \                     initiatorSelectNwkParams:
   1071          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   1072            // Set our group ID range
   1073            zll_PopGrpIDRange( zll_GetNumGrpIDs(), &zllGrpIDsBegin, &zllGrpIDsEnd );
   \   000005                ; Setup parameters for call to function zll_PopGrpIDRange
   \   000005   7A..         MOV     R2,#zllGrpIDsBegin & 0xff
   \   000007   7B..         MOV     R3,#(zllGrpIDsBegin >> 8) & 0xff
   \   000009   EA           MOV     A,R2
   \   00000A   C0E0         PUSH    A
   \   00000C   EB           MOV     A,R3
   \   00000D   C0E0         PUSH    A
   \   00000F                ; Setup parameters for call to function zll_GetNumGrpIDs
   \   00000F   12....       LCALL   ??zll_GetNumGrpIDs?relay
   \   000012   7C..         MOV     R4,#zllGrpIDsEnd & 0xff
   \   000014   74..         MOV     A,#(zllGrpIDsEnd >> 8) & 0xff
   \   000016   FD           MOV     R5,A
   \   000017   D0E0         POP     A
   \   000019   FB           MOV     R3,A
   \   00001A   D0E0         POP     A
   \   00001C   FA           MOV     R2,A
   \   00001D   12....       LCALL   ??zll_PopGrpIDRange?relay
   1074          
   1075            // Select a random Extended PAN ID
   1076            zll_GenerateRandNum( _NIB.extendedPANID, Z_EXTADDR_LEN );
   \   000020                ; Setup parameters for call to function zll_GenerateRandNum
   \   000020   7908         MOV     R1,#0x8
   \   000022   7A..         MOV     R2,#(_NIB + 53) & 0xff
   \   000024   7B..         MOV     R3,#((_NIB + 53) >> 8) & 0xff
   \   000026   12....       LCALL   ??zll_GenerateRandNum?relay
   1077          
   1078            // Select a random PAN ID
   1079            _NIB.nwkPanId = osal_rand();
   \   000029                ; Setup parameters for call to function osal_rand
   \   000029   12....       LCALL   ??osal_rand?relay
   \   00002C   90....       MOV     DPTR,#_NIB + 33
   \   00002F   EA           MOV     A,R2
   \   000030   F0           MOVX    @DPTR,A
   \   000031   A3           INC     DPTR
   \   000032   EB           MOV     A,R3
   \   000033   F0           MOVX    @DPTR,A
   1080          
   1081            // Select a random ZLL channel
   1082            _NIB.nwkLogicalChannel = zll_GetRandPrimaryChannel();
   \   000034                ; Setup parameters for call to function zll_GetRandPrimaryChannel
   \   000034   12....       LCALL   ??zll_GetRandPrimaryChannel?relay
   \   000037   E9           MOV     A,R1
   \   000038   90....       MOV     DPTR,#_NIB + 22
   \   00003B   F0           MOVX    @DPTR,A
   1083          
   1084            if ( devState != DEV_INIT ) // exclude in case of fresh FN ZED without HOLD_AUTO_START
   \   00003C   90....       MOV     DPTR,#devState
   \   00003F   E0           MOVX    A,@DPTR
   \   000040   6401         XRL     A,#0x1
   \   000042   600B         JZ      ??initiatorSelectNwkParams_0
   1085            {
   1086              // Let's assume we're the first initiator
   1087              _NIB.nwkDevAddress = zll_PopNwkAddress();
   \   000044                ; Setup parameters for call to function zll_PopNwkAddress
   \   000044   12....       LCALL   ??zll_PopNwkAddress?relay
   \   000047   90....       MOV     DPTR,#_NIB + 20
   \   00004A   EA           MOV     A,R2
   \   00004B   F0           MOVX    @DPTR,A
   \   00004C   A3           INC     DPTR
   \   00004D   EB           MOV     A,R3
   \   00004E   F0           MOVX    @DPTR,A
   1088            }
   1089          
   1090            // Configure MAC with our network parameters
   1091            zll_SetMacNwkParams( _NIB.nwkDevAddress, _NIB.nwkPanId, _NIB.nwkLogicalChannel );
   \                     ??initiatorSelectNwkParams_0:
   \   00004F                ; Setup parameters for call to function zll_SetMacNwkParams
   \   00004F   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_115:
   \   000052   12....       LCALL   ??zll_SetMacNwkParams?relay
   1092          }
   \   000055   02....       LJMP    ?Subroutine2 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   90....       MOV     DPTR,#_NIB + 22
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   90....       MOV     DPTR,#_NIB + 33
   \   000008   E0           MOVX    A,@DPTR
   \   000009   FC           MOV     R4,A
   \   00000A   A3           INC     DPTR
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   FD           MOV     R5,A
   \   00000D                REQUIRE ??Subroutine46_0
   \   00000D                ; // Fall through to label ??Subroutine46_0
   1093          
   1094          /*********************************************************************
   1095           * @fn      initiatorSetNwkToInitState
   1096           *
   1097           * @brief   Set our network state to its original state.
   1098           *
   1099           * @param   void
   1100           *
   1101           * @return  void
   1102           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1103          static void initiatorSetNwkToInitState()
   \                     initiatorSetNwkToInitState:
   1104          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1105            // Turn MAC receiver back to its old state
   1106            ZMacSetReq( ZMacRxOnIdle, &savedRxOnIdle );
   \   000004                ; Setup parameters for call to function ZMacSetReq
   \   000004   7A..         MOV     R2,#savedRxOnIdle & 0xff
   \   000006   7B..         MOV     R3,#(savedRxOnIdle >> 8) & 0xff
   \   000008   7952         MOV     R1,#0x52
   \   00000A   12....       LCALL   ??ZMacSetReq?relay
   1107          
   1108            // Tune back to our channel
   1109            zll_SetChannel( _NIB.nwkLogicalChannel );
   \   00000D                ; Setup parameters for call to function zll_SetChannel
   \   00000D   90....       MOV     DPTR,#_NIB + 22
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F9           MOV     R1,A
   \   000012   12....       LCALL   ??zll_SetChannel?relay
   1110          
   1111            // Set NWK task to run
   1112            nwk_setStateIdle( FALSE );
   \   000015                ; Setup parameters for call to function nwk_setStateIdle
   \   000015   7900         MOV     R1,#0x0
   \   000017   12....       LCALL   ??nwk_setStateIdle?relay
   1113          
   1114            if ( savedPollRate != zgPollRate )
   \   00001A   90....       MOV     DPTR,#savedPollRate
   \   00001D   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_78:
   \   000020   90....       MOV     DPTR,#zgPollRate
   \   000023   E0           MOVX    A,@DPTR
   \   000024   68           XRL     A,R0
   \   000025   7003         JNZ     ??initiatorSetNwkToInitState_0
   \   000027   A3           INC     DPTR
   \   000028   E0           MOVX    A,@DPTR
   \   000029   69           XRL     A,R1
   \                     ??initiatorSetNwkToInitState_0:
   \   00002A   6013         JZ      ??initiatorSetNwkToInitState_1
   1115            {
   1116              NLME_SetPollRate( savedPollRate );
   \   00002C                ; Setup parameters for call to function NLME_SetPollRate
   \   00002C   90....       MOV     DPTR,#savedPollRate
   \   00002F   12....       LCALL   ??Subroutine47_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_109:
   \   000032   12....       LCALL   ??NLME_SetPollRate?relay
   1117              savedPollRate = POLL_RATE;
   \   000035   90....       MOV     DPTR,#savedPollRate
   \   000038   74E8         MOV     A,#-0x18
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   7403         MOV     A,#0x3
   \   00003E   F0           MOVX    @DPTR,A
   1118            }
   1119          
   1120            if ( savedQueuedPollRate != zgQueuedPollRate )
   \                     ??initiatorSetNwkToInitState_1:
   \   00003F   90....       MOV     DPTR,#savedQueuedPollRate
   \   000042   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_79:
   \   000045   90....       MOV     DPTR,#zgQueuedPollRate
   \   000048   E0           MOVX    A,@DPTR
   \   000049   68           XRL     A,R0
   \   00004A   7003         JNZ     ??initiatorSetNwkToInitState_2
   \   00004C   A3           INC     DPTR
   \   00004D   E0           MOVX    A,@DPTR
   \   00004E   69           XRL     A,R1
   \                     ??initiatorSetNwkToInitState_2:
   \   00004F   6012         JZ      ??initiatorSetNwkToInitState_3
   1121            {
   1122              NLME_SetQueuedPollRate( savedQueuedPollRate );
   \   000051                ; Setup parameters for call to function NLME_SetQueuedPollRate
   \   000051   90....       MOV     DPTR,#savedQueuedPollRate
   \   000054   12....       LCALL   ??Subroutine47_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_110:
   \   000057   12....       LCALL   ??NLME_SetQueuedPollRate?relay
   1123              savedQueuedPollRate = QUEUED_POLL_RATE;
   \   00005A   90....       MOV     DPTR,#savedQueuedPollRate
   \   00005D   7464         MOV     A,#0x64
   \   00005F   F0           MOVX    @DPTR,A
   \   000060   A3           INC     DPTR
   \   000061   E4           CLR     A
   \   000062   F0           MOVX    @DPTR,A
   1124            }
   1125          
   1126            if ( savedResponsePollRate != zgResponsePollRate )
   \                     ??initiatorSetNwkToInitState_3:
   \   000063   90....       MOV     DPTR,#savedResponsePollRate
   \   000066   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_80:
   \   000069   90....       MOV     DPTR,#zgResponsePollRate
   \   00006C   E0           MOVX    A,@DPTR
   \   00006D   68           XRL     A,R0
   \   00006E   7003         JNZ     ??initiatorSetNwkToInitState_4
   \   000070   A3           INC     DPTR
   \   000071   E0           MOVX    A,@DPTR
   \   000072   69           XRL     A,R1
   \                     ??initiatorSetNwkToInitState_4:
   \   000073   6012         JZ      ??initiatorSetNwkToInitState_5
   1127            {
   1128              NLME_SetResponseRate( savedResponsePollRate );
   \   000075                ; Setup parameters for call to function NLME_SetResponseRate
   \   000075   90....       MOV     DPTR,#savedResponsePollRate
   \   000078   12....       LCALL   ??Subroutine47_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_111:
   \   00007B   12....       LCALL   ??NLME_SetResponseRate?relay
   1129              savedResponsePollRate = RESPONSE_POLL_RATE;
   \   00007E   90....       MOV     DPTR,#savedResponsePollRate
   \   000081   7464         MOV     A,#0x64
   \   000083   F0           MOVX    @DPTR,A
   \   000084   A3           INC     DPTR
   \   000085   E4           CLR     A
   \   000086   F0           MOVX    @DPTR,A
   1130            }
   1131          }
   \                     ??initiatorSetNwkToInitState_5:
   \   000087   02....       LJMP    ??Subroutine35_0 & 0xFFFF
   1132          
   1133          /*********************************************************************
   1134           * @fn      initiatorSendScanReq
   1135           *
   1136           * @brief   Send out an Scan Request command on one of the ZLL channels.
   1137           *
   1138           * @param   freshScan - TRUE to start fresh scan, FALSE to resume existing process.
   1139           *
   1140           * @return  void
   1141           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1142          static void initiatorSendScanReq( bool freshScan )
   \                     initiatorSendScanReq:
   1143          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 20
   \   000005   74EC         MOV     A,#-0x14
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
   1144            zclLLScanReq_t req;
   1145            uint8 newChannel;
   1146            uint8 secondaryChList[] = ZLL_SECONDARY_CHANNELS_SET;
   \   00000C   7408         MOV     A,#0x8
   \   00000E   12....       LCALL   ?XSTACK_DISP0_8
   \   000011   AC82         MOV     R4,DPL
   \   000013   AD83         MOV     R5,DPH
   \   000015   7583..       MOV     DPH,#(`?<Constant {12, 13, 14, 16, 17, 18, 19, 21, 22` >> 8) & 0xff
   \   000018   7582..       MOV     DPL,#`?<Constant {12, 13, 14, 16, 17, 18, 19, 21, 22` & 0xff
   \   00001B   740C         MOV     A,#0xc
   \   00001D   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1147            static uint8 channelIndex = 0;
   1148          
   1149            if ( freshScan )
   \   000020   EE           MOV     A,R6
   \   000021   6005         JZ      ??initiatorSendScanReq_0
   1150            {
   1151              channelIndex = 0;
   \   000023   90....       MOV     DPTR,#??channelIndex
   \   000026   E4           CLR     A
   \   000027   F0           MOVX    @DPTR,A
   1152            }
   1153          
   1154            // First figure out the channel
   1155            if ( scanReqChannels == ZLL_SCAN_PRIMARY_CHANNELS )
   \                     ??initiatorSendScanReq_0:
   \   000028   90....       MOV     DPTR,#scanReqChannels
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   6401         XRL     A,#0x1
   \   00002E   6003         JZ      $+5
   \   000030   02....       LJMP    ??initiatorSendScanReq_1 & 0xFFFF
   1156            {
   1157              if ( numScanReqSent < 5 )
   \   000033   90....       MOV     DPTR,#numScanReqSent
   \   000036   E0           MOVX    A,@DPTR
   \   000037   C3           CLR     C
   \   000038   9405         SUBB    A,#0x5
   \   00003A   4003         JC      $+5
   \   00003C   02....       LJMP    ??initiatorSendScanReq_2 & 0xFFFF
   1158              {
   1159                // First five consecutive requests are sent on channel 11
   1160                newChannel = ZLL_FIRST_CHANNEL;
   \   00003F   7F0B         MOV     R7,#0xb
   1161              }
   1162              else if ( numScanReqSent == 5 )
   1163              {
   1164                // Sixth request is sent on channel 15
   1165                newChannel = ZLL_SECOND_CHANNEL;
   1166              }
   1167              else if ( numScanReqSent == 6 )
   1168              {
   1169                // Seventh request is sent on channel 20
   1170                newChannel = ZLL_THIRD_CHANNEL;
   1171              }
   1172              else
   1173              {
   1174                // Last request is sent on channel 25
   1175                newChannel = ZLL_FOURTH_CHANNEL;
   1176              }
   1177            }
   1178            else
   1179            {
   1180              // scan secondary channel list
   1181              if ( channelIndex < sizeof(secondaryChList) )
   1182              {
   1183                 newChannel = secondaryChList[channelIndex++];
   1184              }
   1185              else
   1186              {
   1187                // set it to initial value for next discovery process
   1188                channelIndex = 0;
   1189                return;
   1190              }
   1191            }
   1192          
   1193            if ( zllTransID != 0 )
   \                     ??initiatorSendScanReq_3:
   \   000041   90....       MOV     DPTR,#zllTransID
   \   000044   78..         MOV     R0,#?V0 + 0
   \   000046   12....       LCALL   ?L_MOV_X
   \   000049   E5..         MOV     A,?V0 + 0
   \   00004B   45..         ORL     A,?V0 + 1
   \   00004D   45..         ORL     A,?V0 + 2
   \   00004F   45..         ORL     A,?V0 + 3
   \   000051   7003         JNZ     $+5
   \   000053   02....       LJMP    ??initiatorSendScanReq_4 & 0xFFFF
   1194            {
   1195              // Build the request
   1196              req.transID = zllTransID;
   \   000056   90....       MOV     DPTR,#zllTransID
   \   000059   12....       LCALL   ?XLOAD_R2345
   \   00005C   85..82       MOV     DPL,?XSP + 0
   \   00005F   85..83       MOV     DPH,?XSP + 1
   \   000062   12....       LCALL   ?XSTORE_R2345
   1197          
   1198              req.zInfo.zInfoByte = 0;
   \   000065   7404         MOV     A,#0x4
   \   000067   12....       LCALL   ?XSTACK_DISP0_8
   \   00006A   E4           CLR     A
   \   00006B   F0           MOVX    @DPTR,A
   1199              req.zLogicalType = zgDeviceLogicalType;
   \   00006C   A3           INC     DPTR
   \   00006D   E0           MOVX    A,@DPTR
   \   00006E   F9           MOV     R1,A
   \   00006F   90....       MOV     DPTR,#zgDeviceLogicalType
   \   000072   E0           MOVX    A,@DPTR
   \   000073   5403         ANL     A,#0x3
   \   000075   F8           MOV     R0,A
   \   000076   7404         MOV     A,#0x4
   \   000078   12....       LCALL   ?XSTACK_DISP0_8
   \   00007B   12....       LCALL   ??Subroutine39_0 & 0xFFFF
   1200              if ( ZDO_Config_Node_Descriptor.CapabilityFlags & CAPINFO_RCVR_ON_IDLE )
   \                     ??CrossCallReturnLabel_58:
   \   00007E   90....       MOV     DPTR,#ZDO_Config_Node_Descriptor + 2
   \   000081   E0           MOVX    A,@DPTR
   \   000082   A2E3         MOV     C,0xE0 /* A   */.3
   \   000084   5009         JNC     ??initiatorSendScanReq_5
   1201              {
   1202                req.zRxOnWhenIdle = TRUE;
   \   000086   7404         MOV     A,#0x4
   \   000088   12....       LCALL   ?XSTACK_DISP0_8
   \   00008B   E0           MOVX    A,@DPTR
   \   00008C   4404         ORL     A,#0x4
   \   00008E   F0           MOVX    @DPTR,A
   1203              }
   1204          
   1205              req.zllInfo.zllInfoByte = 0;
   \                     ??initiatorSendScanReq_5:
   \   00008F   7406         MOV     A,#0x6
   \   000091   12....       LCALL   ?XSTACK_DISP0_8
   \   000094   E4           CLR     A
   \   000095   F0           MOVX    @DPTR,A
   1206              req.zllFactoryNew = zll_IsFactoryNew();
   \   000096                ; Setup parameters for call to function zll_IsFactoryNew
   \   000096   12....       LCALL   ??zll_IsFactoryNew?relay
   \   000099   E9           MOV     A,R1
   \   00009A   FA           MOV     R2,A
   1207              req.zllAddressAssignment = TRUE;
   1208              req.zllLinkInitiator = TRUE;
   \   00009B   7406         MOV     A,#0x6
   \   00009D   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A0   E0           MOVX    A,@DPTR
   \   0000A1   54FE         ANL     A,#0xfe
   \   0000A3   F8           MOV     R0,A
   \   0000A4   A3           INC     DPTR
   \   0000A5   E0           MOVX    A,@DPTR
   \   0000A6   F9           MOV     R1,A
   \   0000A7   EA           MOV     A,R2
   \   0000A8   A2E0         MOV     C,0xE0 /* A   */.0
   \   0000AA   E4           CLR     A
   \   0000AB   33           RLC     A
   \   0000AC   FA           MOV     R2,A
   \   0000AD   E8           MOV     A,R0
   \   0000AE   4A           ORL     A,R2
   \   0000AF   4412         ORL     A,#0x12
   \   0000B1   F8           MOV     R0,A
   \   0000B2   7406         MOV     A,#0x6
   \   0000B4   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B7   12....       LCALL   ??Subroutine39_0 & 0xFFFF
   1209          
   1210              // First switch to the right channel
   1211              zll_SetChannel( newChannel );
   \                     ??CrossCallReturnLabel_59:
   \   0000BA                ; Setup parameters for call to function zll_SetChannel
   \   0000BA   EF           MOV     A,R7
   \   0000BB   F9           MOV     R1,A
   \   0000BC   12....       LCALL   ??zll_SetChannel?relay
   1212          
   1213              // Broadcast the request
   1214              zclLL_Send_ScanReq( ZLL_INTERNAL_ENDPOINT, &bcastAddr, &req, initiatorSeqNum++ );
   \   0000BF   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_21:
   \   0000C2   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000C5   7401         MOV     A,#0x1
   \   0000C7   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CA   AC82         MOV     R4,DPL
   \   0000CC   AD83         MOV     R5,DPH
   \   0000CE   7A..         MOV     R2,#bcastAddr & 0xff
   \   0000D0   7B..         MOV     R3,#(bcastAddr >> 8) & 0xff
   \   0000D2   790D         MOV     R1,#0xd
   \   0000D4   12....       LCALL   ??zclLL_Send_ScanReq?relay
   \   0000D7   7401         MOV     A,#0x1
   \   0000D9   12....       LCALL   ?DEALLOC_XSTACK8
   1215          
   1216              numScanReqSent++;
   \   0000DC   90....       MOV     DPTR,#numScanReqSent
   \   0000DF   E0           MOVX    A,@DPTR
   \   0000E0   04           INC     A
   \   0000E1   F0           MOVX    @DPTR,A
   1217          
   1218              // After each transmission, wait ZLL_APLC_SCAN_TIME_BASE_DURATION seconds
   1219              // to receive any responses.
   1220              osal_start_timerEx( zllInitiator_TaskID, ZLL_TL_SCAN_BASE_EVT, ZLL_APLC_SCAN_TIME_BASE_DURATION );
   \   0000E2                ; Setup parameters for call to function osal_start_timerEx
   \   0000E2   90....       MOV     DPTR,#__Constant_fa
   \   0000E5   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0000E8   7A40         MOV     R2,#0x40
   \   0000EA   7B00         MOV     R3,#0x0
   \   0000EC   90....       MOV     DPTR,#zllInitiator_TaskID
   \   0000EF   E0           MOVX    A,@DPTR
   \   0000F0   F9           MOV     R1,A
   \   0000F1   12....       LCALL   ??osal_start_timerEx?relay
   \   0000F4   7404         MOV     A,#0x4
   \   0000F6   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000F9   8044         SJMP    ??initiatorSendScanReq_6
   1221            }
   \                     ??initiatorSendScanReq_2:
   \   0000FB   E0           MOVX    A,@DPTR
   \   0000FC   6405         XRL     A,#0x5
   \   0000FE   7005         JNZ     ??initiatorSendScanReq_7
   \   000100   7F0F         MOV     R7,#0xf
   \   000102   02....       LJMP    ??initiatorSendScanReq_3 & 0xFFFF
   \                     ??initiatorSendScanReq_7:
   \   000105   E0           MOVX    A,@DPTR
   \   000106   6406         XRL     A,#0x6
   \   000108   7005         JNZ     ??initiatorSendScanReq_8
   \   00010A   7F14         MOV     R7,#0x14
   \   00010C   02....       LJMP    ??initiatorSendScanReq_3 & 0xFFFF
   \                     ??initiatorSendScanReq_8:
   \   00010F   7F19         MOV     R7,#0x19
   \   000111   02....       LJMP    ??initiatorSendScanReq_3 & 0xFFFF
   \                     ??initiatorSendScanReq_1:
   \   000114   90....       MOV     DPTR,#??channelIndex
   \   000117   E0           MOVX    A,@DPTR
   \   000118   C3           CLR     C
   \   000119   940C         SUBB    A,#0xc
   \   00011B   501B         JNC     ??initiatorSendScanReq_9
   \   00011D   E0           MOVX    A,@DPTR
   \   00011E   F8           MOV     R0,A
   \   00011F   7408         MOV     A,#0x8
   \   000121   12....       LCALL   ?XSTACK_DISP0_8
   \   000124   E582         MOV     A,DPL
   \   000126   28           ADD     A,R0
   \   000127   F582         MOV     DPL,A
   \   000129   E583         MOV     A,DPH
   \   00012B   12....       LCALL   ??Subroutine40_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_68:
   \   00012E   FF           MOV     R7,A
   \   00012F   90....       MOV     DPTR,#??channelIndex
   \   000132   E0           MOVX    A,@DPTR
   \   000133   04           INC     A
   \   000134   F0           MOVX    @DPTR,A
   \   000135   02....       LJMP    ??initiatorSendScanReq_3 & 0xFFFF
   \                     ??initiatorSendScanReq_9:
   \   000138   E4           CLR     A
   \   000139   F0           MOVX    @DPTR,A
   \   00013A   8003         SJMP    ??initiatorSendScanReq_6
   1222            else
   1223            {
   1224              zllInitiator_AbortTL();
   \                     ??initiatorSendScanReq_4:
   \   00013C                ; Setup parameters for call to function zllInitiator_AbortTL
   \   00013C   12....       LCALL   ??zllInitiator_AbortTL?relay
   \                     ??initiatorSendScanReq_6:
   \   00013F   7414         MOV     A,#0x14
   1225            }
   \   000141                REQUIRE ?Subroutine3
   \   000141                ; // Fall through to label ?Subroutine3
   1226          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F04         MOV     R7,#0x4
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine40_0:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F583         MOV     DPH,A
   \   000004   E0           MOVX    A,@DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_106:
   \   000003   F5..         MOV     ?V0 + 0,A
   \   000005   78..         MOV     R0,#?V0 + 0
   \   000007   22           RET

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ??channelIndex:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
   1227          
   1228          /*********************************************************************
   1229           * @fn      initiatorSendNwkStartReq
   1230           *
   1231           * @brief   Send out a Network Start Request command.
   1232           *
   1233           * @param   pRsp - received Scan Response
   1234           *
   1235           * @return  ZStatus_t
   1236           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1237          static ZStatus_t initiatorSendNwkStartReq( zclLLScanRsp_t *pRsp )
   \                     initiatorSendNwkStartReq:
   1238          {
   \   000000   74EC         MOV     A,#-0x14
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 20
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 4,R2
   \   000007   8B..         MOV     ?V0 + 5,R3
   1239            zclLLNwkStartReq_t *pReq;
   1240            ZStatus_t status;
   1241          
   1242            pReq = (zclLLNwkStartReq_t *)osal_mem_alloc( sizeof( zclLLNwkStartReq_t ) );
   \   000009                ; Setup parameters for call to function osal_mem_alloc
   \   000009   7A38         MOV     R2,#0x38
   \   00000B   7B00         MOV     R3,#0x0
   \   00000D   12....       LCALL   ??osal_mem_alloc?relay
   \   000010   8A..         MOV     ?V0 + 2,R2
   \   000012   8B..         MOV     ?V0 + 3,R3
   1243            if ( pReq != NULL )
   \   000014   EA           MOV     A,R2
   \   000015   45..         ORL     A,?V0 + 3
   \   000017   7003         JNZ     $+5
   \   000019   02....       LJMP    ??initiatorSendNwkStartReq_0 & 0xFFFF
   1244            {
   1245              uint16 i;
   1246              zclLLNwkParams_t *pParams = &(pReq->nwkParams);
   \   00001C   EA           MOV     A,R2
   \   00001D   2404         ADD     A,#0x4
   \   00001F   F5..         MOV     ?V0 + 0,A
   \   000021   EB           MOV     A,R3
   \   000022   3400         ADDC    A,#0x0
   \   000024   F5..         MOV     ?V0 + 1,A
   1247          
   1248              osal_memset( pReq, 0, sizeof( zclLLNwkStartReq_t ) );
   \   000026                ; Setup parameters for call to function osal_memset
   \   000026   7C38         MOV     R4,#0x38
   \   000028   7D00         MOV     R5,#0x0
   \   00002A   7900         MOV     R1,#0x0
   \   00002C   12....       LCALL   ??osal_memset?relay
   1249          
   1250              // Build the request
   1251              pReq->transID = selectedTarget.scanRsp.transID;
   \   00002F   90....       MOV     DPTR,#selectedTarget
   \   000032   12....       LCALL   ?XLOAD_R2345
   \   000035   85..82       MOV     DPL,?V0 + 2
   \   000038   85..83       MOV     DPH,?V0 + 3
   \   00003B   12....       LCALL   ?XSTORE_R2345
   1252          
   1253              // Find out key index (prefer highest)
   1254              for ( i = 15; i > 0; i-- )
   \   00003E   7E0F         MOV     R6,#0xf
   \   000040   7F00         MOV     R7,#0x0
   1255              {
   1256                if ( ( (uint16)1 << i ) & pRsp->keyBitmask )
   \                     ??initiatorSendNwkStartReq_1:
   \   000042   75..01       MOV     ?V0 + 6,#0x1
   \   000045   75..00       MOV     ?V0 + 7,#0x0
   \   000048   EE           MOV     A,R6
   \   000049   78..         MOV     R0,#?V0 + 6
   \   00004B   12....       LCALL   ?S_SHL
   \   00004E   85..82       MOV     DPL,?V0 + 4
   \   000051   85..83       MOV     DPH,?V0 + 5
   \   000054   A3           INC     DPTR
   \   000055   A3           INC     DPTR
   \   000056   A3           INC     DPTR
   \   000057   A3           INC     DPTR
   \   000058   A3           INC     DPTR
   \   000059   A3           INC     DPTR
   \   00005A   A3           INC     DPTR
   \   00005B   A3           INC     DPTR
   \   00005C   A3           INC     DPTR
   \   00005D   E0           MOVX    A,@DPTR
   \   00005E   55..         ANL     A,?V0 + 6
   \   000060   F8           MOV     R0,A
   \   000061   A3           INC     DPTR
   \   000062   E0           MOVX    A,@DPTR
   \   000063   55..         ANL     A,?V0 + 7
   \   000065   F9           MOV     R1,A
   \   000066   E8           MOV     A,R0
   \   000067   49           ORL     A,R1
   \   000068   700C         JNZ     ??initiatorSendNwkStartReq_2
   1257                {
   1258                  break;
   1259                }
   1260              }
   \   00006A   EE           MOV     A,R6
   \   00006B   24FF         ADD     A,#-0x1
   \   00006D   1E           DEC     R6
   \   00006E   EF           MOV     A,R7
   \   00006F   34FF         ADDC    A,#-0x1
   \   000071   FF           MOV     R7,A
   \   000072   EE           MOV     A,R6
   \   000073   4F           ORL     A,R7
   \   000074   70CC         JNZ     ??initiatorSendNwkStartReq_1
   1261              pParams->keyIndex = i;
   \                     ??initiatorSendNwkStartReq_2:
   \   000076   EE           MOV     A,R6
   \   000077   85..82       MOV     DPL,?V0 + 0
   \   00007A   85..83       MOV     DPH,?V0 + 1
   \   00007D   A3           INC     DPTR
   \   00007E   A3           INC     DPTR
   \   00007F   A3           INC     DPTR
   \   000080   A3           INC     DPTR
   \   000081   A3           INC     DPTR
   \   000082   A3           INC     DPTR
   \   000083   A3           INC     DPTR
   \   000084   A3           INC     DPTR
   \   000085   F0           MOVX    @DPTR,A
   1262          
   1263              // Copy in the encrypted network key
   1264              zll_EncryptNwkKey( pParams->nwkKey, i, pRsp->transID, pRsp->responseID );
   \   000086   E5..         MOV     A,?V0 + 0
   \   000088   2409         ADD     A,#0x9
   \   00008A   F5..         MOV     ?V0 + 8,A
   \   00008C   E5..         MOV     A,?V0 + 1
   \   00008E   3400         ADDC    A,#0x0
   \   000090   F5..         MOV     ?V0 + 9,A
   \   000092   E5..         MOV     A,?V0 + 4
   \   000094   240B         ADD     A,#0xb
   \   000096   F5..         MOV     ?V0 + 10,A
   \   000098   E5..         MOV     A,?V0 + 5
   \   00009A   3400         ADDC    A,#0x0
   \   00009C   F5..         MOV     ?V0 + 11,A
   \   00009E                ; Setup parameters for call to function zll_EncryptNwkKey
   \   00009E   85..82       MOV     DPL,?V0 + 10
   \   0000A1   F583         MOV     DPH,A
   \   0000A3   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0000A6   85..82       MOV     DPL,?V0 + 4
   \   0000A9   85..83       MOV     DPH,?V0 + 5
   \   0000AC   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0000AF   EE           MOV     A,R6
   \   0000B0   F9           MOV     R1,A
   \   0000B1   AA..         MOV     R2,?V0 + 8
   \   0000B3   AB..         MOV     R3,?V0 + 9
   \   0000B5   12....       LCALL   ??zll_EncryptNwkKey?relay
   \   0000B8   7408         MOV     A,#0x8
   \   0000BA   12....       LCALL   ?DEALLOC_XSTACK8
   1265          
   1266              pParams->nwkAddr = zll_PopNwkAddress();
   \   0000BD                ; Setup parameters for call to function zll_PopNwkAddress
   \   0000BD   12....       LCALL   ??zll_PopNwkAddress?relay
   \   0000C0   8A..         MOV     ?V0 + 6,R2
   \   0000C2   8B..         MOV     ?V0 + 7,R3
   \   0000C4   A8..         MOV     R0,?V0 + 6
   \   0000C6   A9..         MOV     R1,?V0 + 7
   \   0000C8   E5..         MOV     A,?V0 + 0
   \   0000CA   241C         ADD     A,#0x1c
   \   0000CC   F5..         MOV     ?V0 + 6,A
   \   0000CE   E5..         MOV     A,?V0 + 1
   \   0000D0   3400         ADDC    A,#0x0
   \   0000D2   F5..         MOV     ?V0 + 7,A
   \   0000D4   85..82       MOV     DPL,?V0 + 6
   \   0000D7   F583         MOV     DPH,A
   \   0000D9   12....       LCALL   ??Subroutine39_0 & 0xFFFF
   1267              if ( pParams->nwkAddr == 0 )
   \                     ??CrossCallReturnLabel_60:
   \   0000DC   E8           MOV     A,R0
   \   0000DD   49           ORL     A,R1
   \   0000DE   700E         JNZ     ??initiatorSendNwkStartReq_3
   1268              {
   1269                pParams->nwkAddr = osal_rand();
   \   0000E0                ; Setup parameters for call to function osal_rand
   \   0000E0   12....       LCALL   ??osal_rand?relay
   \   0000E3   85..82       MOV     DPL,?V0 + 6
   \   0000E6   85..83       MOV     DPH,?V0 + 7
   \   0000E9   EA           MOV     A,R2
   \   0000EA   F0           MOVX    @DPTR,A
   \   0000EB   A3           INC     DPTR
   \   0000EC   EB           MOV     A,R3
   \   0000ED   F0           MOVX    @DPTR,A
   1270              }
   1271              // update address for app notification
   1272              selectedTarget.newNwkAddr = pParams->nwkAddr;
   \                     ??initiatorSendNwkStartReq_3:
   \   0000EE   85..82       MOV     DPL,?V0 + 6
   \   0000F1   85..83       MOV     DPH,?V0 + 7
   \   0000F4   12....       LCALL   ?Subroutine15 & 0xFFFF
   1273          
   1274              // Set group ID range
   1275              if ( pRsp->totalGrpIDs > 0 )
   \                     ??CrossCallReturnLabel_66:
   \   0000F7   E5..         MOV     A,?V0 + 4
   \   0000F9   241E         ADD     A,#0x1e
   \   0000FB   F582         MOV     DPL,A
   \   0000FD   E5..         MOV     A,?V0 + 5
   \   0000FF   12....       LCALL   ??Subroutine40_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_69:
   \   000102   F9           MOV     R1,A
   \   000103   6017         JZ      ??initiatorSendNwkStartReq_4
   1276              {
   1277                zll_PopGrpIDRange( pRsp->totalGrpIDs, &(pParams->grpIDsBegin), &(pParams->grpIDsEnd) );
   \   000105                ; Setup parameters for call to function zll_PopGrpIDRange
   \   000105   E5..         MOV     A,?V0 + 0
   \   000107   2420         ADD     A,#0x20
   \   000109   FC           MOV     R4,A
   \   00010A   E5..         MOV     A,?V0 + 1
   \   00010C   3400         ADDC    A,#0x0
   \   00010E   FD           MOV     R5,A
   \   00010F   E5..         MOV     A,?V0 + 0
   \   000111   241E         ADD     A,#0x1e
   \   000113   FA           MOV     R2,A
   \   000114   E5..         MOV     A,?V0 + 1
   \   000116   3400         ADDC    A,#0x0
   \   000118   FB           MOV     R3,A
   \   000119   12....       LCALL   ??zll_PopGrpIDRange?relay
   1278              }
   1279          
   1280              if ( pRsp->zllAddressAssignment )
   \                     ??initiatorSendNwkStartReq_4:
   \   00011C   85..82       MOV     DPL,?V0 + 4
   \   00011F   85..83       MOV     DPH,?V0 + 5
   \   000122   A3           INC     DPTR
   \   000123   A3           INC     DPTR
   \   000124   A3           INC     DPTR
   \   000125   A3           INC     DPTR
   \   000126   A3           INC     DPTR
   \   000127   A3           INC     DPTR
   \   000128   A3           INC     DPTR
   \   000129   E0           MOVX    A,@DPTR
   \   00012A   5402         ANL     A,#0x2
   \   00012C   6030         JZ      ??initiatorSendNwkStartReq_5
   1281              {
   1282                zll_SplitFreeRanges( &(pParams->freeNwkAddrBegin), &(pParams->freeNwkAddrEnd),
   1283                                     &(pParams->freeGrpIDBegin), &(pParams->freeGrpIDEnd) );
   \   00012E                ; Setup parameters for call to function zll_SplitFreeRanges
   \   00012E   E5..         MOV     A,?V0 + 0
   \   000130   2428         ADD     A,#0x28
   \   000132   12....       LCALL   ?Subroutine25 & 0xFFFF
   1284              }
   \                     ??CrossCallReturnLabel_52:
   \   000135   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000138   E5..         MOV     A,?V0 + 0
   \   00013A   2426         ADD     A,#0x26
   \   00013C   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_53:
   \   00013F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000142   E5..         MOV     A,?V0 + 0
   \   000144   2424         ADD     A,#0x24
   \   000146   FC           MOV     R4,A
   \   000147   E5..         MOV     A,?V0 + 1
   \   000149   3400         ADDC    A,#0x0
   \   00014B   FD           MOV     R5,A
   \   00014C   E5..         MOV     A,?V0 + 0
   \   00014E   2422         ADD     A,#0x22
   \   000150   FA           MOV     R2,A
   \   000151   E5..         MOV     A,?V0 + 1
   \   000153   3400         ADDC    A,#0x0
   \   000155   FB           MOV     R3,A
   \   000156   12....       LCALL   ??zll_SplitFreeRanges?relay
   \   000159   7404         MOV     A,#0x4
   \   00015B   12....       LCALL   ?DEALLOC_XSTACK8
   1285          
   1286          #ifdef ZLL_INITIATOR_SET_NEW_NWK_PARAMS
   1287              pParams->logicalChannel = _NIB.nwkLogicalChannel;
   1288              pParams->panId = _NIB.nwkPanId;
   1289              osal_memcpy( pParams->extendedPANID, _NIB.extendedPANID ,Z_EXTADDR_LEN);
   1290          #endif
   1291          
   1292              osal_cpyExtAddr( pReq->initiatorIeeeAddr, NLME_GetExtAddr() );
   \                     ??initiatorSendNwkStartReq_5:
   \   00015E                ; Setup parameters for call to function sAddrExtCpy
   \   00015E                ; Setup parameters for call to function NLME_GetExtAddr
   \   00015E   12....       LCALL   ??NLME_GetExtAddr?relay
   \   000161   EA           MOV     A,R2
   \   000162   FC           MOV     R4,A
   \   000163   EB           MOV     A,R3
   \   000164   FD           MOV     R5,A
   \   000165   E5..         MOV     A,?V0 + 2
   \   000167   242E         ADD     A,#0x2e
   \   000169   FA           MOV     R2,A
   \   00016A   E5..         MOV     A,?V0 + 3
   \   00016C   3400         ADDC    A,#0x0
   \   00016E   FB           MOV     R3,A
   \   00016F   12....       LCALL   ??sAddrExtCpy?relay
   1293              pReq->initiatorNwkAddr = _NIB.nwkDevAddress;;
   \   000172   90....       MOV     DPTR,#_NIB + 20
   \   000175   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_81:
   \   000178   E5..         MOV     A,?V0 + 2
   \   00017A   2436         ADD     A,#0x36
   \   00017C   F582         MOV     DPL,A
   \   00017E   E5..         MOV     A,?V0 + 3
   \   000180   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_33:
   \   000183   12....       LCALL   ??Subroutine37_0 & 0xFFFF
   1294          
   1295              status = zclLL_Send_NwkStartReq( ZLL_INTERNAL_ENDPOINT, &(selectedTarget.srcAddr), pReq, initiatorSeqNum++ );
   \                     ??CrossCallReturnLabel_47:
   \   000186   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000189   AC..         MOV     R4,?V0 + 2
   \   00018B   AD..         MOV     R5,?V0 + 3
   \   00018D   7A..         MOV     R2,#(selectedTarget + 38) & 0xff
   \   00018F   7B..         MOV     R3,#((selectedTarget + 38) >> 8) & 0xff
   \   000191   790D         MOV     R1,#0xd
   \   000193   12....       LCALL   ??zclLL_Send_NwkStartReq?relay
   \   000196   7401         MOV     A,#0x1
   \   000198   12....       LCALL   ?DEALLOC_XSTACK8
   \   00019B   E9           MOV     A,R1
   \   00019C   F5..         MOV     ?V0 + 0,A
   1296              if ( status == ZSuccess )
   \   00019E   7049         JNZ     ??initiatorSendNwkStartReq_6
   1297              {
   1298                // Keep a copy of the encryted network key sent to the target
   1299                keyIndexSent = i;
   \   0001A0   EE           MOV     A,R6
   \   0001A1   90....       MOV     DPTR,#keyIndexSent
   \   0001A4   F0           MOVX    @DPTR,A
   1300                osal_memcpy( encKeySent, pParams->nwkKey, SEC_KEY_LEN );
   \   0001A5                ; Setup parameters for call to function osal_memcpy
   \   0001A5   85....       MOV     ?V0 + 4,?V0 + 8
   \   0001A8   85....       MOV     ?V0 + 5,?V0 + 9
   \   0001AB   75..00       MOV     ?V0 + 6,#0x0
   \   0001AE   78..         MOV     R0,#?V0 + 4
   \   0001B0   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0001B3   7C10         MOV     R4,#0x10
   \   0001B5   7D00         MOV     R5,#0x0
   \   0001B7   7A..         MOV     R2,#encKeySent & 0xff
   \   0001B9   7B..         MOV     R3,#(encKeySent >> 8) & 0xff
   \   0001BB   12....       LCALL   ??osal_memcpy?relay
   \   0001BE   7403         MOV     A,#0x3
   \   0001C0   12....       LCALL   ?DEALLOC_XSTACK8
   1301                responseIDSent = pRsp->responseID;
   \   0001C3   85..82       MOV     DPL,?V0 + 10
   \   0001C6   85..83       MOV     DPH,?V0 + 11
   \   0001C9   12....       LCALL   ?XLOAD_R2345
   \   0001CC   90....       MOV     DPTR,#responseIDSent
   \   0001CF   12....       LCALL   ?XSTORE_R2345
   1302          
   1303                // After the transmission, wait ZLL_APLC_RX_WINDOW_DURATION seconds to
   1304                // receive a response.
   1305                osal_start_timerEx( zllInitiator_TaskID, ZLL_W4_NWK_START_RSP_EVT, ZLL_APLC_RX_WINDOW_DURATION );
   \   0001D2                ; Setup parameters for call to function osal_start_timerEx
   \   0001D2   90....       MOV     DPTR,#__Constant_1388
   \   0001D5   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0001D8   7A00         MOV     R2,#0x0
   \   0001DA   7B01         MOV     R3,#0x1
   \   0001DC   90....       MOV     DPTR,#zllInitiator_TaskID
   \   0001DF   E0           MOVX    A,@DPTR
   \   0001E0   F9           MOV     R1,A
   \   0001E1   12....       LCALL   ??osal_start_timerEx?relay
   \   0001E4   7404         MOV     A,#0x4
   \   0001E6   12....       LCALL   ?DEALLOC_XSTACK8
   1306              }
   1307          
   1308              osal_mem_free( pReq );
   \                     ??initiatorSendNwkStartReq_6:
   \   0001E9                ; Setup parameters for call to function osal_mem_free
   \   0001E9   AA..         MOV     R2,?V0 + 2
   \   0001EB   AB..         MOV     R3,?V0 + 3
   \   0001ED   12....       LCALL   ??osal_mem_free?relay
   \   0001F0   8003         SJMP    ??initiatorSendNwkStartReq_7
   1309            }
   1310            else
   1311            {
   1312              status = ZMemError;
   \                     ??initiatorSendNwkStartReq_0:
   \   0001F2   75..10       MOV     ?V0 + 0,#0x10
   1313            }
   1314          
   1315            return ( status );
   \                     ??initiatorSendNwkStartReq_7:
   \   0001F5   A9..         MOV     R1,?V0 + 0
   \   0001F7   7F0C         MOV     R7,#0xc
   \   0001F9   02....       LJMP    ?BANKED_LEAVE_XDATA
   1316          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine28:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F583         MOV     DPH,A
   \   000004   E8           MOV     A,R0
   \   000005   F0           MOVX    @DPTR,A
   \   000006   A3           INC     DPTR
   \   000007   E9           MOV     A,R1
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine25:
   \   000000   F5..         MOV     ?V0 + 4,A
   \   000002   E5..         MOV     A,?V0 + 1
   \   000004                REQUIRE ??Subroutine38_0
   \   000004                ; // Fall through to label ??Subroutine38_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine38_0:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F5..         MOV     ?V0 + 5,A
   \   000004   78..         MOV     R0,#?V0 + 4
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   12....       LCALL   ??Subroutine41_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_93:
   \   000003   90....       MOV     DPTR,#selectedTarget + 50
   \   000006                REQUIRE ??Subroutine39_0
   \   000006                ; // Fall through to label ??Subroutine39_0
   1317          
   1318          /*********************************************************************
   1319           * @fn      initiatorSendNwkJoinReq
   1320           *
   1321           * @brief   Send out a Network Join Router or End Device Request command.
   1322           *
   1323           * @param   pRsp - received Scan Response
   1324           *
   1325           * @return  ZStatus_t
   1326           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine29:
   \   000000   F582         MOV     DPL,A
   \   000002   E5..         MOV     A,?V0 + 1
   \   000004                REQUIRE ??Subroutine36_0
   \   000004                ; // Fall through to label ??Subroutine36_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine36_0:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F583         MOV     DPH,A
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1327          static ZStatus_t initiatorSendNwkJoinReq( zclLLScanRsp_t *pRsp )
   \                     initiatorSendNwkJoinReq:
   1328          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 2,R2
   \   000007   8B..         MOV     ?V0 + 3,R3
   1329            zclLLNwkJoinReq_t *pReq;
   1330            ZStatus_t status;
   1331          
   1332            pReq = (zclLLNwkJoinReq_t *)osal_mem_alloc( sizeof( zclLLNwkJoinReq_t ) );
   \   000009                ; Setup parameters for call to function osal_mem_alloc
   \   000009   7A2F         MOV     R2,#0x2f
   \   00000B   7B00         MOV     R3,#0x0
   \   00000D   12....       LCALL   ??osal_mem_alloc?relay
   \   000010   8A..         MOV     ?V0 + 0,R2
   \   000012   8B..         MOV     ?V0 + 1,R3
   1333            if ( pReq != NULL )
   \   000014   EA           MOV     A,R2
   \   000015   45..         ORL     A,?V0 + 1
   \   000017   7003         JNZ     $+5
   \   000019   02....       LJMP    ??initiatorSendNwkJoinReq_0 & 0xFFFF
   1334            {
   1335              uint16 i;
   1336              zclLLNwkParams_t *pParams = &(pReq->nwkParams);
   \   00001C   EA           MOV     A,R2
   \   00001D   2404         ADD     A,#0x4
   \   00001F   FE           MOV     R6,A
   \   000020   EB           MOV     A,R3
   \   000021   3400         ADDC    A,#0x0
   \   000023   FF           MOV     R7,A
   1337          
   1338              osal_memset( pReq, 0, sizeof( zclLLNwkJoinReq_t ) );
   \   000024                ; Setup parameters for call to function osal_memset
   \   000024   7C2F         MOV     R4,#0x2f
   \   000026   7D00         MOV     R5,#0x0
   \   000028   7900         MOV     R1,#0x0
   \   00002A   12....       LCALL   ??osal_memset?relay
   1339          
   1340              // Build the request
   1341              pReq->transID = selectedTarget.scanRsp.transID;
   \   00002D   90....       MOV     DPTR,#selectedTarget
   \   000030   12....       LCALL   ?XLOAD_R2345
   \   000033   85..82       MOV     DPL,?V0 + 0
   \   000036   85..83       MOV     DPH,?V0 + 1
   \   000039   12....       LCALL   ?XSTORE_R2345
   1342          
   1343              // Find out key index (prefer highest)
   1344              for ( i = 15; i > 0; i-- )
   \   00003C   7A0F         MOV     R2,#0xf
   \   00003E   7B00         MOV     R3,#0x0
   1345              {
   1346                if ( ( (uint16)1 << i ) & pRsp->keyBitmask )
   \                     ??initiatorSendNwkJoinReq_1:
   \   000040   75..01       MOV     ?V0 + 4,#0x1
   \   000043   75..00       MOV     ?V0 + 5,#0x0
   \   000046   EA           MOV     A,R2
   \   000047   78..         MOV     R0,#?V0 + 4
   \   000049   12....       LCALL   ?S_SHL
   \   00004C   85..82       MOV     DPL,?V0 + 2
   \   00004F   85..83       MOV     DPH,?V0 + 3
   \   000052   A3           INC     DPTR
   \   000053   A3           INC     DPTR
   \   000054   A3           INC     DPTR
   \   000055   A3           INC     DPTR
   \   000056   A3           INC     DPTR
   \   000057   A3           INC     DPTR
   \   000058   A3           INC     DPTR
   \   000059   A3           INC     DPTR
   \   00005A   A3           INC     DPTR
   \   00005B   E0           MOVX    A,@DPTR
   \   00005C   55..         ANL     A,?V0 + 4
   \   00005E   F8           MOV     R0,A
   \   00005F   A3           INC     DPTR
   \   000060   E0           MOVX    A,@DPTR
   \   000061   55..         ANL     A,?V0 + 5
   \   000063   F9           MOV     R1,A
   \   000064   E8           MOV     A,R0
   \   000065   49           ORL     A,R1
   \   000066   700C         JNZ     ??initiatorSendNwkJoinReq_2
   1347                {
   1348                  break;
   1349                }
   1350              }
   \   000068   EA           MOV     A,R2
   \   000069   24FF         ADD     A,#-0x1
   \   00006B   1A           DEC     R2
   \   00006C   EB           MOV     A,R3
   \   00006D   34FF         ADDC    A,#-0x1
   \   00006F   FB           MOV     R3,A
   \   000070   EA           MOV     A,R2
   \   000071   4B           ORL     A,R3
   \   000072   70CC         JNZ     ??initiatorSendNwkJoinReq_1
   1351              pParams->keyIndex = i;
   \                     ??initiatorSendNwkJoinReq_2:
   \   000074   EA           MOV     A,R2
   \   000075   8E82         MOV     DPL,R6
   \   000077   8F83         MOV     DPH,R7
   \   000079   A3           INC     DPTR
   \   00007A   A3           INC     DPTR
   \   00007B   A3           INC     DPTR
   \   00007C   A3           INC     DPTR
   \   00007D   A3           INC     DPTR
   \   00007E   A3           INC     DPTR
   \   00007F   A3           INC     DPTR
   \   000080   A3           INC     DPTR
   \   000081   F0           MOVX    @DPTR,A
   1352          
   1353              // Copy in the encrypted network key
   1354              zll_EncryptNwkKey( pParams->nwkKey, i, pRsp->transID, pRsp->responseID );
   \   000082                ; Setup parameters for call to function zll_EncryptNwkKey
   \   000082   E5..         MOV     A,?V0 + 2
   \   000084   240B         ADD     A,#0xb
   \   000086   F582         MOV     DPL,A
   \   000088   E5..         MOV     A,?V0 + 3
   \   00008A   12....       LCALL   ??Subroutine36_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_38:
   \   00008D   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000090   85..82       MOV     DPL,?V0 + 2
   \   000093   85..83       MOV     DPH,?V0 + 3
   \   000096   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000099   EA           MOV     A,R2
   \   00009A   F9           MOV     R1,A
   \   00009B   EE           MOV     A,R6
   \   00009C   2409         ADD     A,#0x9
   \   00009E   FA           MOV     R2,A
   \   00009F   EF           MOV     A,R7
   \   0000A0   3400         ADDC    A,#0x0
   \   0000A2   FB           MOV     R3,A
   \   0000A3   12....       LCALL   ??zll_EncryptNwkKey?relay
   \   0000A6   7408         MOV     A,#0x8
   \   0000A8   12....       LCALL   ?DEALLOC_XSTACK8
   1355          
   1356              pParams->nwkAddr = zll_PopNwkAddress();
   \   0000AB                ; Setup parameters for call to function zll_PopNwkAddress
   \   0000AB   12....       LCALL   ??zll_PopNwkAddress?relay
   \   0000AE   EE           MOV     A,R6
   \   0000AF   241C         ADD     A,#0x1c
   \   0000B1   F8           MOV     R0,A
   \   0000B2   EF           MOV     A,R7
   \   0000B3   3400         ADDC    A,#0x0
   \   0000B5   F9           MOV     R1,A
   \   0000B6   88..         MOV     ?V0 + 4,R0
   \   0000B8   89..         MOV     ?V0 + 5,R1
   \   0000BA   8882         MOV     DPL,R0
   \   0000BC   F583         MOV     DPH,A
   \   0000BE   EA           MOV     A,R2
   \   0000BF   F0           MOVX    @DPTR,A
   \   0000C0   A3           INC     DPTR
   \   0000C1   EB           MOV     A,R3
   \   0000C2   F0           MOVX    @DPTR,A
   1357              if ( pParams->nwkAddr == 0 )
   \   0000C3   EA           MOV     A,R2
   \   0000C4   4B           ORL     A,R3
   \   0000C5   700E         JNZ     ??initiatorSendNwkJoinReq_3
   1358              {
   1359                pParams->nwkAddr = osal_rand();
   \   0000C7                ; Setup parameters for call to function osal_rand
   \   0000C7   12....       LCALL   ??osal_rand?relay
   \   0000CA   85..82       MOV     DPL,?V0 + 4
   \   0000CD   85..83       MOV     DPH,?V0 + 5
   \   0000D0   EA           MOV     A,R2
   \   0000D1   F0           MOVX    @DPTR,A
   \   0000D2   A3           INC     DPTR
   \   0000D3   EB           MOV     A,R3
   \   0000D4   F0           MOVX    @DPTR,A
   1360              }
   1361              // update address for app notification
   1362              selectedTarget.newNwkAddr = pParams->nwkAddr;
   \                     ??initiatorSendNwkJoinReq_3:
   \   0000D5   85..82       MOV     DPL,?V0 + 4
   \   0000D8   85..83       MOV     DPH,?V0 + 5
   \   0000DB   12....       LCALL   ?Subroutine15 & 0xFFFF
   1363          
   1364              // Set group ID range
   1365              if ( pRsp->totalGrpIDs > 0 )
   \                     ??CrossCallReturnLabel_67:
   \   0000DE   E5..         MOV     A,?V0 + 2
   \   0000E0   241E         ADD     A,#0x1e
   \   0000E2   F582         MOV     DPL,A
   \   0000E4   E5..         MOV     A,?V0 + 3
   \   0000E6   12....       LCALL   ??Subroutine40_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_70:
   \   0000E9   F9           MOV     R1,A
   \   0000EA   6013         JZ      ??initiatorSendNwkJoinReq_4
   1366              {
   1367                zll_PopGrpIDRange( pRsp->totalGrpIDs, &(pParams->grpIDsBegin), &(pParams->grpIDsEnd) );
   \   0000EC                ; Setup parameters for call to function zll_PopGrpIDRange
   \   0000EC   EE           MOV     A,R6
   \   0000ED   2420         ADD     A,#0x20
   \   0000EF   FC           MOV     R4,A
   \   0000F0   EF           MOV     A,R7
   \   0000F1   3400         ADDC    A,#0x0
   \   0000F3   FD           MOV     R5,A
   \   0000F4   EE           MOV     A,R6
   \   0000F5   241E         ADD     A,#0x1e
   \   0000F7   FA           MOV     R2,A
   \   0000F8   EF           MOV     A,R7
   \   0000F9   3400         ADDC    A,#0x0
   \   0000FB   FB           MOV     R3,A
   \   0000FC   12....       LCALL   ??zll_PopGrpIDRange?relay
   1368              }
   1369          
   1370              if ( pRsp->zllAddressAssignment )
   \                     ??initiatorSendNwkJoinReq_4:
   \   0000FF   85..82       MOV     DPL,?V0 + 2
   \   000102   85..83       MOV     DPH,?V0 + 3
   \   000105   A3           INC     DPTR
   \   000106   A3           INC     DPTR
   \   000107   A3           INC     DPTR
   \   000108   A3           INC     DPTR
   \   000109   A3           INC     DPTR
   \   00010A   A3           INC     DPTR
   \   00010B   A3           INC     DPTR
   \   00010C   E0           MOVX    A,@DPTR
   \   00010D   5402         ANL     A,#0x2
   \   00010F   6030         JZ      ??initiatorSendNwkJoinReq_5
   1371              {
   1372                zll_SplitFreeRanges( &(pParams->freeNwkAddrBegin), &(pParams->freeNwkAddrEnd),
   1373                                     &(pParams->freeGrpIDBegin), &(pParams->freeGrpIDEnd) );
   \   000111                ; Setup parameters for call to function zll_SplitFreeRanges
   \   000111   EE           MOV     A,R6
   \   000112   2428         ADD     A,#0x28
   \   000114   F5..         MOV     ?V0 + 4,A
   \   000116   EF           MOV     A,R7
   \   000117   12....       LCALL   ??Subroutine38_0 & 0xFFFF
   1374              }
   \                     ??CrossCallReturnLabel_50:
   \   00011A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00011D   EE           MOV     A,R6
   \   00011E   2426         ADD     A,#0x26
   \   000120   F5..         MOV     ?V0 + 4,A
   \   000122   EF           MOV     A,R7
   \   000123   12....       LCALL   ??Subroutine38_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   000126   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000129   EE           MOV     A,R6
   \   00012A   2424         ADD     A,#0x24
   \   00012C   FC           MOV     R4,A
   \   00012D   EF           MOV     A,R7
   \   00012E   3400         ADDC    A,#0x0
   \   000130   FD           MOV     R5,A
   \   000131   EE           MOV     A,R6
   \   000132   2422         ADD     A,#0x22
   \   000134   FA           MOV     R2,A
   \   000135   EF           MOV     A,R7
   \   000136   3400         ADDC    A,#0x0
   \   000138   FB           MOV     R3,A
   \   000139   12....       LCALL   ??zll_SplitFreeRanges?relay
   \   00013C   7404         MOV     A,#0x4
   \   00013E   12....       LCALL   ?DEALLOC_XSTACK8
   1375          
   1376              pParams->logicalChannel = _NIB.nwkLogicalChannel;
   \                     ??initiatorSendNwkJoinReq_5:
   \   000141   90....       MOV     DPTR,#_NIB + 22
   \   000144   E0           MOVX    A,@DPTR
   \   000145   C0E0         PUSH    A
   \   000147   EE           MOV     A,R6
   \   000148   2419         ADD     A,#0x19
   \   00014A   F582         MOV     DPL,A
   \   00014C   EF           MOV     A,R7
   \   00014D   12....       LCALL   ??Subroutine36_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_39:
   \   000150   D0E0         POP     A
   \   000152   12....       LCALL   ?Subroutine9 & 0xFFFF
   1377              pParams->panId = _NIB.nwkPanId;
   \                     ??CrossCallReturnLabel_3:
   \   000155   EE           MOV     A,R6
   \   000156   241A         ADD     A,#0x1a
   \   000158   F582         MOV     DPL,A
   \   00015A   EF           MOV     A,R7
   \   00015B   12....       LCALL   ??Subroutine36_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_40:
   \   00015E   12....       LCALL   ??Subroutine39_0 & 0xFFFF
   1378              osal_cpyExtAddr( pParams->extendedPANID, _NIB.extendedPANID );
   \                     ??CrossCallReturnLabel_61:
   \   000161                ; Setup parameters for call to function sAddrExtCpy
   \   000161   7C..         MOV     R4,#(_NIB + 53) & 0xff
   \   000163   7D..         MOV     R5,#((_NIB + 53) >> 8) & 0xff
   \   000165   EE           MOV     A,R6
   \   000166   FA           MOV     R2,A
   \   000167   EF           MOV     A,R7
   \   000168   FB           MOV     R3,A
   \   000169   12....       LCALL   ??sAddrExtCpy?relay
   1379              pReq->nwkUpdateId = _NIB.nwkUpdateId;
   \   00016C   90....       MOV     DPTR,#_NIB + 109
   \   00016F   E0           MOVX    A,@DPTR
   \   000170   C0E0         PUSH    A
   \   000172   E5..         MOV     A,?V0 + 0
   \   000174   242E         ADD     A,#0x2e
   \   000176   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   000179   D0E0         POP     A
   \   00017B   F0           MOVX    @DPTR,A
   1380          
   1381              // Let PAN ID, Extended PAN ID and Logical Channel to be determined by the target
   1382              if ( pRsp->zLogicalType == ZG_DEVICETYPE_ROUTER )
   \   00017C   85..82       MOV     DPL,?V0 + 2
   \   00017F   85..83       MOV     DPH,?V0 + 3
   \   000182   A3           INC     DPTR
   \   000183   A3           INC     DPTR
   \   000184   A3           INC     DPTR
   \   000185   A3           INC     DPTR
   \   000186   A3           INC     DPTR
   \   000187   E0           MOVX    A,@DPTR
   \   000188   5403         ANL     A,#0x3
   \   00018A   6401         XRL     A,#0x1
   \   00018C   90....       MOV     DPTR,#initiatorSeqNum
   \   00018F   700B         JNZ     ??initiatorSendNwkJoinReq_6
   1383              {
   1384                // It's a light
   1385                status = zclLL_Send_NwkJoinRtrReq( ZLL_INTERNAL_ENDPOINT, &(selectedTarget.srcAddr), pReq, initiatorSeqNum++ );
   \   000191   12....       LCALL   ?Subroutine21 & 0xFFFF
   1386              }
   \                     ??CrossCallReturnLabel_23:
   \   000194   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000197   75..12       MOV     ?V0 + 2,#0x12
   \   00019A   8009         SJMP    ??initiatorSendNwkJoinReq_7
   1387              else // another controller
   1388              {
   1389                status = zclLL_Send_NwkJoinEDReq( ZLL_INTERNAL_ENDPOINT, &(selectedTarget.srcAddr), pReq, initiatorSeqNum++ );
   \                     ??initiatorSendNwkJoinReq_6:
   \   00019C   12....       LCALL   ?Subroutine21 & 0xFFFF
   1390              }
   \                     ??CrossCallReturnLabel_24:
   \   00019F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001A2   75..14       MOV     ?V0 + 2,#0x14
   \                     ??initiatorSendNwkJoinReq_7:
   \   0001A5   78..         MOV     R0,#?V0 + 2
   \   0001A7   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001AA   AC..         MOV     R4,?V0 + 0
   \   0001AC   AD..         MOV     R5,?V0 + 1
   \   0001AE   7A..         MOV     R2,#(selectedTarget + 38) & 0xff
   \   0001B0   7B..         MOV     R3,#((selectedTarget + 38) >> 8) & 0xff
   \   0001B2   790D         MOV     R1,#0xd
   \   0001B4   12....       LCALL   ??zclLL_Send_NwkJoinReq?relay
   \   0001B7   7402         MOV     A,#0x2
   \   0001B9   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001BC   E9           MOV     A,R1
   \   0001BD   FE           MOV     R6,A
   1391          
   1392              if ( status == ZSuccess )
   \   0001BE   EE           MOV     A,R6
   \   0001BF   7017         JNZ     ??initiatorSendNwkJoinReq_8
   1393              {
   1394                // After the transmission, wait ZLL_APLC_RX_WINDOW_DURATION seconds to
   1395                // receive a response.
   1396                osal_start_timerEx( zllInitiator_TaskID, ZLL_W4_NWK_JOIN_RSP_EVT, ZLL_APLC_RX_WINDOW_DURATION );
   \   0001C1                ; Setup parameters for call to function osal_start_timerEx
   \   0001C1   90....       MOV     DPTR,#__Constant_1388
   \   0001C4   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0001C7   7A00         MOV     R2,#0x0
   \   0001C9   7B02         MOV     R3,#0x2
   \   0001CB   90....       MOV     DPTR,#zllInitiator_TaskID
   \   0001CE   E0           MOVX    A,@DPTR
   \   0001CF   F9           MOV     R1,A
   \   0001D0   12....       LCALL   ??osal_start_timerEx?relay
   \   0001D3   7404         MOV     A,#0x4
   \   0001D5   12....       LCALL   ?DEALLOC_XSTACK8
   1397              }
   1398          
   1399              osal_mem_free( pReq );
   \                     ??initiatorSendNwkJoinReq_8:
   \   0001D8                ; Setup parameters for call to function osal_mem_free
   \   0001D8   AA..         MOV     R2,?V0 + 0
   \   0001DA   AB..         MOV     R3,?V0 + 1
   \   0001DC   12....       LCALL   ??osal_mem_free?relay
   \   0001DF   8002         SJMP    ??initiatorSendNwkJoinReq_9
   1400            }
   1401            else
   1402            {
   1403              status = ZMemError;
   \                     ??initiatorSendNwkJoinReq_0:
   \   0001E1   7E10         MOV     R6,#0x10
   1404            }
   1405          
   1406            return ( status );
   \                     ??initiatorSendNwkJoinReq_9:
   \   0001E3   EE           MOV     A,R6
   \   0001E4   F9           MOV     R1,A
   \   0001E5                REQUIRE ?Subroutine4
   \   0001E5                ; // Fall through to label ?Subroutine4
   1407          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   7F06         MOV     R7,#0x6
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   12....       LCALL   ??Subroutine45_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_105:
   \   000003   F5..         MOV     ?V0 + 2,A
   \   000005   78..         MOV     R0,#?V0 + 2
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_94:
   \   000004   22           RET
   1408          
   1409          /*********************************************************************
   1410           * @fn      initiatorSendNwkUpdateReq
   1411           *
   1412           * @brief   Send out a Network Update Request command.
   1413           *
   1414           * @param   pRsp - received Scan Response
   1415           *
   1416           * @return  ZStatus_t
   1417           */
   1418          static ZStatus_t initiatorSendNwkUpdateReq( zclLLScanRsp_t *pRsp )
   1419          {
   1420            zclLLNwkUpdateReq_t *pReq;
   1421            ZStatus_t status;
   1422          
   1423            pReq = (zclLLNwkUpdateReq_t *)osal_mem_alloc( sizeof( zclLLNwkUpdateReq_t ) );
   1424            if ( pReq!= NULL )
   1425            {
   1426              // Build the request
   1427              pReq->transID = pRsp->transID;
   1428              osal_cpyExtAddr( pReq->extendedPANID, _NIB.extendedPANID );
   1429              pReq->nwkUpdateId = _NIB.nwkUpdateId;
   1430              pReq->logicalChannel = _NIB.nwkLogicalChannel;
   1431              pReq->PANID = _NIB.nwkPanId;
   1432              pReq->nwkAddr = pRsp->nwkAddr;
   1433          
   1434              status = zclLL_Send_NwkUpdateReq( ZLL_INTERNAL_ENDPOINT, &(selectedTarget.srcAddr), pReq, initiatorSeqNum++ );
   1435          
   1436              osal_mem_free( pReq );
   1437            }
   1438            else
   1439            {
   1440              status = ZMemError;
   1441            }
   1442          
   1443            return ( status );
   1444          }
   1445          
   1446          //#define ZLL_ORPHAN_JOIN // Uncomment this line for Orphan Joining
   1447          
   1448          /*********************************************************************
   1449           * @fn      initiatorReJoinNwk
   1450           *
   1451           * @brief   Send out an Rejoin Request or Orphan Join Request command
   1452           *          depending on the Start Mode.
   1453           *
   1454           * @param   startMode - MODE_REJOIN or MODE_RESUME
   1455           *
   1456           * @return  none
   1457           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1458          static void initiatorReJoinNwk( devStartModes_t startMode )
   \                     initiatorReJoinNwk:
   1459          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
   1460            // Set NWK task to run
   1461            nwk_setStateIdle( FALSE );
   \   000007                ; Setup parameters for call to function nwk_setStateIdle
   \   000007   7900         MOV     R1,#0x0
   \   000009   12....       LCALL   ??nwk_setStateIdle?relay
   1462          
   1463            // Configure MAC with our network parameters
   1464            zll_SetMacNwkParams( _NIB.nwkDevAddress, _NIB.nwkPanId, _NIB.nwkLogicalChannel );
   \   00000C                ; Setup parameters for call to function zll_SetMacNwkParams
   \   00000C   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_116:
   \   00000F   12....       LCALL   ??zll_SetMacNwkParams?relay
   1465          
   1466            // Use the new network paramters
   1467            zgConfigPANID = _NIB.nwkPanId;
   \   000012   90....       MOV     DPTR,#_NIB + 33
   \   000015   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_82:
   \   000018   90....       MOV     DPTR,#zgConfigPANID
   \   00001B   12....       LCALL   ??Subroutine39_0 & 0xFFFF
   1468            zgDefaultChannelList = _NIB.channelList;
   \                     ??CrossCallReturnLabel_62:
   \   00001E   90....       MOV     DPTR,#_NIB + 36
   \   000021   12....       LCALL   ?XLOAD_R2345
   \   000024   90....       MOV     DPTR,#zgDefaultChannelList
   \   000027   12....       LCALL   ?XSTORE_R2345
   1469            osal_cpyExtAddr( ZDO_UseExtendedPANID, _NIB.extendedPANID );
   \   00002A                ; Setup parameters for call to function sAddrExtCpy
   \   00002A   7C..         MOV     R4,#(_NIB + 53) & 0xff
   \   00002C   7D..         MOV     R5,#((_NIB + 53) >> 8) & 0xff
   \   00002E   7A..         MOV     R2,#ZDO_UseExtendedPANID & 0xff
   \   000030   7B..         MOV     R3,#(ZDO_UseExtendedPANID >> 8) & 0xff
   \   000032   12....       LCALL   ??sAddrExtCpy?relay
   1470          
   1471          #ifdef ZLL_ORPHAN_JOIN
   1472            devStartMode = MODE_RESUME;
   1473          #else
   1474            devStartMode = startMode;
   \   000035   EE           MOV     A,R6
   \   000036   90....       MOV     DPTR,#devStartMode
   \   000039   F0           MOVX    @DPTR,A
   1475          #endif
   1476          
   1477            _tmpRejoinState = TRUE;
   \   00003A   90....       MOV     DPTR,#_tmpRejoinState
   \   00003D   7401         MOV     A,#0x1
   \   00003F   F0           MOVX    @DPTR,A
   1478          
   1479            // Start the network joining process
   1480            osal_set_event( ZDAppTaskID, ZDO_NETWORK_INIT );
   \   000040                ; Setup parameters for call to function osal_set_event
   \   000040   FA           MOV     R2,A
   \   000041   7B00         MOV     R3,#0x0
   \   000043   90....       MOV     DPTR,#ZDAppTaskID
   \   000046   E0           MOVX    A,@DPTR
   \   000047   F9           MOV     R1,A
   \   000048   12....       LCALL   ??osal_set_event?relay
   1481          }
   \   00004B   02....       LJMP    ?Subroutine2 & 0xFFFF
   1482          
   1483          /*********************************************************************
   1484           * @fn      initiatorScanReqCB
   1485           *
   1486           * @brief   This callback is called to process a Scan Request command.
   1487           *
   1488           * @param   srcAddr - sender's address
   1489           * @param   pReq - parsed command
   1490           * @param   seqNum - command sequence number
   1491           *
   1492           * @return  ZStatus_t
   1493           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1494          static ZStatus_t initiatorScanReqCB( afAddrType_t *srcAddr, zclLLScanReq_t *pReq, uint8 seqNum )
   \                     initiatorScanReqCB:
   1495          {
   \   000000   74ED         MOV     A,#-0x13
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 19
   \   000005                ; Auto size: 12
   \   000005   74F4         MOV     A,#-0xc
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 2,R2
   \   00000C   8B..         MOV     ?V0 + 3,R3
   \   00000E   8C..         MOV     ?V0 + 0,R4
   \   000010   8D..         MOV     ?V0 + 1,R5
   \   000012   89..         MOV     ?V0 + 4,R1
   1496            int8 rssi;
   1497            rssi = zll_GetMsgRssi();
   1498            if( ( rssi > ZLL_TL_WORST_RSSI ) && ( pReq->zllLinkInitiator == TRUE ) )
   \   000014                ; Setup parameters for call to function zll_GetMsgRssi
   \   000014   12....       LCALL   ??zll_GetMsgRssi?relay
   \   000017   E9           MOV     A,R1
   \   000018   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   00001B   5003         JNC     $+5
   \   00001D   02....       LJMP    ??initiatorScanReqCB_0 & 0xFFFF
   \   000020   E5..         MOV     A,?V0 + 0
   \   000022   2406         ADD     A,#0x6
   \   000024   FE           MOV     R6,A
   \   000025   E5..         MOV     A,?V0 + 1
   \   000027   3400         ADDC    A,#0x0
   \   000029   FF           MOV     R7,A
   \   00002A   8E82         MOV     DPL,R6
   \   00002C   8F83         MOV     DPH,R7
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   5410         ANL     A,#0x10
   \   000031   7003         JNZ     $+5
   \   000033   02....       LJMP    ??initiatorScanReqCB_0 & 0xFFFF
   1499            {
   1500              // response to the originator, but switch to dst PAN 0xFFFF
   1501              afAddrType_t dstAddr;
   1502              osal_memcpy(&dstAddr, srcAddr, sizeof(afAddrType_t));
   \   000036                ; Setup parameters for call to function osal_memcpy
   \   000036   85....       MOV     ?V0 + 8,?V0 + 2
   \   000039   85....       MOV     ?V0 + 9,?V0 + 3
   \   00003C   75..00       MOV     ?V0 + 10,#0x0
   \   00003F   78..         MOV     R0,#?V0 + 8
   \   000041   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000044   7C0C         MOV     R4,#0xc
   \   000046   7D00         MOV     R5,#0x0
   \   000048   7403         MOV     A,#0x3
   \   00004A   12....       LCALL   ?XSTACK_DISP0_8
   \   00004D   AA82         MOV     R2,DPL
   \   00004F   AB83         MOV     R3,DPH
   \   000051   12....       LCALL   ??osal_memcpy?relay
   \   000054   7403         MOV     A,#0x3
   \   000056   12....       LCALL   ?DEALLOC_XSTACK8
   1503              dstAddr.panId = 0xFFFF;
   \   000059   740A         MOV     A,#0xa
   \   00005B   12....       LCALL   ?XSTACK_DISP0_8
   \   00005E   74FF         MOV     A,#-0x1
   \   000060   F0           MOVX    @DPTR,A
   \   000061   A3           INC     DPTR
   \   000062   F0           MOVX    @DPTR,A
   1504          
   1505              // If, during its scan, a non factory new initiator receives another scan
   1506              // request inter-PAN command frame from a factory new target, it shall be ignored.
   1507              if ( ( pReq->zllFactoryNew == TRUE ) && !zll_IsFactoryNew() &&
   1508                   osal_get_timeoutEx( zllInitiator_TaskID, ZLL_TL_SCAN_BASE_EVT ) )
   \   000063   8E82         MOV     DPL,R6
   \   000065   8F83         MOV     DPH,R7
   \   000067   E0           MOVX    A,@DPTR
   \   000068   A2E0         MOV     C,0xE0 /* A   */.0
   \   00006A   5018         JNC     ??initiatorScanReqCB_1
   \   00006C                ; Setup parameters for call to function zll_IsFactoryNew
   \   00006C   12....       LCALL   ??zll_IsFactoryNew?relay
   \   00006F   E9           MOV     A,R1
   \   000070   7012         JNZ     ??initiatorScanReqCB_1
   \   000072                ; Setup parameters for call to function osal_get_timeoutEx
   \   000072   7A40         MOV     R2,#0x40
   \   000074   7B00         MOV     R3,#0x0
   \   000076   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   F9           MOV     R1,A
   \   00007B   12....       LCALL   ??osal_get_timeoutEx?relay
   \   00007E   EA           MOV     A,R2
   \   00007F   4B           ORL     A,R3
   \   000080   4C           ORL     A,R4
   \   000081   4D           ORL     A,R5
   \   000082   703C         JNZ     ??initiatorScanReqCB_0
   1509              {
   1510                return ( ZSuccess );
   1511              }
   1512          
   1513              // Send a Scan Response back
   1514              if ( zll_SendScanRsp( ZLL_INTERNAL_ENDPOINT, &dstAddr, pReq->transID, seqNum ) == ZSuccess )
   \                     ??initiatorScanReqCB_1:
   \   000084                ; Setup parameters for call to function zll_SendScanRsp
   \   000084   85..82       MOV     DPL,?V0 + 0
   \   000087   85..83       MOV     DPH,?V0 + 1
   \   00008A   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00008D   AC..         MOV     R4,?V0 + 4
   \   00008F   7404         MOV     A,#0x4
   \   000091   12....       LCALL   ?XSTACK_DISP0_8
   \   000094   AA82         MOV     R2,DPL
   \   000096   AB83         MOV     R3,DPH
   \   000098   790D         MOV     R1,#0xd
   \   00009A   12....       LCALL   ??zll_SendScanRsp?relay
   \   00009D   7404         MOV     A,#0x4
   \   00009F   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000A2   E9           MOV     A,R1
   \   0000A3   701B         JNZ     ??initiatorScanReqCB_0
   1515              {
   1516                // If we're a factory new initiator and are in the middle of a Device
   1517                // Discovery, stop the procedure and wait for subsequent configuration
   1518                // information from the non-factory new initiator that we just responded to.
   1519                if ( zll_IsFactoryNew() && !pReq->zllFactoryNew )
   \   0000A5                ; Setup parameters for call to function zll_IsFactoryNew
   \   0000A5   12....       LCALL   ??zll_IsFactoryNew?relay
   \   0000A8   E9           MOV     A,R1
   \   0000A9   6015         JZ      ??initiatorScanReqCB_0
   \   0000AB   8E82         MOV     DPL,R6
   \   0000AD   8F83         MOV     DPH,R7
   \   0000AF   E0           MOVX    A,@DPTR
   \   0000B0   A2E0         MOV     C,0xE0 /* A   */.0
   \   0000B2   400C         JC      ??initiatorScanReqCB_0
   1520                {
   1521                  osal_stop_timerEx( zllInitiator_TaskID, ZLL_TL_SCAN_BASE_EVT );
   \   0000B4                ; Setup parameters for call to function osal_stop_timerEx
   \   0000B4   7A40         MOV     R2,#0x40
   \   0000B6   7B00         MOV     R3,#0x0
   \   0000B8   90....       MOV     DPTR,#zllInitiator_TaskID
   \   0000BB   E0           MOVX    A,@DPTR
   \   0000BC   F9           MOV     R1,A
   \   0000BD   12....       LCALL   ??osal_stop_timerEx?relay
   1522          
   1523                }
   1524              }
   1525            }
   1526          
   1527            return ( ZSuccess );
   \                     ??initiatorScanReqCB_0:
   \   0000C0   7900         MOV     R1,#0x0
   \   0000C2   740C         MOV     A,#0xc
   \   0000C4   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000C7   7F0B         MOV     R7,#0xb
   \   0000C9   02....       LJMP    ?BANKED_LEAVE_XDATA
   1528          }
   1529          
   1530          /*********************************************************************
   1531           * @fn      initiatorDeviceInfoReqCB
   1532           *
   1533           * @brief   This callback is called to process a Device Information
   1534           *          Request command.
   1535           *
   1536           * @param   srcAddr - sender's address
   1537           * @param   pReq - parsed command
   1538           * @param   seqNum - command sequence number
   1539           *
   1540           * @return  ZStatus_t
   1541           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1542          static ZStatus_t initiatorDeviceInfoReqCB( afAddrType_t *srcAddr, zclLLDeviceInfoReq_t *pReq, uint8 seqNum )
   \                     initiatorDeviceInfoReqCB:
   1543          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   \   000009   8C..         MOV     ?V0 + 0,R4
   \   00000B   8D..         MOV     ?V0 + 1,R5
   \   00000D   89..         MOV     ?V0 + 2,R1
   1544            if ( zll_IsValidTransID( pReq->transID ) == FALSE )
   \   00000F                ; Setup parameters for call to function zll_IsValidTransID
   \   00000F   8C82         MOV     DPL,R4
   \   000011   8D83         MOV     DPH,R5
   \   000013   12....       LCALL   ?XLOAD_R2345
   \   000016   12....       LCALL   ??zll_IsValidTransID?relay
   \   000019   E9           MOV     A,R1
   \   00001A   7004         JNZ     ??initiatorDeviceInfoReqCB_0
   1545            {
   1546              return ( ZFailure );
   \   00001C   7901         MOV     R1,#0x1
   \   00001E   8025         SJMP    ??initiatorDeviceInfoReqCB_1
   1547            }
   1548            return ( zll_SendDeviceInfoRsp( ZLL_INTERNAL_ENDPOINT, srcAddr,
   1549                                            pReq->startIndex, pReq->transID, seqNum ) );
   \                     ??initiatorDeviceInfoReqCB_0:
   \   000020                ; Setup parameters for call to function zll_SendDeviceInfoRsp
   \   000020   85..82       MOV     DPL,?V0 + 0
   \   000023   85..83       MOV     DPH,?V0 + 1
   \   000026   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000029   AD..         MOV     R5,?V0 + 2
   \   00002B   85..82       MOV     DPL,?V0 + 0
   \   00002E   85..83       MOV     DPH,?V0 + 1
   \   000031   A3           INC     DPTR
   \   000032   A3           INC     DPTR
   \   000033   A3           INC     DPTR
   \   000034   A3           INC     DPTR
   \   000035   E0           MOVX    A,@DPTR
   \   000036   FC           MOV     R4,A
   \   000037   EE           MOV     A,R6
   \   000038   FA           MOV     R2,A
   \   000039   EF           MOV     A,R7
   \   00003A   FB           MOV     R3,A
   \   00003B   790D         MOV     R1,#0xd
   \   00003D   12....       LCALL   ??zll_SendDeviceInfoRsp?relay
   \   000040   7404         MOV     A,#0x4
   \   000042   12....       LCALL   ?DEALLOC_XSTACK8
   \                     ??initiatorDeviceInfoReqCB_1:
   \   000045   02....       LJMP    ??Subroutine44_0 & 0xFFFF
   1550          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine44_0:
   \   000000   7F03         MOV     R7,#0x3
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
   1551          
   1552          /*********************************************************************
   1553           * @fn      initiatorIdentifyReqCB
   1554           *
   1555           * @brief   This callback is called to process an Identify Request command.
   1556           *
   1557           * @param   srcAddr - sender's address
   1558           * @param   pReq - parsed command
   1559           *
   1560           * @return  ZStatus_t
   1561           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1562          static ZStatus_t initiatorIdentifyReqCB( afAddrType_t *srcAddr, zclLLIdentifyReq_t *pReq )
   \                     initiatorIdentifyReqCB:
   1563          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 4
   \   000005   74FC         MOV     A,#-0x4
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   8C..         MOV     ?V0 + 0,R4
   \   000010   8D..         MOV     ?V0 + 1,R5
   1564            if ( zll_IsValidTransID( pReq->transID ) == FALSE )
   \   000012                ; Setup parameters for call to function zll_IsValidTransID
   \   000012   8C82         MOV     DPL,R4
   \   000014   8D83         MOV     DPH,R5
   \   000016   12....       LCALL   ?XLOAD_R2345
   \   000019   12....       LCALL   ??zll_IsValidTransID?relay
   \   00001C   E9           MOV     A,R1
   \   00001D   7004         JNZ     ??initiatorIdentifyReqCB_0
   1565            {
   1566              return ( ZFailure );
   \   00001F   7901         MOV     R1,#0x1
   \   000021   8054         SJMP    ??initiatorIdentifyReqCB_1
   1567            }
   1568            // The target should identify itself
   1569            if ( pfnIdentifyCB != NULL )
   \                     ??initiatorIdentifyReqCB_0:
   \   000023   90....       MOV     DPTR,#pfnIdentifyCB
   \   000026   12....       LCALL   ??Subroutine33_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_34:
   \   000029   604A         JZ      ??initiatorIdentifyReqCB_2
   1570            {
   1571              zclIdentify_t cmd;
   1572          
   1573              cmd.srcAddr = srcAddr;
   \   00002B   85..82       MOV     DPL,?XSP + 0
   \   00002E   85..83       MOV     DPH,?XSP + 1
   \   000031   EE           MOV     A,R6
   \   000032   F0           MOVX    @DPTR,A
   \   000033   A3           INC     DPTR
   \   000034   EF           MOV     A,R7
   \   000035   F0           MOVX    @DPTR,A
   1574          
   1575              // Values of the Identify Duration field:
   1576              // - Exit identify mode: 0x0000
   1577              // - Length of time to remain in identify mode: 0x0001-0xfffe
   1578              // - Remain in identify mode for a default time known by the receiver: 0xffff
   1579              if ( pReq->IdDuration == 0xffff )
   \   000036   85..82       MOV     DPL,?V0 + 0
   \   000039   85..83       MOV     DPH,?V0 + 1
   \   00003C   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_88:
   \   00003F   74FF         MOV     A,#-0x1
   \   000041   68           XRL     A,R0
   \   000042   7003         JNZ     ??initiatorIdentifyReqCB_3
   \   000044   74FF         MOV     A,#-0x1
   \   000046   69           XRL     A,R1
   \                     ??initiatorIdentifyReqCB_3:
   \   000047   700C         JNZ     ??initiatorIdentifyReqCB_4
   1580              {
   1581                cmd.identifyTime = ZLL_DEFAULT_IDENTIFY_TIME;
   \   000049   7402         MOV     A,#0x2
   \   00004B   12....       LCALL   ?XSTACK_DISP0_8
   \   00004E   7403         MOV     A,#0x3
   \   000050   F0           MOVX    @DPTR,A
   \   000051   A3           INC     DPTR
   \   000052   E4           CLR     A
   \   000053   8009         SJMP    ??initiatorIdentifyReqCB_5
   1582              }
   1583              else
   1584              {
   1585                cmd.identifyTime = pReq->IdDuration;
   \                     ??initiatorIdentifyReqCB_4:
   \   000055   7402         MOV     A,#0x2
   \   000057   12....       LCALL   ?XSTACK_DISP0_8
   \   00005A   E8           MOV     A,R0
   \   00005B   F0           MOVX    @DPTR,A
   \   00005C   A3           INC     DPTR
   \   00005D   E9           MOV     A,R1
   \                     ??initiatorIdentifyReqCB_5:
   \   00005E   F0           MOVX    @DPTR,A
   1586              }
   1587          
   1588              (*pfnIdentifyCB)( &cmd );
   \   00005F                ; Setup parameters for indirect call
   \   00005F   85..82       MOV     DPL,?XSP + 0
   \   000062   85..83       MOV     DPH,?XSP + 1
   \   000065   AA82         MOV     R2,DPL
   \   000067   AB83         MOV     R3,DPH
   \   000069   90....       MOV     DPTR,#pfnIdentifyCB
   \   00006C   E0           MOVX    A,@DPTR
   \   00006D   F8           MOV     R0,A
   \   00006E   A3           INC     DPTR
   \   00006F   12....       LCALL   ??Subroutine43_0 & 0xFFFF
   1589            }
   \                     ??CrossCallReturnLabel_100:
   \   000072   12....       LCALL   ?CALL_IND
   1590          
   1591            return ( ZSuccess );
   \                     ??initiatorIdentifyReqCB_2:
   \   000075   7900         MOV     R1,#0x0
   \                     ??initiatorIdentifyReqCB_1:
   \   000077   7404         MOV     A,#0x4
   \   000079   12....       LCALL   ?DEALLOC_XSTACK8
   \   00007C                REQUIRE ?Subroutine6
   \   00007C                ; // Fall through to label ?Subroutine6
   1592          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   7F02         MOV     R7,#0x2
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
   1593          
   1594          /*********************************************************************
   1595           * @fn      initiatorResetToFNReqCB
   1596           *
   1597           * @brief   This callback is called to process a Reset to Factory New
   1598           *          Request command.
   1599           *
   1600           * @param   srcAddr - sender's address
   1601           * @param   pReq - parsed command
   1602           *
   1603           * @return  ZStatus_t
   1604           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1605          static ZStatus_t initiatorResetToFNReqCB( afAddrType_t *srcAddr, zclLLResetToFNReq_t *pReq )
   \                     initiatorResetToFNReqCB:
   1606          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1607            // If factory new, discard the request
   1608            if ( ( zll_IsValidTransID( pReq->transID ) == FALSE ) || zll_IsFactoryNew() )
   \   000004                ; Setup parameters for call to function zll_IsValidTransID
   \   000004   8C82         MOV     DPL,R4
   \   000006   8D83         MOV     DPH,R5
   \   000008   12....       LCALL   ?XLOAD_R2345
   \   00000B   12....       LCALL   ??zll_IsValidTransID?relay
   \   00000E   E9           MOV     A,R1
   \   00000F   6006         JZ      ??initiatorResetToFNReqCB_0
   \   000011                ; Setup parameters for call to function zll_IsFactoryNew
   \   000011   12....       LCALL   ??zll_IsFactoryNew?relay
   \   000014   E9           MOV     A,R1
   \   000015   6004         JZ      ??initiatorResetToFNReqCB_1
   1609            {
   1610              return ( ZFailure );
   \                     ??initiatorResetToFNReqCB_0:
   \   000017   7901         MOV     R1,#0x1
   \   000019   800E         SJMP    ??initiatorResetToFNReqCB_2
   1611            }
   1612          
   1613            osal_set_event( zllInitiator_TaskID, ZLL_RESET_TO_FN_EVT );
   \                     ??initiatorResetToFNReqCB_1:
   \   00001B                ; Setup parameters for call to function osal_set_event
   \   00001B   7A04         MOV     R2,#0x4
   \   00001D   7B00         MOV     R3,#0x0
   \   00001F   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000022   E0           MOVX    A,@DPTR
   \   000023   F9           MOV     R1,A
   \   000024   12....       LCALL   ??osal_set_event?relay
   1614            return ( ZSuccess );
   \   000027   7900         MOV     R1,#0x0
   \                     ??initiatorResetToFNReqCB_2:
   \   000029   02....       LJMP    ??Subroutine35_0 & 0xFFFF
   1615          }
   1616          
   1617          /*********************************************************************
   1618           * @fn      initiatorNwkJoinReqCB
   1619           *
   1620           * @brief   This callback is called to process Network Join End Device
   1621           *          Request and Network Join End Device Request commands.
   1622           *
   1623           * @param   srcAddr - sender's address
   1624           * @param   pReq - parsed command
   1625           * @param   seqNum - command sequence number
   1626           *
   1627           * @return  ZStatus_t
   1628           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1629          static ZStatus_t initiatorNwkJoinReqCB( afAddrType_t *srcAddr, zclLLNwkJoinReq_t *pReq, uint8 seqNum )
   \                     initiatorNwkJoinReqCB:
   1630          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 17
   \   000005   74EF         MOV     A,#-0x11
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   8C..         MOV     ?V0 + 0,R4
   \   000010   8D..         MOV     ?V0 + 1,R5
   \   000012   89..         MOV     ?V0 + 2,R1
   1631            zclLLNwkJoinRsp_t rsp;
   1632            afAddrType_t dstAddr;
   1633          
   1634            if ( zll_IsValidTransID( pReq->transID ) == FALSE )
   \   000014                ; Setup parameters for call to function zll_IsValidTransID
   \   000014   8C82         MOV     DPL,R4
   \   000016   8D83         MOV     DPH,R5
   \   000018   12....       LCALL   ?XLOAD_R2345
   \   00001B   12....       LCALL   ??zll_IsValidTransID?relay
   \   00001E   E9           MOV     A,R1
   \   00001F   7005         JNZ     ??initiatorNwkJoinReqCB_0
   1635            {
   1636              return ( ZFailure );
   \   000021   7901         MOV     R1,#0x1
   \   000023   02....       LJMP    ??initiatorNwkJoinReqCB_1 & 0xFFFF
   1637            }
   1638          
   1639            rsp.transID = pReq->transID;
   \                     ??initiatorNwkJoinReqCB_0:
   \   000026   85..82       MOV     DPL,?V0 + 0
   \   000029   85..83       MOV     DPH,?V0 + 1
   \   00002C   12....       LCALL   ?XLOAD_R2345
   \   00002F   85..82       MOV     DPL,?XSP + 0
   \   000032   85..83       MOV     DPH,?XSP + 1
   \   000035   12....       LCALL   ?XSTORE_R2345
   1640          
   1641            if ( nwk_ExtPANIDValid( pReq->nwkParams.extendedPANID ) )
   \   000038                ; Setup parameters for call to function nwk_ExtPANIDValid
   \   000038   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   00003B   12....       LCALL   ??nwk_ExtPANIDValid?relay
   \   00003E   E9           MOV     A,R1
   \   00003F   603A         JZ      ??initiatorNwkJoinReqCB_2
   1642              //NOTE: additional nwk params verification may be added here, e.g. ranges.
   1643            {
   1644              // Save the request for later
   1645              joinReq = *pReq;
   \   000041   85..82       MOV     DPL,?V0 + 0
   \   000044   85..83       MOV     DPH,?V0 + 1
   \   000047   7C..         MOV     R4,#joinReq & 0xff
   \   000049   7D..         MOV     R5,#(joinReq >> 8) & 0xff
   \   00004B   742F         MOV     A,#0x2f
   \   00004D   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1646          
   1647              // Notify our task to join the new network
   1648              osal_set_event( zllInitiator_TaskID, ZLL_ENDDEVICE_JOIN_EVT );
   \   000050                ; Setup parameters for call to function osal_set_event
   \   000050   7A02         MOV     R2,#0x2
   \   000052   FB           MOV     R3,A
   \   000053   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000056   E0           MOVX    A,@DPTR
   \   000057   F9           MOV     R1,A
   \   000058   12....       LCALL   ??osal_set_event?relay
   1649          
   1650              osal_stop_timerEx( zllInitiator_TaskID, ZLL_DISABLE_RX_EVT );
   \   00005B                ; Setup parameters for call to function osal_stop_timerEx
   \   00005B   7A00         MOV     R2,#0x0
   \   00005D   7B04         MOV     R3,#0x4
   \   00005F   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000062   E0           MOVX    A,@DPTR
   \   000063   F9           MOV     R1,A
   \   000064   12....       LCALL   ??osal_stop_timerEx?relay
   1651              osal_stop_timerEx( zllInitiator_TaskID, ZLL_CFG_TARGET_EVT );
   \   000067                ; Setup parameters for call to function osal_stop_timerEx
   \   000067   7A80         MOV     R2,#-0x80
   \   000069   7B00         MOV     R3,#0x0
   \   00006B   90....       MOV     DPTR,#zllInitiator_TaskID
   \   00006E   E0           MOVX    A,@DPTR
   \   00006F   F9           MOV     R1,A
   \   000070   12....       LCALL   ??osal_stop_timerEx?relay
   1652          
   1653              rsp.status = ZLL_NETWORK_JOIN_RSP_STATUS_SUCCESS;
   \   000073   7404         MOV     A,#0x4
   \   000075   12....       LCALL   ?XSTACK_DISP0_8
   \   000078   E4           CLR     A
   \   000079   8007         SJMP    ??initiatorNwkJoinReqCB_3
   1654            }
   1655            else
   1656            {
   1657              rsp.status = ZLL_NETWORK_JOIN_RSP_STATUS_FAILURE;
   \                     ??initiatorNwkJoinReqCB_2:
   \   00007B   7404         MOV     A,#0x4
   \   00007D   12....       LCALL   ?XSTACK_DISP0_8
   \   000080   7401         MOV     A,#0x1
   \                     ??initiatorNwkJoinReqCB_3:
   \   000082   F0           MOVX    @DPTR,A
   1658            }
   1659          
   1660            dstAddr = *srcAddr;
   \   000083   7405         MOV     A,#0x5
   \   000085   12....       LCALL   ?XSTACK_DISP0_8
   \   000088   AC82         MOV     R4,DPL
   \   00008A   AD83         MOV     R5,DPH
   \   00008C   8F83         MOV     DPH,R7
   \   00008E   8E82         MOV     DPL,R6
   \   000090   740C         MOV     A,#0xc
   \   000092   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1661            dstAddr.panId = 0xFFFF;
   \   000095   740F         MOV     A,#0xf
   \   000097   12....       LCALL   ?XSTACK_DISP0_8
   \   00009A   74FF         MOV     A,#-0x1
   \   00009C   F0           MOVX    @DPTR,A
   \   00009D   A3           INC     DPTR
   \   00009E   F0           MOVX    @DPTR,A
   1662          
   1663            // Send a response back
   1664          #if ( ZSTACK_ROUTER_BUILD )
   1665            zclLL_Send_NwkJoinRtrRsp( ZLL_INTERNAL_ENDPOINT, &dstAddr, &rsp, seqNum );
   \   00009F                ; Setup parameters for call to function zclLL_Send_NwkJoinRsp
   \   00009F   E5..         MOV     A,?V0 + 2
   \   0000A1   F5..         MOV     ?V0 + 0,A
   \   0000A3   78..         MOV     R0,#?V0 + 0
   \   0000A5   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000A8   75..13       MOV     ?V0 + 0,#0x13
   \   0000AB   78..         MOV     R0,#?V0 + 0
   \   0000AD   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000B0   7402         MOV     A,#0x2
   \   0000B2   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B5   AC82         MOV     R4,DPL
   \   0000B7   AD83         MOV     R5,DPH
   \   0000B9   7407         MOV     A,#0x7
   \   0000BB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000BE   AA82         MOV     R2,DPL
   \   0000C0   AB83         MOV     R3,DPH
   \   0000C2   790D         MOV     R1,#0xd
   \   0000C4   12....       LCALL   ??zclLL_Send_NwkJoinRsp?relay
   \   0000C7   7402         MOV     A,#0x2
   \   0000C9   12....       LCALL   ?DEALLOC_XSTACK8
   1666          #else
   1667            zclLL_Send_NwkJoinEDRsp( ZLL_INTERNAL_ENDPOINT, &dstAddr, &rsp, seqNum );
   1668          #endif
   1669          
   1670            return ( ZSuccess );
   \   0000CC   7900         MOV     R1,#0x0
   \                     ??initiatorNwkJoinReqCB_1:
   \   0000CE   7411         MOV     A,#0x11
   \   0000D0                REQUIRE ?Subroutine5
   \   0000D0                ; // Fall through to label ?Subroutine5
   1671          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003                REQUIRE ??Subroutine44_0
   \   000003                ; // Fall through to label ??Subroutine44_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine27:
   \   000000   E5..         MOV     A,?V0 + 0
   \   000002   2404         ADD     A,#0x4
   \   000004   FA           MOV     R2,A
   \   000005   E5..         MOV     A,?V0 + 1
   \   000007   3400         ADDC    A,#0x0
   \   000009   FB           MOV     R3,A
   \   00000A   22           RET
   1672          
   1673          /*********************************************************************
   1674           * @fn      initiatorScanReqCB
   1675           *
   1676           * @brief   This callback is called to process a Scan Response command.
   1677           *
   1678           * @param   srcAddr - sender's address
   1679           * @param   pRsp - parsed command
   1680           *
   1681           * @return  ZStatus_t
   1682           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   F582         MOV     DPL,A
   \   000002   EF           MOV     A,R7
   \   000003                REQUIRE ??Subroutine40_0
   \   000003                ; // Fall through to label ??Subroutine40_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1683          static ZStatus_t initiatorScanRspCB( afAddrType_t *srcAddr, zclLLScanRsp_t *pRsp )
   \                     initiatorScanRspCB:
   1684          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 5
   \   000005   74FB         MOV     A,#-0x5
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 0,R2
   \   00000C   8B..         MOV     ?V0 + 1,R3
   \   00000E   EC           MOV     A,R4
   \   00000F   FE           MOV     R6,A
   \   000010   ED           MOV     A,R5
   \   000011   FF           MOV     R7,A
   1685            if ( osal_get_timeoutEx( zllInitiator_TaskID, ZLL_TL_SCAN_BASE_EVT )
   1686                 && ( zll_IsValidTransID( pRsp->transID ) )
   1687                 && ( pRsp->keyBitmask & zll_GetNwkKeyBitmask() ) )
   \   000012                ; Setup parameters for call to function osal_get_timeoutEx
   \   000012   7A40         MOV     R2,#0x40
   \   000014   7B00         MOV     R3,#0x0
   \   000016   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   F9           MOV     R1,A
   \   00001B   12....       LCALL   ??osal_get_timeoutEx?relay
   \   00001E   EA           MOV     A,R2
   \   00001F   4B           ORL     A,R3
   \   000020   4C           ORL     A,R4
   \   000021   4D           ORL     A,R5
   \   000022   7003         JNZ     $+5
   \   000024   02....       LJMP    ??initiatorScanRspCB_0 & 0xFFFF
   \   000027                ; Setup parameters for call to function zll_IsValidTransID
   \   000027   8E82         MOV     DPL,R6
   \   000029   8F83         MOV     DPH,R7
   \   00002B   12....       LCALL   ?XLOAD_R2345
   \   00002E   12....       LCALL   ??zll_IsValidTransID?relay
   \   000031   E9           MOV     A,R1
   \   000032   7003         JNZ     $+5
   \   000034   02....       LJMP    ??initiatorScanRspCB_0 & 0xFFFF
   \   000037                ; Setup parameters for call to function zll_GetNwkKeyBitmask
   \   000037   12....       LCALL   ??zll_GetNwkKeyBitmask?relay
   \   00003A   8A..         MOV     ?V0 + 2,R2
   \   00003C   8B..         MOV     ?V0 + 3,R3
   \   00003E   A8..         MOV     R0,?V0 + 2
   \   000040   A9..         MOV     R1,?V0 + 3
   \   000042   8E82         MOV     DPL,R6
   \   000044   8F83         MOV     DPH,R7
   \   000046   A3           INC     DPTR
   \   000047   A3           INC     DPTR
   \   000048   A3           INC     DPTR
   \   000049   A3           INC     DPTR
   \   00004A   A3           INC     DPTR
   \   00004B   A3           INC     DPTR
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   A3           INC     DPTR
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   58           ANL     A,R0
   \   000051   F8           MOV     R0,A
   \   000052   A3           INC     DPTR
   \   000053   E0           MOVX    A,@DPTR
   \   000054   59           ANL     A,R1
   \   000055   F9           MOV     R1,A
   \   000056   E8           MOV     A,R0
   \   000057   49           ORL     A,R1
   \   000058   7003         JNZ     $+5
   \   00005A   02....       LJMP    ??initiatorScanRspCB_0 & 0xFFFF
   1688            {
   1689              uint8 selectThisTarget = FALSE;
   1690              int8 rssi = zll_GetMsgRssi();
   \   00005D                ; Setup parameters for call to function zll_GetMsgRssi
   \   00005D   12....       LCALL   ??zll_GetMsgRssi?relay
   \   000060   E9           MOV     A,R1
   \   000061   F5..         MOV     ?V0 + 2,A
   1691              if ( pfnSelectDiscDevCB != NULL )
   \   000063   90....       MOV     DPTR,#pfnSelectDiscDevCB
   \   000066   12....       LCALL   ??Subroutine33_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   000069   6014         JZ      ??initiatorScanRspCB_1
   1692              {
   1693                selectThisTarget = pfnSelectDiscDevCB( pRsp, rssi );
   1694              }
   1695              // Default selection - according to RSSI
   1696              else if ( rssi > ZLL_TL_WORST_RSSI )
   1697              {
   1698                if ( ( rssi + pRsp->rssiCorrection ) > selectedTarget.lastRssi )
   1699                {
   1700                  // Better RSSI, select this target
   1701                  selectThisTarget = TRUE;
   1702                }
   1703              }
   1704          
   1705              if ( selectThisTarget )
   \   00006B                ; Setup parameters for indirect call
   \   00006B   A9..         MOV     R1,?V0 + 2
   \   00006D   EE           MOV     A,R6
   \   00006E   FA           MOV     R2,A
   \   00006F   EF           MOV     A,R7
   \   000070   FB           MOV     R3,A
   \   000071   12....       LCALL   ??Subroutine43_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_101:
   \   000074   12....       LCALL   ?CALL_IND
   \   000077   E9           MOV     A,R1
   \   000078   7039         JNZ     ??initiatorScanRspCB_2
   1706              {
   1707                selectedTarget.scanRsp = *pRsp;
   1708                selectedTarget.lastRssi = rssi;
   1709                selectedTarget.srcAddr = *srcAddr;
   1710                selectedTarget.srcAddr.panId = 0xFFFF;
   1711          
   1712                // Remember channel we heard back this scan response on
   1713                ZMacGetReq( ZMacChannel, &(selectedTarget.rxChannel));
   1714          
   1715                if ( pRsp->numSubDevices > 1 )
   1716                {
   1717                  selectedTarget.scanRsp.deviceInfo.endpoint = DEV_INFO_INVALID_EP;
   1718          
   1719                  zclLLDeviceInfoReq_t devInfoReq;
   1720                  devInfoReq.transID = pRsp->transID;
   1721                  devInfoReq.startIndex = 0;
   1722                  return zclLL_Send_DeviceInfoReq( ZLL_INTERNAL_ENDPOINT, srcAddr,
   1723                                              &devInfoReq, initiatorSeqNum++ );
   1724                }
   1725              }
   1726              return ( ZSuccess );
   \                     ??initiatorScanRspCB_3:
   \   00007A   7900         MOV     R1,#0x0
   \   00007C   02....       LJMP    ??initiatorScanRspCB_4 & 0xFFFF
   \                     ??initiatorScanRspCB_1:
   \   00007F   E5..         MOV     A,?V0 + 2
   \   000081   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   000084   40F4         JC      ??initiatorScanRspCB_3
   \   000086   90....       MOV     DPTR,#selectedTarget + 53
   \   000089   E0           MOVX    A,@DPTR
   \   00008A   FA           MOV     R2,A
   \   00008B   33           RLC     A
   \   00008C   95E0         SUBB    A,0xE0 /* A   */
   \   00008E   FB           MOV     R3,A
   \   00008F   E5..         MOV     A,?V0 + 2
   \   000091   F8           MOV     R0,A
   \   000092   33           RLC     A
   \   000093   95E0         SUBB    A,0xE0 /* A   */
   \   000095   F9           MOV     R1,A
   \   000096   8E82         MOV     DPL,R6
   \   000098   8F83         MOV     DPH,R7
   \   00009A   A3           INC     DPTR
   \   00009B   A3           INC     DPTR
   \   00009C   A3           INC     DPTR
   \   00009D   A3           INC     DPTR
   \   00009E   E0           MOVX    A,@DPTR
   \   00009F   FC           MOV     R4,A
   \   0000A0   E8           MOV     A,R0
   \   0000A1   2C           ADD     A,R4
   \   0000A2   F8           MOV     R0,A
   \   0000A3   E9           MOV     A,R1
   \   0000A4   3400         ADDC    A,#0x0
   \   0000A6   F9           MOV     R1,A
   \   0000A7   C3           CLR     C
   \   0000A8   EA           MOV     A,R2
   \   0000A9   98           SUBB    A,R0
   \   0000AA   EB           MOV     A,R3
   \   0000AB   99           SUBB    A,R1
   \   0000AC   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000AE   65D0         XRL     A,PSW
   \   0000B0   33           RLC     A
   \   0000B1   50C7         JNC     ??initiatorScanRspCB_3
   \                     ??initiatorScanRspCB_2:
   \   0000B3   8E82         MOV     DPL,R6
   \   0000B5   8F83         MOV     DPH,R7
   \   0000B7   7C..         MOV     R4,#selectedTarget & 0xff
   \   0000B9   7D..         MOV     R5,#(selectedTarget >> 8) & 0xff
   \   0000BB   7426         MOV     A,#0x26
   \   0000BD   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   \   0000C0   E5..         MOV     A,?V0 + 2
   \   0000C2   90....       MOV     DPTR,#selectedTarget + 53
   \   0000C5   F0           MOVX    @DPTR,A
   \   0000C6   85..82       MOV     DPL,?V0 + 0
   \   0000C9   85..83       MOV     DPH,?V0 + 1
   \   0000CC   740C         MOV     A,#0xc
   \   0000CE   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   \   0000D1   90....       MOV     DPTR,#selectedTarget + 48
   \   0000D4   74FF         MOV     A,#-0x1
   \   0000D6   F0           MOVX    @DPTR,A
   \   0000D7   A3           INC     DPTR
   \   0000D8   F0           MOVX    @DPTR,A
   \   0000D9                ; Setup parameters for call to function ZMacGetReq
   \   0000D9   7A..         MOV     R2,#(selectedTarget + 52) & 0xff
   \   0000DB   7B..         MOV     R3,#((selectedTarget + 52) >> 8) & 0xff
   \   0000DD   79E1         MOV     R1,#-0x1f
   \   0000DF   12....       LCALL   ??ZMacGetReq?relay
   \   0000E2   EE           MOV     A,R6
   \   0000E3   241D         ADD     A,#0x1d
   \   0000E5   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_71:
   \   0000E8   C3           CLR     C
   \   0000E9   9402         SUBB    A,#0x2
   \   0000EB   408D         JC      ??initiatorScanRspCB_3
   \   0000ED   90....       MOV     DPTR,#selectedTarget + 31
   \   0000F0   74FE         MOV     A,#-0x2
   \   0000F2   F0           MOVX    @DPTR,A
   \   0000F3   8E82         MOV     DPL,R6
   \   0000F5   8F83         MOV     DPH,R7
   \   0000F7   12....       LCALL   ?XLOAD_R2345
   \   0000FA   85..82       MOV     DPL,?XSP + 0
   \   0000FD   85..83       MOV     DPH,?XSP + 1
   \   000100   12....       LCALL   ?XSTORE_R2345
   \   000103   7404         MOV     A,#0x4
   \   000105   12....       LCALL   ?XSTACK_DISP0_8
   \   000108   E4           CLR     A
   \   000109   12....       LCALL   ?Subroutine8 & 0xFFFF
   1727            }
   \                     ??CrossCallReturnLabel_1:
   \   00010C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00010F   7401         MOV     A,#0x1
   \   000111   12....       LCALL   ?XSTACK_DISP0_8
   \   000114   AC82         MOV     R4,DPL
   \   000116   AD83         MOV     R5,DPH
   \   000118   AA..         MOV     R2,?V0 + 0
   \   00011A   AB..         MOV     R3,?V0 + 1
   \   00011C   790D         MOV     R1,#0xd
   \   00011E   12....       LCALL   ??zclLL_Send_DeviceInfoReq?relay
   \   000121   7401         MOV     A,#0x1
   \   000123   12....       LCALL   ?DEALLOC_XSTACK8
   \   000126   8002         SJMP    ??initiatorScanRspCB_4
   1728          
   1729            return ( ZFailure );
   \                     ??initiatorScanRspCB_0:
   \   000128   7901         MOV     R1,#0x1
   \                     ??initiatorScanRspCB_4:
   \   00012A   7405         MOV     A,#0x5
   \   00012C   02....       LJMP    ?Subroutine3 & 0xFFFF
   1730          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   000003   F5..         MOV     ?V0 + 2,A
   \   000005   78..         MOV     R0,#?V0 + 2
   \   000007   22           RET
   1731          
   1732          /*********************************************************************
   1733           * @fn      initiatorDeviceInfoRspCB
   1734           *
   1735           * @brief   This callback is called to process a Device Information
   1736           *          Response command.
   1737           *          If sub-device is selected, selectedTarget data is updated.
   1738           *
   1739           * @param   srcAddr - sender's address
   1740           * @param   pRsp - parsed command
   1741           *
   1742           * @return  ZStatus_t
   1743           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1744          static ZStatus_t initiatorDeviceInfoRspCB( afAddrType_t *srcAddr, zclLLDeviceInfoRsp_t *pRsp )
   \                     initiatorDeviceInfoRspCB:
   1745          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 38
   \   000005   74DA         MOV     A,#-0x26
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 0,R2
   \   00000C   8B..         MOV     ?V0 + 1,R3
   \   00000E   EC           MOV     A,R4
   \   00000F   FE           MOV     R6,A
   \   000010   ED           MOV     A,R5
   \   000011   FF           MOV     R7,A
   1746            if ( zll_IsValidTransID( pRsp->transID )
   1747                 && ( srcAddr->addr.shortAddr == selectedTarget.srcAddr.addr.shortAddr ) )
   \   000012                ; Setup parameters for call to function zll_IsValidTransID
   \   000012   8E82         MOV     DPL,R6
   \   000014   8F83         MOV     DPH,R7
   \   000016   12....       LCALL   ?XLOAD_R2345
   \   000019   12....       LCALL   ??zll_IsValidTransID?relay
   \   00001C   E9           MOV     A,R1
   \   00001D   7003         JNZ     $+5
   \   00001F   02....       LJMP    ??initiatorDeviceInfoRspCB_0 & 0xFFFF
   \   000022   85..82       MOV     DPL,?V0 + 0
   \   000025   85..83       MOV     DPH,?V0 + 1
   \   000028   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_83:
   \   00002B   90....       MOV     DPTR,#selectedTarget + 38
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   68           XRL     A,R0
   \   000030   7003         JNZ     ??initiatorDeviceInfoRspCB_1
   \   000032   A3           INC     DPTR
   \   000033   E0           MOVX    A,@DPTR
   \   000034   69           XRL     A,R1
   \                     ??initiatorDeviceInfoRspCB_1:
   \   000035   6003         JZ      $+5
   \   000037   02....       LJMP    ??initiatorDeviceInfoRspCB_0 & 0xFFFF
   1748            {
   1749              uint8 selectedIdx = pRsp->cnt;
   \   00003A   EE           MOV     A,R6
   \   00003B   2406         ADD     A,#0x6
   \   00003D   F5..         MOV     ?V0 + 0,A
   \   00003F   EF           MOV     A,R7
   \   000040   3400         ADDC    A,#0x0
   \   000042   F5..         MOV     ?V0 + 1,A
   \   000044   85..82       MOV     DPL,?V0 + 0
   \   000047   F583         MOV     DPH,A
   \   000049   E0           MOVX    A,@DPTR
   \   00004A   F5..         MOV     ?V0 + 3,A
   1750              zclLLScanRsp_t tmpInfo = selectedTarget.scanRsp;
   \   00004C   85..82       MOV     DPL,?XSP + 0
   \   00004F   85..83       MOV     DPH,?XSP + 1
   \   000052   AC82         MOV     R4,DPL
   \   000054   AD83         MOV     R5,DPH
   \   000056   7583..       MOV     DPH,#(selectedTarget >> 8) & 0xff
   \   000059   7582..       MOV     DPL,#selectedTarget & 0xff
   \   00005C   7426         MOV     A,#0x26
   \   00005E   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1751          
   1752              for (uint8 i = 0; i < pRsp->cnt; ++i )
   \   000061   F5..         MOV     ?V0 + 2,A
   \   000063   8039         SJMP    ??initiatorDeviceInfoRspCB_2
   1753              {
   1754                if ( pfnSelectDiscDevCB != NULL )
   1755                {
   1756                  tmpInfo.deviceInfo = pRsp->devInfoRec[i].deviceInfo;
   \                     ??initiatorDeviceInfoRspCB_3:
   \   000065   C082         PUSH    DPL
   \   000067   C083         PUSH    DPH
   \   000069   741F         MOV     A,#0x1f
   \   00006B   12....       LCALL   ?XSTACK_DISP0_8
   \   00006E   AC82         MOV     R4,DPL
   \   000070   AD83         MOV     R5,DPH
   \   000072   D083         POP     DPH
   \   000074   D082         POP     DPL
   \   000076   7407         MOV     A,#0x7
   \   000078   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1757                  if ( pfnSelectDiscDevCB( &tmpInfo, selectedTarget.lastRssi ) )
   \   00007B                ; Setup parameters for indirect call
   \   00007B   90....       MOV     DPTR,#selectedTarget + 53
   \   00007E   E0           MOVX    A,@DPTR
   \   00007F   F9           MOV     R1,A
   \   000080   85..82       MOV     DPL,?XSP + 0
   \   000083   85..83       MOV     DPH,?XSP + 1
   \   000086   AA82         MOV     R2,DPL
   \   000088   AB83         MOV     R3,DPH
   \   00008A   90....       MOV     DPTR,#pfnSelectDiscDevCB
   \   00008D   E0           MOVX    A,@DPTR
   \   00008E   F8           MOV     R0,A
   \   00008F   A3           INC     DPTR
   \   000090   12....       LCALL   ??Subroutine43_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_102:
   \   000093   12....       LCALL   ?CALL_IND
   \   000096   E9           MOV     A,R1
   \   000097   6003         JZ      ??initiatorDeviceInfoRspCB_4
   1758                  {
   1759                    selectedIdx = i;
   \   000099   85....       MOV     ?V0 + 3,?V0 + 2
   1760                    // no break here to allow cycling through all sub-devices
   1761                  }
   1762                }
   \                     ??initiatorDeviceInfoRspCB_4:
   \   00009C   05..         INC     ?V0 + 2
   \                     ??initiatorDeviceInfoRspCB_2:
   \   00009E   85..82       MOV     DPL,?V0 + 0
   \   0000A1   85..83       MOV     DPH,?V0 + 1
   \   0000A4   E0           MOVX    A,@DPTR
   \   0000A5   F8           MOV     R0,A
   \   0000A6   E5..         MOV     A,?V0 + 2
   \   0000A8   C3           CLR     C
   \   0000A9   98           SUBB    A,R0
   \   0000AA   5048         JNC     ??initiatorDeviceInfoRspCB_5
   \   0000AC   85....       MOV     ?V0 + 4,?V0 + 2
   \   0000AF   75..00       MOV     ?V0 + 5,#0x0
   \   0000B2   7404         MOV     A,#0x4
   \   0000B4   78..         MOV     R0,#?V0 + 4
   \   0000B6   12....       LCALL   ?S_SHL
   \   0000B9   8E82         MOV     DPL,R6
   \   0000BB   8F83         MOV     DPH,R7
   \   0000BD   A3           INC     DPTR
   \   0000BE   A3           INC     DPTR
   \   0000BF   A3           INC     DPTR
   \   0000C0   A3           INC     DPTR
   \   0000C1   A3           INC     DPTR
   \   0000C2   A3           INC     DPTR
   \   0000C3   A3           INC     DPTR
   \   0000C4   E0           MOVX    A,@DPTR
   \   0000C5   25..         ADD     A,?V0 + 4
   \   0000C7   F8           MOV     R0,A
   \   0000C8   A3           INC     DPTR
   \   0000C9   E0           MOVX    A,@DPTR
   \   0000CA   35..         ADDC    A,?V0 + 5
   \   0000CC   F9           MOV     R1,A
   \   0000CD   90....       MOV     DPTR,#pfnSelectDiscDevCB
   \   0000D0   12....       LCALL   ??Subroutine47_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_112:
   \   0000D3   EA           MOV     A,R2
   \   0000D4   4B           ORL     A,R3
   \   0000D5   8882         MOV     DPL,R0
   \   0000D7   8983         MOV     DPH,R1
   \   0000D9   A3           INC     DPTR
   \   0000DA   A3           INC     DPTR
   \   0000DB   A3           INC     DPTR
   \   0000DC   A3           INC     DPTR
   \   0000DD   A3           INC     DPTR
   \   0000DE   A3           INC     DPTR
   \   0000DF   A3           INC     DPTR
   \   0000E0   A3           INC     DPTR
   \   0000E1   7082         JNZ     ??initiatorDeviceInfoRspCB_3
   1763                else
   1764                {
   1765                  if ( pRsp->devInfoRec[i].deviceInfo.profileID == ZLL_PROFILE_ID )
   \   0000E3   A3           INC     DPTR
   \   0000E4   E0           MOVX    A,@DPTR
   \   0000E5   645E         XRL     A,#0x5e
   \   0000E7   7004         JNZ     ??initiatorDeviceInfoRspCB_6
   \   0000E9   A3           INC     DPTR
   \   0000EA   E0           MOVX    A,@DPTR
   \   0000EB   64C0         XRL     A,#0xc0
   \                     ??initiatorDeviceInfoRspCB_6:
   \   0000ED   70AD         JNZ     ??initiatorDeviceInfoRspCB_4
   1766                  {
   1767                    selectedIdx = i;
   \   0000EF   85....       MOV     ?V0 + 3,?V0 + 2
   1768                    break; // first match
   \   0000F2   8006         SJMP    ??initiatorDeviceInfoRspCB_7
   1769                  }
   1770                }
   1771              }
   1772              if ( selectedIdx < pRsp->cnt )
   \                     ??initiatorDeviceInfoRspCB_5:
   \   0000F4   E5..         MOV     A,?V0 + 3
   \   0000F6   C3           CLR     C
   \   0000F7   98           SUBB    A,R0
   \   0000F8   5037         JNC     ??initiatorDeviceInfoRspCB_8
   1773              {
   1774                // NOTE - the original scan response device info is overwritten with the
   1775                // selected sub-device info, to complete the data required for the application.
   1776                selectedTarget.scanRsp.deviceInfo = pRsp->devInfoRec[selectedIdx].deviceInfo;
   \                     ??initiatorDeviceInfoRspCB_7:
   \   0000FA   85....       MOV     ?V0 + 0,?V0 + 3
   \   0000FD   75..00       MOV     ?V0 + 1,#0x0
   \   000100   7404         MOV     A,#0x4
   \   000102   78..         MOV     R0,#?V0 + 0
   \   000104   12....       LCALL   ?S_SHL
   \   000107   8E82         MOV     DPL,R6
   \   000109   8F83         MOV     DPH,R7
   \   00010B   A3           INC     DPTR
   \   00010C   A3           INC     DPTR
   \   00010D   A3           INC     DPTR
   \   00010E   A3           INC     DPTR
   \   00010F   A3           INC     DPTR
   \   000110   A3           INC     DPTR
   \   000111   A3           INC     DPTR
   \   000112   E0           MOVX    A,@DPTR
   \   000113   25..         ADD     A,?V0 + 0
   \   000115   F8           MOV     R0,A
   \   000116   A3           INC     DPTR
   \   000117   E0           MOVX    A,@DPTR
   \   000118   35..         ADDC    A,?V0 + 1
   \   00011A   8882         MOV     DPL,R0
   \   00011C   F583         MOV     DPH,A
   \   00011E   A3           INC     DPTR
   \   00011F   A3           INC     DPTR
   \   000120   A3           INC     DPTR
   \   000121   A3           INC     DPTR
   \   000122   A3           INC     DPTR
   \   000123   A3           INC     DPTR
   \   000124   A3           INC     DPTR
   \   000125   A3           INC     DPTR
   \   000126   7C..         MOV     R4,#(selectedTarget + 31) & 0xff
   \   000128   7D..         MOV     R5,#((selectedTarget + 31) >> 8) & 0xff
   \   00012A   7407         MOV     A,#0x7
   \   00012C   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   \   00012F   8003         SJMP    ??initiatorDeviceInfoRspCB_9
   1777              }
   1778              else
   1779              {
   1780                // no sub-device of the currently selected device was selected.
   1781                // clear selection
   1782                initiatorClearSelectedTarget();
   \                     ??initiatorDeviceInfoRspCB_8:
   \   000131                ; Setup parameters for call to function initiatorClearSelectedTarget
   \   000131   12....       LCALL   ??initiatorClearSelectedTarget?relay
   1783              }
   1784              return ( ZSuccess );
   \                     ??initiatorDeviceInfoRspCB_9:
   \   000134   7900         MOV     R1,#0x0
   \   000136   8002         SJMP    ??initiatorDeviceInfoRspCB_10
   1785            }
   1786            return ( ZFailure );
   \                     ??initiatorDeviceInfoRspCB_0:
   \   000138   7901         MOV     R1,#0x1
   \                     ??initiatorDeviceInfoRspCB_10:
   \   00013A   7426         MOV     A,#0x26
   \   00013C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00013F   02....       LJMP    ?Subroutine4 & 0xFFFF
   1787          }
   1788          
   1789          /*********************************************************************
   1790           * @fn      initiatorNwkStartRspCB
   1791           *
   1792           * @brief   This callback is called to process a Network Start Response command.
   1793           *
   1794           * @param   srcAddr - sender's address
   1795           * @param   pRsp - parsed command
   1796           *
   1797           * @return  ZStatus_t
   1798           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1799          static ZStatus_t initiatorNwkStartRspCB( afAddrType_t *srcAddr, zclLLNwkStartRsp_t *pRsp )
   \                     initiatorNwkStartRspCB:
   1800          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EC           MOV     A,R4
   \   000006   FE           MOV     R6,A
   \   000007   ED           MOV     A,R5
   \   000008   FF           MOV     R7,A
   1801            if ( zll_IsValidTransID( pRsp->transID ) == FALSE )
   \   000009                ; Setup parameters for call to function zll_IsValidTransID
   \   000009   8E82         MOV     DPL,R6
   \   00000B   8F83         MOV     DPH,R7
   \   00000D   12....       LCALL   ?XLOAD_R2345
   \   000010   12....       LCALL   ??zll_IsValidTransID?relay
   \   000013   E9           MOV     A,R1
   \   000014   7004         JNZ     ??initiatorNwkStartRspCB_0
   1802            {
   1803              return ( ZFailure );
   \   000016   7901         MOV     R1,#0x1
   \   000018   8038         SJMP    ??initiatorNwkStartRspCB_1
   1804            }
   1805            // Make sure we didn't timeout waiting for this response
   1806            if ( osal_get_timeoutEx( zllInitiator_TaskID, ZLL_W4_NWK_START_RSP_EVT ) )
   \                     ??initiatorNwkStartRspCB_0:
   \   00001A                ; Setup parameters for call to function osal_get_timeoutEx
   \   00001A   7A00         MOV     R2,#0x0
   \   00001C   7B01         MOV     R3,#0x1
   \   00001E   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000021   E0           MOVX    A,@DPTR
   \   000022   F9           MOV     R1,A
   \   000023   12....       LCALL   ??osal_get_timeoutEx?relay
   \   000026   EA           MOV     A,R2
   \   000027   4B           ORL     A,R3
   \   000028   4C           ORL     A,R4
   \   000029   4D           ORL     A,R5
   \   00002A   6024         JZ      ??initiatorNwkStartRspCB_2
   1807            {
   1808              // Save the Network Start Response for later
   1809              rxRsp.nwkStartRsp = *pRsp;
   \   00002C   8E82         MOV     DPL,R6
   \   00002E   8F83         MOV     DPH,R7
   \   000030   7C..         MOV     R4,#rxRsp & 0xff
   \   000032   7D..         MOV     R5,#(rxRsp >> 8) & 0xff
   \   000034   7411         MOV     A,#0x11
   \   000036   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1810          
   1811              // No need to wait longer
   1812              osal_start_timerEx( zllInitiator_TaskID, ZLL_W4_NWK_START_RSP_EVT, 0 );
   \   000039                ; Setup parameters for call to function osal_start_timerEx
   \   000039   90....       MOV     DPTR,#__Constant_0
   \   00003C   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00003F   7A00         MOV     R2,#0x0
   \   000041   7B01         MOV     R3,#0x1
   \   000043   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000046   E0           MOVX    A,@DPTR
   \   000047   F9           MOV     R1,A
   \   000048   12....       LCALL   ??osal_start_timerEx?relay
   \   00004B   7404         MOV     A,#0x4
   \   00004D   12....       LCALL   ?DEALLOC_XSTACK8
   1813            }
   1814          
   1815            return ( ZSuccess );
   \                     ??initiatorNwkStartRspCB_2:
   \   000050   7900         MOV     R1,#0x0
   \                     ??initiatorNwkStartRspCB_1:
   \   000052                REQUIRE ?Subroutine2
   \   000052                ; // Fall through to label ?Subroutine2
   1816          }
   1817          
   1818          /*********************************************************************
   1819           * @fn      initiatorNwkJoinRtrRspCB
   1820           *
   1821           * @brief   This callback is called to process a Network Join Router
   1822           *          Response command.
   1823           *
   1824           * @param   srcAddr - sender's address
   1825           * @param   pRsp - parsed command
   1826           *
   1827           * @return  ZStatus_t
   1828           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1829          static ZStatus_t initiatorNwkJoinRtrRspCB( afAddrType_t *srcAddr, zclLLNwkJoinRsp_t *pRsp )
   \                     initiatorNwkJoinRtrRspCB:
   1830          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EC           MOV     A,R4
   \   000006   FE           MOV     R6,A
   \   000007   ED           MOV     A,R5
   \   000008   FF           MOV     R7,A
   1831            if ( zll_IsValidTransID( pRsp->transID ) == FALSE )
   \   000009                ; Setup parameters for call to function zll_IsValidTransID
   \   000009   8E82         MOV     DPL,R6
   \   00000B   8F83         MOV     DPH,R7
   \   00000D   12....       LCALL   ?XLOAD_R2345
   \   000010   12....       LCALL   ??zll_IsValidTransID?relay
   \   000013   E9           MOV     A,R1
   \   000014   7004         JNZ     ??initiatorNwkJoinRtrRspCB_0
   1832            {
   1833              return ( ZFailure );
   \   000016   7901         MOV     R1,#0x1
   \   000018   8038         SJMP    ??initiatorNwkJoinRtrRspCB_1
   1834            }
   1835            // Make sure we didn't timeout waiting for this response
   1836            if ( osal_get_timeoutEx( zllInitiator_TaskID, ZLL_W4_NWK_JOIN_RSP_EVT ) )
   \                     ??initiatorNwkJoinRtrRspCB_0:
   \   00001A                ; Setup parameters for call to function osal_get_timeoutEx
   \   00001A   7A00         MOV     R2,#0x0
   \   00001C   7B02         MOV     R3,#0x2
   \   00001E   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000021   E0           MOVX    A,@DPTR
   \   000022   F9           MOV     R1,A
   \   000023   12....       LCALL   ??osal_get_timeoutEx?relay
   \   000026   EA           MOV     A,R2
   \   000027   4B           ORL     A,R3
   \   000028   4C           ORL     A,R4
   \   000029   4D           ORL     A,R5
   \   00002A   6024         JZ      ??initiatorNwkJoinRtrRspCB_2
   1837            {
   1838              // Save the Network Start Response for later
   1839              rxRsp.nwkJoinRsp = *pRsp;
   \   00002C   8E82         MOV     DPL,R6
   \   00002E   8F83         MOV     DPH,R7
   \   000030   7C..         MOV     R4,#rxRsp & 0xff
   \   000032   7D..         MOV     R5,#(rxRsp >> 8) & 0xff
   \   000034   7405         MOV     A,#0x5
   \   000036   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1840          
   1841              // No need to wait longer
   1842              osal_start_timerEx( zllInitiator_TaskID, ZLL_W4_NWK_JOIN_RSP_EVT, 0 );
   \   000039                ; Setup parameters for call to function osal_start_timerEx
   \   000039   90....       MOV     DPTR,#__Constant_0
   \   00003C   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00003F   7A00         MOV     R2,#0x0
   \   000041   7B02         MOV     R3,#0x2
   \   000043   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000046   E0           MOVX    A,@DPTR
   \   000047   F9           MOV     R1,A
   \   000048   12....       LCALL   ??osal_start_timerEx?relay
   \   00004B   7404         MOV     A,#0x4
   \   00004D   12....       LCALL   ?DEALLOC_XSTACK8
   1843            }
   1844          
   1845            return ( ZSuccess );
   \                     ??initiatorNwkJoinRtrRspCB_2:
   \   000050   7900         MOV     R1,#0x0
   \                     ??initiatorNwkJoinRtrRspCB_1:
   \   000052   80..         SJMP    ?Subroutine2
   1846          }
   1847          
   1848          /*********************************************************************
   1849           * @fn      initiatorNwkJoinEDRspCB
   1850           *
   1851           * @brief   This callback is called to process a Network Join End Device
   1852           *          Response command.
   1853           *
   1854           * @param   srcAddr - sender's address
   1855           * @param   pRsp - parsed command
   1856           *
   1857           * @return  ZStatus_t
   1858           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1859          static ZStatus_t initiatorNwkJoinEDRspCB( afAddrType_t *srcAddr, zclLLNwkJoinRsp_t *pRsp )
   \                     initiatorNwkJoinEDRspCB:
   1860          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EC           MOV     A,R4
   \   000006   FE           MOV     R6,A
   \   000007   ED           MOV     A,R5
   \   000008   FF           MOV     R7,A
   1861            if ( zll_IsValidTransID( pRsp->transID ) == FALSE )
   \   000009                ; Setup parameters for call to function zll_IsValidTransID
   \   000009   8E82         MOV     DPL,R6
   \   00000B   8F83         MOV     DPH,R7
   \   00000D   12....       LCALL   ?XLOAD_R2345
   \   000010   12....       LCALL   ??zll_IsValidTransID?relay
   \   000013   E9           MOV     A,R1
   \   000014   7004         JNZ     ??initiatorNwkJoinEDRspCB_0
   1862            {
   1863              return ( ZFailure );
   \   000016   7901         MOV     R1,#0x1
   \   000018   8040         SJMP    ??initiatorNwkJoinEDRspCB_1
   1864            }
   1865            // Make sure we didn't timeout waiting for this response
   1866            if ( osal_get_timeoutEx( zllInitiator_TaskID, ZLL_W4_NWK_JOIN_RSP_EVT ) )
   \                     ??initiatorNwkJoinEDRspCB_0:
   \   00001A                ; Setup parameters for call to function osal_get_timeoutEx
   \   00001A   7A00         MOV     R2,#0x0
   \   00001C   7B02         MOV     R3,#0x2
   \   00001E   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000021   E0           MOVX    A,@DPTR
   \   000022   F9           MOV     R1,A
   \   000023   12....       LCALL   ??osal_get_timeoutEx?relay
   \   000026   EA           MOV     A,R2
   \   000027   4B           ORL     A,R3
   \   000028   4C           ORL     A,R4
   \   000029   4D           ORL     A,R5
   \   00002A   6026         JZ      ??initiatorNwkJoinEDRspCB_2
   1867            {
   1868              // Save the Network Start Response for later
   1869              rxRsp.nwkJoinRsp = *pRsp;
   \   00002C   8E82         MOV     DPL,R6
   \   00002E   8F83         MOV     DPH,R7
   \   000030   7C..         MOV     R4,#rxRsp & 0xff
   \   000032   7D..         MOV     R5,#(rxRsp >> 8) & 0xff
   \   000034   7405         MOV     A,#0x5
   \   000036   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1870          
   1871              // No need to wait longer
   1872              osal_start_timerEx( zllInitiator_TaskID, ZLL_W4_NWK_JOIN_RSP_EVT, 0 );
   \   000039                ; Setup parameters for call to function osal_start_timerEx
   \   000039   90....       MOV     DPTR,#__Constant_0
   \   00003C   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00003F   7A00         MOV     R2,#0x0
   \   000041   7B02         MOV     R3,#0x2
   \   000043   90....       MOV     DPTR,#zllInitiator_TaskID
   \   000046   E0           MOVX    A,@DPTR
   \   000047   F9           MOV     R1,A
   \   000048   12....       LCALL   ??osal_start_timerEx?relay
   \   00004B   7404         MOV     A,#0x4
   \   00004D   12....       LCALL   ?DEALLOC_XSTACK8
   \   000050   8006         SJMP    ??initiatorNwkJoinEDRspCB_3
   1873          
   1874            }
   1875            else
   1876            {
   1877              rxRsp.nwkJoinRsp.status = ZLL_NETWORK_JOIN_RSP_STATUS_FAILURE;
   \                     ??initiatorNwkJoinEDRspCB_2:
   \   000052   90....       MOV     DPTR,#rxRsp + 4
   \   000055   7401         MOV     A,#0x1
   \   000057   F0           MOVX    @DPTR,A
   1878            }
   1879          
   1880            return ( ZSuccess );
   \                     ??initiatorNwkJoinEDRspCB_3:
   \   000058   7900         MOV     R1,#0x0
   \                     ??initiatorNwkJoinEDRspCB_1:
   \   00005A   02....       LJMP    ?Subroutine2 & 0xFFFF
   1881          }
   1882          
   1883          /*********************************************************************
   1884           * @fn      initiatorNwkUpdateReqCB
   1885           *
   1886           * @brief   This callback is called to process a Network Update Request
   1887           *          command.
   1888           *
   1889           * @param   srcAddr - sender's address
   1890           * @param   pReq - parsed command
   1891           *
   1892           * @return  ZStatus_t
   1893           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1894          static ZStatus_t initiatorNwkUpdateReqCB( afAddrType_t *srcAddr, zclLLNwkUpdateReq_t *pReq )
   \                     initiatorNwkUpdateReqCB:
   1895          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   EC           MOV     A,R4
   \   000006   FE           MOV     R6,A
   \   000007   ED           MOV     A,R5
   \   000008   FF           MOV     R7,A
   1896            if ( zll_IsValidTransID( pReq->transID ) == FALSE )
   \   000009                ; Setup parameters for call to function zll_IsValidTransID
   \   000009   8E82         MOV     DPL,R6
   \   00000B   8F83         MOV     DPH,R7
   \   00000D   12....       LCALL   ?XLOAD_R2345
   \   000010   12....       LCALL   ??zll_IsValidTransID?relay
   \   000013   E9           MOV     A,R1
   \   000014   7004         JNZ     ??initiatorNwkUpdateReqCB_0
   1897            {
   1898              return ( ZFailure );
   \   000016   7901         MOV     R1,#0x1
   \   000018   805D         SJMP    ??initiatorNwkUpdateReqCB_1
   1899            }
   1900            // Discard the request if the Extended PAN ID and PAN ID are not
   1901            // identical with our corresponding stored values
   1902            if ( ZLL_SAME_NWK( pReq->PANID, pReq->extendedPANID ) )
   \                     ??initiatorNwkUpdateReqCB_0:
   \   00001A   90....       MOV     DPTR,#_NIB + 33
   \   00001D   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_84:
   \   000020   EE           MOV     A,R6
   \   000021   240E         ADD     A,#0xe
   \   000023   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_72:
   \   000026   68           XRL     A,R0
   \   000027   7003         JNZ     ??initiatorNwkUpdateReqCB_2
   \   000029   A3           INC     DPTR
   \   00002A   E0           MOVX    A,@DPTR
   \   00002B   69           XRL     A,R1
   \                     ??initiatorNwkUpdateReqCB_2:
   \   00002C   7047         JNZ     ??initiatorNwkUpdateReqCB_3
   \   00002E                ; Setup parameters for call to function sAddrExtCmp
   \   00002E   EE           MOV     A,R6
   \   00002F   2404         ADD     A,#0x4
   \   000031   FC           MOV     R4,A
   \   000032   EF           MOV     A,R7
   \   000033   3400         ADDC    A,#0x0
   \   000035   FD           MOV     R5,A
   \   000036   7A..         MOV     R2,#(_NIB + 53) & 0xff
   \   000038   7B..         MOV     R3,#((_NIB + 53) >> 8) & 0xff
   \   00003A   12....       LCALL   ??sAddrExtCmp?relay
   \   00003D   E9           MOV     A,R1
   \   00003E   6035         JZ      ??initiatorNwkUpdateReqCB_3
   1903            {
   1904              uint8 newUpdateId = zll_NewNwkUpdateId( pReq->nwkUpdateId, _NIB.nwkUpdateId);
   \   000040   EE           MOV     A,R6
   \   000041   240C         ADD     A,#0xc
   \   000043   F8           MOV     R0,A
   \   000044   EF           MOV     A,R7
   \   000045   3400         ADDC    A,#0x0
   \   000047   F9           MOV     R1,A
   \   000048   88..         MOV     ?V0 + 0,R0
   \   00004A   89..         MOV     ?V0 + 1,R1
   \   00004C                ; Setup parameters for call to function zll_NewNwkUpdateId
   \   00004C   90....       MOV     DPTR,#_NIB + 109
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   FA           MOV     R2,A
   \   000051   8882         MOV     DPL,R0
   \   000053   8983         MOV     DPH,R1
   \   000055   E0           MOVX    A,@DPTR
   \   000056   F9           MOV     R1,A
   \   000057   12....       LCALL   ??zll_NewNwkUpdateId?relay
   \   00005A   E9           MOV     A,R1
   \   00005B   F8           MOV     R0,A
   1905              if ( _NIB.nwkUpdateId != newUpdateId )
   \   00005C   90....       MOV     DPTR,#_NIB + 109
   \   00005F   E0           MOVX    A,@DPTR
   \   000060   68           XRL     A,R0
   \   000061   6012         JZ      ??initiatorNwkUpdateReqCB_3
   1906              {
   1907                // Update the network update id and logical channel
   1908                zll_ProcessNwkUpdate( pReq->nwkUpdateId, pReq->logicalChannel );
   \   000063                ; Setup parameters for call to function zll_ProcessNwkUpdate
   \   000063   EE           MOV     A,R6
   \   000064   240D         ADD     A,#0xd
   \   000066   12....       LCALL   ?Subroutine24 & 0xFFFF
   1909              }
   1910            }
   \                     ??CrossCallReturnLabel_73:
   \   000069   FA           MOV     R2,A
   \   00006A   85..82       MOV     DPL,?V0 + 0
   \   00006D   85..83       MOV     DPH,?V0 + 1
   \   000070   E0           MOVX    A,@DPTR
   \   000071   F9           MOV     R1,A
   \   000072   12....       LCALL   ??zll_ProcessNwkUpdate?relay
   1911          
   1912            return ( ZSuccess );
   \                     ??initiatorNwkUpdateReqCB_3:
   \   000075   7900         MOV     R1,#0x0
   \                     ??initiatorNwkUpdateReqCB_1:
   \   000077   02....       LJMP    ?Subroutine6 & 0xFFFF
   1913          }
   1914          
   1915          /******************************************************************************
   1916           * @fn      initiatorZdoLeaveCnfCB
   1917           *
   1918           * @brief   This callback is called to process a Leave Confirmation message.
   1919           *
   1920           *          Note: this callback function returns a pointer if it has handled
   1921           *                the confirmation message and no further action should be
   1922           *                taken with it. It returns NULL if it has not handled the
   1923           *                confirmation message and normal processing should take place.
   1924           *
   1925           * @param   pParam - received message
   1926           *
   1927           * @return  Pointer if message processed. NULL, otherwise.
   1928           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1929          static void *initiatorZdoLeaveCnfCB( void *pParam )
   \                     initiatorZdoLeaveCnfCB:
   1930          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1931            (void)pParam;
   1932          
   1933            // Did we initiate the leave?
   1934            if ( zllLeaveInitiated == FALSE )
   \   000004   90....       MOV     DPTR,#zllLeaveInitiated
   \   000007   E0           MOVX    A,@DPTR
   \   000008   7006         JNZ     ??initiatorZdoLeaveCnfCB_0
   1935            {
   1936              return ( NULL );
   \   00000A   7A00         MOV     R2,#0x0
   \   00000C   7B00         MOV     R3,#0x0
   \   00000E   8014         SJMP    ??initiatorZdoLeaveCnfCB_1
   1937            }
   1938          
   1939            if ( zllLeaveInitiated == ZLL_LEAVE_TO_JOIN_NWK )
   \                     ??initiatorZdoLeaveCnfCB_0:
   \   000010   6401         XRL     A,#0x1
   \   000012   700C         JNZ     ??initiatorZdoLeaveCnfCB_2
   1940            {
   1941              // Notify our task to join the new network
   1942              osal_set_event( zllInitiator_TaskID, ZLL_JOIN_NWK_EVT );
   \   000014                ; Setup parameters for call to function osal_set_event
   \   000014   7A10         MOV     R2,#0x10
   \   000016   7B00         MOV     R3,#0x0
   \   000018   90....       MOV     DPTR,#zllInitiator_TaskID
   \   00001B   E0           MOVX    A,@DPTR
   \   00001C   F9           MOV     R1,A
   \   00001D   12....       LCALL   ??osal_set_event?relay
   1943            }
   1944          
   1945            return ( (void *)&zllLeaveInitiated );
   \                     ??initiatorZdoLeaveCnfCB_2:
   \   000020   7A..         MOV     R2,#zllLeaveInitiated & 0xff
   \   000022   7B..         MOV     R3,#(zllLeaveInitiated >> 8) & 0xff
   \                     ??initiatorZdoLeaveCnfCB_1:
   \   000024   02....       LJMP    ??Subroutine35_0 & 0xFFFF
   1946          }
   1947          
   1948          /*********************************************************************
   1949           * @fn      zllInitiator_ChannelChange
   1950           *
   1951           * @brief   Change channel to supprot Frequency agility.
   1952           *
   1953           * @param   targetChannel - channel to
   1954           *
   1955           * @return  status
   1956           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1957          ZStatus_t zllInitiator_ChannelChange( uint8 targetChannel )
   \                     zllInitiator_ChannelChange:
   1958          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
   1959              uint32 channelMask;
   1960              zAddrType_t dstAddr = {0};
   \   00000C   85..82       MOV     DPL,?XSP + 0
   \   00000F   85..83       MOV     DPH,?XSP + 1
   \   000012   AC82         MOV     R4,DPL
   \   000014   AD83         MOV     R5,DPH
   \   000016   7583..       MOV     DPH,#(`?<Constant {{0}}>` >> 8) & 0xff
   \   000019   7582..       MOV     DPL,#`?<Constant {{0}}>` & 0xff
   \   00001C   7409         MOV     A,#0x9
   \   00001E   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1961              if ( ( targetChannel < 11 ) || targetChannel > 26 )
   \   000021   74F5         MOV     A,#-0xb
   \   000023   2E           ADD     A,R6
   \   000024   C3           CLR     C
   \   000025   9410         SUBB    A,#0x10
   \   000027   4025         JC      ??zllInitiator_ChannelChange_0
   1962              {
   1963                if (ZLL_PRIMARY_CHANNEL (_NIB.nwkLogicalChannel))
   \   000029   90....       MOV     DPTR,#_NIB + 22
   \   00002C   E0           MOVX    A,@DPTR
   \   00002D   F8           MOV     R0,A
   \   00002E   740B         MOV     A,#0xb
   \   000030   68           XRL     A,R0
   \   000031   6078         JZ      ??zllInitiator_ChannelChange_1
   \   000033   740F         MOV     A,#0xf
   \   000035   68           XRL     A,R0
   \   000036   6077         JZ      ??zllInitiator_ChannelChange_2
   \   000038   7414         MOV     A,#0x14
   \   00003A   68           XRL     A,R0
   \   00003B   6076         JZ      ??zllInitiator_ChannelChange_3
   \   00003D   7419         MOV     A,#0x19
   \   00003F   68           XRL     A,R0
   \   000040   600A         JZ      ??zllInitiator_ChannelChange_4
   1964                {
   1965                  switch (_NIB.nwkLogicalChannel)
   1966                  {
   1967                  case ZLL_FIRST_CHANNEL:
   1968                    targetChannel = ZLL_SECOND_CHANNEL;
   1969                    break;
   1970                  case ZLL_SECOND_CHANNEL:
   1971                    targetChannel = ZLL_THIRD_CHANNEL;
   1972                    break;
   1973                  case ZLL_THIRD_CHANNEL:
   1974                    targetChannel = ZLL_FOURTH_CHANNEL;
   1975                    break;
   1976                  case ZLL_FOURTH_CHANNEL:
   1977                    targetChannel = ZLL_FIRST_CHANNEL;
   1978                  }
   1979                }
   1980                else
   1981                {
   1982                  targetChannel = _NIB.nwkLogicalChannel + 1;
   \   000042   7401         MOV     A,#0x1
   \   000044   28           ADD     A,R0
   \   000045   FE           MOV     R6,A
   1983                  if ( _NIB.nwkLogicalChannel > 26 )
   \   000046   E8           MOV     A,R0
   \   000047   C3           CLR     C
   \   000048   941B         SUBB    A,#0x1b
   \   00004A   4002         JC      ??zllInitiator_ChannelChange_0
   1984                    targetChannel = 11;
   \                     ??zllInitiator_ChannelChange_4:
   \   00004C   7E0B         MOV     R6,#0xb
   1985                }
   1986              }
   1987          
   1988              dstAddr.addrMode = AddrBroadcast;
   \                     ??zllInitiator_ChannelChange_0:
   \   00004E   7408         MOV     A,#0x8
   \   000050   12....       LCALL   ?XSTACK_DISP0_8
   \   000053   740F         MOV     A,#0xf
   \   000055   F0           MOVX    @DPTR,A
   1989              dstAddr.addr.shortAddr = NWK_BROADCAST_SHORTADDR_DEVRXON;
   \   000056   85..82       MOV     DPL,?XSP + 0
   \   000059   85..83       MOV     DPH,?XSP + 1
   \   00005C   74FD         MOV     A,#-0x3
   \   00005E   F0           MOVX    @DPTR,A
   \   00005F   A3           INC     DPTR
   \   000060   74FF         MOV     A,#-0x1
   \   000062   F0           MOVX    @DPTR,A
   1990              channelMask = (uint32)1 << targetChannel;
   1991          
   1992              // Increment the nwkUpdateId parameter and set the updateID in the beacon
   1993              NLME_SetUpdateID(_NIB.nwkUpdateId + 1);
   \   000063                ; Setup parameters for call to function NLME_SetUpdateID
   \   000063   90....       MOV     DPTR,#_NIB + 109
   \   000066   E0           MOVX    A,@DPTR
   \   000067   04           INC     A
   \   000068   F9           MOV     R1,A
   \   000069   12....       LCALL   ??NLME_SetUpdateID?relay
   1994          
   1995              ZDP_MgmtNwkUpdateReq( &dstAddr, channelMask, 0xfe, 0, _NIB.nwkUpdateId, 0 );
   \   00006C                ; Setup parameters for call to function ZDP_MgmtNwkUpdateReq
   \   00006C   E4           CLR     A
   \   00006D   F5..         MOV     ?V0 + 0,A
   \   00006F   F5..         MOV     ?V0 + 1,A
   \   000071   78..         MOV     R0,#?V0 + 0
   \   000073   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000076   75..01       MOV     ?V0 + 0,#0x1
   \   000079   75..00       MOV     ?V0 + 2,#0x0
   \   00007C   75..00       MOV     ?V0 + 3,#0x0
   \   00007F   EE           MOV     A,R6
   \   000080   78..         MOV     R0,#?V0 + 0
   \   000082   12....       LCALL   ?L_SHL
   \   000085   78..         MOV     R0,#?V0 + 0
   \   000087   12....       LCALL   ?PUSH_XSTACK_I_FOUR
   \   00008A   90....       MOV     DPTR,#_NIB + 109
   \   00008D   E0           MOVX    A,@DPTR
   \   00008E   FD           MOV     R5,A
   \   00008F   7C00         MOV     R4,#0x0
   \   000091   79FE         MOV     R1,#-0x2
   \   000093   7406         MOV     A,#0x6
   \   000095   12....       LCALL   ?XSTACK_DISP0_8
   \   000098   AA82         MOV     R2,DPL
   \   00009A   AB83         MOV     R3,DPH
   \   00009C   12....       LCALL   ??ZDP_MgmtNwkUpdateReq?relay
   \   00009F   7406         MOV     A,#0x6
   \   0000A1   12....       LCALL   ?DEALLOC_XSTACK8
   1996          
   1997              return ZSuccess;
   \   0000A4   7900         MOV     R1,#0x0
   \   0000A6   7409         MOV     A,#0x9
   \   0000A8   02....       LJMP    ?Subroutine3 & 0xFFFF
   \                     ??zllInitiator_ChannelChange_1:
   \   0000AB   7E0F         MOV     R6,#0xf
   \   0000AD   809F         SJMP    ??zllInitiator_ChannelChange_0
   \                     ??zllInitiator_ChannelChange_2:
   \   0000AF   7E14         MOV     R6,#0x14
   \   0000B1   809B         SJMP    ??zllInitiator_ChannelChange_0
   \                     ??zllInitiator_ChannelChange_3:
   \   0000B3   7E19         MOV     R6,#0x19
   \   0000B5   8097         SJMP    ??zllInitiator_ChannelChange_0
   1998          }
   1999          
   2000          /*********************************************************************
   2001           * @fn      zllInitiator_ClassicalCommissioningInit
   2002           *
   2003           * @brief   Start Classical Commissioning.
   2004           *
   2005           * @param   none
   2006           *
   2007           * @return  status
   2008           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   2009          ZStatus_t zllInitiator_ClassicalCommissioningStart()
   \                     zllInitiator_ClassicalCommissioningStart:
   2010          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   2011            ZStatus_t status;
   2012            status = zll_ClassicalCommissioningInit();
   2013            if ( ( POLL_RATE == 0 ) && ( status == ZSuccess ) )
   2014            {
   2015              //Allow completion of authentication process in the new network
   2016              NLME_SetPollRate( ZLL_INITIATOR_TEMP_POST_TL_POLL_RATE );
   2017              //Polling will be reset after authentication by ZDApp_DeviceAuthEvt(), but just in case
   2018              osal_start_timerEx( zllInitiator_TaskID, ZLL_DISABLE_RX_EVT, 2*ZLL_APLC_RX_WINDOW_DURATION );
   2019            }
   2020            return status;
   \   000004                ; Setup parameters for call to function zll_ClassicalCommissioningInit
   \   000004   12....       LCALL   ??zll_ClassicalCommissioningInit?relay
   \   000007   02....       LJMP    ??Subroutine35_0 & 0xFFFF
   2021          }
   2022          
   2023          /*********************************************************************
   2024           * @fn      zllSampleRemote_SendEPInfo
   2025           *
   2026           * @brief   Send Endpoint info command.
   2027           *
   2028           * @param   srcEP - source endpoint
   2029           * @param   dstAddr - destination address
   2030           * @param   seqNum - transaction sequnece number
   2031           *
   2032           * @return  ZStatus_t
   2033           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   2034          ZStatus_t zllInitiator_SendEPInfo( uint8 srcEP, afAddrType_t *dstAddr, uint8 seqNum)
   \                     zllInitiator_SendEPInfo:
   2035          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 23
   \   000005   74E9         MOV     A,#-0x17
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   89..         MOV     ?V0 + 0,R1
   \   00000C   EA           MOV     A,R2
   \   00000D   FE           MOV     R6,A
   \   00000E   EB           MOV     A,R3
   \   00000F   FF           MOV     R7,A
   \   000010   8C..         MOV     ?V0 + 1,R4
   2036              zclLLEndpointInfo_t zclLLEndpointInfoCmd;
   2037              zclLLDeviceInfo_t  zclLLDeviceInfo;
   2038                //send Epinfo cmd
   2039              zll_GetSubDeviceInfo( 0, &zclLLDeviceInfo );
   \   000012                ; Setup parameters for call to function zll_GetSubDeviceInfo
   \   000012   85..82       MOV     DPL,?XSP + 0
   \   000015   85..83       MOV     DPH,?XSP + 1
   \   000018   AA82         MOV     R2,DPL
   \   00001A   AB83         MOV     R3,DPH
   \   00001C   7900         MOV     R1,#0x0
   \   00001E   12....       LCALL   ??zll_GetSubDeviceInfo?relay
   2040              zclLLEndpointInfoCmd.endpoint = zclLLDeviceInfo.endpoint;
   \   000021   85..82       MOV     DPL,?XSP + 0
   \   000024   85..83       MOV     DPH,?XSP + 1
   \   000027   E0           MOVX    A,@DPTR
   \   000028   C0E0         PUSH    A
   \   00002A   7411         MOV     A,#0x11
   \   00002C   12....       LCALL   ?XSTACK_DISP0_8
   \   00002F   D0E0         POP     A
   \   000031   F0           MOVX    @DPTR,A
   2041              zclLLEndpointInfoCmd.profileID = zclLLDeviceInfo.profileID;
   \   000032   7401         MOV     A,#0x1
   \   000034   12....       LCALL   ?XSTACK_DISP0_8
   \   000037   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_85:
   \   00003A   7412         MOV     A,#0x12
   \   00003C   12....       LCALL   ?XSTACK_DISP0_8
   \   00003F   12....       LCALL   ??Subroutine39_0 & 0xFFFF
   2042              zclLLEndpointInfoCmd.deviceID = zclLLDeviceInfo.deviceID;
   \                     ??CrossCallReturnLabel_63:
   \   000042   7403         MOV     A,#0x3
   \   000044   12....       LCALL   ?XSTACK_DISP0_8
   \   000047   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_86:
   \   00004A   7414         MOV     A,#0x14
   \   00004C   12....       LCALL   ?XSTACK_DISP0_8
   \   00004F   12....       LCALL   ??Subroutine39_0 & 0xFFFF
   2043              zclLLEndpointInfoCmd.version = zclLLDeviceInfo.version;
   \                     ??CrossCallReturnLabel_64:
   \   000052   7405         MOV     A,#0x5
   \   000054   12....       LCALL   ?XSTACK_DISP0_8
   \   000057   E0           MOVX    A,@DPTR
   \   000058   C0E0         PUSH    A
   \   00005A   7416         MOV     A,#0x16
   \   00005C   12....       LCALL   ?XSTACK_DISP0_8
   \   00005F   D0E0         POP     A
   \   000061   F0           MOVX    @DPTR,A
   2044          
   2045              osal_cpyExtAddr( zclLLEndpointInfoCmd.ieeeAddr, NLME_GetExtAddr() );
   \   000062                ; Setup parameters for call to function sAddrExtCpy
   \   000062                ; Setup parameters for call to function NLME_GetExtAddr
   \   000062   12....       LCALL   ??NLME_GetExtAddr?relay
   \   000065   EA           MOV     A,R2
   \   000066   FC           MOV     R4,A
   \   000067   EB           MOV     A,R3
   \   000068   FD           MOV     R5,A
   \   000069   7407         MOV     A,#0x7
   \   00006B   12....       LCALL   ?XSTACK_DISP0_8
   \   00006E   AA82         MOV     R2,DPL
   \   000070   AB83         MOV     R3,DPH
   \   000072   12....       LCALL   ??sAddrExtCpy?relay
   2046              zclLLEndpointInfoCmd.nwkAddr = NLME_GetShortAddr();
   \   000075                ; Setup parameters for call to function NLME_GetShortAddr
   \   000075   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000078   740F         MOV     A,#0xf
   \   00007A   12....       LCALL   ?XSTACK_DISP0_8
   \   00007D   EA           MOV     A,R2
   \   00007E   F0           MOVX    @DPTR,A
   \   00007F   A3           INC     DPTR
   \   000080   EB           MOV     A,R3
   \   000081   12....       LCALL   ?Subroutine9 & 0xFFFF
   2047          
   2048              dstAddr->panId = _NIB.nwkPanId;
   \                     ??CrossCallReturnLabel_4:
   \   000084   8E82         MOV     DPL,R6
   \   000086   8F83         MOV     DPH,R7
   \   000088   A3           INC     DPTR
   \   000089   A3           INC     DPTR
   \   00008A   A3           INC     DPTR
   \   00008B   A3           INC     DPTR
   \   00008C   A3           INC     DPTR
   \   00008D   A3           INC     DPTR
   \   00008E   A3           INC     DPTR
   \   00008F   A3           INC     DPTR
   \   000090   A3           INC     DPTR
   \   000091   A3           INC     DPTR
   \   000092   12....       LCALL   ??Subroutine39_0 & 0xFFFF
   2049              return zclLL_Send_EndpointInfo( srcEP, dstAddr, &zclLLEndpointInfoCmd,
   2050                                                    0, seqNum );
   \                     ??CrossCallReturnLabel_65:
   \   000095                ; Setup parameters for call to function zclLL_Send_EndpointInfo
   \   000095   E5..         MOV     A,?V0 + 1
   \   000097   F5..         MOV     ?V0 + 2,A
   \   000099   78..         MOV     R0,#?V0 + 2
   \   00009B   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00009E   75..00       MOV     ?V0 + 2,#0x0
   \   0000A1   78..         MOV     R0,#?V0 + 2
   \   0000A3   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000A6   7409         MOV     A,#0x9
   \   0000A8   12....       LCALL   ?XSTACK_DISP0_8
   \   0000AB   AC82         MOV     R4,DPL
   \   0000AD   AD83         MOV     R5,DPH
   \   0000AF   EE           MOV     A,R6
   \   0000B0   FA           MOV     R2,A
   \   0000B1   EF           MOV     A,R7
   \   0000B2   FB           MOV     R3,A
   \   0000B3   A9..         MOV     R1,?V0 + 0
   \   0000B5   12....       LCALL   ??zclLL_Send_EndpointInfo?relay
   \   0000B8   7402         MOV     A,#0x2
   \   0000BA   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000BD   7417         MOV     A,#0x17
   \   0000BF   02....       LJMP    ?Subroutine5 & 0xFFFF
   2051          }
   2052          
   2053          /*********************************************************************
   2054           * @fn      zllInitiator_OrphanedRejoin
   2055           *
   2056           * @brief   Try to rejoin the network if the device is orphaned.
   2057           *
   2058           * @param   none
   2059           *
   2060           * @return  status - success if rejoin is initiated
   2061           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   2062          ZStatus_t zllInitiator_OrphanedRejoin()
   \                     zllInitiator_OrphanedRejoin:
   2063          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   2064            if ( ( _NIB.nwkState == NWK_DISC ) && ( _NIB.nwkCoordAddress != INVALID_NODE_ADDR ) && !zll_IsFactoryNew() )
   \   000004   90....       MOV     DPTR,#_NIB + 35
   \   000007   E0           MOVX    A,@DPTR
   \   000008   6402         XRL     A,#0x2
   \   00000A   701C         JNZ     ??zllInitiator_OrphanedRejoin_0
   \   00000C   90....       MOV     DPTR,#_NIB + 23
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   64FE         XRL     A,#0xfe
   \   000012   7003         JNZ     ??zllInitiator_OrphanedRejoin_1
   \   000014   A3           INC     DPTR
   \   000015   E0           MOVX    A,@DPTR
   \   000016   F4           CPL     A
   \                     ??zllInitiator_OrphanedRejoin_1:
   \   000017   600F         JZ      ??zllInitiator_OrphanedRejoin_0
   \   000019                ; Setup parameters for call to function zll_IsFactoryNew
   \   000019   12....       LCALL   ??zll_IsFactoryNew?relay
   \   00001C   E9           MOV     A,R1
   \   00001D   7009         JNZ     ??zllInitiator_OrphanedRejoin_0
   2065            {
   2066              initiatorReJoinNwk( MODE_REJOIN );
   \   00001F                ; Setup parameters for call to function initiatorReJoinNwk
   \   00001F   7903         MOV     R1,#0x3
   \   000021   12....       LCALL   ??initiatorReJoinNwk?relay
   2067              return ZSuccess;
   \   000024   7900         MOV     R1,#0x0
   \   000026   8002         SJMP    ??zllInitiator_OrphanedRejoin_2
   2068            }
   2069            return ZFailure;
   \                     ??zllInitiator_OrphanedRejoin_0:
   \   000028   7901         MOV     R1,#0x1
   \                     ??zllInitiator_OrphanedRejoin_2:
   \   00002A   02....       LJMP    ??Subroutine35_0 & 0xFFFF
   2070          }
   2071          
   2072          /*********************************************************************
   2073           * @fn      zllInitiator_ResetToFNSelectedTarget
   2074           *
   2075           * @brief   Send Reset to Factory New Request command to the selected
   2076           *          target of the current Touch-Link transaction.
   2077           *          Note - this function should be called within no later than
   2078           *          ZLL_APLC_INTER_PAN_TRANS_ID_LIFETIME ms from the Scan Request.
   2079           *
   2080           * @param   none
   2081           *
   2082           * @return  status - failure is returned due to invalid selected target or
   2083           *          expired Touch-Link transaction.
   2084           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   2085          ZStatus_t zllInitiator_ResetToFNSelectedTarget()
   \                     zllInitiator_ResetToFNSelectedTarget:
   2086          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 4
   \   000005   74FC         MOV     A,#-0x4
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   2087            if ( ( zllTransID == 0 ) || ( selectedTarget.lastRssi == ZLL_TL_WORST_RSSI ) )
   \   00000A   90....       MOV     DPTR,#zllTransID
   \   00000D   78..         MOV     R0,#?V0 + 0
   \   00000F   12....       LCALL   ?L_MOV_X
   \   000012   E5..         MOV     A,?V0 + 0
   \   000014   45..         ORL     A,?V0 + 1
   \   000016   45..         ORL     A,?V0 + 2
   \   000018   45..         ORL     A,?V0 + 3
   \   00001A   6008         JZ      ??zllInitiator_ResetToFNSelectedTarget_0
   \   00001C   90....       MOV     DPTR,#selectedTarget + 53
   \   00001F   E0           MOVX    A,@DPTR
   \   000020   64D8         XRL     A,#0xd8
   \   000022   7004         JNZ     ??zllInitiator_ResetToFNSelectedTarget_1
   2088            {
   2089              return ( ZFailure );
   \                     ??zllInitiator_ResetToFNSelectedTarget_0:
   \   000024   7901         MOV     R1,#0x1
   \   000026   8040         SJMP    ??zllInitiator_ResetToFNSelectedTarget_2
   2090            }
   2091            zclLLResetToFNReq_t req;
   2092            req.transID = zllTransID;
   \                     ??zllInitiator_ResetToFNSelectedTarget_1:
   \   000028   90....       MOV     DPTR,#zllTransID
   \   00002B   12....       LCALL   ?XLOAD_R2345
   \   00002E   85..82       MOV     DPL,?XSP + 0
   \   000031   85..83       MOV     DPH,?XSP + 1
   \   000034   12....       LCALL   ?XSTORE_R2345
   2093          
   2094            // Cancel further touch-link commissioning (if called during identify interval)
   2095            osal_stop_timerEx( zllInitiator_TaskID, ZLL_CFG_TARGET_EVT );
   \   000037                ; Setup parameters for call to function osal_stop_timerEx
   \   000037   7A80         MOV     R2,#-0x80
   \   000039   7B00         MOV     R3,#0x0
   \   00003B   90....       MOV     DPTR,#zllInitiator_TaskID
   \   00003E   E0           MOVX    A,@DPTR
   \   00003F   F9           MOV     R1,A
   \   000040   12....       LCALL   ??osal_stop_timerEx?relay
   2096          
   2097            zll_SetChannel( selectedTarget.rxChannel );
   \   000043                ; Setup parameters for call to function zll_SetChannel
   \   000043   90....       MOV     DPTR,#selectedTarget + 52
   \   000046   E0           MOVX    A,@DPTR
   \   000047   F9           MOV     R1,A
   \   000048   12....       LCALL   ??zll_SetChannel?relay
   2098            return zclLL_Send_ResetToFNReq( ZLL_INTERNAL_ENDPOINT, &(selectedTarget.srcAddr), &req, initiatorSeqNum++ );
   \   00004B   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_22:
   \   00004E   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000051   7401         MOV     A,#0x1
   \   000053   12....       LCALL   ?XSTACK_DISP0_8
   \   000056   AC82         MOV     R4,DPL
   \   000058   AD83         MOV     R5,DPH
   \   00005A   7A..         MOV     R2,#(selectedTarget + 38) & 0xff
   \   00005C   7B..         MOV     R3,#((selectedTarget + 38) >> 8) & 0xff
   \   00005E   790D         MOV     R1,#0xd
   \   000060   12....       LCALL   ??zclLL_Send_ResetToFNReq?relay
   \   000063   7401         MOV     A,#0x1
   \   000065   12....       LCALL   ?DEALLOC_XSTACK8
   \                     ??zllInitiator_ResetToFNSelectedTarget_2:
   \   000068   7404         MOV     A,#0x4
   \   00006A   02....       LJMP    ?Subroutine3 & 0xFFFF
   2099          }
   2100          
   2101          #if defined ( MT_APP_FUNC )
   2102          /*********************************************************************
   2103           * @fn      initiatorProcessRpcMsg
   2104           *
   2105           * @brief   Process MT_APP ZLL RPC message
   2106           *
   2107           * @param   srcEP - Sending Apps endpoint
   2108           * @param   len - length of the received message
   2109           * @param   msg - pointer to message
   2110           *          0 - lo byte destination address
   2111           *          1 - hi byte destination address
   2112           *          2 - destination endpoint
   2113           *          3 - lo byte cluster ID
   2114           *          4 - hi byte cluster ID
   2115           *          5 - message length
   2116           *          6 - destination address mode (first byte of data)
   2117           *          7 - zcl command frame
   2118           *
   2119           * @return  none
   2120           */
   2121          static ZStatus_t initiatorProcessRpcMsg( uint8 srcEP, uint8 len, uint8 *msg )
   2122          {
   2123            uint16 clusterID;
   2124            uint8 zllRpcCmdID;
   2125            clusterID = BUILD_UINT16( msg[ZLL_MT_APP_RPC_OFFSET_CLUSTER_ID],
   2126                                      msg[ZLL_MT_APP_RPC_OFFSET_CLUSTER_ID + 1] );
   2127            zllRpcCmdID = msg[ZLL_MT_APP_RPC_OFFSET_CMD_ID];
   2128          
   2129            if ( clusterID == ZLL_MT_APP_RPC_CLUSTER_ID )
   2130            {
   2131              switch ( zllRpcCmdID )
   2132              {
   2133                case ZLL_MT_APP_RPC_CMD_TOUCHLINK:
   2134                  zllInitiator_StartDevDisc();
   2135                  break;
   2136                case ZLL_MT_APP_RPC_CMD_RESET_TO_FN:
   2137                  zllInitiator_ResetToFactoryNew();
   2138                  break;
   2139                case ZLL_MT_APP_RPC_CMD_CH_CHANNEL:
   2140                  zllInitiator_ChannelChange( ( len > ( ZLL_MT_APP_RPC_OFFSET_CMD_ID - 1 ) ) ?
   2141                                               msg[ZLL_MT_APP_RPC_OFFSET_CMD_ID + 1] : 0 );
   2142                  break;
   2143                case ZLL_MT_APP_RPC_CMD_JOIN_HA:
   2144                  zllInitiator_ClassicalCommissioningStart();
   2145                  break;
   2146                case ZLL_MT_APP_RPC_CMD_SEND_RESET_TO_FN:
   2147                  zllInitiator_ResetToFNSelectedTarget();
   2148                  break;
   2149          #if (ZSTACK_ROUTER_BUILD)
   2150                case ZLL_MT_APP_RPC_CMD_PERMIT_JOIN:
   2151                  zllInitiator_PermitJoin( ( len > ( ZLL_MT_APP_RPC_OFFSET_CMD_ID - 1 ) ) ?
   2152                                         msg[ZLL_MT_APP_RPC_OFFSET_CMD_ID + 1] : 0 );
   2153                  break;
   2154                case ZLL_MT_APP_RPC_CMD_START_DISTRIB_NWK:
   2155                  zllInitiator_BridgeStartNetwork();
   2156                  break;
   2157          
   2158          #endif
   2159              }
   2160              return ( ZSuccess );
   2161            }
   2162            else
   2163            {
   2164              return ( ZFailure );
   2165            }
   2166          }
   2167          #endif //defined ( MT_APP_FUNC )
   2168          
   2169          #if (ZSTACK_ROUTER_BUILD)
   2170          /*********************************************************************
   2171           * @fn      zllInitiator_PermitJoin
   2172           *
   2173           * @brief   Set the router permit join flag, to allow or deny classical
   2174           *          commissioning by other ZigBee devices.
   2175           *
   2176           * @param   duration - enable up to aplcMaxPermitJoinDuration seconds,
   2177           *                     0 to disable
   2178           *
   2179           * @return  status
   2180           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   2181          ZStatus_t zllInitiator_PermitJoin( uint8 duration )
   \                     zllInitiator_PermitJoin:
   2182          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   2183            return zll_PermitJoin( duration );
   \   000005                ; Setup parameters for call to function zll_PermitJoin
   \   000005   12....       LCALL   ??zll_PermitJoin?relay
   \   000008   02....       LJMP    ?Subroutine2 & 0xFFFF
   2184          }
   2185          
   2186          /*********************************************************************
   2187           * @fn      zllInitiator_BridgeStartNetwork
   2188           *
   2189           * @brief   Start a new ZLL network, without coordinator or Trust Center.
   2190           *
   2191           * @param   none
   2192           *
   2193           * @return  status
   2194           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   2195          ZStatus_t zllInitiator_BridgeStartNetwork( void )
   \                     zllInitiator_BridgeStartNetwork:
   2196          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 16
   \   000005   74F0         MOV     A,#-0x10
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   2197            if ( !zll_IsFactoryNew() )
   \   00000A                ; Setup parameters for call to function zll_IsFactoryNew
   \   00000A   12....       LCALL   ??zll_IsFactoryNew?relay
   \   00000D   E9           MOV     A,R1
   \   00000E   7004         JNZ     ??zllInitiator_BridgeStartNetwork_0
   2198            {
   2199              return ( ZFailure );
   \   000010   7901         MOV     R1,#0x1
   \   000012   8064         SJMP    ??zllInitiator_BridgeStartNetwork_1
   2200            }
   2201          
   2202              // Assuming initiatorSelectNwkParams() was called,
   2203              // Copy the new network parameters to NV
   2204            zll_SetNIB( NWK_ROUTER, _NIB.nwkDevAddress, _NIB.extendedPANID,
   2205                        _NIB.nwkLogicalChannel, _NIB.nwkPanId, _NIB.nwkUpdateId );
   \                     ??zllInitiator_BridgeStartNetwork_0:
   \   000014                ; Setup parameters for call to function zll_SetNIB
   \   000014   90....       MOV     DPTR,#_NIB + 109
   \   000017   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   00001A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001D   90....       MOV     DPTR,#_NIB + 33
   \   000020   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   000023   90....       MOV     DPTR,#_NIB + 22
   \   000026   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   000029   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00002C   7C..         MOV     R4,#(_NIB + 53) & 0xff
   \   00002E   7D..         MOV     R5,#((_NIB + 53) >> 8) & 0xff
   \   000030   12....       LCALL   ??Subroutine46_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_114:
   \   000033   7908         MOV     R1,#0x8
   \   000035   12....       LCALL   ??zll_SetNIB?relay
   \   000038   7404         MOV     A,#0x4
   \   00003A   12....       LCALL   ?DEALLOC_XSTACK8
   2206          
   2207          #ifdef ZLL_DEV_FIXED_NWK_KEY
   2208            uint8 nwkKey[SEC_KEY_LEN] = ZLL_DEV_FIXED_NWK_KEY;
   2209          #else
   2210            uint8 nwkKey[SEC_KEY_LEN];
   2211            zll_GenerateRandNum( nwkKey, SEC_KEY_LEN );
   \   00003D                ; Setup parameters for call to function zll_GenerateRandNum
   \   00003D   7910         MOV     R1,#0x10
   \   00003F   85..82       MOV     DPL,?XSP + 0
   \   000042   85..83       MOV     DPH,?XSP + 1
   \   000045   AA82         MOV     R2,DPL
   \   000047   AB83         MOV     R3,DPH
   \   000049   12....       LCALL   ??zll_GenerateRandNum?relay
   2212          #endif
   2213            zll_UpdateNwkKey(nwkKey,0);
   \   00004C                ; Setup parameters for call to function zll_UpdateNwkKey
   \   00004C   7900         MOV     R1,#0x0
   \   00004E   85..82       MOV     DPL,?XSP + 0
   \   000051   85..83       MOV     DPH,?XSP + 1
   \   000054   AA82         MOV     R2,DPL
   \   000056   AB83         MOV     R3,DPH
   \   000058   12....       LCALL   ??zll_UpdateNwkKey?relay
   2214          
   2215            // setting apsTrustCenterAddress to 0xffffffff
   2216            ZDSecMgrUpdateTCAddress( NULL );
   \   00005B                ; Setup parameters for call to function ZDSecMgrUpdateTCAddress
   \   00005B   7A00         MOV     R2,#0x0
   \   00005D   7B00         MOV     R3,#0x0
   \   00005F   12....       LCALL   ??ZDSecMgrUpdateTCAddress?relay
   2217          
   2218            // Use the new free ranges
   2219            //zll_UpdateFreeRanges( pParams );
   2220          
   2221            // Save free ranges
   2222            zll_UpdateNV( ZLL_UPDATE_NV_RANGES | ZLL_UPDATE_NV_NIB );
   \   000062                ; Setup parameters for call to function zll_UpdateNV
   \   000062   7903         MOV     R1,#0x3
   \   000064   12....       LCALL   ??zll_UpdateNV?relay
   2223          
   2224            // In case we're here after a leave
   2225            zllLeaveInitiated = FALSE;
   \   000067   90....       MOV     DPTR,#zllLeaveInitiated
   \   00006A   E4           CLR     A
   \   00006B   F0           MOVX    @DPTR,A
   2226          
   2227            // Clear leave control logic
   2228            ZDApp_LeaveCtrlReset();
   \   00006C                ; Setup parameters for call to function ZDApp_LeaveCtrlReset
   \   00006C   12....       LCALL   ??ZDApp_LeaveCtrlReset?relay
   2229          
   2230            // Start operating on the network, based on NV values
   2231            ZDOInitDevice( 0 );
   \   00006F                ; Setup parameters for call to function ZDOInitDevice
   \   00006F   7A00         MOV     R2,#0x0
   \   000071   7B00         MOV     R3,#0x0
   \   000073   12....       LCALL   ??ZDOInitDevice?relay
   2232          
   2233            return ( ZSuccess );
   \   000076   7900         MOV     R1,#0x0
   \                     ??zllInitiator_BridgeStartNetwork_1:
   \   000078   7410         MOV     A,#0x10
   \   00007A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00007D   02....       LJMP    ?Subroutine2 & 0xFFFF
   2234          }

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for initiatorRegisteredMsgAppTas`:
   \   000000   FF           DB 255

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zllInitiator_CmdCBs>`:
   \   000000   ....         DW ??initiatorScanReqCB?relay
   \   000002   ....         DW ??initiatorDeviceInfoReqCB?relay
   \   000004   ....         DW ??initiatorIdentifyReqCB?relay
   \   000006   ....         DW ??initiatorResetToFNReqCB?relay
   \   000008   0000         DW 0H
   \   00000A   ....         DW ??initiatorNwkJoinReqCB?relay
   \   00000C   0000         DW 0H
   \   00000E   ....         DW ??initiatorNwkUpdateReqCB?relay
   \   000010   ....         DW ??initiatorScanRspCB?relay
   \   000012   ....         DW ??initiatorDeviceInfoRspCB?relay
   \   000014   ....         DW ??initiatorNwkStartRspCB?relay
   \   000016   ....         DW ??initiatorNwkJoinRtrRspCB?relay
   \   000018   ....         DW ??initiatorNwkJoinEDRspCB?relay

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_InitDevice?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_InitDevice

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_ResetToFactoryNew?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_ResetToFactoryNew

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_RegisterIdentifyCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_RegisterIdentifyCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_RegisterNotifyTLCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_RegisterNotifyTLCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_RegisterResetAppCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_RegisterResetAppCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_RegisterSelectDiscDevCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_RegisterSelectDiscDevCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_StartDevDisc?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_StartDevDisc

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_AbortTL?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_AbortTL

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_RegisterApp?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_RegisterApp

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_RegisterForMsg?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_RegisterForMsg

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_event_loop?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_event_loop

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorJoinNwk?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorJoinNwk

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorClearSelectedTarget?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorClearSelectedTarget

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorSelectNwkParams?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorSelectNwkParams

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorSetNwkToInitState?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorSetNwkToInitState

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorSendScanReq?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorSendScanReq

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorSendNwkStartReq?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorSendNwkStartReq

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorSendNwkJoinReq?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorSendNwkJoinReq

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorReJoinNwk?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorReJoinNwk

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorScanReqCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorScanReqCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorDeviceInfoReqCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorDeviceInfoReqCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorIdentifyReqCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorIdentifyReqCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorResetToFNReqCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorResetToFNReqCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorNwkJoinReqCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorNwkJoinReqCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorScanRspCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorScanRspCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorDeviceInfoRspCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorDeviceInfoRspCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorNwkStartRspCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorNwkStartRspCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorNwkJoinRtrRspCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorNwkJoinRtrRspCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorNwkJoinEDRspCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorNwkJoinEDRspCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorNwkUpdateReqCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorNwkUpdateReqCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initiatorZdoLeaveCnfCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initiatorZdoLeaveCnfCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_ChannelChange?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_ChannelChange

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_ClassicalCommissioningStart?rela:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_ClassicalCommissioningStart

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_SendEPInfo?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_SendEPInfo

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_OrphanedRejoin?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_OrphanedRejoin

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_ResetToFNSelectedTarget?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_ResetToFNSelectedTarget

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_PermitJoin?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_PermitJoin

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zllInitiator_BridgeStartNetwork?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zllInitiator_BridgeStartNetwork

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {12, 13, 14, 16, 17, 18, 19, 21, 22`:
   \   000000   0C           DB 12
   \   000001   0D           DB 13
   \   000002   0E           DB 14
   \   000003   10           DB 16
   \   000004   11           DB 17
   \   000005   12           DB 18
   \   000006   13           DB 19
   \   000007   15           DB 21
   \   000008   16           DB 22
   \   000009   17           DB 23
   \   00000A   18           DB 24
   \   00000B   1A           DB 26

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {{0}}>`:
   \   000000   0000         DW 0
   \   000002   00000000     DB 0, 0, 0, 0, 0, 0
   \            0000    
   \   000008   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1f40:
   \   000000   401F0000     DD 8000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1d4c:
   \   000000   4C1D0000     DD 7500

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1f4:
   \   000000   F4010000     DD 500

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_7d0:
   \   000000   D0070000     DD 2000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_fa:
   \   000000   FA000000     DD 250

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1388:
   \   000000   88130000     DD 5000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_0:
   \   000000   00000000     DD 0
   2235          #endif //(ZSTACK_ROUTER_BUILD)
   2236          
   2237          /*********************************************************************
   2238          *********************************************************************/

   Maximum stack usage in bytes:

   ISTACK PSTACK XSTACK Function
   ------ ------ ------ --------
       2      0     52  initiatorClearSelectedTarget
                          2 0  0 -> osal_memset
       0      0     15  initiatorDeviceInfoReqCB
                          0 0 11 -> zll_IsValidTransID
                          0 0 15 -> zll_SendDeviceInfoRsp
       2      0     52  initiatorDeviceInfoRspCB
                          0 0 52 -> initiatorClearSelectedTarget
                          0 0 52 -> zll_IsValidTransID
       0      0     14  initiatorIdentifyReqCB
                          0 0 14 -> zll_IsValidTransID
       2      0     30  initiatorJoinNwk
                          2 0  0 -> ZDApp_LeaveCtrlReset
                          2 0  0 -> ZDOInitDevice
                          2 0  0 -> zll_PermitJoin
                          2 0  0 -> zll_UpdateNV
       0      0     13  initiatorNwkJoinEDRspCB
                          0 0  9 -> osal_get_timeoutEx
                          0 0 13 -> osal_start_timerEx
                          0 0  9 -> zll_IsValidTransID
       2      0     30  initiatorNwkJoinReqCB
                          0 0 28 -> nwk_ExtPANIDValid
                          0 0 28 -> osal_set_event
                          0 0 28 -> osal_stop_timerEx
                          0 0 30 -> zclLL_Send_NwkJoinRsp
                          0 0 28 -> zll_IsValidTransID
       0      0     13  initiatorNwkJoinRtrRspCB
                          0 0  9 -> osal_get_timeoutEx
                          0 0 13 -> osal_start_timerEx
                          0 0  9 -> zll_IsValidTransID
       0      0     13  initiatorNwkStartRspCB
                          0 0  9 -> osal_get_timeoutEx
                          0 0 13 -> osal_start_timerEx
                          0 0  9 -> zll_IsValidTransID
       0      0     10  initiatorNwkUpdateReqCB
                          0 0 10 -> sAddrExtCmp
                          0 0 10 -> zll_IsValidTransID
                          0 0 10 -> zll_NewNwkUpdateId
                          0 0 10 -> zll_ProcessNwkUpdate
       0      0     39  initiatorReJoinNwk
                          0 0  9 -> nwk_setStateIdle
                          0 0  9 -> osal_set_event
                          0 0  9 -> sAddrExtCpy
                          0 0  9 -> zll_SetMacNwkParams
       2      0      0  initiatorResetToFNReqCB
                          2 0  0 -> osal_set_event
                          2 0  0 -> zll_IsFactoryNew
                          2 0  0 -> zll_IsValidTransID
       0      0     35  initiatorScanReqCB
                          0 0 31 -> osal_get_timeoutEx
                          0 0 34 -> osal_memcpy
                          0 0 31 -> osal_stop_timerEx
                          0 0 31 -> zll_GetMsgRssi
                          0 0 31 -> zll_IsFactoryNew
                          0 0 35 -> zll_SendScanRsp
       0      0     18  initiatorScanRspCB
                          0 0 17 -> ZMacGetReq
                          0 0 17 -> osal_get_timeoutEx
                          0 0 18 -> zclLL_Send_DeviceInfoReq
                          0 0 17 -> zll_GetMsgRssi
                          0 0 17 -> zll_GetNwkKeyBitmask
                          0 0 17 -> zll_IsValidTransID
       2      0      9  initiatorSelectNwkParams
                          0 0  9 -> osal_rand
                          0 0  9 -> zll_GenerateRandNum
                          2 0  9 -> zll_GetNumGrpIDs
                          0 0  9 -> zll_GetRandPrimaryChannel
                          0 0  9 -> zll_PopGrpIDRange
                          0 0  9 -> zll_PopNwkAddress
                          0 0  9 -> zll_SetMacNwkParams
       1      0     52  initiatorSendNwkJoinReq
                          0 0 14 -> osal_mem_alloc
                          0 0 14 -> osal_mem_free
                          0 0 14 -> osal_memset
                          0 0 14 -> osal_rand
                          0 0 18 -> osal_start_timerEx
                          0 0 14 -> sAddrExtCpy
                          0 0 16 -> zclLL_Send_NwkJoinReq
                          0 0 22 -> zll_EncryptNwkKey
                          0 0 14 -> zll_PopGrpIDRange
                          0 0 14 -> zll_PopNwkAddress
                          0 0 18 -> zll_SplitFreeRanges
       1      0     58  initiatorSendNwkStartReq
                          0 0 20 -> NLME_GetExtAddr
                          0 0 20 -> osal_mem_alloc
                          0 0 20 -> osal_mem_free
                          0 0 23 -> osal_memcpy
                          0 0 20 -> osal_memset
                          0 0 20 -> osal_rand
                          0 0 24 -> osal_start_timerEx
                          0 0 20 -> sAddrExtCpy
                          0 0 21 -> zclLL_Send_NwkStartReq
                          0 0 28 -> zll_EncryptNwkKey
                          0 0 20 -> zll_PopGrpIDRange
                          0 0 20 -> zll_PopNwkAddress
                          0 0 24 -> zll_SplitFreeRanges
       2      0     66  initiatorSendScanReq
                          0 0 36 -> osal_start_timerEx
                          0 0 33 -> zclLL_Send_ScanReq
                          0 0 32 -> zllInitiator_AbortTL
                          0 0 32 -> zll_IsFactoryNew
                          0 0 32 -> zll_SetChannel
       2      0     30  initiatorSetNwkToInitState
                          2 0  0 -> NLME_SetPollRate
                          2 0  0 -> NLME_SetQueuedPollRate
                          2 0  0 -> NLME_SetResponseRate
                          2 0  0 -> ZMacSetReq
                          2 0  0 -> nwk_setStateIdle
                          2 0  0 -> zll_SetChannel
       2      0      0  initiatorZdoLeaveCnfCB
                          2 0  0 -> osal_set_event
       0      0     41  zllInitiator_AbortTL
                          0 0  9 -> initiatorClearSelectedTarget
                          0 0  9 -> initiatorSetNwkToInitState
                          0 0  9 -> osal_stop_timerEx
       0      0     59  zllInitiator_BridgeStartNetwork
                          0 0 25 -> ZDApp_LeaveCtrlReset
                          0 0 25 -> ZDOInitDevice
                          0 0 25 -> ZDSecMgrUpdateTCAddress
                          0 0 25 -> zll_GenerateRandNum
                          0 0 25 -> zll_IsFactoryNew
                          0 0 29 -> zll_SetNIB
                          0 0 25 -> zll_UpdateNV
                          0 0 25 -> zll_UpdateNwkKey
       2      0     57  zllInitiator_ChannelChange
                          0 0 21 -> NLME_SetUpdateID
                          0 0 27 -> ZDP_MgmtNwkUpdateReq
       2      0     30  zllInitiator_ClassicalCommissioningStart
                          2 0  0 -> zll_ClassicalCommissioningInit
       0      0      9  zllInitiator_Init
                          0 0  9 -> ZDO_RegisterForZDOMsg
                          0 0  9 -> ZDO_RegisterForZdoCB
                          0 0  9 -> initiatorClearSelectedTarget
                          0 0  9 -> zclLL_RegisterInterPANCmdCallbacks
                          0 0  9 -> zcl_registerForMsg
                          0 0  9 -> zll_InitVariables
                          0 0  9 -> zll_SetZllTaskId
       2      0      0  zllInitiator_InitDevice
                          2 0  0 -> ZMacSetReq
                          2 0  0 -> initiatorReJoinNwk
                          2 0  0 -> initiatorSelectNwkParams
                          2 0  0 -> zll_IsFactoryNew
                          2 0  0 -> zll_PermitJoin
       2      0      0  zllInitiator_OrphanedRejoin
                          2 0  0 -> initiatorReJoinNwk
                          2 0  0 -> zll_IsFactoryNew
       0      0      9  zllInitiator_PermitJoin
                          0 0  9 -> zll_PermitJoin
       2      0      0  zllInitiator_RegisterApp
                          2 0  0 -> zll_RegisterApp
       2      0      0  zllInitiator_RegisterForMsg
       2      0      0  zllInitiator_RegisterIdentifyCB
       2      0      0  zllInitiator_RegisterNotifyTLCB
       2      0      0  zllInitiator_RegisterResetAppCB
       2      0      0  zllInitiator_RegisterSelectDiscDevCB
       0      0     47  zllInitiator_ResetToFNSelectedTarget
                          0 0 16 -> osal_stop_timerEx
                          0 0 17 -> zclLL_Send_ResetToFNReq
                          0 0 16 -> zll_SetChannel
       2      0     30  zllInitiator_ResetToFactoryNew
                          2 0  0 -> zll_ResetToFactoryNew
       1      0     36  zllInitiator_SendEPInfo
                          0 0 34 -> NLME_GetExtAddr
                          0 0 34 -> NLME_GetShortAddr
                          0 0 34 -> sAddrExtCpy
                          0 0 36 -> zclLL_Send_EndpointInfo
                          0 0 34 -> zll_GetSubDeviceInfo
       0      0     51  zllInitiator_StartDevDisc
                          0 0 17 -> NLME_SetPollRate
                          0 0 17 -> NLME_SetQueuedPollRate
                          0 0 17 -> NLME_SetResponseRate
                          0 0 17 -> ZDApp_StopJoiningCycle
                          0 0 17 -> ZMacGetReq
                          0 0 17 -> ZMacSetReq
                          0 0 17 -> initiatorSendScanReq
                          0 0 17 -> nwk_setStateIdle
                          0 0 17 -> osal_clear_event
                          0 0 17 -> osal_get_timeoutEx
                          0 0 17 -> osal_rand
                          0 0 21 -> osal_start_timerEx
                          0 0 17 -> zllInitiator_AbortTL
                          0 0 17 -> zll_IsFactoryNew
       1      0     38  zllInitiator_event_loop
                          0 0 30 -> MT_ZllNotifyTL
                          0 0 30 -> NLME_GetExtAddr
                          0 0 30 -> NLME_GetShortAddr
                          0 0 30 -> ZDApp_StopJoiningCycle
                          0 0 31 -> ZDP_DeviceAnnce
                          0 0 30 -> ZDSecMgrUpdateTCAddress
                          0 0 30 -> initiatorClearSelectedTarget
                          0 0 30 -> initiatorJoinNwk
                          0 0 30 -> initiatorReJoinNwk
                          0 0 30 -> initiatorSendNwkJoinReq
                          0 0 30 -> initiatorSendNwkStartReq
                          0 0 30 -> initiatorSendScanReq
                          0 0 30 -> initiatorSetNwkToInitState
                          0 0 30 -> nwk_ExtPANIDValid
                          0 0 30 -> osal_get_timeoutEx
                          0 0 30 -> osal_mem_alloc
                          0 0 30 -> osal_mem_free
                          0 0 30 -> osal_msg_deallocate
                          0 0 30 -> osal_msg_receive
                          0 0 30 -> osal_msg_send
                          0 0 30 -> osal_set_event
                          0 0 34 -> osal_start_timerEx
                          0 0 30 -> osal_stop_timerEx
                          0 0 30 -> sAddrExtCmp
                          0 0 30 -> sAddrExtCpy
                          0 0 31 -> zclLL_Send_IndentifyReq
                          0 0 31 -> zclLL_Send_NwkUpdateReq
                          0 0 30 -> zllInitiator_BridgeStartNetwork
                          0 0 30 -> zllInitiator_ChannelChange
                          0 0 30 -> zllInitiator_ClassicalCommissioningStart
                          0 0 30 -> zllInitiator_ResetToFNSelectedTarget
                          0 0 30 -> zllInitiator_ResetToFactoryNew
                          0 0 30 -> zllInitiator_StartDevDisc
                          0 0 30 -> zll_ClassicalCommissioningJoinDiscoveredNwk
                          0 0 38 -> zll_DecryptNwkKey
                          0 0 30 -> zll_IsFactoryNew
                          0 0 30 -> zll_IsValidSplitFreeRanges
                          0 0 30 -> zll_NewNwkUpdateId
                          0 0 30 -> zll_PermitJoin
                          0 0 30 -> zll_ProcessNwkUpdate
                          0 0 30 -> zll_RouterProcessZDOMsg
                          0 0 30 -> zll_SendLeaveReq
                          0 0 30 -> zll_SetChannel
                          0 0 34 -> zll_SetNIB
                          0 0 30 -> zll_UpdateFreeRanges
                          0 0 30 -> zll_UpdateNV


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
      12  ?<Constant {12, 13, 14, 16, 17, 18, 19, 21, 22
       9  ?<Constant {{0}}>
       1  ?<Initializer for initiatorRegisteredMsgAppTas
      26  ?<Initializer for zllInitiator_CmdCBs>
       6  ??Subroutine33_0
       1  ??Subroutine34_0
       7  ??Subroutine35_0
       5  ??Subroutine36_0
       8  ??Subroutine37_0
       7  ??Subroutine38_0
       6  ??Subroutine39_0
       6  ??Subroutine40_0
       6  ??Subroutine41_0
       4  ??Subroutine42_0
       6  ??Subroutine43_0
       5  ??Subroutine44_0
       8  ??Subroutine45_0
       3  ??Subroutine46_0
       6  ??Subroutine47_0
       6  ??initiatorClearSelectedTarget?relay
       6  ??initiatorDeviceInfoReqCB?relay
       6  ??initiatorDeviceInfoRspCB?relay
       6  ??initiatorIdentifyReqCB?relay
       6  ??initiatorJoinNwk?relay
       6  ??initiatorNwkJoinEDRspCB?relay
       6  ??initiatorNwkJoinReqCB?relay
       6  ??initiatorNwkJoinRtrRspCB?relay
       6  ??initiatorNwkStartRspCB?relay
       6  ??initiatorNwkUpdateReqCB?relay
       6  ??initiatorReJoinNwk?relay
       6  ??initiatorResetToFNReqCB?relay
       6  ??initiatorScanReqCB?relay
       6  ??initiatorScanRspCB?relay
       6  ??initiatorSelectNwkParams?relay
       6  ??initiatorSendNwkJoinReq?relay
       6  ??initiatorSendNwkStartReq?relay
       6  ??initiatorSendScanReq?relay
       6  ??initiatorSetNwkToInitState?relay
       6  ??initiatorZdoLeaveCnfCB?relay
       6  ??zllInitiator_AbortTL?relay
       6  ??zllInitiator_BridgeStartNetwork?relay
       6  ??zllInitiator_ChannelChange?relay
       6  ??zllInitiator_ClassicalCommissioningStart?rela
       6  ??zllInitiator_Init?relay
       6  ??zllInitiator_InitDevice?relay
       6  ??zllInitiator_OrphanedRejoin?relay
       6  ??zllInitiator_PermitJoin?relay
       6  ??zllInitiator_RegisterApp?relay
       6  ??zllInitiator_RegisterForMsg?relay
       6  ??zllInitiator_RegisterIdentifyCB?relay
       6  ??zllInitiator_RegisterNotifyTLCB?relay
       6  ??zllInitiator_RegisterResetAppCB?relay
       6  ??zllInitiator_RegisterSelectDiscDevCB?relay
       6  ??zllInitiator_ResetToFNSelectedTarget?relay
       6  ??zllInitiator_ResetToFactoryNew?relay
       6  ??zllInitiator_SendEPInfo?relay
       6  ??zllInitiator_StartDevDisc?relay
       6  ??zllInitiator_event_loop?relay
       4  ?Subroutine0
       8  ?Subroutine1
      14  ?Subroutine10
      10  ?Subroutine11
      10  ?Subroutine12
      19  ?Subroutine13
      10  ?Subroutine14
       6  ?Subroutine15
      13  ?Subroutine16
       3  ?Subroutine17
      13  ?Subroutine18
       6  ?Subroutine19
       5  ?Subroutine2
       8  ?Subroutine20
       8  ?Subroutine21
       9  ?Subroutine22
       4  ?Subroutine23
       3  ?Subroutine24
       4  ?Subroutine25
       9  ?Subroutine26
      11  ?Subroutine27
       9  ?Subroutine28
       4  ?Subroutine29
       8  ?Subroutine3
       5  ?Subroutine30
       3  ?Subroutine31
       3  ?Subroutine32
       5  ?Subroutine4
       3  ?Subroutine5
       5  ?Subroutine6
       2  ?Subroutine7
       8  ?Subroutine8
       5  ?Subroutine9
       4  __Constant_0
       4  __Constant_1388
       4  __Constant_1d4c
       4  __Constant_1f4
       4  __Constant_1f40
       4  __Constant_7d0
       4  __Constant_fa
      12  bcastAddr
       1  channelIndex
      16  encKeySent
      25  initiatorClearSelectedTarget
      72  initiatorDeviceInfoReqCB
     322  initiatorDeviceInfoRspCB
     124  initiatorIdentifyReqCB
      32  initiatorJoinNwk
      93  initiatorNwkJoinEDRspCB
     208  initiatorNwkJoinReqCB
      84  initiatorNwkJoinRtrRspCB
      82  initiatorNwkStartRspCB
     122  initiatorNwkUpdateReqCB
      78  initiatorReJoinNwk
       1  initiatorRegisteredMsgAppTaskID
      44  initiatorResetToFNReqCB
     204  initiatorScanReqCB
     303  initiatorScanRspCB
      88  initiatorSelectNwkParams
     485  initiatorSendNwkJoinReq
     508  initiatorSendNwkStartReq
     321  initiatorSendScanReq
       1  initiatorSeqNum
     138  initiatorSetNwkToInitState
      39  initiatorZdoLeaveCnfCB
      47  joinReq
       1  keyIndexSent
       1  numScanReqSent
       2  pfnIdentifyCB
       2  pfnNotifyAppCB
       2  pfnResetAppCB
       2  pfnSelectDiscDevCB
       4  responseIDSent
      17  rxRsp
       2  savedPollRate
       2  savedQueuedPollRate
       2  savedResponsePollRate
       1  savedRxOnIdle
       1  scanReqChannels
      54  selectedTarget
      95  zllInitiator_AbortTL
     128  zllInitiator_BridgeStartNetwork
     183  zllInitiator_ChannelChange
      10  zllInitiator_ClassicalCommissioningStart
      26  zllInitiator_CmdCBs
     140  zllInitiator_Init
      45  zllInitiator_InitDevice
      45  zllInitiator_OrphanedRejoin
      11  zllInitiator_PermitJoin
       9  zllInitiator_RegisterApp
      23  zllInitiator_RegisterForMsg
      10  zllInitiator_RegisterIdentifyCB
      10  zllInitiator_RegisterNotifyTLCB
      10  zllInitiator_RegisterResetAppCB
      10  zllInitiator_RegisterSelectDiscDevCB
     109  zllInitiator_ResetToFNSelectedTarget
      23  zllInitiator_ResetToFactoryNew
     194  zllInitiator_SendEPInfo
     248  zllInitiator_StartDevDisc
       1  zllInitiator_TaskID
    1620  zllInitiator_event_loop

 
 6 616 bytes in segment BANKED_CODE
   234 bytes in segment BANK_RELAYS
    27 bytes in segment XDATA_I
    27 bytes in segment XDATA_ID
    49 bytes in segment XDATA_ROM_C
   171 bytes in segment XDATA_Z
 
 6 877 bytes of CODE  memory
    21 bytes of CONST memory (+ 28 bytes shared)
   198 bytes of XDATA memory

Errors: none
Warnings: none
