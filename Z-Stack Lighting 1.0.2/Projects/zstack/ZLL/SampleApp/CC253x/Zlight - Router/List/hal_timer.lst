###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.20.2.41139 for 8051             27/May/2014  19:14:08 #
# Copyright 2004-2013 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#                                                                             #
#    Source file        =  D:\Texas Instruments\Z-Stack Lighting              #
#                          1.0.2\Components\hal\target\CC2530PMP4712\hal_time #
#                          r.c                                                #
#    Command line       =  -f "D:\Texas Instruments\Z-Stack Lighting          #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\Tools\CC2530DB\f8wRouter.cfg" (-DCPU32MHZ        #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f "D:\Texas         #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\Tools\CC2530DB\f8wConfig.cfg" (-DZIGBEEPRO       #
#                          -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100    #
#                          -DREJOIN_POLL_RATE=440) -f "D:\Texas               #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\Tools\CC2530DB\f8wZCL.cfg" "D:\Texas             #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Components\hal\target\CC2530PMP4712\hal_time #
#                          r.c" -D FEATURE_GREEN_POWER -D SECURE=1 -D         #
#                          TC_LINKKEY_JOIN -D ZDSECMGR_TC_DEVICE_MAX=2 -D     #
#                          NV_RESTORE -D HOLD_AUTO_START -D INTER_PAN -D      #
#                          LCD_SUPPORTED=DEBUG -D ZCL_BASIC -D ZCL_READ -D    #
#                          ZCL_WRITE -D ZCL_IDENTIFY -D ZCL_ON_OFF -D         #
#                          ZCL_SCENES -D ZCL_GROUPS -D                        #
#                          ZCL_LIGHT_LINK_ENHANCE -D ZCL_LEVEL_CTRL -D        #
#                          ZCL_COLOR_CTRL -D MAX_CHANNELS_24GHZ=0x02108800    #
#                          -D xPWM_ALT2 -D xTHERMAL_SHUTDOWN -D               #
#                          ZLL_1_0_HUB_COMPATIBILITY -D DALI_LIGHT -lC        #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\Zlight  #
#                          - Router\List\" -lA "D:\Texas Instruments\Z-Stack  #
#                          Lighting 1.0.2\Projects\zstack\ZLL\SampleApp\CC253 #
#                          x\Zlight - Router\List\" --diag_suppress           #
#                          Pe001,Pa010 -o "D:\Texas Instruments\Z-Stack       #
#                          Lighting 1.0.2\Projects\zstack\ZLL\SampleApp\CC253 #
#                          x\Zlight - Router\Obj\" -e --debug --core=plain    #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "D:\Texas                  #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\" -I    #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\Sour #
#                          ce\" -I "D:\Texas Instruments\Z-Stack Lighting     #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\S #
#                          ource\" -I "D:\Texas Instruments\Z-Stack Lighting  #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\HomeAutomation\Source\" -I "D:\Texas             #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\HomeAutomation\SampleLight\Source\" -I           #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\ZMain\TI2530DB\" -I "D:\Texas                    #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\hal\include\" -I "D:\Texas      #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\hal\target\CC2530PMP4712\" -I   #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\include\" -I "D:\Texas      #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\high_level\" -I "D:\Texas   #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\low_level\srf04\" -I        #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\low_level\srf04\single_chip #
#                          \" -I "D:\Texas Instruments\Z-Stack Lighting       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mt\" -I "D:\Texas               #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\osal\include\" -I "D:\Texas     #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\services\saddr\" -I "D:\Texas   #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\services\sdata\" -I "D:\Texas   #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\af\" -I "D:\Texas         #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\nwk\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\sapi\" -I "D:\Texas       #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\sec\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\sys\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\zcl\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\zdo\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\zmac\" -I "D:\Texas             #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\zmac\f8w\" -Ohz                 #
#                          --require_prototypes                               #
#    List file          =  D:\Texas Instruments\Z-Stack Lighting              #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\Zlight  #
#                          - Router\List\hal_timer.lst                        #
#    Object file        =  D:\Texas Instruments\Z-Stack Lighting              #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\Zlight  #
#                          - Router\Obj\hal_timer.r51                         #
#                                                                             #
#                                                                             #
###############################################################################

D:\Texas Instruments\Z-Stack Lighting 1.0.2\Components\hal\target\CC2530PMP4712\hal_timer.c
      1          /**************************************************************************************************
      2            Filename:       hal_timer.c
      3            Revised:        $Date: 2011-09-20 04:30:28 -0700 (Tue, 20 Sep 2011) $
      4            Revision:       $Revision: 27635 $
      5          
      6            Description:   This file contains the interface to the Timer Service.
      7          
      8          
      9            Copyright 2006-2007 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          /*********************************************************************
     40           NOTE: The following mapping is done between the logical timer
     41                 names defined in HAL_TIMER.H and the physical HW timer.
     42          
     43                 HAL_TIMER_0 --> HW Timer 3  (8-bits)
     44                 HAL_TIMER_2 --> HW Timer 4  (8-bits)
     45                 HAL_TIMER_3 --> HW Timer 1  (16-bits)
     46          
     47           NOTE: The timer code assumes only one channel, CHANNEL 0, is used
     48                 for each timer.  There is currently no support for other
     49                 channels.
     50          
     51           NOTE: Only Output Compare Mode is supported.  There is no provision
     52                 to support Input Capture Mode.
     53          
     54           NOTE: There is no support to map the output of the timers to a
     55                 physical I/O pin
     56          
     57          *********************************************************************/
     58          /*********************************************************************
     59           * INCLUDES
     60           */
     61          #include  "hal_mcu.h"

   \                                 In  segment SFR_AN, at 0xaf
   \   unsigned char volatile __sfr T1STAT
   \                     T1STAT:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xb8
   \   union <unnamed> volatile __sfr _A_IEN1
   \                     _A_IEN1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xcb
   \   unsigned char volatile __sfr T3CTL
   \                     T3CTL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xcc
   \   unsigned char volatile __sfr T3CCTL0
   \                     T3CCTL0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xce
   \   unsigned char volatile __sfr T3CCTL1
   \                     T3CCTL1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xd8
   \   union <unnamed> volatile __sfr _A_TIMIF
   \                     _A_TIMIF:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xe4
   \   unsigned char volatile __sfr T1CTL
   \                     T1CTL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xe5
   \   unsigned char volatile __sfr T1CCTL0
   \                     T1CCTL0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xe6
   \   unsigned char volatile __sfr T1CCTL1
   \                     T1CCTL1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xe7
   \   unsigned char volatile __sfr T1CCTL2
   \                     T1CCTL2:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xeb
   \   unsigned char volatile __sfr T4CTL
   \                     T4CTL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xec
   \   unsigned char volatile __sfr T4CCTL0
   \                     T4CCTL0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xee
   \   unsigned char volatile __sfr T4CCTL1
   \                     T4CCTL1:
   \   000000                DS 1
     62          #include  "hal_defs.h"
     63          #include  "hal_types.h"
     64          #include  "hal_timer.h"
     65          
     66          /*********************************************************************
     67           * MACROS
     68           */
     69          
     70          /*********************************************************************
     71           * CONSTANTS
     72           */
     73          #define HW_TIMER_1        0x00
     74          #define HW_TIMER_3        0x01
     75          #define HW_TIMER_4        0x02
     76          #define HW_TIMER_INVALID  0x03
     77          #define HW_TIMER_MAX      0x03
     78          
     79          #define IEN1_T1IE     0x02    /* Timer1 Interrupt Enable */
     80          #define IEN1_T3IE     0x08    /* Timer3 Interrupt Enable */
     81          #define IEN1_T4IE     0x10    /* Timer4 Interrupt Enable */
     82          
     83          #define T1STAT_CH2IF   0x04
     84          #define T1STAT_CH1IF   0x02
     85          #define T1STAT_CH0IF   0x01
     86          #define T1STAT_OVFIF   0x20
     87          
     88          #define TIMIF_T1OVFIM 0x40
     89          #define TIMIF_T4CH1IF 0x20
     90          #define TIMIF_T4CH0IF 0x10
     91          #define TIMIF_T4OVFIF 0x08
     92          #define TIMIF_T3CH1IF 0x04
     93          #define TIMIF_T3CH0IF 0x02
     94          #define TIMIF_T3OVFIF 0x01
     95          
     96          #define T34CTL_OVFIM  0x80
     97          
     98          #define T1CCTL_RFIRQ        0x80    /* Interrupt Mask for RFIRQ*/
     99          #define T134CCTL_IM         0x40    /* Interrupt Mask */
    100          #define T134CCTL_CMP_BITS   0x38    /* Bits[5:3] == CMP[2:0] */
    101          #define T134CCTL_MODE       0x04    /* Capture(0)/Compare(1) mode */
    102          #define T134CCTL_CAP_BITS   0x03    /* Bits[1:0] == CAP[1:0] */
    103          
    104          #define T134CCTL_CMP_OC     0x18    /* Set output on compare, clear at 0 */
    105          #define T134CCTL_CAP_RE     0x01    /* Set input capture on rising edge */
    106          
    107          /* Timer clock pre-scaler definitions for 16bit timer1 */
    108          #define HAL_TIMER1_16_TC_DIV1     0x00  /* No clock pre-scaling */
    109          #define HAL_TIMER1_16_TC_DIV8     0x04  /* Clock pre-scaled by 8 */
    110          #define HAL_TIMER1_16_TC_DIV32    0x08  /* Clock pre-scaled by 32 */
    111          #define HAL_TIMER1_16_TC_DIV128   0x0c  /* Clock pre-scaled by 128 */
    112          #define HAL_TIMER1_16_TC_BITS     0x0c  /* Bits 3:2 */
    113          
    114          /* Timer clock pre-scaler definitions for 8bit timer3 and timer4 */
    115          #define HAL_TIMER34_8_TC_DIV1     0x00  /* No clock pre-scaling */
    116          #define HAL_TIMER34_8_TC_DIV2     0x20  /* Clock pre-scaled by 2 */
    117          #define HAL_TIMER34_8_TC_DIV4     0x40  /* Clock pre-scaled by 4 */
    118          #define HAL_TIMER34_8_TC_DIV8     0x60  /* Clock pre-scaled by 8 */
    119          #define HAL_TIMER34_8_TC_DIV16    0x80  /* Clock pre-scaled by 16 */
    120          #define HAL_TIMER34_8_TC_DIV32    0xA0  /* Clock pre-scaled by 32 */
    121          #define HAL_TIMER34_8_TC_DIV64    0xC0  /* Clock pre-scaled by 64 */
    122          #define HAL_TIMER34_8_TC_DIV128   0xE0  /* Clock pre-scaled by 128 */
    123          #define HAL_TIMER34_8_TC_BITS     0xE0  /* Bits 7:5 */
    124          
    125          /* Operation Mode definitions */
    126          #define HAL_TIMER1_OPMODE_STOP      0x00  /* Free Running Mode, Count from 0 to Max */
    127          #define HAL_TIMER1_OPMODE_FREERUN   0x01  /* Free Running Mode, Count from 0 to Max */
    128          #define HAL_TIMER1_OPMODE_MODULO    0x02  /* Modulo Mode, Count from 0 to CompareValue */
    129          #define HAL_TIMER1_OPMODE_UPDOWN    0x03  /* Modulo Mode, Count up from 0 to CompareValue and down to 0 */
    130          #define HAL_TIMER1_OPMODE_BITS      0x03  /* Bits 1:0 */
    131          
    132          #define HAL_TIMER34_START           0x10  /* Timer3 and Timer4 have separate Start bit */
    133          #define HAL_TIMER34_OPMODE_FREERUN  0x00  /* Free Running Mode, Count from 0 to Max */
    134          #define HAL_TIMER34_OPMODE_MODULO   0x02  /* Modulo Mode, Count from 0 to CompareValue */
    135          #define HAL_TIMER34_OPMODE_BITS     0x03  /* Bits 1:0 */
    136          
    137          #define HAL_TIMER_MODE_STOP         0x03
    138          
    139          /* Prescale settings */
    140          #define HAL_TIMER1_16_PRESCALE      HAL_TIMER1_16_TC_DIV128
    141          #define HAL_TIMER1_16_PRESCALE_VAL  128
    142          #define HAL_TIMER3_8_PRESCALE       HAL_TIMER34_8_TC_DIV128
    143          #define HAL_TIMER3_8_PRESCALE_VAL   128
    144          #define HAL_TIMER4_8_PRESCALE       HAL_TIMER34_8_TC_DIV128
    145          #define HAL_TIMER4_8_PRESCALE_VAL   128
    146          
    147          /* Clock settings */
    148          #define HAL_TIMER_16MHZ           16
    149          #define HAL_TIMER_32MHZ           32
    150          
    151          /* Default all timers to use channel 0 */
    152          #define TCHN_T1CCTL   &(XX_T1CCTL0)
    153          #define TCHN_T1CCL    &(XX_T1CC0L)
    154          #define TCHN_T1CCH    &(XX_T1CC0H)
    155          #define TCNH_T1OVF    &(X_TIMIF)
    156          #define TCHN_T1OVFBIT TIMIF_T1OVFIM
    157          #define TCHN_T1INTBIT IEN1_T1IE
    158          
    159          #define TCHN_T3CCTL   &(X_T3CCTL0)
    160          #define TCHN_T3CCL    &(X_T3CC0)
    161          #define TCHN_T3CCH    &(X_T3CC0)
    162          #define TCNH_T3OVF    &(X_T3CTL)
    163          #define TCHN_T3OVFBIT T34CTL_OVFIM
    164          #define TCHN_T3INTBIT IEN1_T3IE
    165          
    166          #define TCHN_T4CCTL   &(X_T4CCTL0)
    167          #define TCHN_T4CCL    &(X_T4CC0)
    168          #define TCHN_T4CCH    &(X_T4CC0)
    169          #define TCNH_T4OVF    &(X_T4CTL)
    170          #define TCHN_T4OVFBIT T34CTL_OVFIM
    171          #define TCHN_T4INTBIT IEN1_T4IE
    172          
    173          /*********************************************************************
    174           * TYPEDEFS
    175           */
    176          typedef struct
    177          {
    178            bool configured;
    179            bool intEnable;
    180            uint8 opMode;
    181            uint8 channel;
    182            uint8 channelMode;
    183            uint8 prescale;
    184            uint8 prescaleVal;
    185            uint8 clock;
    186            halTimerCBack_t callBackFunc;
    187          } halTimerSettings_t;
    188          
    189          typedef struct
    190          {
    191            uint8 volatile XDATA *TxCCTL;
    192            uint8 volatile XDATA *TxCCH;
    193            uint8 volatile XDATA *TxCCL;
    194            uint8 volatile XDATA *TxOVF;
    195            uint8 ovfbit;
    196            uint8 intbit;
    197          } halTimerChannel_t;
    198          
    199          typedef struct
    200          {
    201            uint8 volatile XDATA *TxCCTL;
    202            uint8 volatile XDATA *TxCCH;
    203            uint8 volatile XDATA *TxCCL;
    204          } halTimer1Channel_t;
    205          
    206          
    207          /*********************************************************************
    208           * GLOBAL VARIABLES
    209           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    210          static halTimerSettings_t halTimerRecord[HW_TIMER_MAX];
   \                     halTimerRecord:
   \   000000                DS 30
   \   00001E                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    211          static halTimerChannel_t  halTimerChannel[HAL_TIMER_CH_MAX];
   \                     halTimerChannel:
   \   000000                DS 60
   \   00003C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    212          static halTimer1Channel_t  halTimer1Channel[HAL_TIMER_CH_MAX];
   \                     halTimer1Channel:
   \   000000                DS 36
   \   000024                REQUIRE __INIT_XDATA_Z
    213          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    214          static uint16 Timer1MaxCount;
   \                     Timer1MaxCount:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    215          
    216          /*********************************************************************
    217           * FUNCTIONS - External
    218           */
    219          
    220          /*********************************************************************
    221           * FUNCTIONS - Local
    222           */
    223          uint8 halTimerSetCount (uint8 cc2430id, uint32 timePerTick);
    224          uint8 halTimerSetPrescale (uint8 cc2430id, uint8 prescale);
    225          uint8 halTimerSetOpMode (uint8 cc2430id, uint8 opMode);
    226          uint8 halTimerSetChannelMode (uint8 cc2430id, uint8 channelMode);
    227          void halTimerSendCallBack (uint8 timerId, uint8 channel, uint8 channelMode);
    228          uint8 halTimerRemap (uint8 timerId);
    229          void halProcessTimer1 (void);
    230          void halProcessTimer3 (void);
    231          void halProcessTimer4 (void);
    232          
    233          uint16 halTimer1SetPeriod (uint32 timePerTick);
    234          void halTimer1SetChannelCount (uint8 channel, uint16 count);
    235          uint8 halTimer1SetChannelCCTL (uint8 channel, uint8 rfirq,  uint8 im,  uint8 cmp,  uint8 mode,  uint8 cap );
    236          
    237          
    238          /*********************************************************************
    239           * FUNCTIONS - API
    240           */
    241          /*********************************************************************
    242           * @fn      HalTimer1Init
    243           *
    244           * @brief   Initialize Timer Service
    245           *
    246           * @param   None
    247           *
    248           * @return  None
    249           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    250          void HalTimer1Init (halTimerCBack_t cBack)
   \                     HalTimer1Init:
    251          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    252            T1CCTL0 = 0;    /* Make sure interrupts are disabled */
   \   000005   75E500       MOV     0xe5,#0x0
    253            T1CCTL1 = 0;    /* Make sure interrupts are disabled */
   \   000008   75E600       MOV     0xe6,#0x0
    254            T1CCTL2 = 0;    /* Make sure interrupts are disabled */
   \   00000B   75E700       MOV     0xe7,#0x0
    255            T1CCTL3 = 0;    /* Make sure interrupts are disabled */
   \   00000E   9062A3       MOV     DPTR,#0x62a3
   \   000011   E4           CLR     A
   \   000012   F0           MOVX    @DPTR,A
    256            T1CCTL4 = 0;    /* Make sure interrupts are disabled */
   \   000013   A3           INC     DPTR
   \   000014   F0           MOVX    @DPTR,A
    257          
    258            /* Setup prescale & clock for timer0 */
    259            halTimerRecord[HW_TIMER_1].prescale    = HAL_TIMER1_16_PRESCALE;
   \   000015   12....       LCALL   ?Subroutine5 & 0xFFFF
    260            halTimerRecord[HW_TIMER_1].clock       = HAL_TIMER_32MHZ;
    261            halTimerRecord[HW_TIMER_1].prescaleVal = HAL_TIMER1_16_PRESCALE_VAL;
    262          
    263            /* Setup Timer1 Channel structure */
    264            halTimer1Channel[0].TxCCTL =  TCHN_T1CCTL;
   \                     ??CrossCallReturnLabel_0:
   \   000018   90....       MOV     DPTR,#halTimer1Channel
   \   00001B   12....       LCALL   ?Subroutine4 & 0xFFFF
    265            halTimer1Channel[0].TxCCL =   TCHN_T1CCL;
   \                     ??CrossCallReturnLabel_40:
   \   00001E   90....       MOV     DPTR,#halTimer1Channel + 4
   \   000021   74A6         MOV     A,#-0x5a
   \   000023   12....       LCALL   ??Subroutine21_0 & 0xFFFF
    266            halTimer1Channel[0].TxCCH =   TCHN_T1CCH;
   \                     ??CrossCallReturnLabel_36:
   \   000026   90....       MOV     DPTR,#halTimer1Channel + 2
   \   000029   74A7         MOV     A,#-0x59
   \   00002B   12....       LCALL   ??Subroutine21_0 & 0xFFFF
    267          
    268            halTimerRecord[HW_TIMER_1].configured    = TRUE;
   \                     ??CrossCallReturnLabel_37:
   \   00002E   90....       MOV     DPTR,#halTimerRecord
   \   000031   7401         MOV     A,#0x1
   \   000033   F0           MOVX    @DPTR,A
    269            halTimerRecord[HW_TIMER_1].opMode        = HAL_TIMER1_OPMODE_UPDOWN;
   \   000034   90....       MOV     DPTR,#halTimerRecord + 2
   \   000037   7403         MOV     A,#0x3
   \   000039   F0           MOVX    @DPTR,A
    270            halTimerRecord[HW_TIMER_1].channel       = 0;
   \   00003A   A3           INC     DPTR
   \   00003B   E4           CLR     A
   \   00003C   F0           MOVX    @DPTR,A
    271            halTimerRecord[HW_TIMER_1].channelMode   = 0;
   \   00003D   A3           INC     DPTR
   \   00003E   F0           MOVX    @DPTR,A
    272            halTimerRecord[HW_TIMER_1].intEnable     = FALSE;
   \   00003F   90....       MOV     DPTR,#halTimerRecord + 1
   \   000042   F0           MOVX    @DPTR,A
    273            halTimerRecord[HW_TIMER_1].callBackFunc  = cBack;
   \   000043   90....       MOV     DPTR,#halTimerRecord + 8
   \   000046   EA           MOV     A,R2
   \   000047   F0           MOVX    @DPTR,A
   \   000048   A3           INC     DPTR
   \   000049   EB           MOV     A,R3
   \   00004A   F0           MOVX    @DPTR,A
    274            Timer1MaxCount = halTimer1SetPeriod (4292); // 233Hz
   \   00004B                ; Setup parameters for call to function halTimer1SetPeriod
   \   00004B   90....       MOV     DPTR,#__Constant_10c4
   \   00004E   12....       LCALL   ?XLOAD_R2345
   \   000051   12....       LCALL   ??halTimer1SetPeriod?relay
   \   000054   90....       MOV     DPTR,#Timer1MaxCount
   \   000057   EA           MOV     A,R2
   \   000058   F0           MOVX    @DPTR,A
   \   000059   A3           INC     DPTR
   \   00005A   EB           MOV     A,R3
   \   00005B   F0           MOVX    @DPTR,A
    275          
    276            halTimerSetPrescale (HW_TIMER_1, halTimerRecord[HW_TIMER_1].prescale);
   \   00005C                ; Setup parameters for call to function halTimerSetPrescale
   \   00005C   90....       MOV     DPTR,#halTimerRecord + 5
   \   00005F   E0           MOVX    A,@DPTR
   \   000060   FA           MOV     R2,A
   \   000061   7900         MOV     R1,#0x0
   \   000063   12....       LCALL   ??halTimerSetPrescale?relay
    277            halTimerSetChannelMode (HW_TIMER_1, halTimerRecord[HW_TIMER_1].channelMode);
   \   000066                ; Setup parameters for call to function halTimerSetChannelMode
   \   000066   90....       MOV     DPTR,#halTimerRecord + 4
   \   000069   E0           MOVX    A,@DPTR
   \   00006A   FA           MOV     R2,A
   \   00006B   7900         MOV     R1,#0x0
   \   00006D   12....       LCALL   ??halTimerSetChannelMode?relay
    278            halTimer1SetChannelCCTL(HAL_T1_CH0, 0, 1, HAL_TIMER1_CH0_CMP_MODE_SET_ON_COMP, 1, HAL_TIMER1_CH_CAP_MODE_NO);
   \   000070                ; Setup parameters for call to function halTimer1SetChannelCCTL
   \   000070   75..00       MOV     ?V0 + 0,#0x0
   \   000073   78..         MOV     R0,#?V0 + 0
   \   000075   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000078   7D01         MOV     R5,#0x1
   \   00007A   7C00         MOV     R4,#0x0
   \   00007C   7B01         MOV     R3,#0x1
   \   00007E   7A00         MOV     R2,#0x0
   \   000080   7900         MOV     R1,#0x0
   \   000082   12....       LCALL   ??halTimer1SetChannelCCTL?relay
   \   000085   7401         MOV     A,#0x1
   \   000087   12....       LCALL   ?DEALLOC_XSTACK8
    279            halTimer1SetChannelCCTL(HAL_T1_CH1, 0, 1, HAL_TIMER1_CHn_CMP_MODE_CLR_ON_COMP_SET_ON_0, 1, HAL_TIMER1_CH_CAP_MODE_NO);
   \   00008A                ; Setup parameters for call to function halTimer1SetChannelCCTL
   \   00008A   78..         MOV     R0,#?V0 + 0
   \   00008C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00008F   7D01         MOV     R5,#0x1
   \   000091   7C04         MOV     R4,#0x4
   \   000093   7B01         MOV     R3,#0x1
   \   000095   7A00         MOV     R2,#0x0
   \   000097   7901         MOV     R1,#0x1
   \   000099   12....       LCALL   ??halTimer1SetChannelCCTL?relay
   \   00009C   7401         MOV     A,#0x1
   \   00009E   12....       LCALL   ?DEALLOC_XSTACK8
    280            halTimer1SetChannelCCTL(HAL_T1_CH2, 0, 1, HAL_TIMER1_CHn_CMP_MODE_CLR_ON_COMP_SET_ON_0, 1, HAL_TIMER1_CH_CAP_MODE_NO);
   \   0000A1                ; Setup parameters for call to function halTimer1SetChannelCCTL
   \   0000A1   78..         MOV     R0,#?V0 + 0
   \   0000A3   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000A6   7D01         MOV     R5,#0x1
   \   0000A8   7C04         MOV     R4,#0x4
   \   0000AA   7B01         MOV     R3,#0x1
   \   0000AC   7A00         MOV     R2,#0x0
   \   0000AE   7902         MOV     R1,#0x2
   \   0000B0   12....       LCALL   ??halTimer1SetChannelCCTL?relay
   \   0000B3   7401         MOV     A,#0x1
   \   0000B5   12....       LCALL   ?DEALLOC_XSTACK8
    281            halTimer1SetChannelCCTL(HAL_T1_CH3, 0, 1, HAL_TIMER1_CHn_CMP_MODE_CLR_ON_COMP_SET_ON_0, 1, HAL_TIMER1_CH_CAP_MODE_NO);
   \   0000B8                ; Setup parameters for call to function halTimer1SetChannelCCTL
   \   0000B8   78..         MOV     R0,#?V0 + 0
   \   0000BA   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000BD   7D01         MOV     R5,#0x1
   \   0000BF   7C04         MOV     R4,#0x4
   \   0000C1   7B01         MOV     R3,#0x1
   \   0000C3   7A00         MOV     R2,#0x0
   \   0000C5   7903         MOV     R1,#0x3
   \   0000C7   12....       LCALL   ??halTimer1SetChannelCCTL?relay
   \   0000CA   7401         MOV     A,#0x1
   \   0000CC   12....       LCALL   ?DEALLOC_XSTACK8
    282            halTimer1SetChannelCCTL(HAL_T1_CH4, 0, 1, HAL_TIMER1_CHn_CMP_MODE_CLR_ON_COMP_SET_ON_0, 1, HAL_TIMER1_CH_CAP_MODE_NO);
   \   0000CF                ; Setup parameters for call to function halTimer1SetChannelCCTL
   \   0000CF   78..         MOV     R0,#?V0 + 0
   \   0000D1   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000D4   7D01         MOV     R5,#0x1
   \   0000D6   7C04         MOV     R4,#0x4
   \   0000D8   7B01         MOV     R3,#0x1
   \   0000DA   7A00         MOV     R2,#0x0
   \   0000DC   7904         MOV     R1,#0x4
   \   0000DE   12....       LCALL   ??halTimer1SetChannelCCTL?relay
   \   0000E1   7401         MOV     A,#0x1
   \   0000E3   12....       LCALL   ?DEALLOC_XSTACK8
    283            
    284            halTimer1SetChannelDuty (HAL_T1_CH1, 0);
   \   0000E6                ; Setup parameters for call to function halTimer1SetChannelDuty
   \   0000E6   7A00         MOV     R2,#0x0
   \   0000E8   7B00         MOV     R3,#0x0
   \   0000EA   7901         MOV     R1,#0x1
   \   0000EC   12....       LCALL   ??halTimer1SetChannelDuty?relay
    285            halTimer1SetChannelDuty (HAL_T1_CH2, 0);
   \   0000EF                ; Setup parameters for call to function halTimer1SetChannelDuty
   \   0000EF   7A00         MOV     R2,#0x0
   \   0000F1   7B00         MOV     R3,#0x0
   \   0000F3   7902         MOV     R1,#0x2
   \   0000F5   12....       LCALL   ??halTimer1SetChannelDuty?relay
    286            halTimer1SetChannelDuty (HAL_T1_CH3, 0);
   \   0000F8                ; Setup parameters for call to function halTimer1SetChannelDuty
   \   0000F8   7A00         MOV     R2,#0x0
   \   0000FA   7B00         MOV     R3,#0x0
   \   0000FC   7903         MOV     R1,#0x3
   \   0000FE   12....       LCALL   ??halTimer1SetChannelDuty?relay
    287            halTimer1SetChannelDuty (HAL_T1_CH4, 0);
   \   000101                ; Setup parameters for call to function halTimer1SetChannelDuty
   \   000101   7A00         MOV     R2,#0x0
   \   000103   7B00         MOV     R3,#0x0
   \   000105   7904         MOV     R1,#0x4
   \   000107   12....       LCALL   ??halTimer1SetChannelDuty?relay
    288          
    289          
    290              /* set timer 1 operating mode */
    291            T1CTL &= ~(HAL_TIMER1_OPMODE_BITS);
   \   00010A   53E4FC       ANL     0xe4,#0xfc
    292            T1CTL |= HAL_TIMER1_OPMODE_UPDOWN;
   \   00010D   43E403       ORL     0xe4,#0x3
    293          
    294          }
   \   000110                REQUIRE ?Subroutine0
   \   000110                REQUIRE T1CCTL0
   \   000110                REQUIRE T1CCTL1
   \   000110                REQUIRE T1CCTL2
   \   000110                REQUIRE T1CTL
   \   000110                ; // Fall through to label ?Subroutine0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   90....       MOV     DPTR,#halTimerRecord + 5
   \   000003   740C         MOV     A,#0xc
   \   000005   F0           MOVX    @DPTR,A
   \   000006   90....       MOV     DPTR,#halTimerRecord + 7
   \   000009   7420         MOV     A,#0x20
   \   00000B   F0           MOVX    @DPTR,A
   \   00000C   90....       MOV     DPTR,#halTimerRecord + 6
   \   00000F   7480         MOV     A,#-0x80
   \   000011   F0           MOVX    @DPTR,A
   \   000012   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   74A0         MOV     A,#-0x60
   \   000002                REQUIRE ??Subroutine21_0
   \   000002                ; // Fall through to label ??Subroutine21_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine21_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   7462         MOV     A,#0x62
   \   000004   F0           MOVX    @DPTR,A
   \   000005   22           RET
    295          
    296          /***************************************************************************************************
    297           * @fn      halTimer1SetPeriod
    298           *
    299           * @brief   Set period for Timer1 PWM
    300           *
    301           * @param   
    302           *          timerPerTick - Number micro sec per ticks
    303           *
    304           * @return  Status - OK or Not OK
    305           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    306          uint16 halTimer1SetPeriod (uint32 timePerTick)
   \                     halTimer1SetPeriod:
    307          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 0,R2
   \   000007   8B..         MOV     ?V0 + 1,R3
   \   000009   8C..         MOV     ?V0 + 2,R4
   \   00000B   8D..         MOV     ?V0 + 3,R5
    308            uint16  count;
    309          
    310            /* Load count = ((sec/tick) x clock) / prescale */
    311            count = (uint16)((timePerTick * halTimerRecord[HW_TIMER_1].clock) / halTimerRecord[HW_TIMER_1].prescaleVal)/2;
   \   00000D   90....       MOV     DPTR,#halTimerRecord + 7
   \   000010   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   000013   12....       LCALL   ?L_MUL
   \   000016   90....       MOV     DPTR,#halTimerRecord + 6
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   F5..         MOV     ?V0 + 4,A
   \   00001C   78..         MOV     R0,#?V0 + 0
   \   00001E   79..         MOV     R1,#?V0 + 4
   \   000020   12....       LCALL   ?UL_DIV_MOD
   \   000023   7401         MOV     A,#0x1
   \   000025   78..         MOV     R0,#?V0 + 0
   \   000027   12....       LCALL   ?US_SHR
   \   00002A   AE..         MOV     R6,?V0 + 0
   \   00002C   AF..         MOV     R7,?V0 + 1
    312            halTimer1SetChannelCount(HAL_T1_CH0, count);
   \   00002E                ; Setup parameters for call to function halTimer1SetChannelCount
   \   00002E   EE           MOV     A,R6
   \   00002F   FA           MOV     R2,A
   \   000030   EF           MOV     A,R7
   \   000031   FB           MOV     R3,A
   \   000032   7900         MOV     R1,#0x0
   \   000034   12....       LCALL   ??halTimer1SetChannelCount?relay
    313            return count;
   \   000037   EE           MOV     A,R6
   \   000038   FA           MOV     R2,A
   \   000039   EF           MOV     A,R7
   \   00003A   FB           MOV     R3,A
   \   00003B   02....       LJMP    ?Subroutine1 & 0xFFFF
    314          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   7F08         MOV     R7,#0x8
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F5..         MOV     ?V0 + 4,A
   \   000003   E4           CLR     A
   \   000004   F5..         MOV     ?V0 + 5,A
   \   000006   F5..         MOV     ?V0 + 6,A
   \   000008   F5..         MOV     ?V0 + 7,A
   \   00000A   78..         MOV     R0,#?V0 + 0
   \   00000C   79..         MOV     R1,#?V0 + 4
   \   00000E   22           RET
    315          
    316          
    317          /***************************************************************************************************
    318           * @fn      halTimer1SetChannelDuty
    319           *
    320           * @brief   Set duty for Timer1 PWM
    321           *
    322           * @param   channel - timer channel to control
    323           *          percent - dutycycle in promill
    324           *
    325           * @return  Status - OK or Not OK
    326           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    327          void halTimer1SetChannelDuty (uint8 channel, uint16 promill)
   \                     halTimer1SetChannelDuty:
    328          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    329          #define MIN_PROMILL 20
    330            uint16  count;
    331            
    332            if (promill < MIN_PROMILL)
   \   000007   C3           CLR     C
   \   000008   EA           MOV     A,R2
   \   000009   9414         SUBB    A,#0x14
   \   00000B   EB           MOV     A,R3
   \   00000C   9400         SUBB    A,#0x0
   \   00000E   5004         JNC     ??halTimer1SetChannelDuty_0
    333              promill = 0;
   \   000010   7A00         MOV     R2,#0x0
   \   000012   7B00         MOV     R3,#0x0
    334            
    335            /* Load count = ((sec/tick) x clock) / prescale */
    336            count = (uint16)( ((uint32)(Timer1MaxCount) * promill + 500)/ 1000 );
   \                     ??halTimer1SetChannelDuty_0:
   \   000014   90....       MOV     DPTR,#Timer1MaxCount
   \   000017   E0           MOVX    A,@DPTR
   \   000018   F5..         MOV     ?V0 + 0,A
   \   00001A   A3           INC     DPTR
   \   00001B   E0           MOVX    A,@DPTR
   \   00001C   85....       MOV     ?V0 + 4,?V0 + 0
   \   00001F   F5..         MOV     ?V0 + 5,A
   \   000021   E4           CLR     A
   \   000022   F5..         MOV     ?V0 + 6,A
   \   000024   F5..         MOV     ?V0 + 7,A
   \   000026   8A..         MOV     ?V0 + 0,R2
   \   000028   8B..         MOV     ?V0 + 1,R3
   \   00002A   F5..         MOV     ?V0 + 2,A
   \   00002C   F5..         MOV     ?V0 + 3,A
   \   00002E   78..         MOV     R0,#?V0 + 4
   \   000030   79..         MOV     R1,#?V0 + 0
   \   000032   12....       LCALL   ?L_MUL
   \   000035   90....       MOV     DPTR,#__Constant_1f4
   \   000038   78..         MOV     R0,#?V0 + 4
   \   00003A   12....       LCALL   ?L_ADD_X
   \   00003D   90....       MOV     DPTR,#__Constant_3e8
   \   000040   78..         MOV     R0,#?V0 + 0
   \   000042   12....       LCALL   ?L_MOV_X
   \   000045   78..         MOV     R0,#?V0 + 4
   \   000047   79..         MOV     R1,#?V0 + 0
   \   000049   12....       LCALL   ?UL_DIV_MOD
   \   00004C   AA..         MOV     R2,?V0 + 4
   \   00004E   AB..         MOV     R3,?V0 + 5
    337            count = ( (count >= Timer1MaxCount) ? Timer1MaxCount-1 : (count == 0 ? 1 : count) ); 
   \   000050   90....       MOV     DPTR,#Timer1MaxCount
   \   000053   E0           MOVX    A,@DPTR
   \   000054   F8           MOV     R0,A
   \   000055   A3           INC     DPTR
   \   000056   E0           MOVX    A,@DPTR
   \   000057   F9           MOV     R1,A
   \   000058   C3           CLR     C
   \   000059   EA           MOV     A,R2
   \   00005A   98           SUBB    A,R0
   \   00005B   EB           MOV     A,R3
   \   00005C   99           SUBB    A,R1
   \   00005D   400E         JC      ??halTimer1SetChannelDuty_1
   \   00005F   90....       MOV     DPTR,#Timer1MaxCount
   \   000062   E0           MOVX    A,@DPTR
   \   000063   24FF         ADD     A,#-0x1
   \   000065   FA           MOV     R2,A
   \   000066   A3           INC     DPTR
   \   000067   E0           MOVX    A,@DPTR
   \   000068   34FF         ADDC    A,#-0x1
   \   00006A   FB           MOV     R3,A
   \   00006B   8008         SJMP    ??halTimer1SetChannelDuty_2
   \                     ??halTimer1SetChannelDuty_1:
   \   00006D   EA           MOV     A,R2
   \   00006E   4B           ORL     A,R3
   \   00006F   7004         JNZ     ??halTimer1SetChannelDuty_2
   \   000071   7A01         MOV     R2,#0x1
   \   000073   7B00         MOV     R3,#0x0
    338            
    339            halTimer1SetChannelCount(channel, count);
   \                     ??halTimer1SetChannelDuty_2:
   \   000075                ; Setup parameters for call to function halTimer1SetChannelCount
   \   000075   EE           MOV     A,R6
   \   000076   F9           MOV     R1,A
   \   000077   12....       LCALL   ??halTimer1SetChannelCount?relay
    340          }
   \   00007A   02....       LJMP    ?Subroutine1 & 0xFFFF
    341          
    342          /***************************************************************************************************
    343           * @fn      halTimer1SetChannelCount
    344           *
    345           * @brief   Stop the Timer Service
    346           *
    347           * @param   hwtimerid - ID of the timer
    348           *          timerPerTick - Number micro sec per ticks
    349           *
    350           * @return  Status - OK or Not OK
    351           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    352          void halTimer1SetChannelCount (uint8 channel, uint16 count)
   \                     halTimer1SetChannelCount:
    353          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    354            uint8   high, low;
    355          
    356            high = (uint8) (count >> 8);
    357            low = (uint8) count;
    358          
    359            *(halTimer1Channel[0].TxCCH + 2*channel) = high;
   \   000005   E9           MOV     A,R1
   \   000006   C3           CLR     C
   \   000007   33           RLC     A
   \   000008   FC           MOV     R4,A
   \   000009   E4           CLR     A
   \   00000A   33           RLC     A
   \   00000B   FD           MOV     R5,A
   \   00000C   90....       MOV     DPTR,#halTimer1Channel + 2
   \   00000F   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000012   EB           MOV     A,R3
   \   000013   F0           MOVX    @DPTR,A
    360            *(halTimer1Channel[0].TxCCL + 2*channel) = low;
   \   000014   90....       MOV     DPTR,#halTimer1Channel + 4
   \   000017   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   00001A   EA           MOV     A,R2
   \   00001B   F0           MOVX    @DPTR,A
    361          }
   \   00001C   02....       LJMP    ?Subroutine0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   2C           ADD     A,R4
   \   000002   F8           MOV     R0,A
   \   000003   A3           INC     DPTR
   \   000004   E0           MOVX    A,@DPTR
   \   000005   3D           ADDC    A,R5
   \   000006   8882         MOV     DPL,R0
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET
    362          
    363          /***************************************************************************************************
    364           * @fn      halTimerSetChannelMode
    365           *
    366           * @brief   Setup channel modes.  Currently, only output compare mode is supported.  Input capture
    367           *          mode is NOT supported.  Additionally, mapping timer channel inputs/outputs to I/O pins
    368           *          is NOT supported.
    369           *
    370           * @param   hwtimerid - ID of the timer
    371           *          channelMode - channel mode of the timer
    372           *
    373           * @return  Status - OK or Not OK
    374           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    375          uint8 halTimer1SetChannelCCTL (uint8 channel, uint8 rfirq,  uint8 im,  uint8 cmp,  uint8 mode,  uint8 cap )
   \                     halTimer1SetChannelCCTL:
    376          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   740A         MOV     A,#0xa
   \   000007   12....       LCALL   ?XSTACK_DISP0_8
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   F5..         MOV     ?V0 + 0,A
    377            *(halTimer1Channel[0].TxCCTL + channel) = 0;
   \   00000D   8982         MOV     DPL,R1
   \   00000F   A882         MOV     R0,DPL
   \   000011   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   000014   E4           CLR     A
   \   000015   F0           MOVX    @DPTR,A
    378            
    379            if (rfirq)
   \   000016   EA           MOV     A,R2
   \   000017   6006         JZ      ??halTimer1SetChannelCCTL_0
    380              *(halTimer1Channel[0].TxCCTL + channel) |= T1CCTL_RFIRQ;
   \   000019   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   00001C   D2E7         SETB    0xE0 /* A   */.7
   \   00001E   F0           MOVX    @DPTR,A
    381          
    382            if (im)
   \                     ??halTimer1SetChannelCCTL_0:
   \   00001F   EB           MOV     A,R3
   \   000020   6006         JZ      ??halTimer1SetChannelCCTL_1
    383              *(halTimer1Channel[0].TxCCTL + channel) |= T134CCTL_IM;
   \   000022   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   000025   D2E6         SETB    0xE0 /* A   */.6
   \   000027   F0           MOVX    @DPTR,A
    384            
    385            if (mode)
   \                     ??halTimer1SetChannelCCTL_1:
   \   000028   ED           MOV     A,R5
   \   000029   6006         JZ      ??halTimer1SetChannelCCTL_2
    386              *(halTimer1Channel[0].TxCCTL + channel) |= T134CCTL_MODE;
   \   00002B   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   00002E   D2E2         SETB    0xE0 /* A   */.2
   \   000030   F0           MOVX    @DPTR,A
    387          
    388            *(halTimer1Channel[0].TxCCTL + channel) |= (cmp << 3);
   \                     ??halTimer1SetChannelCCTL_2:
   \   000031   EC           MOV     A,R4
   \   000032   33           RLC     A
   \   000033   33           RLC     A
   \   000034   33           RLC     A
   \   000035   54F8         ANL     A,#0xf8
   \   000037   FF           MOV     R7,A
   \   000038   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   00003B   4F           ORL     A,R7
   \   00003C   F0           MOVX    @DPTR,A
    389            
    390            
    391              *(halTimer1Channel[0].TxCCTL + channel) |= cap;
   \   00003D   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_10:
   \   000040   45..         ORL     A,?V0 + 0
   \   000042   F0           MOVX    @DPTR,A
    392          
    393            return HAL_TIMER_OK;
   \   000043   7900         MOV     R1,#0x0
   \   000045   7F02         MOV     R7,#0x2
   \   000047   02....       LJMP    ?BANKED_LEAVE_XDATA
    394          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   90....       MOV     DPTR,#halTimer1Channel
   \   000003   E0           MOVX    A,@DPTR
   \   000004   28           ADD     A,R0
   \   000005   FE           MOV     R6,A
   \   000006   A3           INC     DPTR
   \   000007   E0           MOVX    A,@DPTR
   \   000008   3400         ADDC    A,#0x0
   \   00000A   8E82         MOV     DPL,R6
   \   00000C   F583         MOV     DPH,A
   \   00000E   22           RET
    395          
    396          /*********************************************************************
    397           * @fn      HalTimerInit
    398           *
    399           * @brief   Initialize Timer Service
    400           *
    401           * @param   None
    402           *
    403           * @return  None
    404           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    405          void HalTimerInit (void)
   \                     HalTimerInit:
    406          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    407            T1CCTL0 = 0;    /* Make sure interrupts are disabled */
   \   000004   75E500       MOV     0xe5,#0x0
    408            T1CCTL1 = 0;    /* Make sure interrupts are disabled */
   \   000007   75E600       MOV     0xe6,#0x0
    409            T1CCTL2 = 0;    /* Make sure interrupts are disabled */
   \   00000A   75E700       MOV     0xe7,#0x0
    410            T1CCTL3 = 0;    /* Make sure interrupts are disabled */
   \   00000D   9062A3       MOV     DPTR,#0x62a3
   \   000010   E4           CLR     A
   \   000011   F0           MOVX    @DPTR,A
    411            T1CCTL4 = 0;    /* Make sure interrupts are disabled */
   \   000012   A3           INC     DPTR
   \   000013   F0           MOVX    @DPTR,A
    412            T3CCTL0 = 0;    /* Make sure interrupts are disabled */
   \   000014   75CC00       MOV     0xcc,#0x0
    413            T3CCTL1 = 0;    /* Make sure interrupts are disabled */
   \   000017   75CE00       MOV     0xce,#0x0
    414            T4CCTL0 = 0;    /* Make sure interrupts are disabled */
   \   00001A   75EC00       MOV     0xec,#0x0
    415            T4CCTL1 = 0;    /* Make sure interrupts are disabled */
   \   00001D   75EE00       MOV     0xee,#0x0
    416          
    417            /* Setup prescale & clock for timer0 */
    418            halTimerRecord[HW_TIMER_1].prescale    = HAL_TIMER1_16_PRESCALE;
   \   000020   12....       LCALL   ?Subroutine5 & 0xFFFF
    419            halTimerRecord[HW_TIMER_1].clock       = HAL_TIMER_32MHZ;
    420            halTimerRecord[HW_TIMER_1].prescaleVal = HAL_TIMER1_16_PRESCALE_VAL;
    421          
    422            /* Setup prescale & clock for timer2 */
    423            halTimerRecord[HW_TIMER_3].prescale    = HAL_TIMER3_8_PRESCALE;
   \                     ??CrossCallReturnLabel_1:
   \   000023   90....       MOV     DPTR,#halTimerRecord + 15
   \   000026   74E0         MOV     A,#-0x20
   \   000028   F0           MOVX    @DPTR,A
    424            halTimerRecord[HW_TIMER_3].clock       = HAL_TIMER_32MHZ;
   \   000029   90....       MOV     DPTR,#halTimerRecord + 17
   \   00002C   7420         MOV     A,#0x20
   \   00002E   F0           MOVX    @DPTR,A
    425            halTimerRecord[HW_TIMER_3].prescaleVal = HAL_TIMER3_8_PRESCALE_VAL;
   \   00002F   90....       MOV     DPTR,#halTimerRecord + 16
   \   000032   7480         MOV     A,#-0x80
   \   000034   F0           MOVX    @DPTR,A
    426          
    427            /* Setup prescale & clock for timer3 */
    428            halTimerRecord[HW_TIMER_4].prescale    = HAL_TIMER4_8_PRESCALE;
   \   000035   90....       MOV     DPTR,#halTimerRecord + 25
   \   000038   74E0         MOV     A,#-0x20
   \   00003A   F0           MOVX    @DPTR,A
    429            halTimerRecord[HW_TIMER_4].clock       = HAL_TIMER_32MHZ;
   \   00003B   90....       MOV     DPTR,#halTimerRecord + 27
   \   00003E   7420         MOV     A,#0x20
   \   000040   F0           MOVX    @DPTR,A
    430            halTimerRecord[HW_TIMER_4].prescaleVal = HAL_TIMER4_8_PRESCALE_VAL;
   \   000041   90....       MOV     DPTR,#halTimerRecord + 26
   \   000044   7480         MOV     A,#-0x80
   \   000046   F0           MOVX    @DPTR,A
    431          
    432            /* Setup Timer1 Channel structure */
    433            halTimerChannel[HW_TIMER_1].TxCCTL =  TCHN_T1CCTL;
   \   000047   90....       MOV     DPTR,#halTimerChannel
   \   00004A   12....       LCALL   ?Subroutine4 & 0xFFFF
    434            halTimerChannel[HW_TIMER_1].TxCCL =   TCHN_T1CCL;
   \                     ??CrossCallReturnLabel_41:
   \   00004D   90....       MOV     DPTR,#halTimerChannel + 4
   \   000050   74A6         MOV     A,#-0x5a
   \   000052   12....       LCALL   ??Subroutine21_0 & 0xFFFF
    435            halTimerChannel[HW_TIMER_1].TxCCH =   TCHN_T1CCH;
   \                     ??CrossCallReturnLabel_38:
   \   000055   90....       MOV     DPTR,#halTimerChannel + 2
   \   000058   74A7         MOV     A,#-0x59
   \   00005A   12....       LCALL   ??Subroutine21_0 & 0xFFFF
    436            halTimerChannel[HW_TIMER_1].TxOVF =   TCNH_T1OVF;
   \                     ??CrossCallReturnLabel_39:
   \   00005D   90....       MOV     DPTR,#halTimerChannel + 6
   \   000060   74D8         MOV     A,#-0x28
   \   000062   12....       LCALL   ??Subroutine20_0 & 0xFFFF
    437            halTimerChannel[HW_TIMER_1].ovfbit =  TCHN_T1OVFBIT;
   \                     ??CrossCallReturnLabel_29:
   \   000065   A3           INC     DPTR
   \   000066   7440         MOV     A,#0x40
   \   000068   F0           MOVX    @DPTR,A
    438            halTimerChannel[HW_TIMER_1].intbit =  TCHN_T1INTBIT;
   \   000069   A3           INC     DPTR
   \   00006A   7402         MOV     A,#0x2
   \   00006C   F0           MOVX    @DPTR,A
    439          
    440            /* Setup Timer3 Channel structure */
    441            halTimerChannel[HW_TIMER_3].TxCCTL =  TCHN_T3CCTL;
   \   00006D   A3           INC     DPTR
   \   00006E   74CC         MOV     A,#-0x34
   \   000070   12....       LCALL   ??Subroutine20_0 & 0xFFFF
    442            halTimerChannel[HW_TIMER_3].TxCCL =   TCHN_T3CCL;
   \                     ??CrossCallReturnLabel_30:
   \   000073   90....       MOV     DPTR,#halTimerChannel + 14
   \   000076   12....       LCALL   ?Subroutine7 & 0xFFFF
    443            halTimerChannel[HW_TIMER_3].TxCCH =   TCHN_T3CCH;
   \                     ??CrossCallReturnLabel_34:
   \   000079   90....       MOV     DPTR,#halTimerChannel + 12
   \   00007C   12....       LCALL   ?Subroutine7 & 0xFFFF
    444            halTimerChannel[HW_TIMER_3].TxOVF =   TCNH_T3OVF;
   \                     ??CrossCallReturnLabel_35:
   \   00007F   90....       MOV     DPTR,#halTimerChannel + 16
   \   000082   74CB         MOV     A,#-0x35
   \   000084   12....       LCALL   ?Subroutine6 & 0xFFFF
    445            halTimerChannel[HW_TIMER_3].ovfbit =  TCHN_T3OVFBIT;
    446            halTimerChannel[HW_TIMER_3].intbit =  TCHN_T3INTBIT;
   \                     ??CrossCallReturnLabel_2:
   \   000087   7408         MOV     A,#0x8
   \   000089   F0           MOVX    @DPTR,A
    447          
    448            /* Setup Timer4 Channel structure */
    449            halTimerChannel[HW_TIMER_4].TxCCTL =  TCHN_T4CCTL;
   \   00008A   A3           INC     DPTR
   \   00008B   74EC         MOV     A,#-0x14
   \   00008D   12....       LCALL   ??Subroutine20_0 & 0xFFFF
    450            halTimerChannel[HW_TIMER_4].TxCCL =   TCHN_T4CCL;
   \                     ??CrossCallReturnLabel_31:
   \   000090   90....       MOV     DPTR,#halTimerChannel + 24
   \   000093   74ED         MOV     A,#-0x13
   \   000095   12....       LCALL   ??Subroutine20_0 & 0xFFFF
    451            halTimerChannel[HW_TIMER_4].TxCCH =   TCHN_T4CCH;
   \                     ??CrossCallReturnLabel_32:
   \   000098   90....       MOV     DPTR,#halTimerChannel + 22
   \   00009B   74ED         MOV     A,#-0x13
   \   00009D   12....       LCALL   ??Subroutine20_0 & 0xFFFF
    452            halTimerChannel[HW_TIMER_4].TxOVF =   TCNH_T4OVF;
   \                     ??CrossCallReturnLabel_33:
   \   0000A0   90....       MOV     DPTR,#halTimerChannel + 26
   \   0000A3   74EB         MOV     A,#-0x15
   \   0000A5   12....       LCALL   ?Subroutine6 & 0xFFFF
    453            halTimerChannel[HW_TIMER_4].ovfbit =  TCHN_T4OVFBIT;
    454            halTimerChannel[HW_TIMER_4].intbit =  TCHN_T4INTBIT;
   \                     ??CrossCallReturnLabel_3:
   \   0000A8   7410         MOV     A,#0x10
   \   0000AA   F0           MOVX    @DPTR,A
    455          }
   \   0000AB   02....       LJMP    ?Subroutine2 & 0xFFFF
   \   0000AE                REQUIRE T1CCTL0
   \   0000AE                REQUIRE T1CCTL1
   \   0000AE                REQUIRE T1CCTL2
   \   0000AE                REQUIRE T3CCTL0
   \   0000AE                REQUIRE T3CCTL1
   \   0000AE                REQUIRE T4CCTL0
   \   0000AE                REQUIRE T4CCTL1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   74CD         MOV     A,#-0x33
   \   000002                REQUIRE ??Subroutine20_0
   \   000002                ; // Fall through to label ??Subroutine20_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine20_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   7470         MOV     A,#0x70
   \   000004   F0           MOVX    @DPTR,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   7470         MOV     A,#0x70
   \   000004   F0           MOVX    @DPTR,A
   \   000005   A3           INC     DPTR
   \   000006   7480         MOV     A,#-0x80
   \   000008   F0           MOVX    @DPTR,A
   \   000009   A3           INC     DPTR
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    456          
    457          /***************************************************************************************************
    458           * @fn      HalTimerConfig
    459           *
    460           * @brief   Configure the Timer Serivce
    461           *
    462           * @param   timerId - Id of the timer
    463           *          opMode  - Operation mode
    464           *          channel - Channel where the counter operates on
    465           *          channelMode - Mode of that channel
    466           *          prescale - Prescale of the clock
    467           *          cBack - Pointer to the callback function
    468           *
    469           * @return  Status of the configuration
    470           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    471          uint8 HalTimerConfig (uint8 timerId, uint8 opMode, uint8 channel, uint8 channelMode,
   \                     HalTimerConfig:
    472                                bool intEnable, halTimerCBack_t cBack)
    473          {
   \   000000   74F3         MOV     A,#-0xd
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 13
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 0,R1
   \   000007   8A..         MOV     ?V0 + 1,R2
   \   000009   8B..         MOV     ?V0 + 2,R3
   \   00000B   8C..         MOV     ?V0 + 3,R4
   \   00000D   8D..         MOV     ?V0 + 4,R5
   \   00000F   740D         MOV     A,#0xd
   \   000011   12....       LCALL   ?XSTACK_DISP0_8
   \   000014   E0           MOVX    A,@DPTR
   \   000015   FE           MOV     R6,A
   \   000016   A3           INC     DPTR
   \   000017   E0           MOVX    A,@DPTR
   \   000018   FF           MOV     R7,A
    474            uint8 hwtimerid;
    475          
    476            hwtimerid = halTimerRemap (timerId);
   \   000019                ; Setup parameters for call to function halTimerRemap
   \   000019   12....       LCALL   ??halTimerRemap?relay
   \   00001C   E9           MOV     A,R1
   \   00001D   F8           MOV     R0,A
    477          
    478            if ((opMode & HAL_TIMER_MODE_MASK) && (timerId < HAL_TIMER_MAX) &&
    479                (channelMode & HAL_TIMER_CHANNEL_MASK) && (channel & HAL_TIMER_CHANNEL_MASK))
   \   00001E   7403         MOV     A,#0x3
   \   000020   55..         ANL     A,?V0 + 1
   \   000022   605E         JZ      ??HalTimerConfig_0
   \   000024   E5..         MOV     A,?V0 + 0
   \   000026   C3           CLR     C
   \   000027   9404         SUBB    A,#0x4
   \   000029   5057         JNC     ??HalTimerConfig_0
   \   00002B   743F         MOV     A,#0x3f
   \   00002D   55..         ANL     A,?V0 + 3
   \   00002F   6051         JZ      ??HalTimerConfig_0
   \   000031   743F         MOV     A,#0x3f
   \   000033   55..         ANL     A,?V0 + 2
   \   000035   604B         JZ      ??HalTimerConfig_0
    480            {
    481              halTimerRecord[hwtimerid].configured    = TRUE;
   \   000037   E8           MOV     A,R0
   \   000038   75F00A       MOV     B,#0xa
   \   00003B   A4           MUL     AB
   \   00003C   F8           MOV     R0,A
   \   00003D   A9F0         MOV     R1,B
   \   00003F   74..         MOV     A,#halTimerRecord & 0xff
   \   000041   28           ADD     A,R0
   \   000042   F8           MOV     R0,A
   \   000043   74..         MOV     A,#(halTimerRecord >> 8) & 0xff
   \   000045   39           ADDC    A,R1
   \   000046   F9           MOV     R1,A
   \   000047   E8           MOV     A,R0
   \   000048   FA           MOV     R2,A
   \   000049   E9           MOV     A,R1
   \   00004A   FB           MOV     R3,A
   \   00004B   8A82         MOV     DPL,R2
   \   00004D   8B83         MOV     DPH,R3
   \   00004F   7401         MOV     A,#0x1
   \   000051   F0           MOVX    @DPTR,A
    482              halTimerRecord[hwtimerid].opMode        = opMode;
   \   000052   A3           INC     DPTR
   \   000053   A3           INC     DPTR
   \   000054   E5..         MOV     A,?V0 + 1
   \   000056   12....       LCALL   ?Subroutine16 & 0xFFFF
    483              halTimerRecord[hwtimerid].channel       = channel;
   \                     ??CrossCallReturnLabel_23:
   \   000059   E5..         MOV     A,?V0 + 2
   \   00005B   12....       LCALL   ?Subroutine8 & 0xFFFF
    484              halTimerRecord[hwtimerid].channelMode   = channelMode;
   \                     ??CrossCallReturnLabel_4:
   \   00005E   E5..         MOV     A,?V0 + 3
   \   000060   F0           MOVX    @DPTR,A
    485              halTimerRecord[hwtimerid].intEnable     = intEnable;
   \   000061   8A82         MOV     DPL,R2
   \   000063   8B83         MOV     DPH,R3
   \   000065   A3           INC     DPTR
   \   000066   E5..         MOV     A,?V0 + 4
   \   000068   F0           MOVX    @DPTR,A
    486              halTimerRecord[hwtimerid].callBackFunc  = cBack;
   \   000069   EE           MOV     A,R6
   \   00006A   F8           MOV     R0,A
   \   00006B   EF           MOV     A,R7
   \   00006C   F9           MOV     R1,A
   \   00006D   8A82         MOV     DPL,R2
   \   00006F   8B83         MOV     DPH,R3
   \   000071   A3           INC     DPTR
   \   000072   A3           INC     DPTR
   \   000073   A3           INC     DPTR
   \   000074   A3           INC     DPTR
   \   000075   A3           INC     DPTR
   \   000076   A3           INC     DPTR
   \   000077   A3           INC     DPTR
   \   000078   A3           INC     DPTR
   \   000079   E8           MOV     A,R0
   \   00007A   F0           MOVX    @DPTR,A
   \   00007B   A3           INC     DPTR
   \   00007C   E9           MOV     A,R1
   \   00007D   F0           MOVX    @DPTR,A
    487            }
    488            else
    489            {
    490              return HAL_TIMER_PARAMS_ERROR;
    491            }
    492            return HAL_TIMER_OK;
   \   00007E   7900         MOV     R1,#0x0
   \   000080   8002         SJMP    ??HalTimerConfig_1
   \                     ??HalTimerConfig_0:
   \   000082   7902         MOV     R1,#0x2
   \                     ??HalTimerConfig_1:
   \   000084   7F05         MOV     R7,#0x5
   \   000086   02....       LJMP    ?BANKED_LEAVE_XDATA
    493          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   000003   A3           INC     DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8A82         MOV     DPL,R2
   \   000003   8B83         MOV     DPH,R3
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   22           RET
    494          
    495          
    496          /***************************************************************************************************
    497           * @fn      HalTimerStart
    498           *
    499           * @brief   Start the Timer Service
    500           *
    501           * @param   timerId      - ID of the timer
    502           *          timerPerTick - number of micro sec per tick, (ticks x prescale) / clock = usec/tick
    503           *
    504           * @return  Status - OK or Not OK
    505           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    506          uint8 HalTimerStart (uint8 timerId, uint32 timePerTick)
   \                     HalTimerStart:
    507          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 4,R2
   \   000007   8B..         MOV     ?V0 + 5,R3
   \   000009   8C..         MOV     ?V0 + 6,R4
   \   00000B   8D..         MOV     ?V0 + 7,R5
    508            uint8 hwtimerid;
    509          
    510            hwtimerid = halTimerRemap (timerId);
   \   00000D                ; Setup parameters for call to function halTimerRemap
   \   00000D   12....       LCALL   ??halTimerRemap?relay
   \   000010   E9           MOV     A,R1
   \   000011   F5..         MOV     ?V0 + 0,A
    511          
    512            if (halTimerRecord[hwtimerid].configured)
   \   000013   75F00A       MOV     B,#0xa
   \   000016   A4           MUL     AB
   \   000017   F8           MOV     R0,A
   \   000018   A9F0         MOV     R1,B
   \   00001A   74..         MOV     A,#halTimerRecord & 0xff
   \   00001C   28           ADD     A,R0
   \   00001D   F8           MOV     R0,A
   \   00001E   74..         MOV     A,#(halTimerRecord >> 8) & 0xff
   \   000020   39           ADDC    A,R1
   \   000021   F9           MOV     R1,A
   \   000022   E8           MOV     A,R0
   \   000023   FE           MOV     R6,A
   \   000024   E9           MOV     A,R1
   \   000025   FF           MOV     R7,A
   \   000026   8E82         MOV     DPL,R6
   \   000028   8F83         MOV     DPH,R7
   \   00002A   E0           MOVX    A,@DPTR
   \   00002B   606D         JZ      ??HalTimerStart_0
    513            {
    514              halTimerSetCount (hwtimerid, timePerTick);
   \   00002D                ; Setup parameters for call to function halTimerSetCount
   \   00002D   AA..         MOV     R2,?V0 + 4
   \   00002F   AB..         MOV     R3,?V0 + 5
   \   000031   AC..         MOV     R4,?V0 + 6
   \   000033   AD..         MOV     R5,?V0 + 7
   \   000035   A9..         MOV     R1,?V0 + 0
   \   000037   12....       LCALL   ??halTimerSetCount?relay
    515              halTimerSetPrescale (hwtimerid, halTimerRecord[hwtimerid].prescale);
   \   00003A                ; Setup parameters for call to function halTimerSetPrescale
   \   00003A   8E82         MOV     DPL,R6
   \   00003C   8F83         MOV     DPH,R7
   \   00003E   A3           INC     DPTR
   \   00003F   A3           INC     DPTR
   \   000040   A3           INC     DPTR
   \   000041   A3           INC     DPTR
   \   000042   A3           INC     DPTR
   \   000043   E0           MOVX    A,@DPTR
   \   000044   FA           MOV     R2,A
   \   000045   A9..         MOV     R1,?V0 + 0
   \   000047   12....       LCALL   ??halTimerSetPrescale?relay
    516              halTimerSetOpMode (hwtimerid, halTimerRecord[hwtimerid].opMode);
   \   00004A                ; Setup parameters for call to function halTimerSetOpMode
   \   00004A   8E82         MOV     DPL,R6
   \   00004C   8F83         MOV     DPH,R7
   \   00004E   A3           INC     DPTR
   \   00004F   A3           INC     DPTR
   \   000050   E0           MOVX    A,@DPTR
   \   000051   FA           MOV     R2,A
   \   000052   A9..         MOV     R1,?V0 + 0
   \   000054   12....       LCALL   ??halTimerSetOpMode?relay
    517              halTimerSetChannelMode (hwtimerid, halTimerRecord[hwtimerid].channelMode);
   \   000057   EE           MOV     A,R6
   \   000058   2404         ADD     A,#0x4
   \   00005A   F8           MOV     R0,A
   \   00005B   EF           MOV     A,R7
   \   00005C   3400         ADDC    A,#0x0
   \   00005E   F9           MOV     R1,A
   \   00005F   88..         MOV     ?V0 + 2,R0
   \   000061   89..         MOV     ?V0 + 3,R1
   \   000063                ; Setup parameters for call to function halTimerSetChannelMode
   \   000063   8882         MOV     DPL,R0
   \   000065   F583         MOV     DPH,A
   \   000067   E0           MOVX    A,@DPTR
   \   000068   FA           MOV     R2,A
   \   000069   A9..         MOV     R1,?V0 + 0
   \   00006B   12....       LCALL   ??halTimerSetChannelMode?relay
    518          
    519              if (hwtimerid == HW_TIMER_3)
   \   00006E   7401         MOV     A,#0x1
   \   000070   65..         XRL     A,?V0 + 0
   \   000072   7005         JNZ     ??HalTimerStart_1
    520              {
    521                T3CTL |= HAL_TIMER34_START;
   \   000074   43CB10       ORL     0xcb,#0x10
   \   000077   8009         SJMP    ??HalTimerStart_2
    522              }
    523              if (hwtimerid == HW_TIMER_4)
   \                     ??HalTimerStart_1:
   \   000079   7402         MOV     A,#0x2
   \   00007B   65..         XRL     A,?V0 + 0
   \   00007D   7003         JNZ     ??HalTimerStart_2
    524              {
    525                T4CTL |= HAL_TIMER34_START;
   \   00007F   43EB10       ORL     0xeb,#0x10
    526              }
    527              HalTimerInterruptEnable (hwtimerid, halTimerRecord[hwtimerid].channelMode,
    528                                       halTimerRecord[hwtimerid].intEnable);
   \                     ??HalTimerStart_2:
   \   000082                ; Setup parameters for call to function HalTimerInterruptEnable
   \   000082   8E82         MOV     DPL,R6
   \   000084   8F83         MOV     DPH,R7
   \   000086   A3           INC     DPTR
   \   000087   E0           MOVX    A,@DPTR
   \   000088   FB           MOV     R3,A
   \   000089   85..82       MOV     DPL,?V0 + 2
   \   00008C   85..83       MOV     DPH,?V0 + 3
   \   00008F   E0           MOVX    A,@DPTR
   \   000090   FA           MOV     R2,A
   \   000091   A9..         MOV     R1,?V0 + 0
   \   000093   12....       LCALL   ??HalTimerInterruptEnable?relay
    529            }
    530            else
    531            {
    532              return HAL_TIMER_NOT_CONFIGURED;
    533            }
    534            return HAL_TIMER_OK;
   \   000096   7900         MOV     R1,#0x0
   \   000098   8002         SJMP    ??HalTimerStart_3
   \                     ??HalTimerStart_0:
   \   00009A   7903         MOV     R1,#0x3
   \                     ??HalTimerStart_3:
   \   00009C                REQUIRE ?Subroutine1
   \   00009C                REQUIRE T3CTL
   \   00009C                REQUIRE T4CTL
   \   00009C                ; // Fall through to label ?Subroutine1
    535          }
    536          
    537          /***************************************************************************************************
    538           * @fn      HalTimerTick
    539           *
    540           * @brief   Check the counter for expired counter.
    541           *
    542           * @param   None
    543           *
    544           * @return  None
    545           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    546          void HalTimerTick (void)
   \                     HalTimerTick:
    547          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    548            if (!halTimerRecord[HW_TIMER_1].intEnable)
   \   000004   90....       MOV     DPTR,#halTimerRecord + 1
   \   000007   E0           MOVX    A,@DPTR
   \   000008   7003         JNZ     ??HalTimerTick_0
    549            {
    550              halProcessTimer1 ();
   \   00000A                ; Setup parameters for call to function halProcessTimer1
   \   00000A   12....       LCALL   ??halProcessTimer1?relay
    551            }
    552          
    553            if (!halTimerRecord[HW_TIMER_3].intEnable)
   \                     ??HalTimerTick_0:
   \   00000D   90....       MOV     DPTR,#halTimerRecord + 11
   \   000010   E0           MOVX    A,@DPTR
   \   000011   7003         JNZ     ??HalTimerTick_1
    554            {
    555              halProcessTimer3 ();
   \   000013                ; Setup parameters for call to function halProcessTimer3
   \   000013   12....       LCALL   ??halProcessTimer3?relay
    556            }
    557          
    558            if (!halTimerRecord[HW_TIMER_4].intEnable)
   \                     ??HalTimerTick_1:
   \   000016   90....       MOV     DPTR,#halTimerRecord + 21
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   7003         JNZ     ??HalTimerTick_2
    559            {
    560              halProcessTimer4 ();
   \   00001C                ; Setup parameters for call to function halProcessTimer4
   \   00001C   12....       LCALL   ??halProcessTimer4?relay
    561            }
    562          }
   \                     ??HalTimerTick_2:
   \   00001F   02....       LJMP    ?Subroutine2 & 0xFFFF
    563          
    564          /***************************************************************************************************
    565           * @fn      HalTimerStop
    566           *
    567           * @brief   Stop the Timer Service
    568           *
    569           * @param   timerId - ID of the timer
    570           *
    571           * @return  Status - OK or Not OK
    572           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    573          uint8 HalTimerStop (uint8 timerId)
   \                     HalTimerStop:
    574          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    575            uint8 hwtimerid;
    576          
    577            hwtimerid = halTimerRemap (timerId);
    578          
    579            switch (hwtimerid)
   \   000005                ; Setup parameters for call to function halTimerRemap
   \   000005   12....       LCALL   ??halTimerRemap?relay
   \   000008   E9           MOV     A,R1
   \   000009   6008         JZ      ??HalTimerStop_0
   \   00000B   14           DEC     A
   \   00000C   6011         JZ      ??HalTimerStop_1
   \   00000E   14           DEC     A
   \   00000F   6013         JZ      ??HalTimerStop_2
   \   000011   8016         SJMP    ??HalTimerStop_3
    580            {
    581              case HW_TIMER_1:
    582                halTimerSetOpMode(HW_TIMER_1, HAL_TIMER_MODE_STOP);
   \                     ??HalTimerStop_0:
   \   000013                ; Setup parameters for call to function halTimerSetOpMode
   \   000013   7A03         MOV     R2,#0x3
   \   000015   7900         MOV     R1,#0x0
   \   000017   12....       LCALL   ??halTimerSetOpMode?relay
    583                break;
    584              case HW_TIMER_3:
    585                T3CTL &= ~(HAL_TIMER34_START);
    586                break;
    587              case HW_TIMER_4:
    588                T4CTL &= ~(HAL_TIMER34_START);
    589                break;
    590              default:
    591                return HAL_TIMER_INVALID_ID;
    592            }
    593            return HAL_TIMER_OK;
   \                     ??HalTimerStop_4:
   \   00001A   7900         MOV     R1,#0x0
   \                     ??HalTimerStop_5:
   \   00001C   02....       LJMP    ?Subroutine0 & 0xFFFF
   \                     ??HalTimerStop_1:
   \   00001F   53CBEF       ANL     0xcb,#0xef
   \   000022   80F6         SJMP    ??HalTimerStop_4
   \                     ??HalTimerStop_2:
   \   000024   53EBEF       ANL     0xeb,#0xef
   \   000027   80F1         SJMP    ??HalTimerStop_4
   \                     ??HalTimerStop_3:
   \   000029   7904         MOV     R1,#0x4
   \   00002B   80EF         SJMP    ??HalTimerStop_5
   \   00002D                REQUIRE T3CTL
   \   00002D                REQUIRE T4CTL
    594          }
    595          
    596          /***************************************************************************************************
    597           * @fn      halTimerSetCount
    598           *
    599           * @brief   Stop the Timer Service
    600           *
    601           * @param   hwtimerid - ID of the timer
    602           *          timerPerTick - Number micro sec per ticks
    603           *
    604           * @return  Status - OK or Not OK
    605           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    606          uint8 halTimerSetCount (uint8 hwtimerid, uint32 timePerTick)
   \                     halTimerSetCount:
    607          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   8A..         MOV     ?V0 + 0,R2
   \   000008   8B..         MOV     ?V0 + 1,R3
   \   00000A   8C..         MOV     ?V0 + 2,R4
   \   00000C   8D..         MOV     ?V0 + 3,R5
    608            uint16  count;
    609            uint8   high, low;
    610          
    611            /* Load count = ((sec/tick) x clock) / prescale */
    612            count = (uint16)((timePerTick * halTimerRecord[hwtimerid].clock) / halTimerRecord[hwtimerid].prescaleVal);
   \   00000E   75F00A       MOV     B,#0xa
   \   000011   A4           MUL     AB
   \   000012   FA           MOV     R2,A
   \   000013   ABF0         MOV     R3,B
   \   000015   74..         MOV     A,#halTimerRecord & 0xff
   \   000017   2A           ADD     A,R2
   \   000018   F8           MOV     R0,A
   \   000019   74..         MOV     A,#(halTimerRecord >> 8) & 0xff
   \   00001B   3B           ADDC    A,R3
   \   00001C   F9           MOV     R1,A
   \   00001D   E8           MOV     A,R0
   \   00001E   FC           MOV     R4,A
   \   00001F   E9           MOV     A,R1
   \   000020   FD           MOV     R5,A
   \   000021   8C82         MOV     DPL,R4
   \   000023   8D83         MOV     DPH,R5
   \   000025   A3           INC     DPTR
   \   000026   A3           INC     DPTR
   \   000027   A3           INC     DPTR
   \   000028   A3           INC     DPTR
   \   000029   A3           INC     DPTR
   \   00002A   A3           INC     DPTR
   \   00002B   A3           INC     DPTR
   \   00002C   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   00002F   12....       LCALL   ?L_MUL
   \   000032   8C82         MOV     DPL,R4
   \   000034   8D83         MOV     DPH,R5
   \   000036   A3           INC     DPTR
   \   000037   A3           INC     DPTR
   \   000038   A3           INC     DPTR
   \   000039   A3           INC     DPTR
   \   00003A   A3           INC     DPTR
   \   00003B   A3           INC     DPTR
   \   00003C   E0           MOVX    A,@DPTR
   \   00003D   F5..         MOV     ?V0 + 4,A
   \   00003F   78..         MOV     R0,#?V0 + 0
   \   000041   79..         MOV     R1,#?V0 + 4
   \   000043   12....       LCALL   ?UL_DIV_MOD
    613            high = (uint8) (count >> 8);
    614            low = (uint8) count;
    615          
    616            *(halTimerChannel[hwtimerid].TxCCH) = high;
   \   000046   74..         MOV     A,#halTimerChannel & 0xff
   \   000048   2A           ADD     A,R2
   \   000049   F8           MOV     R0,A
   \   00004A   74..         MOV     A,#(halTimerChannel >> 8) & 0xff
   \   00004C   3B           ADDC    A,R3
   \   00004D   F9           MOV     R1,A
   \   00004E   8882         MOV     DPL,R0
   \   000050   8983         MOV     DPH,R1
   \   000052   A3           INC     DPTR
   \   000053   A3           INC     DPTR
   \   000054   E0           MOVX    A,@DPTR
   \   000055   FA           MOV     R2,A
   \   000056   A3           INC     DPTR
   \   000057   E0           MOVX    A,@DPTR
   \   000058   F583         MOV     DPH,A
   \   00005A   8A82         MOV     DPL,R2
   \   00005C   E5..         MOV     A,?V0 + 1
   \   00005E   F0           MOVX    @DPTR,A
    617            *(halTimerChannel[hwtimerid].TxCCL) = low;
   \   00005F   8882         MOV     DPL,R0
   \   000061   8983         MOV     DPH,R1
   \   000063   A3           INC     DPTR
   \   000064   A3           INC     DPTR
   \   000065   A3           INC     DPTR
   \   000066   A3           INC     DPTR
   \   000067   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   00006A   E5..         MOV     A,?V0 + 0
   \   00006C   F0           MOVX    @DPTR,A
    618          
    619            return HAL_TIMER_OK;
   \   00006D   7900         MOV     R1,#0x0
   \   00006F   02....       LJMP    ?Subroutine1 & 0xFFFF
    620          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F583         MOV     DPH,A
   \   000006   8882         MOV     DPL,R0
   \   000008   22           RET
    621          
    622          /***************************************************************************************************
    623           * @fn      halTimerSetPrescale
    624           *
    625           * @brief   Stop the Timer Service
    626           *
    627           * @param   hwtimerid - ID of the timer
    628           *          prescale - Prescale of the clock
    629           *
    630           * @return  Status - OK or Not OK
    631           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    632          uint8 halTimerSetPrescale (uint8 hwtimerid, uint8 prescale)
   \                     halTimerSetPrescale:
    633          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   E9           MOV     A,R1
    634            switch (hwtimerid)
   \   000001   6008         JZ      ??halTimerSetPrescale_0
   \   000003   14           DEC     A
   \   000004   6010         JZ      ??halTimerSetPrescale_1
   \   000006   14           DEC     A
   \   000007   6015         JZ      ??halTimerSetPrescale_2
   \   000009   801B         SJMP    ??halTimerSetPrescale_3
    635            {
    636              case HW_TIMER_1:
    637                T1CTL &= ~(HAL_TIMER1_16_TC_BITS);
   \                     ??halTimerSetPrescale_0:
   \   00000B   53E4F3       ANL     0xe4,#0xf3
    638                T1CTL |= prescale;
   \   00000E   EA           MOV     A,R2
   \   00000F   42E4         ORL     0xe4,A
    639                break;
    640              case HW_TIMER_3:
    641                T3CTL &= ~(HAL_TIMER34_8_TC_BITS);
    642                T3CTL |= prescale;
    643                break;
    644              case HW_TIMER_4:
    645                T4CTL &= ~(HAL_TIMER34_8_TC_BITS);
    646                T4CTL |= prescale;
    647                break;
    648              default:
    649                return HAL_TIMER_INVALID_ID;
    650            }
    651            return HAL_TIMER_OK;
   \                     ??halTimerSetPrescale_4:
   \   000011   7900         MOV     R1,#0x0
   \                     ??halTimerSetPrescale_5:
   \   000013   02....       LJMP    ?BRET
   \                     ??halTimerSetPrescale_1:
   \   000016   53CB1F       ANL     0xcb,#0x1f
   \   000019   EA           MOV     A,R2
   \   00001A   42CB         ORL     0xcb,A
   \   00001C   80F3         SJMP    ??halTimerSetPrescale_4
   \                     ??halTimerSetPrescale_2:
   \   00001E   53EB1F       ANL     0xeb,#0x1f
   \   000021   EA           MOV     A,R2
   \   000022   42EB         ORL     0xeb,A
   \   000024   80EB         SJMP    ??halTimerSetPrescale_4
   \                     ??halTimerSetPrescale_3:
   \   000026   7904         MOV     R1,#0x4
   \   000028   80E9         SJMP    ??halTimerSetPrescale_5
   \   00002A                REQUIRE T1CTL
   \   00002A                REQUIRE T3CTL
   \   00002A                REQUIRE T4CTL
    652          }
    653          
    654          /***************************************************************************************************
    655           * @fn      halTimerSetOpMode
    656           *
    657           * @brief   Setup operate modes
    658           *
    659           * @param   hwtimerid - ID of the timer
    660           *          opMode - operation mode of the timer
    661           *
    662           * @return  Status - OK or Not OK
    663           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    664          uint8 halTimerSetOpMode (uint8 hwtimerid, uint8 opMode)
   \                     halTimerSetOpMode:
    665          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   E9           MOV     A,R1
   \   000001   F8           MOV     R0,A
    666            /* Load Waveform Generation Mode */
    667            switch (opMode)
   \   000002   EA           MOV     A,R2
   \   000003   14           DEC     A
   \   000004   6008         JZ      ??halTimerSetOpMode_0
   \   000006   14           DEC     A
   \   000007   602B         JZ      ??halTimerSetOpMode_1
   \   000009   14           DEC     A
   \   00000A   604F         JZ      ??halTimerSetOpMode_2
   \   00000C   8058         SJMP    ??halTimerSetOpMode_3
    668            {
    669              case HAL_TIMER_MODE_NORMAL:
    670                switch (hwtimerid)
   \                     ??halTimerSetOpMode_0:
   \   00000E   E8           MOV     A,R0
   \   00000F   6008         JZ      ??halTimerSetOpMode_4
   \   000011   14           DEC     A
   \   000012   6010         JZ      ??halTimerSetOpMode_5
   \   000014   14           DEC     A
   \   000015   6015         JZ      ??halTimerSetOpMode_6
   \   000017   803E         SJMP    ??halTimerSetOpMode_7
    671                {
    672                  case HW_TIMER_1:
    673                    T1CTL &= ~(HAL_TIMER1_OPMODE_BITS);
   \                     ??halTimerSetOpMode_4:
   \   000019   53E4FC       ANL     0xe4,#0xfc
    674                    T1CTL |= HAL_TIMER1_OPMODE_FREERUN;
   \   00001C   43E401       ORL     0xe4,#0x1
    675                    break;
    676                  case HW_TIMER_3:
    677                    T3CTL &= ~(HAL_TIMER34_OPMODE_BITS);
    678                    T3CTL |= HAL_TIMER34_OPMODE_FREERUN;
    679                    break;
    680                  case HW_TIMER_4:
    681                    T4CTL &= ~(HAL_TIMER34_OPMODE_BITS);
    682                    T4CTL |= HAL_TIMER34_OPMODE_FREERUN;
    683                    break;
    684                  default:
    685                    return HAL_TIMER_INVALID_ID;
    686                }
    687                break;
    688          
    689              case HAL_TIMER_MODE_CTC:
    690                switch (hwtimerid)
    691                {
    692                  case HW_TIMER_1:
    693                    T1CTL &= ~(HAL_TIMER1_OPMODE_BITS);
    694                    T1CTL |= HAL_TIMER1_OPMODE_MODULO;
    695                    break;
    696                  case HW_TIMER_3:
    697                    T3CTL &= ~(HAL_TIMER34_OPMODE_BITS);
    698                    T3CTL |= HAL_TIMER34_OPMODE_MODULO;
    699                    break;
    700                  case HW_TIMER_4:
    701                    T4CTL &= ~(HAL_TIMER34_OPMODE_BITS);
    702                    T4CTL |= HAL_TIMER34_OPMODE_MODULO;
    703                    break;
    704                  default:
    705                    return HAL_TIMER_INVALID_ID;
    706                }
    707                break;
    708          
    709              case HAL_TIMER_MODE_STOP:
    710                if (hwtimerid == HW_TIMER_1)
    711                {
    712                  T1CTL &= ~(HAL_TIMER1_OPMODE_BITS);
    713                  T1CTL |= HAL_TIMER1_OPMODE_STOP;
    714                }
    715                break;
    716          
    717              default:
    718                return HAL_TIMER_INVALID_OP_MODE;
    719            }
    720            return HAL_TIMER_OK;
   \                     ??halTimerSetOpMode_8:
   \   00001F   7900         MOV     R1,#0x0
   \                     ??halTimerSetOpMode_9:
   \   000021   02....       LJMP    ?BRET
   \                     ??halTimerSetOpMode_5:
   \   000024   53CBFC       ANL     0xcb,#0xfc
   \   000027   85CBCB       MOV     0xcb,0xcb
   \   00002A   80F3         SJMP    ??halTimerSetOpMode_8
   \                     ??halTimerSetOpMode_6:
   \   00002C   53EBFC       ANL     0xeb,#0xfc
   \   00002F   85EBEB       MOV     0xeb,0xeb
   \   000032   80EB         SJMP    ??halTimerSetOpMode_8
   \                     ??halTimerSetOpMode_1:
   \   000034   E8           MOV     A,R0
   \   000035   6008         JZ      ??halTimerSetOpMode_10
   \   000037   14           DEC     A
   \   000038   600D         JZ      ??halTimerSetOpMode_11
   \   00003A   14           DEC     A
   \   00003B   6012         JZ      ??halTimerSetOpMode_12
   \   00003D   8018         SJMP    ??halTimerSetOpMode_7
   \                     ??halTimerSetOpMode_10:
   \   00003F   53E4FC       ANL     0xe4,#0xfc
   \   000042   43E402       ORL     0xe4,#0x2
   \   000045   80D8         SJMP    ??halTimerSetOpMode_8
   \                     ??halTimerSetOpMode_11:
   \   000047   53CBFC       ANL     0xcb,#0xfc
   \   00004A   43CB02       ORL     0xcb,#0x2
   \   00004D   80D0         SJMP    ??halTimerSetOpMode_8
   \                     ??halTimerSetOpMode_12:
   \   00004F   53EBFC       ANL     0xeb,#0xfc
   \   000052   43EB02       ORL     0xeb,#0x2
   \   000055   80C8         SJMP    ??halTimerSetOpMode_8
   \                     ??halTimerSetOpMode_7:
   \   000057   7904         MOV     R1,#0x4
   \   000059   80C6         SJMP    ??halTimerSetOpMode_9
   \                     ??halTimerSetOpMode_2:
   \   00005B   E8           MOV     A,R0
   \   00005C   70C1         JNZ     ??halTimerSetOpMode_8
   \   00005E   53E4FC       ANL     0xe4,#0xfc
   \   000061   85E4E4       MOV     0xe4,0xe4
   \   000064   80B9         SJMP    ??halTimerSetOpMode_8
   \                     ??halTimerSetOpMode_3:
   \   000066   7906         MOV     R1,#0x6
   \   000068   80B7         SJMP    ??halTimerSetOpMode_9
   \   00006A                REQUIRE T1CTL
   \   00006A                REQUIRE T3CTL
   \   00006A                REQUIRE T4CTL
    721          }
    722          
    723          /***************************************************************************************************
    724           * @fn      halTimerSetChannelMode
    725           *
    726           * @brief   Setup channel modes.  Currently, only output compare mode is supported.  Input capture
    727           *          mode is NOT supported.  Additionally, mapping timer channel inputs/outputs to I/O pins
    728           *          is NOT supported.
    729           *
    730           * @param   hwtimerid - ID of the timer
    731           *          channelMode - channel mode of the timer
    732           *
    733           * @return  Status - OK or Not OK
    734           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    735          uint8 halTimerSetChannelMode (uint8 hwtimerid, uint8 channelMode)
   \                     halTimerSetChannelMode:
    736          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   \   000004   E9           MOV     A,R1
   \   000005   FC           MOV     R4,A
    737            switch (channelMode)
   \   000006   EA           MOV     A,R2
   \   000007   14           DEC     A
   \   000008   6029         JZ      ??halTimerSetChannelMode_0
   \   00000A   14           DEC     A
   \   00000B   702B         JNZ     ??halTimerSetChannelMode_1
    738            {
    739              case HAL_TIMER_CH_MODE_OUTPUT_COMPARE:
    740                *(halTimerChannel[hwtimerid].TxCCTL) &= ~(T134CCTL_CMP_BITS);
   \   00000D   EC           MOV     A,R4
   \   00000E   75F00A       MOV     B,#0xa
   \   000011   A4           MUL     AB
   \   000012   F8           MOV     R0,A
   \   000013   A9F0         MOV     R1,B
   \   000015   74..         MOV     A,#halTimerChannel & 0xff
   \   000017   28           ADD     A,R0
   \   000018   F8           MOV     R0,A
   \   000019   74..         MOV     A,#(halTimerChannel >> 8) & 0xff
   \   00001B   39           ADDC    A,R1
   \   00001C   F9           MOV     R1,A
   \   00001D   8882         MOV     DPL,R0
   \   00001F   8983         MOV     DPH,R1
   \   000021   E0           MOVX    A,@DPTR
   \   000022   FB           MOV     R3,A
   \   000023   A3           INC     DPTR
   \   000024   E0           MOVX    A,@DPTR
   \   000025   F583         MOV     DPH,A
   \   000027   8B82         MOV     DPL,R3
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   54C7         ANL     A,#0xc7
   \   00002C   F0           MOVX    @DPTR,A
    741                *(halTimerChannel[hwtimerid].TxCCTL) |= (T134CCTL_CMP_OC | T134CCTL_MODE);
   \   00002D   12....       LCALL   ??Subroutine22_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   000030   441C         ORL     A,#0x1c
   \   000032   F0           MOVX    @DPTR,A
    742                break;
    743          
    744              case HAL_TIMER_CH_MODE_INPUT_CAPTURE:       /* Not Supported */
    745          /*
    746                *(halTimerChannel[hwtimerid].TxCCTL) &= ~(T134CCTL_CAP_BITS | T134CCTL_MODE);
    747                *(halTimerChannel[hwtimerid].TxCCTL) |= T134CCTL_CAP_RE;
    748          */
    749                break;
    750          
    751              default:
    752                return HAL_TIMER_INVALID_CH_MODE;
    753            }
    754            return HAL_TIMER_OK;
   \                     ??halTimerSetChannelMode_0:
   \   000033   7900         MOV     R1,#0x0
   \                     ??halTimerSetChannelMode_2:
   \   000035   02....       LJMP    ?Subroutine2 & 0xFFFF
   \                     ??halTimerSetChannelMode_1:
   \   000038   7905         MOV     R1,#0x5
   \   00003A   80F9         SJMP    ??halTimerSetChannelMode_2
    755          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine22_0:
   \   000000   8882         MOV     DPL,R0
   \   000002   8983         MOV     DPH,R1
   \   000004   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   000007   E0           MOVX    A,@DPTR
   \   000008   22           RET
    756          
    757          /***************************************************************************************************
    758           * @fn      HalTimerInterruptEnable
    759           *
    760           * @brief   Setup operate modes
    761           *
    762           * @param   hwtimerid - ID of the timer
    763           *          channelMode - channel mode
    764           *          enable - TRUE or FALSE
    765           *
    766           * @return  Status - OK or Not OK
    767           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    768          uint8 HalTimerInterruptEnable (uint8 hwtimerid, uint8 channelMode, bool enable)
   \                     HalTimerInterruptEnable:
    769          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    770            switch (channelMode)
   \   000009   E9           MOV     A,R1
   \   00000A   75F00A       MOV     B,#0xa
   \   00000D   A4           MUL     AB
   \   00000E   FC           MOV     R4,A
   \   00000F   ADF0         MOV     R5,B
   \   000011   74..         MOV     A,#halTimerChannel & 0xff
   \   000013   2C           ADD     A,R4
   \   000014   FA           MOV     R2,A
   \   000015   74..         MOV     A,#(halTimerChannel >> 8) & 0xff
   \   000017   3D           ADDC    A,R5
   \   000018   FB           MOV     R3,A
   \   000019   EE           MOV     A,R6
   \   00001A   14           DEC     A
   \   00001B   6047         JZ      ??HalTimerInterruptEnable_0
   \   00001D   14           DEC     A
   \   00001E   6044         JZ      ??HalTimerInterruptEnable_0
   \   000020   24FE         ADD     A,#-0x2
   \   000022   7054         JNZ     ??HalTimerInterruptEnable_1
    771            {
    772              case HAL_TIMER_CH_MODE_OVERFLOW:
    773          
    774                if (enable)
   \   000024   EA           MOV     A,R2
   \   000025   2408         ADD     A,#0x8
   \   000027   F582         MOV     DPL,A
   \   000029   EB           MOV     A,R3
   \   00002A   3400         ADDC    A,#0x0
   \   00002C   F583         MOV     DPH,A
   \   00002E   EA           MOV     A,R2
   \   00002F   2406         ADD     A,#0x6
   \   000031   F8           MOV     R0,A
   \   000032   EB           MOV     A,R3
   \   000033   3400         ADDC    A,#0x0
   \   000035   F9           MOV     R1,A
   \   000036   EF           MOV     A,R7
   \   000037   6022         JZ      ??HalTimerInterruptEnable_2
    775                {
    776                  *(halTimerChannel[hwtimerid].TxOVF) |= halTimerChannel[hwtimerid].ovfbit;
   \   000039   E0           MOVX    A,@DPTR
   \   00003A   12....       LCALL   ?Subroutine10 & 0xFFFF
    777                }
   \                     ??CrossCallReturnLabel_43:
   \   00003D   45..         ORL     A,?V0 + 1
   \                     ??HalTimerInterruptEnable_3:
   \   00003F   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   000042   A3           INC     DPTR
   \   000043   A3           INC     DPTR
   \   000044   A3           INC     DPTR
   \   000045   A3           INC     DPTR
   \   000046   A3           INC     DPTR
   \   000047   E0           MOVX    A,@DPTR
   \   000048   F8           MOV     R0,A
   \   000049   74..         MOV     A,#(halTimerRecord + 1) & 0xff
   \   00004B   2C           ADD     A,R4
   \   00004C   F582         MOV     DPL,A
   \   00004E   74..         MOV     A,#((halTimerRecord + 1) >> 8) & 0xff
   \   000050   3D           ADDC    A,R5
   \   000051   F583         MOV     DPH,A
   \   000053   E0           MOVX    A,@DPTR
   \   000054   6026         JZ      ??HalTimerInterruptEnable_4
    778                else
    779                {
    780                  *(halTimerChannel[hwtimerid].TxOVF) &= ((halTimerChannel[hwtimerid].ovfbit) ^ 0xFF);
    781                }
    782                break;
    783          
    784              case HAL_TIMER_CH_MODE_OUTPUT_COMPARE:
    785              case HAL_TIMER_CH_MODE_INPUT_CAPTURE:
    786          
    787                if (enable)
    788                {
    789                  *(halTimerChannel[hwtimerid].TxCCTL) |= T134CCTL_IM;
    790                }
    791                else
    792                {
    793                  *(halTimerChannel[hwtimerid].TxCCTL) &= ~(T134CCTL_IM);
    794                }
    795                break;
    796          
    797              default:
    798                return HAL_TIMER_INVALID_CH_MODE;
    799            }
    800          
    801            if (halTimerRecord[hwtimerid].intEnable)
    802            {
    803              IEN1 |= halTimerChannel[hwtimerid].intbit;
   \   000056   E8           MOV     A,R0
   \   000057   42B8         ORL     0xb8,A
   \   000059   8026         SJMP    ??HalTimerInterruptEnable_5
    804            }
   \                     ??HalTimerInterruptEnable_2:
   \   00005B   E0           MOVX    A,@DPTR
   \   00005C   F4           CPL     A
   \   00005D   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   000060   55..         ANL     A,?V0 + 1
   \   000062   80DB         SJMP    ??HalTimerInterruptEnable_3
   \                     ??HalTimerInterruptEnable_0:
   \   000064   8A82         MOV     DPL,R2
   \   000066   8B83         MOV     DPH,R3
   \   000068   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   00006B   EF           MOV     A,R7
   \   00006C   6005         JZ      ??HalTimerInterruptEnable_6
   \   00006E   E0           MOVX    A,@DPTR
   \   00006F   D2E6         SETB    0xE0 /* A   */.6
   \   000071   80CC         SJMP    ??HalTimerInterruptEnable_3
   \                     ??HalTimerInterruptEnable_6:
   \   000073   E0           MOVX    A,@DPTR
   \   000074   C2E6         CLR     0xE0 /* A   */.6
   \   000076   80C7         SJMP    ??HalTimerInterruptEnable_3
   \                     ??HalTimerInterruptEnable_1:
   \   000078   7905         MOV     R1,#0x5
   \   00007A   8007         SJMP    ??HalTimerInterruptEnable_7
    805            else
    806            {
    807              IEN1 &= ((halTimerChannel[hwtimerid].intbit) ^ 0xFF);
   \                     ??HalTimerInterruptEnable_4:
   \   00007C   74FF         MOV     A,#-0x1
   \   00007E   68           XRL     A,R0
   \   00007F   52B8         ANL     0xb8,A
    808            }
    809            return HAL_TIMER_OK;
   \                     ??HalTimerInterruptEnable_5:
   \   000081   7900         MOV     R1,#0x0
   \                     ??HalTimerInterruptEnable_7:
   \   000083   7F03         MOV     R7,#0x3
   \   000085   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000088                REQUIRE _A_IEN1
    810          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   F5..         MOV     ?V0 + 1,A
   \   000002                REQUIRE ??Subroutine22_0
   \   000002                ; // Fall through to label ??Subroutine22_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   8882         MOV     DPL,R0
   \   000007   8983         MOV     DPH,R1
   \   000009   22           RET
    811          
    812          /***************************************************************************************************
    813           * @fn      halTimerSendCallBack
    814           *
    815           * @brief   Send Callback back to the caller
    816           *
    817           * @param   timerId - ID of the timer
    818           *          channel - channel where the interrupt occurs
    819           *          channelMode - channel mode
    820           *
    821           *
    822           * @return  None
    823           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    824          void halTimerSendCallBack (uint8 timerId, uint8 channel, uint8 channelMode)
   \                     halTimerSendCallBack:
    825          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
   \   000007   8A..         MOV     ?V0 + 0,R2
   \   000009   EB           MOV     A,R3
   \   00000A   FF           MOV     R7,A
    826            uint8 hwtimerid;
    827          
    828            hwtimerid = halTimerRemap (timerId);
   \   00000B                ; Setup parameters for call to function halTimerRemap
   \   00000B   12....       LCALL   ??halTimerRemap?relay
   \   00000E   E9           MOV     A,R1
   \   00000F   75F00A       MOV     B,#0xa
   \   000012   A4           MUL     AB
   \   000013   F8           MOV     R0,A
   \   000014   A9F0         MOV     R1,B
   \   000016   74..         MOV     A,#(halTimerRecord + 8) & 0xff
   \   000018   28           ADD     A,R0
   \   000019   F582         MOV     DPL,A
   \   00001B   74..         MOV     A,#((halTimerRecord + 8) >> 8) & 0xff
   \   00001D   39           ADDC    A,R1
   \   00001E   F583         MOV     DPH,A
   \   000020   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   000023   E582         MOV     A,DPL
   \   000025   4583         ORL     A,DPH
   \   000027   6009         JZ      ??halTimerSendCallBack_0
    829          
    830            if (halTimerRecord[hwtimerid].callBackFunc)
    831              (halTimerRecord[hwtimerid].callBackFunc) (timerId, channel, channelMode);
   \   000029                ; Setup parameters for indirect call
   \   000029   EF           MOV     A,R7
   \   00002A   FB           MOV     R3,A
   \   00002B   AA..         MOV     R2,?V0 + 0
   \   00002D   EE           MOV     A,R6
   \   00002E   F9           MOV     R1,A
   \   00002F   12....       LCALL   ?CALL_IND
    832          }
   \                     ??halTimerSendCallBack_0:
   \   000032   02....       LJMP    ?Subroutine0 & 0xFFFF
    833          
    834          /***************************************************************************************************
    835           * @fn      halTimerRemap
    836           *
    837           * @brief   Maps API HAL_TIMER_ID to HW Timer ID.
    838           *          HAL_TIMER_0 --> HW Timer 3 8bit
    839           *          HAL_TIMER_2 --> HW Timer 4 8bit
    840           *          HAL_TIMER_3 --> HW Timer 1 16bit
    841           *
    842           * @param   timerId - ID of the timer
    843           *
    844           * @return  HW timer ID
    845           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    846          uint8 halTimerRemap (uint8 timerId)
   \                     halTimerRemap:
    847          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   E9           MOV     A,R1
    848            switch (timerId)
   \   000001   6009         JZ      ??halTimerRemap_0
   \   000003   24FE         ADD     A,#-0x2
   \   000005   6009         JZ      ??halTimerRemap_1
   \   000007   14           DEC     A
   \   000008   600A         JZ      ??halTimerRemap_2
   \   00000A   800C         SJMP    ??halTimerRemap_3
    849            {
    850              case HAL_TIMER_0:
    851                return HW_TIMER_3;
   \                     ??halTimerRemap_0:
   \   00000C   7901         MOV     R1,#0x1
   \   00000E   800A         SJMP    ??halTimerRemap_4
    852              case HAL_TIMER_2:
    853                return HW_TIMER_4;
   \                     ??halTimerRemap_1:
   \   000010   7902         MOV     R1,#0x2
   \   000012   8006         SJMP    ??halTimerRemap_4
    854              case HAL_TIMER_3:
    855                return HW_TIMER_1;
   \                     ??halTimerRemap_2:
   \   000014   7900         MOV     R1,#0x0
   \   000016   8002         SJMP    ??halTimerRemap_4
    856              default:
    857                return HW_TIMER_INVALID;
   \                     ??halTimerRemap_3:
   \   000018   7903         MOV     R1,#0x3
   \                     ??halTimerRemap_4:
   \   00001A   02....       LJMP    ?BRET
    858            }
    859          }
    860          
    861          /***************************************************************************************************
    862           * @fn      halProcessTimer1
    863           *
    864           * @brief   Processes Timer 1 Events.
    865           *
    866           * @param
    867           *
    868           * @return
    869           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    870          void halProcessTimer1 (void)
   \                     halProcessTimer1:
    871          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    872            if (halTimerRecord[halTimerRemap(HAL_TIMER_3)].channelMode == HAL_TIMER_CH_MODE_OUTPUT_COMPARE)
   \   000004                ; Setup parameters for call to function halTimerRemap
   \   000004   7903         MOV     R1,#0x3
   \   000006   12....       LCALL   ??halTimerRemap?relay
   \   000009   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   00000C   7033         JNZ     ??halProcessTimer1_0
    873            {
    874              if (T1STAT & T1STAT_CH0IF)
   \   00000E   E5AF         MOV     A,0xaf
   \   000010   A2E0         MOV     C,0xE0 /* A   */.0
   \   000012   500C         JNC     ??halProcessTimer1_1
    875              {
    876                T1STAT &= ~(T1STAT_CH0IF);
   \   000014   53AFFE       ANL     0xaf,#0xfe
    877                halTimerSendCallBack (HAL_TIMER_3, HAL_TIMER_CHANNEL_A, HAL_TIMER_CH_MODE_OUTPUT_COMPARE);
   \   000017                ; Setup parameters for call to function halTimerSendCallBack
   \   000017   7B02         MOV     R3,#0x2
   \   000019   7A02         MOV     R2,#0x2
   \   00001B   7903         MOV     R1,#0x3
   \   00001D   12....       LCALL   ??halTimerSendCallBack?relay
    878              }
    879              if (T1STAT & T1STAT_CH1IF)
   \                     ??halProcessTimer1_1:
   \   000020   E5AF         MOV     A,0xaf
   \   000022   A2E1         MOV     C,0xE0 /* A   */.1
   \   000024   500C         JNC     ??halProcessTimer1_2
    880              {
    881                T1STAT &= ~(T1STAT_CH1IF);
   \   000026   53AFFD       ANL     0xaf,#0xfd
    882                halTimerSendCallBack (HAL_TIMER_3, HAL_TIMER_CHANNEL_B, HAL_TIMER_CH_MODE_OUTPUT_COMPARE);
   \   000029                ; Setup parameters for call to function halTimerSendCallBack
   \   000029   7B02         MOV     R3,#0x2
   \   00002B   7A04         MOV     R2,#0x4
   \   00002D   7903         MOV     R1,#0x3
   \   00002F   12....       LCALL   ??halTimerSendCallBack?relay
    883              }
    884              if (T1STAT & T1STAT_CH2IF)
   \                     ??halProcessTimer1_2:
   \   000032   E5AF         MOV     A,0xaf
   \   000034   A2E2         MOV     C,0xE0 /* A   */.2
   \   000036   5025         JNC     ??halProcessTimer1_3
    885              {
    886                T1STAT &= ~(T1STAT_CH2IF);
   \   000038   53AFFB       ANL     0xaf,#0xfb
    887                halTimerSendCallBack (HAL_TIMER_3, HAL_TIMER_CHANNEL_C, HAL_TIMER_CH_MODE_OUTPUT_COMPARE);
   \   00003B                ; Setup parameters for call to function halTimerSendCallBack
   \   00003B   7B02         MOV     R3,#0x2
   \   00003D   7A08         MOV     R2,#0x8
   \   00003F   8017         SJMP    ??halProcessTimer1_4
    888              }
    889            }
    890            else if (halTimerRecord[halTimerRemap(HAL_TIMER_3)].channelMode == HAL_TIMER_CH_MODE_OVERFLOW)
   \                     ??halProcessTimer1_0:
   \   000041                ; Setup parameters for call to function halTimerRemap
   \   000041   7903         MOV     R1,#0x3
   \   000043   12....       LCALL   ??halTimerRemap?relay
   \   000046   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   000049   7012         JNZ     ??halProcessTimer1_3
    891            {
    892              if (T1STAT & T1STAT_OVFIF)
   \   00004B   E5AF         MOV     A,0xaf
   \   00004D   A2E5         MOV     C,0xE0 /* A   */.5
   \   00004F   500C         JNC     ??halProcessTimer1_3
    893              {
    894                T1STAT &= ~(T1STAT_OVFIF);
   \   000051   53AFDF       ANL     0xaf,#0xdf
    895                halTimerSendCallBack (HAL_TIMER_3, HAL_TIMER_CHANNEL_SINGLE, HAL_TIMER_CH_MODE_OVERFLOW);
   \   000054                ; Setup parameters for call to function halTimerSendCallBack
   \   000054   7B04         MOV     R3,#0x4
   \   000056   7A01         MOV     R2,#0x1
   \                     ??halProcessTimer1_4:
   \   000058   7903         MOV     R1,#0x3
   \   00005A   12....       LCALL   ??halTimerSendCallBack?relay
    896              }
    897            }
    898          }
   \                     ??halProcessTimer1_3:
   \   00005D                REQUIRE ?Subroutine2
   \   00005D                REQUIRE T1STAT
   \   00005D                ; // Fall through to label ?Subroutine2

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   000003   6404         XRL     A,#0x4
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   000003   6402         XRL     A,#0x2
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   E9           MOV     A,R1
   \   000001   75F00A       MOV     B,#0xa
   \   000004   A4           MUL     AB
   \   000005   F8           MOV     R0,A
   \   000006   A9F0         MOV     R1,B
   \   000008   74..         MOV     A,#(halTimerRecord + 4) & 0xff
   \   00000A   28           ADD     A,R0
   \   00000B   F582         MOV     DPL,A
   \   00000D   74..         MOV     A,#((halTimerRecord + 4) >> 8) & 0xff
   \   00000F   39           ADDC    A,R1
   \   000010   F583         MOV     DPH,A
   \   000012   E0           MOVX    A,@DPTR
   \   000013   22           RET
    899          
    900          /***************************************************************************************************
    901           * @fn      halProcessTimer3
    902           *
    903           * @brief   Processes Timer 3 Events.
    904           *
    905           * @param
    906           *
    907           * @return
    908           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    909          void halProcessTimer3 (void)
   \                     halProcessTimer3:
    910          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    911            if (halTimerRecord[halTimerRemap(HAL_TIMER_0)].channelMode == HAL_TIMER_CH_MODE_OUTPUT_COMPARE)
   \   000004                ; Setup parameters for call to function halTimerRemap
   \   000004   7900         MOV     R1,#0x0
   \   000006   12....       LCALL   ??halTimerRemap?relay
   \   000009   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   00000C   701B         JNZ     ??halProcessTimer3_0
    912            {
    913              if (TIMIF & TIMIF_T3CH0IF)
   \   00000E   A2D9         MOV     C,0xd8.1
   \   000010   500B         JNC     ??halProcessTimer3_1
    914              {
    915                TIMIF &= ~(TIMIF_T3CH0IF);
   \   000012   C2D9         CLR     0xd8.1
    916                halTimerSendCallBack (HAL_TIMER_0, HAL_TIMER_CHANNEL_A, HAL_TIMER_CH_MODE_OUTPUT_COMPARE);
   \   000014                ; Setup parameters for call to function halTimerSendCallBack
   \   000014   7B02         MOV     R3,#0x2
   \   000016   7A02         MOV     R2,#0x2
   \   000018   7900         MOV     R1,#0x0
   \   00001A   12....       LCALL   ??halTimerSendCallBack?relay
    917              }
    918              if (TIMIF & TIMIF_T3CH1IF)
   \                     ??halProcessTimer3_1:
   \   00001D   A2DA         MOV     C,0xd8.2
   \   00001F   5021         JNC     ??halProcessTimer3_2
    919              {
    920                TIMIF &= ~(TIMIF_T3CH1IF);
   \   000021   C2DA         CLR     0xd8.2
    921                halTimerSendCallBack (HAL_TIMER_0, HAL_TIMER_CHANNEL_B, HAL_TIMER_CH_MODE_OUTPUT_COMPARE);
   \   000023                ; Setup parameters for call to function halTimerSendCallBack
   \   000023   7B02         MOV     R3,#0x2
   \   000025   7A04         MOV     R2,#0x4
   \   000027   8014         SJMP    ??halProcessTimer3_3
    922              }
    923            }
    924            else if (halTimerRecord[halTimerRemap(HAL_TIMER_0)].channelMode == HAL_TIMER_CH_MODE_OVERFLOW)
   \                     ??halProcessTimer3_0:
   \   000029                ; Setup parameters for call to function halTimerRemap
   \   000029   7900         MOV     R1,#0x0
   \   00002B   12....       LCALL   ??halTimerRemap?relay
   \   00002E   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_21:
   \   000031   700F         JNZ     ??halProcessTimer3_2
    925            {
    926              if (TIMIF & TIMIF_T3OVFIF)
   \   000033   A2D8         MOV     C,0xd8.0
   \   000035   500B         JNC     ??halProcessTimer3_2
    927              {
    928                TIMIF &= ~(TIMIF_T3OVFIF);
   \   000037   C2D8         CLR     0xd8.0
    929                halTimerSendCallBack (HAL_TIMER_0, HAL_TIMER_CHANNEL_SINGLE, HAL_TIMER_CH_MODE_OVERFLOW);
   \   000039                ; Setup parameters for call to function halTimerSendCallBack
   \   000039   7B04         MOV     R3,#0x4
   \   00003B   7A01         MOV     R2,#0x1
   \                     ??halProcessTimer3_3:
   \   00003D   7900         MOV     R1,#0x0
   \   00003F   12....       LCALL   ??halTimerSendCallBack?relay
    930              }
    931            }
    932          }
   \                     ??halProcessTimer3_2:
   \   000042   80..         SJMP    ?Subroutine2
   \   000044                REQUIRE _A_TIMIF
    933          
    934          /***************************************************************************************************
    935           * @fn      halProcessTimer4
    936           *
    937           * @brief   Processes Timer 4 Events.
    938           *
    939           * @param
    940           *
    941           * @return
    942           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    943          void halProcessTimer4 (void)
   \                     halProcessTimer4:
    944          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    945            if (halTimerRecord[halTimerRemap(HAL_TIMER_2)].channelMode == HAL_TIMER_CH_MODE_OUTPUT_COMPARE)
   \   000004                ; Setup parameters for call to function halTimerRemap
   \   000004   7902         MOV     R1,#0x2
   \   000006   12....       LCALL   ??halTimerRemap?relay
   \   000009   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   00000C   701B         JNZ     ??halProcessTimer4_0
    946            {
    947              if (TIMIF & TIMIF_T4CH0IF)
   \   00000E   A2DC         MOV     C,0xd8.4
   \   000010   500B         JNC     ??halProcessTimer4_1
    948              {
    949                TIMIF &= ~(TIMIF_T4CH0IF);
   \   000012   C2DC         CLR     0xd8.4
    950                halTimerSendCallBack (HAL_TIMER_2, HAL_TIMER_CHANNEL_A, HAL_TIMER_CH_MODE_OUTPUT_COMPARE);
   \   000014                ; Setup parameters for call to function halTimerSendCallBack
   \   000014   7B02         MOV     R3,#0x2
   \   000016   7A02         MOV     R2,#0x2
   \   000018   7902         MOV     R1,#0x2
   \   00001A   12....       LCALL   ??halTimerSendCallBack?relay
    951              }
    952              if (TIMIF & TIMIF_T4CH1IF)
   \                     ??halProcessTimer4_1:
   \   00001D   A2DD         MOV     C,0xd8.5
   \   00001F   5021         JNC     ??halProcessTimer4_2
    953              {
    954                TIMIF &= ~(TIMIF_T4CH1IF);
   \   000021   C2DD         CLR     0xd8.5
    955                halTimerSendCallBack (HAL_TIMER_2, HAL_TIMER_CHANNEL_B, HAL_TIMER_CH_MODE_OUTPUT_COMPARE);
   \   000023                ; Setup parameters for call to function halTimerSendCallBack
   \   000023   7B02         MOV     R3,#0x2
   \   000025   7A04         MOV     R2,#0x4
   \   000027   8014         SJMP    ??halProcessTimer4_3
    956              }
    957            }
    958            else if (halTimerRecord[halTimerRemap(HAL_TIMER_2)].channelMode == HAL_TIMER_CH_MODE_OVERFLOW)
   \                     ??halProcessTimer4_0:
   \   000029                ; Setup parameters for call to function halTimerRemap
   \   000029   7902         MOV     R1,#0x2
   \   00002B   12....       LCALL   ??halTimerRemap?relay
   \   00002E   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_22:
   \   000031   700F         JNZ     ??halProcessTimer4_2
    959            if (TIMIF & TIMIF_T4OVFIF)
   \   000033   A2DB         MOV     C,0xd8.3
   \   000035   500B         JNC     ??halProcessTimer4_2
    960            {
    961              TIMIF &= ~(TIMIF_T4OVFIF);
   \   000037   C2DB         CLR     0xd8.3
    962              halTimerSendCallBack (HAL_TIMER_2, HAL_TIMER_CHANNEL_SINGLE, HAL_TIMER_CH_MODE_OVERFLOW);
   \   000039                ; Setup parameters for call to function halTimerSendCallBack
   \   000039   7B04         MOV     R3,#0x4
   \   00003B   7A01         MOV     R2,#0x1
   \                     ??halProcessTimer4_3:
   \   00003D   7902         MOV     R1,#0x2
   \   00003F   12....       LCALL   ??halTimerSendCallBack?relay
    963            }
    964          }
   \                     ??halProcessTimer4_2:
   \   000042   02....       LJMP    ?Subroutine2 & 0xFFFF
   \   000045                REQUIRE _A_TIMIF
    965          
    966          /***************************************************************************************************
    967           *                                    INTERRUPT SERVICE ROUTINE
    968           ***************************************************************************************************/
    969          
    970          /**************************************************************************************************
    971           * @fn      halTimer1Isr
    972           *
    973           * @brief   Timer 1 ISR
    974           *
    975           * @param
    976           *
    977           * @return
    978           **************************************************************************************************/

   \                                 In  segment NEAR_CODE, align 1, keep-with-next
    979          HAL_ISR_FUNCTION( halTimer1Isr, T1_VECTOR )
   \                     halTimer1Isr:
    980          {
   \   000000   C0E0         PUSH    A
   \   000002   74F2         MOV     A,#-0xe
   \   000004   12....       LCALL   ?INTERRUPT_ENTER_XSP
   \   000007                ; Saved register size: 14
   \   000007                ; Auto size: 0
    981            halProcessTimer1 ();
   \   000007                ; Setup parameters for call to function halProcessTimer1
   \   000007   12....       LCALL   ??halProcessTimer1?relay
    982          }
   \   00000A                REQUIRE ?Subroutine3
   \   00000A                ; // Fall through to label ?Subroutine3

   \                                 In  segment NEAR_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?INTERRUPT_LEAVE_XSP
    983          
    984          /**************************************************************************************************
    985           * @fn      halTimer3Isr
    986           *
    987           * @brief   Timer 3 ISR
    988           *
    989           * @param
    990           *
    991           * @return
    992           **************************************************************************************************/
    993          #ifndef DALI_LIGHT
    994          HAL_ISR_FUNCTION( halTimer3Isr, T3_VECTOR )
    995          {
    996            halProcessTimer3 ();
    997          }
    998          #endif
    999          /**************************************************************************************************
   1000           * @fn      halTimer4Isr
   1001           *
   1002           * @brief   Timer 4 ISR
   1003           *
   1004           * @param
   1005           *
   1006           * @return
   1007           **************************************************************************************************/

   \                                 In  segment NEAR_CODE, align 1, keep-with-next
   1008          HAL_ISR_FUNCTION( halTimer4Isr, T4_VECTOR )
   \                     halTimer4Isr:
   1009          {
   \   000000   C0E0         PUSH    A
   \   000002   74F2         MOV     A,#-0xe
   \   000004   12....       LCALL   ?INTERRUPT_ENTER_XSP
   \   000007                ; Saved register size: 14
   \   000007                ; Auto size: 0
   1010            halProcessTimer4 ();
   \   000007                ; Setup parameters for call to function halProcessTimer4
   \   000007   12....       LCALL   ??halProcessTimer4?relay
   1011          }
   \   00000A   80..         SJMP    ?Subroutine3

   \                                 In  segment INTVEC, offset 0x4b, root
   \                     `??halTimer1Isr??INTVEC 75`:
   \   00004B   02....       LJMP       (halTimer1Isr)

   \                                 In  segment INTVEC, offset 0x63, root
   \                     `??halTimer4Isr??INTVEC 99`:
   \   000063   02....       LJMP       (halTimer4Isr)

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_10c4:
   \   000000   C4100000     DD 4292

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1f4:
   \   000000   F4010000     DD 500

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_3e8:
   \   000000   E8030000     DD 1000

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalTimer1Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalTimer1Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halTimer1SetPeriod?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halTimer1SetPeriod

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halTimer1SetChannelDuty?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halTimer1SetChannelDuty

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halTimer1SetChannelCount?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halTimer1SetChannelCount

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halTimer1SetChannelCCTL?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halTimer1SetChannelCCTL

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalTimerInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalTimerInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalTimerConfig?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalTimerConfig

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalTimerStart?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalTimerStart

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalTimerTick?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalTimerTick

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalTimerStop?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalTimerStop

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halTimerSetCount?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halTimerSetCount

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halTimerSetPrescale?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halTimerSetPrescale

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halTimerSetOpMode?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halTimerSetOpMode

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halTimerSetChannelMode?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halTimerSetChannelMode

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalTimerInterruptEnable?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalTimerInterruptEnable

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halTimerSendCallBack?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halTimerSendCallBack

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halTimerRemap?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halTimerRemap

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halProcessTimer1?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halProcessTimer1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halProcessTimer3?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halProcessTimer3

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halProcessTimer4?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halProcessTimer4
   1012          
   1013          /***************************************************************************************************
   1014          ***************************************************************************************************/

   Maximum stack usage in bytes:

   ISTACK PSTACK XSTACK Function
   ------ ------ ------ --------
       0      0     10  HalTimer1Init
                          0 0 10 -> halTimer1SetChannelCCTL
                          0 0  9 -> halTimer1SetChannelDuty
                          0 0  9 -> halTimer1SetPeriod
                          0 0  9 -> halTimerSetChannelMode
                          0 0  9 -> halTimerSetPrescale
       1      0     15  HalTimerConfig
                          0 0 13 -> halTimerRemap
       2      0      0  HalTimerInit
       0      0     27  HalTimerInterruptEnable
       0      0     16  HalTimerStart
                          0 0 16 -> HalTimerInterruptEnable
                          0 0 16 -> halTimerRemap
                          0 0 16 -> halTimerSetChannelMode
                          0 0 16 -> halTimerSetCount
                          0 0 16 -> halTimerSetOpMode
                          0 0 16 -> halTimerSetPrescale
       0      0      9  HalTimerStop
                          0 0  9 -> halTimerRemap
                          0 0  9 -> halTimerSetOpMode
       2      0      0  HalTimerTick
                          2 0  0 -> halProcessTimer1
                          2 0  0 -> halProcessTimer3
                          2 0  0 -> halProcessTimer4
       2      0     14  halProcessTimer1
                          2 0  0 -> halTimerRemap
                          2 0  0 -> halTimerSendCallBack
       2      0      0  halProcessTimer3
                          2 0  0 -> halTimerRemap
                          2 0  0 -> halTimerSendCallBack
       2      0     14  halProcessTimer4
                          2 0  0 -> halTimerRemap
                          2 0  0 -> halTimerSendCallBack
       0      0     14  halTimer1Isr
                          0 0 14 -> halProcessTimer1
       0      0     20  halTimer1SetChannelCCTL
       1      0     25  halTimer1SetChannelCount
       0      0     25  halTimer1SetChannelDuty
                          0 0 16 -> halTimer1SetChannelCount
       0      0     25  halTimer1SetPeriod
                          0 0 16 -> halTimer1SetChannelCount
       0      0     14  halTimer4Isr
                          0 0 14 -> halProcessTimer4
       0      0     16  halTimerRemap
       0      0      9  halTimerSendCallBack
                          0 0  9 -> halTimerRemap
       2      0     16  halTimerSetChannelMode
       1      0     32  halTimerSetCount
       0      0     16  halTimerSetOpMode
       0      0     16  halTimerSetPrescale


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       6  ??HalTimer1Init?relay
       6  ??HalTimerConfig?relay
       6  ??HalTimerInit?relay
       6  ??HalTimerInterruptEnable?relay
       6  ??HalTimerStart?relay
       6  ??HalTimerStop?relay
       6  ??HalTimerTick?relay
       6  ??Subroutine20_0
       6  ??Subroutine21_0
       9  ??Subroutine22_0
       6  ??halProcessTimer1?relay
       6  ??halProcessTimer3?relay
       6  ??halProcessTimer4?relay
       3  ??halTimer1Isr??INTVEC 75
       6  ??halTimer1SetChannelCCTL?relay
       6  ??halTimer1SetChannelCount?relay
       6  ??halTimer1SetChannelDuty?relay
       6  ??halTimer1SetPeriod?relay
       3  ??halTimer4Isr??INTVEC 99
       6  ??halTimerRemap?relay
       6  ??halTimerSendCallBack?relay
       6  ??halTimerSetChannelMode?relay
       6  ??halTimerSetCount?relay
       6  ??halTimerSetOpMode?relay
       6  ??halTimerSetPrescale?relay
       5  ?Subroutine0
       5  ?Subroutine1
       2  ?Subroutine10
      15  ?Subroutine11
      11  ?Subroutine12
      10  ?Subroutine13
       6  ?Subroutine14
       6  ?Subroutine15
       9  ?Subroutine16
      15  ?Subroutine17
      20  ?Subroutine18
       9  ?Subroutine19
       7  ?Subroutine2
       5  ?Subroutine3
       2  ?Subroutine4
      19  ?Subroutine5
      11  ?Subroutine6
       2  ?Subroutine7
       5  ?Subroutine8
       5  ?Subroutine9
     272  HalTimer1Init
     137  HalTimerConfig
     174  HalTimerInit
     136  HalTimerInterruptEnable
     156  HalTimerStart
      45  HalTimerStop
      34  HalTimerTick
       1  T1CCTL0
       1  T1CCTL1
       1  T1CCTL2
       1  T1CTL
       1  T1STAT
       1  T3CCTL0
       1  T3CCTL1
       1  T3CTL
       1  T4CCTL0
       1  T4CCTL1
       1  T4CTL
       2  Timer1MaxCount
       1  _A_IEN1
       1  _A_TIMIF
       4  __Constant_10c4
       4  __Constant_1f4
       4  __Constant_3e8
      93  halProcessTimer1
      68  halProcessTimer3
      69  halProcessTimer4
      36  halTimer1Channel
      10  halTimer1Isr
      74  halTimer1SetChannelCCTL
      31  halTimer1SetChannelCount
     125  halTimer1SetChannelDuty
      62  halTimer1SetPeriod
      12  halTimer4Isr
      60  halTimerChannel
      30  halTimerRecord
      29  halTimerRemap
      53  halTimerSendCallBack
      60  halTimerSetChannelMode
     114  halTimerSetCount
     106  halTimerSetOpMode
      42  halTimerSetPrescale

 
 2 065 bytes in segment BANKED_CODE
   120 bytes in segment BANK_RELAYS
     6 bytes in segment INTVEC
    27 bytes in segment NEAR_CODE
    13 bytes in segment SFR_AN
    12 bytes in segment XDATA_ROM_C
   128 bytes in segment XDATA_Z
 
 2 212 bytes of CODE  memory (+  6 bytes shared)
     0 bytes of CONST memory (+ 12 bytes shared)
     0 bytes of DATA  memory (+ 13 bytes shared)
   128 bytes of XDATA memory

Errors: none
Warnings: none
