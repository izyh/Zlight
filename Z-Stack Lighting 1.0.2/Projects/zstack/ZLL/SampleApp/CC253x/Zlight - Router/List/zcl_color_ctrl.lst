###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.20.2.41139 for 8051             27/May/2014  19:14:21 #
# Copyright 2004-2013 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#                                                                             #
#    Source file        =  D:\Texas Instruments\Z-Stack Lighting              #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\Source\Light\z #
#                          cl_color_ctrl.c                                    #
#    Command line       =  -f "D:\Texas Instruments\Z-Stack Lighting          #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\Tools\CC2530DB\f8wRouter.cfg" (-DCPU32MHZ        #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f "D:\Texas         #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\Tools\CC2530DB\f8wConfig.cfg" (-DZIGBEEPRO       #
#                          -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100    #
#                          -DREJOIN_POLL_RATE=440) -f "D:\Texas               #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\Tools\CC2530DB\f8wZCL.cfg" "D:\Texas             #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\Source\Light\z #
#                          cl_color_ctrl.c" -D FEATURE_GREEN_POWER -D         #
#                          SECURE=1 -D TC_LINKKEY_JOIN -D                     #
#                          ZDSECMGR_TC_DEVICE_MAX=2 -D NV_RESTORE -D          #
#                          HOLD_AUTO_START -D INTER_PAN -D                    #
#                          LCD_SUPPORTED=DEBUG -D ZCL_BASIC -D ZCL_READ -D    #
#                          ZCL_WRITE -D ZCL_IDENTIFY -D ZCL_ON_OFF -D         #
#                          ZCL_SCENES -D ZCL_GROUPS -D                        #
#                          ZCL_LIGHT_LINK_ENHANCE -D ZCL_LEVEL_CTRL -D        #
#                          ZCL_COLOR_CTRL -D MAX_CHANNELS_24GHZ=0x02108800    #
#                          -D xPWM_ALT2 -D xTHERMAL_SHUTDOWN -D               #
#                          ZLL_1_0_HUB_COMPATIBILITY -D DALI_LIGHT -lC        #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\Zlight  #
#                          - Router\List\" -lA "D:\Texas Instruments\Z-Stack  #
#                          Lighting 1.0.2\Projects\zstack\ZLL\SampleApp\CC253 #
#                          x\Zlight - Router\List\" --diag_suppress           #
#                          Pe001,Pa010 -o "D:\Texas Instruments\Z-Stack       #
#                          Lighting 1.0.2\Projects\zstack\ZLL\SampleApp\CC253 #
#                          x\Zlight - Router\Obj\" -e --debug --core=plain    #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "D:\Texas                  #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\" -I    #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\Sour #
#                          ce\" -I "D:\Texas Instruments\Z-Stack Lighting     #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\S #
#                          ource\" -I "D:\Texas Instruments\Z-Stack Lighting  #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\HomeAutomation\Source\" -I "D:\Texas             #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\HomeAutomation\SampleLight\Source\" -I           #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\ZMain\TI2530DB\" -I "D:\Texas                    #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\hal\include\" -I "D:\Texas      #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\hal\target\CC2530PMP4712\" -I   #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\include\" -I "D:\Texas      #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\high_level\" -I "D:\Texas   #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\low_level\srf04\" -I        #
#                          "D:\Texas Instruments\Z-Stack Lighting             #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mac\low_level\srf04\single_chip #
#                          \" -I "D:\Texas Instruments\Z-Stack Lighting       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\mt\" -I "D:\Texas               #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\osal\include\" -I "D:\Texas     #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\services\saddr\" -I "D:\Texas   #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\services\sdata\" -I "D:\Texas   #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\af\" -I "D:\Texas         #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\nwk\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\sapi\" -I "D:\Texas       #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\sec\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\sys\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\zcl\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\stack\zdo\" -I "D:\Texas        #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\zmac\" -I "D:\Texas             #
#                          Instruments\Z-Stack Lighting                       #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\..\..\. #
#                          .\..\..\Components\zmac\f8w\" -Ohz                 #
#                          --require_prototypes                               #
#    List file          =  D:\Texas Instruments\Z-Stack Lighting              #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\Zlight  #
#                          - Router\List\zcl_color_ctrl.lst                   #
#    Object file        =  D:\Texas Instruments\Z-Stack Lighting              #
#                          1.0.2\Projects\zstack\ZLL\SampleApp\CC253x\Zlight  #
#                          - Router\Obj\zcl_color_ctrl.r51                    #
#                                                                             #
#                                                                             #
###############################################################################

D:\Texas Instruments\Z-Stack Lighting 1.0.2\Projects\zstack\ZLL\SampleApp\Source\Light\zcl_color_ctrl.c
      1          /**************************************************************************************************
      2            Filename:       zcl_color_ctrl.c
      3            Revised:        $Date: 2013-08-08 18:23:54 -0700 (Thu, 08 Aug 2013) $
      4            Revision:       $Revision: 34927 $
      5          
      6            Description:    This file contains the Zigbee Cluster Library Color Control
      7                            application callbacks code.
      8          
      9          
     10            Copyright 2010-2013 Texas Instruments Incorporated. All rights reserved.
     11          
     12            IMPORTANT: Your use of this Software is limited to those specific rights
     13            granted under the terms of a software license agreement between the user
     14            who downloaded the software, his/her employer (which must be your employer)
     15            and Texas Instruments Incorporated (the "License").  You may not use this
     16            Software unless you agree to abide by the terms of the License. The License
     17            limits your use, and you acknowledge, that the Software may not be modified,
     18            copied or distributed unless embedded on a Texas Instruments microcontroller
     19            or used solely and exclusively in conjunction with a Texas Instruments radio
     20            frequency transceiver, which is integrated into your product.  Other than for
     21            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     22            works of, modify, distribute, perform, display or sell this Software and/or
     23            its documentation for any purpose.
     24          
     25            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     26            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     27            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     28            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     29            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     30            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     31            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     32            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     33            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     34            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     35            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     36          
     37            Should you have any questions regarding your right to use this Software,
     38            contact Texas Instruments Incorporated at www.TI.com.
     39          **************************************************************************************************/
     40          
     41          /*********************************************************************
     42            This device will be like a Light device.  This application is not
     43            intended to be a Light device, but will use the device description
     44            to implement this sample code.
     45          *********************************************************************/
     46          
     47          #ifdef ZCL_COLOR_CTRL
     48          /*********************************************************************
     49           * INCLUDES
     50           */
     51          #include "onboard.h"
     52          #include "zcl_color_ctrl.h"
     53          
     54          /*********************************************************************
     55           * MACROS
     56           */
     57          
     58          /*********************************************************************
     59           * CONSTANTS
     60           */
     61          /*********************************************************************
     62           * TYPEDEFS
     63           */
     64          
     65          /*********************************************************************
     66           * GLOBAL VARIABLES
     67           */
     68          
     69          /*********************************************************************
     70           * GLOBAL FUNCTIONS
     71           */
     72          
     73          /*********************************************************************
     74           * LOCAL VARIABLES
     75           */
     76          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     77          static int32 zclColor_StepSaturation_256 = 0;
   \                     zclColor_StepSaturation_256:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     78          static uint16 zclColor_SaturationRemainingTime = 0;
   \                     zclColor_SaturationRemainingTime:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     79          static uint16 zclColor_CurrentSaturation_256 = 0;
   \                     zclColor_CurrentSaturation_256:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
     80          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     81          static int32 zclColor_StepHue_256 = 0;
   \                     zclColor_StepHue_256:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     82          static uint16 zclColor_HueRemainingTime = 0;
   \                     zclColor_HueRemainingTime:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     83          static uint16 zclColor_CurrentHue_256 = 0;
   \                     zclColor_CurrentHue_256:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
     84          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     85          static int32 zclColor_StepEnhancedHue_256 = 0;
   \                     zclColor_StepEnhancedHue_256:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     86          static uint16 zclColor_EnhancedHueRemainingTime = 0;
   \                     zclColor_EnhancedHueRemainingTime:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     87          static uint32 zclColor_EnhancedCurrentHue_256 = 0;
   \                     zclColor_EnhancedCurrentHue_256:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
     88          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     89          static int32 zclColor_StepColorX_256 = 0;
   \                     zclColor_StepColorX_256:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     90          static int32 zclColor_StepColorY_256 = 0;
   \                     zclColor_StepColorY_256:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     91          static uint32 zclColor_CurrentX_256 = 0;
   \                     zclColor_CurrentX_256:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     92          static uint32 zclColor_CurrentY_256 = 0;
   \                     zclColor_CurrentY_256:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
     93          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     94          static byte zclLight_TaskID;
   \                     zclLight_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     95          
     96          /*********************************************************************
     97           * LOCAL FUNCTIONS
     98           */
     99          
    100          /*********************************************************************
    101           * @fn          zclLevel_init
    102           *
    103           * @brief
    104           *
    105           * @param       none
    106           *
    107           * @return      none
    108           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    109          void zclColor_init( byte taskID )
   \                     zclColor_init:
    110          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
    111            zclLight_TaskID = taskID;
   \   000006   90....       MOV     DPTR,#zclLight_TaskID
   \   000009   F0           MOVX    @DPTR,A
    112          
    113            //Move to default color
    114            zclColor_HueRemainingTime = 0;
   \   00000A   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   00000D   E4           CLR     A
   \   00000E   12....       LCALL   ?Subroutine20 & 0xFFFF
    115            hwLight_ApplyUpdate( &zclColor_CurrentHue,
    116                                 &zclColor_CurrentHue_256,
    117                                 &zclColor_StepHue_256,
    118                                 &zclColor_HueRemainingTime,
    119                                 COLOR_HUE_MIN, COLOR_HUE_MAX, TRUE );
   \                     ??CrossCallReturnLabel_37:
   \   000011   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000014   75..FE       MOV     ?V0 + 0,#-0x2
   \   000017   78..         MOV     R0,#?V0 + 0
   \   000019   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00001C   75....       MOV     ?V0 + 0,#zclColor_HueRemainingTime & 0xff
   \   00001F   75....       MOV     ?V0 + 1,#(zclColor_HueRemainingTime >> 8) & 0xff
   \   000022   78..         MOV     R0,#?V0 + 0
   \   000024   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000027   75....       MOV     ?V0 + 0,#zclColor_StepHue_256 & 0xff
   \   00002A   75....       MOV     ?V0 + 1,#(zclColor_StepHue_256 >> 8) & 0xff
   \   00002D   78..         MOV     R0,#?V0 + 0
   \   00002F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000032   7900         MOV     R1,#0x0
   \   000034   7C..         MOV     R4,#zclColor_CurrentHue_256 & 0xff
   \   000036   7D..         MOV     R5,#(zclColor_CurrentHue_256 >> 8) & 0xff
   \   000038   7A..         MOV     R2,#zclColor_CurrentHue & 0xff
   \   00003A   7B..         MOV     R3,#(zclColor_CurrentHue >> 8) & 0xff
   \   00003C   12....       LCALL   ??hwLight_ApplyUpdate?relay
   \   00003F   7406         MOV     A,#0x6
   \   000041   12....       LCALL   ?DEALLOC_XSTACK8
    120          
    121            zclColor_SaturationRemainingTime = 0;
   \   000044   90....       MOV     DPTR,#zclColor_SaturationRemainingTime
   \   000047   E4           CLR     A
   \   000048   F0           MOVX    @DPTR,A
   \   000049   A3           INC     DPTR
   \   00004A   F0           MOVX    @DPTR,A
    122            hwLight_ApplyUpdate( &zclColor_CurrentSaturation,
    123                                 &zclColor_CurrentSaturation_256,
    124                                 &zclColor_StepSaturation_256,
    125                                 &zclColor_SaturationRemainingTime,
    126                                 COLOR_SAT_MIN, COLOR_SAT_MAX, FALSE );
   \   00004B                ; Setup parameters for call to function hwLight_ApplyUpdate
   \   00004B   F5..         MOV     ?V0 + 0,A
   \   00004D   78..         MOV     R0,#?V0 + 0
   \   00004F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000052   75..FE       MOV     ?V0 + 0,#-0x2
   \   000055   78..         MOV     R0,#?V0 + 0
   \   000057   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00005A   75....       MOV     ?V0 + 0,#zclColor_SaturationRemainingTime & 0xff
   \   00005D   75....       MOV     ?V0 + 1,#(zclColor_SaturationRemainingTime >> 8) & 0xff
   \   000060   78..         MOV     R0,#?V0 + 0
   \   000062   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000065   75....       MOV     ?V0 + 0,#zclColor_StepSaturation_256 & 0xff
   \   000068   75....       MOV     ?V0 + 1,#(zclColor_StepSaturation_256 >> 8) & 0xff
   \   00006B   78..         MOV     R0,#?V0 + 0
   \   00006D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000070   7900         MOV     R1,#0x0
   \   000072   7C..         MOV     R4,#zclColor_CurrentSaturation_256 & 0xff
   \   000074   7D..         MOV     R5,#(zclColor_CurrentSaturation_256 >> 8) & 0xff
   \   000076   7A..         MOV     R2,#zclColor_CurrentSaturation & 0xff
   \   000078   7B..         MOV     R3,#(zclColor_CurrentSaturation >> 8) & 0xff
   \   00007A   12....       LCALL   ??hwLight_ApplyUpdate?relay
   \   00007D   7406         MOV     A,#0x6
   \   00007F   02....       LJMP    ?Subroutine0 & 0xFFFF
    127          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   F0           MOVX    @DPTR,A
   \   000003                ; Setup parameters for call to function hwLight_ApplyUpdate
   \   000003                ; Setup parameters for call to function hwLight_ApplyUpdate
   \   000003   75..01       MOV     ?V0 + 0,#0x1
   \   000006   78..         MOV     R0,#?V0 + 0
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003                REQUIRE ??Subroutine54_0
   \   000003                ; // Fall through to label ??Subroutine54_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine54_0:
   \   000000   7F02         MOV     R7,#0x2
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    128          
    129          /*********************************************************************
    130           * @fn          zclColor_process_color_event
    131           *
    132           * @brief       color Event Processor for zclLighting.
    133           *
    134           * @param       events
    135           *
    136           * @return      none
    137           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    138          void zclColor_process( uint16 *events )
   \                     zclColor_process:
    139          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    140            if ( *events & COLOR_PROCESS_EVT )
   \   000009   8E82         MOV     DPL,R6
   \   00000B   8F83         MOV     DPH,R7
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   5410         ANL     A,#0x10
   \   000010   7003         JNZ     $+5
   \   000012   02....       LJMP    ??zclColor_process_0 & 0xFFFF
    141            {
    142              //update the satruation if mode is hue and saturation
    143              if( (zclColor_EnhancedColorMode == COLOR_MODE_CURRENT_HUE_SATURATION) ||
    144                  (zclColor_EnhancedColorMode == ENHANCED_COLOR_MODE_ENHANCED_CURRENT_HUE_SATURATION) )
   \   000015   90....       MOV     DPTR,#zclColor_EnhancedColorMode
   \   000018   E0           MOVX    A,@DPTR
   \   000019   6007         JZ      ??zclColor_process_1
   \   00001B   6403         XRL     A,#0x3
   \   00001D   6003         JZ      $+5
   \   00001F   02....       LJMP    ??zclColor_process_2 & 0xFFFF
    145              {
    146                if( zclColor_SaturationRemainingTime )
   \                     ??zclColor_process_1:
   \   000022   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_110:
   \   000025   6038         JZ      ??zclColor_process_3
    147                {
    148                  hwLight_ApplyUpdate( &zclColor_CurrentSaturation,
    149                                       &zclColor_CurrentSaturation_256,
    150                                       &zclColor_StepSaturation_256,
    151                                       &zclColor_SaturationRemainingTime,
    152                                       COLOR_SAT_MIN, COLOR_SAT_MAX, FALSE );
   \   000027                ; Setup parameters for call to function hwLight_ApplyUpdate
   \   000027   75..00       MOV     ?V0 + 0,#0x0
   \   00002A   78..         MOV     R0,#?V0 + 0
   \   00002C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00002F   75..FE       MOV     ?V0 + 0,#-0x2
   \   000032   78..         MOV     R0,#?V0 + 0
   \   000034   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000037   75....       MOV     ?V0 + 0,#zclColor_SaturationRemainingTime & 0xff
   \   00003A   75....       MOV     ?V0 + 1,#(zclColor_SaturationRemainingTime >> 8) & 0xff
   \   00003D   78..         MOV     R0,#?V0 + 0
   \   00003F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000042   75....       MOV     ?V0 + 0,#zclColor_StepSaturation_256 & 0xff
   \   000045   75....       MOV     ?V0 + 1,#(zclColor_StepSaturation_256 >> 8) & 0xff
   \   000048   78..         MOV     R0,#?V0 + 0
   \   00004A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004D   7900         MOV     R1,#0x0
   \   00004F   7C..         MOV     R4,#zclColor_CurrentSaturation_256 & 0xff
   \   000051   7D..         MOV     R5,#(zclColor_CurrentSaturation_256 >> 8) & 0xff
   \   000053   7A..         MOV     R2,#zclColor_CurrentSaturation & 0xff
   \   000055   7B..         MOV     R3,#(zclColor_CurrentSaturation >> 8) & 0xff
   \   000057   12....       LCALL   ??hwLight_ApplyUpdate?relay
   \   00005A   7406         MOV     A,#0x6
   \   00005C   12....       LCALL   ?DEALLOC_XSTACK8
    153                }
    154                //update the Hue if mode is hue and saturation
    155                if( zclColor_HueRemainingTime )
   \                     ??zclColor_process_3:
   \   00005F   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   000062   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_92:
   \   000065   6038         JZ      ??zclColor_process_4
    156                {
    157                  hwLight_ApplyUpdate( &zclColor_CurrentHue,
    158                                       &zclColor_CurrentHue_256,
    159                                       &zclColor_StepHue_256,
    160                                       &zclColor_HueRemainingTime,
    161                                       COLOR_HUE_MIN, COLOR_HUE_MAX, TRUE );
   \   000067                ; Setup parameters for call to function hwLight_ApplyUpdate
   \   000067   75..01       MOV     ?V0 + 0,#0x1
   \   00006A   78..         MOV     R0,#?V0 + 0
   \   00006C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00006F   75..FE       MOV     ?V0 + 0,#-0x2
   \   000072   78..         MOV     R0,#?V0 + 0
   \   000074   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000077   75....       MOV     ?V0 + 0,#zclColor_HueRemainingTime & 0xff
   \   00007A   75....       MOV     ?V0 + 1,#(zclColor_HueRemainingTime >> 8) & 0xff
   \   00007D   78..         MOV     R0,#?V0 + 0
   \   00007F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000082   75....       MOV     ?V0 + 0,#zclColor_StepHue_256 & 0xff
   \   000085   75....       MOV     ?V0 + 1,#(zclColor_StepHue_256 >> 8) & 0xff
   \   000088   78..         MOV     R0,#?V0 + 0
   \   00008A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00008D   7900         MOV     R1,#0x0
   \   00008F   7C..         MOV     R4,#zclColor_CurrentHue_256 & 0xff
   \   000091   7D..         MOV     R5,#(zclColor_CurrentHue_256 >> 8) & 0xff
   \   000093   7A..         MOV     R2,#zclColor_CurrentHue & 0xff
   \   000095   7B..         MOV     R3,#(zclColor_CurrentHue >> 8) & 0xff
   \   000097   12....       LCALL   ??hwLight_ApplyUpdate?relay
   \   00009A   7406         MOV     A,#0x6
   \   00009C   12....       LCALL   ?DEALLOC_XSTACK8
    162                }
    163          
    164                //update the Enhanced Hue if mode is hue and saturation
    165                if(zclColor_EnhancedHueRemainingTime)
   \                     ??zclColor_process_4:
   \   00009F   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   0000A2   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_93:
   \   0000A5   7003         JNZ     $+5
   \   0000A7   02....       LJMP    ??zclColor_process_5 & 0xFFFF
    166                {
    167                  hwLight_ApplyUpdate16b( &zclColor_EnhancedCurrentHue,
    168                                          &zclColor_EnhancedCurrentHue_256,
    169                                          &zclColor_StepEnhancedHue_256,
    170                                          &zclColor_EnhancedHueRemainingTime,
    171                                          COLOR_ENH_HUE_MIN, COLOR_ENH_HUE_MAX, TRUE );
   \   0000AA                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   0000AA   75..FF       MOV     ?V0 + 0,#-0x1
   \   0000AD   75..FF       MOV     ?V0 + 1,#-0x1
   \   0000B0   78..         MOV     R0,#?V0 + 0
   \   0000B2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B5   E4           CLR     A
   \   0000B6   F5..         MOV     ?V0 + 0,A
   \   0000B8   F5..         MOV     ?V0 + 1,A
   \   0000BA   78..         MOV     R0,#?V0 + 0
   \   0000BC   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000BF   75....       MOV     ?V0 + 0,#zclColor_EnhancedHueRemainingTime & 0xff
   \   0000C2   75....       MOV     ?V0 + 1,#(zclColor_EnhancedHueRemainingTime >> 8) & 0xff
   \   0000C5   78..         MOV     R0,#?V0 + 0
   \   0000C7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000CA   75....       MOV     ?V0 + 0,#zclColor_StepEnhancedHue_256 & 0xff
   \   0000CD   75....       MOV     ?V0 + 1,#(zclColor_StepEnhancedHue_256 >> 8) & 0xff
   \   0000D0   78..         MOV     R0,#?V0 + 0
   \   0000D2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000D5   7901         MOV     R1,#0x1
   \   0000D7   7C..         MOV     R4,#zclColor_EnhancedCurrentHue_256 & 0xff
   \   0000D9   7D..         MOV     R5,#(zclColor_EnhancedCurrentHue_256 >> 8) & 0xff
   \   0000DB   7A..         MOV     R2,#zclColor_EnhancedCurrentHue & 0xff
   \   0000DD   7B..         MOV     R3,#(zclColor_EnhancedCurrentHue >> 8) & 0xff
   \   0000DF   02....       LJMP    ??zclColor_process_6 & 0xFFFF
    172                }
    173              }
    174              else if(zclColor_EnhancedColorMode == COLOR_MODE_CURRENT_X_Y)
   \                     ??zclColor_process_2:
   \   0000E2   E0           MOVX    A,@DPTR
   \   0000E3   6401         XRL     A,#0x1
   \   0000E5   6003         JZ      $+5
   \   0000E7   02....       LJMP    ??zclColor_process_5 & 0xFFFF
    175              {
    176                if(zclColor_ColorRemainingTime)
   \   0000EA   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   0000ED   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_94:
   \   0000F0   7003         JNZ     $+5
   \   0000F2   02....       LJMP    ??zclColor_process_7 & 0xFFFF
    177                {
    178                    hwLight_ApplyUpdate16b( &zclColor_CurrentX,
    179                                            &zclColor_CurrentX_256,
    180                                            &zclColor_StepColorX_256,
    181                                            &zclColor_ColorRemainingTime,
    182                                            COLOR_XY_MIN, COLOR_XY_MAX, FALSE );
   \   0000F5                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   0000F5   75..FF       MOV     ?V0 + 0,#-0x1
   \   0000F8   75..FE       MOV     ?V0 + 1,#-0x2
   \   0000FB   78..         MOV     R0,#?V0 + 0
   \   0000FD   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000100   E4           CLR     A
   \   000101   F5..         MOV     ?V0 + 0,A
   \   000103   F5..         MOV     ?V0 + 1,A
   \   000105   78..         MOV     R0,#?V0 + 0
   \   000107   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00010A   75....       MOV     ?V0 + 0,#zclColor_ColorRemainingTime & 0xff
   \   00010D   75....       MOV     ?V0 + 1,#(zclColor_ColorRemainingTime >> 8) & 0xff
   \   000110   78..         MOV     R0,#?V0 + 0
   \   000112   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000115   75....       MOV     ?V0 + 0,#zclColor_StepColorX_256 & 0xff
   \   000118   75....       MOV     ?V0 + 1,#(zclColor_StepColorX_256 >> 8) & 0xff
   \   00011B   78..         MOV     R0,#?V0 + 0
   \   00011D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000120   7900         MOV     R1,#0x0
   \   000122   7C..         MOV     R4,#zclColor_CurrentX_256 & 0xff
   \   000124   7D..         MOV     R5,#(zclColor_CurrentX_256 >> 8) & 0xff
   \   000126   7A..         MOV     R2,#zclColor_CurrentX & 0xff
   \   000128   7B..         MOV     R3,#(zclColor_CurrentX >> 8) & 0xff
   \   00012A   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   00012D   7408         MOV     A,#0x8
   \   00012F   12....       LCALL   ?DEALLOC_XSTACK8
    183                    if(zclColor_ColorRemainingTime != 0xFFFF)
   \   000132   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   000135   E0           MOVX    A,@DPTR
   \   000136   F4           CPL     A
   \   000137   7003         JNZ     ??zclColor_process_8
   \   000139   A3           INC     DPTR
   \   00013A   E0           MOVX    A,@DPTR
   \   00013B   F4           CPL     A
   \                     ??zclColor_process_8:
   \   00013C   6003         JZ      ??CrossCallReturnLabel_32
    184                    {
    185                      zclColor_ColorRemainingTime++; //hwLight_ApplyUpdate16b decrements each time.
   \   00013E   12....       LCALL   ?Subroutine18 & 0xFFFF
    186                    }
    187                    hwLight_ApplyUpdate16b( &zclColor_CurrentY,
    188                                            &zclColor_CurrentY_256,
    189                                            &zclColor_StepColorY_256,
    190                                            &zclColor_ColorRemainingTime,
    191                                            COLOR_XY_MIN, COLOR_XY_MAX, FALSE );
   \                     ??CrossCallReturnLabel_32:
   \   000141                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   000141   75..FF       MOV     ?V0 + 0,#-0x1
   \   000144   75..FE       MOV     ?V0 + 1,#-0x2
   \   000147   78..         MOV     R0,#?V0 + 0
   \   000149   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00014C   E4           CLR     A
   \   00014D   F5..         MOV     ?V0 + 0,A
   \   00014F   F5..         MOV     ?V0 + 1,A
   \   000151   78..         MOV     R0,#?V0 + 0
   \   000153   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000156   75....       MOV     ?V0 + 0,#zclColor_ColorRemainingTime & 0xff
   \   000159   75....       MOV     ?V0 + 1,#(zclColor_ColorRemainingTime >> 8) & 0xff
   \   00015C   78..         MOV     R0,#?V0 + 0
   \   00015E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000161   75....       MOV     ?V0 + 0,#zclColor_StepColorY_256 & 0xff
   \   000164   75....       MOV     ?V0 + 1,#(zclColor_StepColorY_256 >> 8) & 0xff
   \   000167   78..         MOV     R0,#?V0 + 0
   \   000169   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00016C   7900         MOV     R1,#0x0
   \   00016E   7C..         MOV     R4,#zclColor_CurrentY_256 & 0xff
   \   000170   7D..         MOV     R5,#(zclColor_CurrentY_256 >> 8) & 0xff
   \   000172   7A..         MOV     R2,#zclColor_CurrentY & 0xff
   \   000174   7B..         MOV     R3,#(zclColor_CurrentY >> 8) & 0xff
   \                     ??zclColor_process_6:
   \   000176   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   000179   7408         MOV     A,#0x8
   \   00017B   12....       LCALL   ?DEALLOC_XSTACK8
    192                }
    193              }
    194          
    195              if ( zclColor_ColorRemainingTime || zclColor_SaturationRemainingTime || zclColor_HueRemainingTime || zclColor_EnhancedHueRemainingTime )
   \                     ??zclColor_process_5:
   \   00017E   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   000181   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_95:
   \   000184   7015         JNZ     ??zclColor_process_9
   \                     ??zclColor_process_7:
   \   000186   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_111:
   \   000189   7010         JNZ     ??zclColor_process_9
   \   00018B   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   00018E   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_96:
   \   000191   7008         JNZ     ??zclColor_process_9
   \   000193   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   000196   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_97:
   \   000199   6017         JZ      ??zclColor_process_10
    196              {
    197                //set a timer to make the change over 100ms
    198                osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT, 100 );
   \                     ??zclColor_process_9:
   \   00019B                ; Setup parameters for call to function osal_start_timerEx
   \   00019B   90....       MOV     DPTR,#__Constant_64
   \   00019E   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0001A1   7A10         MOV     R2,#0x10
   \   0001A3   7B00         MOV     R3,#0x0
   \   0001A5   90....       MOV     DPTR,#zclLight_TaskID
   \   0001A8   E0           MOVX    A,@DPTR
   \   0001A9   F9           MOV     R1,A
   \   0001AA   12....       LCALL   ??osal_start_timerEx?relay
   \   0001AD   7404         MOV     A,#0x4
   \   0001AF   12....       LCALL   ?DEALLOC_XSTACK8
    199              }
    200          
    201              *events = *events ^ COLOR_PROCESS_EVT;
   \                     ??zclColor_process_10:
   \   0001B2   8E82         MOV     DPL,R6
   \   0001B4   8F83         MOV     DPH,R7
   \   0001B6   E0           MOVX    A,@DPTR
   \   0001B7   6410         XRL     A,#0x10
   \   0001B9   F0           MOVX    @DPTR,A
    202            }
    203          
    204            return;
   \                     ??zclColor_process_0:
   \   0001BA   02....       LJMP    ??Subroutine54_0 & 0xFFFF
    205          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   000003   E0           MOVX    A,@DPTR
   \   000004   2401         ADD     A,#0x1
   \   000006   F0           MOVX    @DPTR,A
   \   000007   A3           INC     DPTR
   \   000008   E0           MOVX    A,@DPTR
   \   000009   3400         ADDC    A,#0x0
   \   00000B   F0           MOVX    @DPTR,A
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   90....       MOV     DPTR,#zclColor_SaturationRemainingTime
   \   000003                REQUIRE ??Subroutine51_0
   \   000003                ; // Fall through to label ??Subroutine51_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine51_0:
   \   000000   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_139:
   \   000003   E8           MOV     A,R0
   \   000004   49           ORL     A,R1
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine42:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   22           RET
    206          
    207          /*********************************************************************
    208           * @fn          zclColor_process_color_loop_event
    209           *
    210           * @brief       color loop Event Processor for zclLighting.
    211           *              Move the hue according to the required direction and cycle time attributes,
    212           *              in steps of 100ms.
    213           *
    214           * @param       events vector
    215           *
    216           * @return      none
    217           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    218          void zclColor_processColorLoop( uint16 *events )
   \                     zclColor_processColorLoop:
    219          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    220            if ( *events & COLOR_LOOP_PROCESS_EVT )
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   E0           MOVX    A,@DPTR
   \   000013   5420         ANL     A,#0x20
   \   000015   7003         JNZ     $+5
   \   000017   02....       LJMP    ??zclColor_processColorLoop_0 & 0xFFFF
    221            {
    222              if ( zclColor_ColorLoopActive )
   \   00001A   90....       MOV     DPTR,#zclColor_ColorLoopActive
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   7003         JNZ     $+5
   \   000020   02....       LJMP    ??zclColor_processColorLoop_1 & 0xFFFF
    223              {
    224                uint16 indefiniteRemainingTime = 0xFFFF;
   \   000023   85..82       MOV     DPL,?XSP + 0
   \   000026   85..83       MOV     DPH,?XSP + 1
   \   000029   74FF         MOV     A,#-0x1
   \   00002B   F0           MOVX    @DPTR,A
   \   00002C   A3           INC     DPTR
   \   00002D   F0           MOVX    @DPTR,A
    225          
    226                hwLight_UpdateColorMode(COLOR_MODE_CURRENT_HUE_SATURATION);
   \   00002E                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   00002E   7900         MOV     R1,#0x0
   \   000030   12....       LCALL   ??hwLight_UpdateColorMode?relay
    227                zclColor_EnhancedCurrentHue_256 = (uint32)zclColor_EnhancedCurrentHue<<8;
   \   000033   90....       MOV     DPTR,#zclColor_EnhancedCurrentHue
   \   000036   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_55:
   \   000039   7C00         MOV     R4,#0x0
   \   00003B   E4           CLR     A
   \   00003C   CA           XCH     A,R2
   \   00003D   12....       LCALL   ?Subroutine6 & 0xFFFF
    228                zclColor_ColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    229                zclColor_EnhancedColorMode=ENHANCED_COLOR_MODE_ENHANCED_CURRENT_HUE_SATURATION;
    230          
    231                zclColor_StepEnhancedHue_256 = ((int32)COLOR_ENH_HUE_MAX<<8) / ( 10 * zclColor_ColorLoopTime );
   \                     ??CrossCallReturnLabel_4:
   \   000040   8A..         MOV     ?V0 + 4,R2
   \   000042   75..FF       MOV     ?V0 + 5,#-0x1
   \   000045   75..FF       MOV     ?V0 + 6,#-0x1
   \   000048   8A..         MOV     ?V0 + 7,R2
   \   00004A   90....       MOV     DPTR,#zclColor_ColorLoopTime
   \   00004D   12....       LCALL   ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_122:
   \   000050   E5..         MOV     A,?V0 + 0
   \   000052   75F00A       MOV     B,#0xa
   \   000055   A4           MUL     AB
   \   000056   F5..         MOV     ?V0 + 0,A
   \   000058   A8F0         MOV     R0,B
   \   00005A   75F00A       MOV     B,#0xa
   \   00005D   E5..         MOV     A,?V0 + 1
   \   00005F   A4           MUL     AB
   \   000060   28           ADD     A,R0
   \   000061   F5..         MOV     ?V0 + 1,A
   \   000063   E4           CLR     A
   \   000064   F5..         MOV     ?V0 + 2,A
   \   000066   F5..         MOV     ?V0 + 3,A
   \   000068   78..         MOV     R0,#?V0 + 4
   \   00006A   79..         MOV     R1,#?V0 + 0
   \   00006C   12....       LCALL   ?L_DIV_MOD
   \   00006F   90....       MOV     DPTR,#zclColor_StepEnhancedHue_256
   \   000072   78..         MOV     R0,#?V0 + 4
   \   000074   12....       LCALL   ?L_MOV_TO_X
    232                if ( zclColor_ColorLoopDirection == LIGHTING_COLOR_LOOP_DIRECTION_DECREMENT )
   \   000077   90....       MOV     DPTR,#zclColor_ColorLoopDirection
   \   00007A   E0           MOVX    A,@DPTR
   \   00007B   7015         JNZ     ??zclColor_processColorLoop_2
    233                {
    234                  zclColor_StepEnhancedHue_256 = -zclColor_StepEnhancedHue_256;
   \   00007D   90....       MOV     DPTR,#zclColor_StepEnhancedHue_256
   \   000080   78..         MOV     R0,#?V0 + 0
   \   000082   12....       LCALL   ?L_MOV_X
   \   000085   78..         MOV     R0,#?V0 + 0
   \   000087   12....       LCALL   ?L_NEG
   \   00008A   90....       MOV     DPTR,#zclColor_StepEnhancedHue_256
   \   00008D   78..         MOV     R0,#?V0 + 0
   \   00008F   12....       LCALL   ?L_MOV_TO_X
    235                }
    236          
    237                hwLight_ApplyUpdate16b( &zclColor_EnhancedCurrentHue,
    238                                        &zclColor_EnhancedCurrentHue_256,
    239                                        &zclColor_StepEnhancedHue_256,
    240                                        &indefiniteRemainingTime,
    241                                        COLOR_ENH_HUE_MIN, COLOR_ENH_HUE_MAX, TRUE);
   \                     ??zclColor_processColorLoop_2:
   \   000092                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   000092   75..FF       MOV     ?V0 + 0,#-0x1
   \   000095   75..FF       MOV     ?V0 + 1,#-0x1
   \   000098   78..         MOV     R0,#?V0 + 0
   \   00009A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00009D   E4           CLR     A
   \   00009E   F5..         MOV     ?V0 + 0,A
   \   0000A0   F5..         MOV     ?V0 + 1,A
   \   0000A2   78..         MOV     R0,#?V0 + 0
   \   0000A4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A7   7404         MOV     A,#0x4
   \   0000A9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000AC   8582..       MOV     ?V0 + 0,DPL
   \   0000AF   8583..       MOV     ?V0 + 1,DPH
   \   0000B2   78..         MOV     R0,#?V0 + 0
   \   0000B4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B7   75....       MOV     ?V0 + 0,#zclColor_StepEnhancedHue_256 & 0xff
   \   0000BA   75....       MOV     ?V0 + 1,#(zclColor_StepEnhancedHue_256 >> 8) & 0xff
   \   0000BD   78..         MOV     R0,#?V0 + 0
   \   0000BF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C2   7901         MOV     R1,#0x1
   \   0000C4   7C..         MOV     R4,#zclColor_EnhancedCurrentHue_256 & 0xff
   \   0000C6   7D..         MOV     R5,#(zclColor_EnhancedCurrentHue_256 >> 8) & 0xff
   \   0000C8   7A..         MOV     R2,#zclColor_EnhancedCurrentHue & 0xff
   \   0000CA   7B..         MOV     R3,#(zclColor_EnhancedCurrentHue >> 8) & 0xff
   \   0000CC   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   0000CF   7408         MOV     A,#0x8
   \   0000D1   12....       LCALL   ?DEALLOC_XSTACK8
    242          
    243                //set a timer to make the change over 100ms
    244                osal_start_timerEx( zclLight_TaskID, COLOR_LOOP_PROCESS_EVT , 100 );
   \   0000D4                ; Setup parameters for call to function osal_start_timerEx
   \   0000D4   90....       MOV     DPTR,#__Constant_64
   \   0000D7   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0000DA   7A20         MOV     R2,#0x20
   \   0000DC   7B00         MOV     R3,#0x0
   \   0000DE   90....       MOV     DPTR,#zclLight_TaskID
   \   0000E1   E0           MOVX    A,@DPTR
   \   0000E2   F9           MOV     R1,A
   \   0000E3   12....       LCALL   ??osal_start_timerEx?relay
   \   0000E6   7404         MOV     A,#0x4
   \   0000E8   12....       LCALL   ?DEALLOC_XSTACK8
    245              }
    246              *events = *events ^ COLOR_LOOP_PROCESS_EVT;
   \                     ??zclColor_processColorLoop_1:
   \   0000EB   8E82         MOV     DPL,R6
   \   0000ED   8F83         MOV     DPH,R7
   \   0000EF   E0           MOVX    A,@DPTR
   \   0000F0   6420         XRL     A,#0x20
   \   0000F2   F0           MOVX    @DPTR,A
    247            }
    248          
    249            return;
   \                     ??zclColor_processColorLoop_0:
   \   0000F3   7402         MOV     A,#0x2
   \   0000F5   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000F8   02....       LJMP    ?Subroutine1 & 0xFFFF
    250          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine48:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F5..         MOV     ?V0 + 0,A
   \   000003   A3           INC     DPTR
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F5..         MOV     ?V0 + 1,A
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine46:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   EB           MOV     A,R3
   \   000003   F0           MOVX    @DPTR,A
   \   000004   A3           INC     DPTR
   \   000005   EC           MOV     A,R4
   \   000006   F0           MOVX    @DPTR,A
   \   000007   A3           INC     DPTR
   \   000008   E4           CLR     A
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   7F08         MOV     R7,#0x8
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine31:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FB           MOV     R3,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   12....       LCALL   ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_67:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine37:
   \   000000   CB           XCH     A,R3
   \   000001   CC           XCH     A,R4
   \   000002   90....       MOV     DPTR,#zclColor_EnhancedCurrentHue_256
   \   000005   12....       LCALL   ?Subroutine46 & 0xFFFF
   \                     ??CrossCallReturnLabel_80:
   \   000008   90....       MOV     DPTR,#zclColor_ColorMode
   \   00000B   F0           MOVX    @DPTR,A
   \   00000C   90....       MOV     DPTR,#zclColor_EnhancedColorMode
   \   00000F   7403         MOV     A,#0x3
   \   000011   F0           MOVX    @DPTR,A
   \   000012   22           RET
    251          
    252          /*********************************************************************
    253           * @fn      zclColor_MoveToColorCB
    254           *
    255           * @brief   This callback is called to process a move to color
    256           *          Request command.
    257           *
    258           * @param   pCmd - command
    259           *
    260           * @return  status
    261           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    262          ZStatus_t zclColor_MoveToColorCB( zclCCMoveToColor_t *pCmd )
   \                     zclColor_MoveToColorCB:
    263          {
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    264            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_X_Y);
   \   000009                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000009   7901         MOV     R1,#0x1
   \   00000B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    265            zclColor_CurrentX_256 = ((int32)zclColor_CurrentX)<<8;
   \   00000E   90....       MOV     DPTR,#zclColor_CurrentX
   \   000011   12....       LCALL   ??Subroutine52_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_115:
   \   000014   AB..         MOV     R3,?V0 + 1
   \   000016   FC           MOV     R4,A
   \   000017   E5..         MOV     A,?V0 + 0
   \   000019   12....       LCALL   ?Subroutine11 & 0xFFFF
    266            zclColor_CurrentY_256 = ((int32)zclColor_CurrentY)<<8;
   \                     ??CrossCallReturnLabel_12:
   \   00001C   F5..         MOV     ?V0 + 4,A
   \   00001E   A3           INC     DPTR
   \   00001F   E0           MOVX    A,@DPTR
   \   000020   F5..         MOV     ?V0 + 5,A
   \   000022   E4           CLR     A
   \   000023   F5..         MOV     ?V0 + 6,A
   \   000025   F5..         MOV     ?V0 + 7,A
   \   000027   AB..         MOV     R3,?V0 + 5
   \   000029   FC           MOV     R4,A
   \   00002A   E5..         MOV     A,?V0 + 4
   \   00002C   12....       LCALL   ?Subroutine4 & 0xFFFF
    267            zclColor_ColorMode=COLOR_MODE_CURRENT_X_Y;
    268            zclColor_EnhancedColorMode=COLOR_MODE_CURRENT_X_Y;
    269          
    270            //if transition time = 0 then do immediately
    271            if ( pCmd->transitionTime == 0 )
   \                     ??CrossCallReturnLabel_0:
   \   00002F   7007         JNZ     ??zclColor_MoveToColorCB_0
    272            {
    273                zclColor_ColorRemainingTime = 1;
   \   000031   7401         MOV     A,#0x1
   \   000033   F0           MOVX    @DPTR,A
   \   000034   A3           INC     DPTR
   \   000035   E4           CLR     A
   \   000036   8004         SJMP    ??zclColor_MoveToColorCB_1
    274            }
    275            else
    276            {
    277              zclColor_ColorRemainingTime = pCmd->transitionTime;
   \                     ??zclColor_MoveToColorCB_0:
   \   000038   E8           MOV     A,R0
   \   000039   F0           MOVX    @DPTR,A
   \   00003A   A3           INC     DPTR
   \   00003B   E9           MOV     A,R1
   \                     ??zclColor_MoveToColorCB_1:
   \   00003C   F0           MOVX    @DPTR,A
    278            }
    279          
    280            zclColor_StepColorX_256 = ((int32)pCmd->colorX - zclColor_CurrentX)<<8;
    281            zclColor_StepColorX_256 /= (int32)zclColor_ColorRemainingTime;
   \   00003D   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F5..         MOV     ?V0 + 8,A
   \   000043   A3           INC     DPTR
   \   000044   E0           MOVX    A,@DPTR
   \   000045   F5..         MOV     ?V0 + 9,A
   \   000047   E4           CLR     A
   \   000048   F5..         MOV     ?V0 + 10,A
   \   00004A   F5..         MOV     ?V0 + 11,A
   \   00004C   8E82         MOV     DPL,R6
   \   00004E   8F83         MOV     DPH,R7
   \   000050   E0           MOVX    A,@DPTR
   \   000051   F5..         MOV     ?V0 + 12,A
   \   000053   A3           INC     DPTR
   \   000054   E0           MOVX    A,@DPTR
   \   000055   F5..         MOV     ?V0 + 13,A
   \   000057   E4           CLR     A
   \   000058   F5..         MOV     ?V0 + 14,A
   \   00005A   F5..         MOV     ?V0 + 15,A
   \   00005C   78..         MOV     R0,#?V0 + 12
   \   00005E   79..         MOV     R1,#?V0 + 0
   \   000060   12....       LCALL   ?L_SUB
   \   000063   7408         MOV     A,#0x8
   \   000065   78..         MOV     R0,#?V0 + 12
   \   000067   12....       LCALL   ?L_SHL
   \   00006A   85....       MOV     ?V0 + 0,?V0 + 8
   \   00006D   85....       MOV     ?V0 + 1,?V0 + 9
   \   000070   78..         MOV     R0,#?V0 + 12
   \   000072   79..         MOV     R1,#?V0 + 0
   \   000074   12....       LCALL   ?L_DIV_MOD
   \   000077   90....       MOV     DPTR,#zclColor_StepColorX_256
   \   00007A   78..         MOV     R0,#?V0 + 12
   \   00007C   12....       LCALL   ?L_MOV_TO_X
    282            zclColor_StepColorY_256 = ((int32)pCmd->colorY - zclColor_CurrentY)<<8;
    283            zclColor_StepColorY_256 /= (int32)zclColor_ColorRemainingTime;
   \   00007F   8E82         MOV     DPL,R6
   \   000081   8F83         MOV     DPH,R7
   \   000083   A3           INC     DPTR
   \   000084   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   000087   79..         MOV     R1,#?V0 + 4
   \   000089   12....       LCALL   ?L_SUB
   \   00008C   7408         MOV     A,#0x8
   \   00008E   78..         MOV     R0,#?V0 + 0
   \   000090   12....       LCALL   ?L_SHL
   \   000093   78..         MOV     R0,#?V0 + 0
   \   000095   79..         MOV     R1,#?V0 + 8
   \   000097   12....       LCALL   ?L_DIV_MOD
   \   00009A   90....       MOV     DPTR,#zclColor_StepColorY_256
   \   00009D   78..         MOV     R0,#?V0 + 0
   \   00009F   12....       LCALL   ?L_MOV_TO_X
    284          
    285            hwLight_ApplyUpdate16b( &zclColor_CurrentX,
    286                                    &zclColor_CurrentX_256,
    287                                    &zclColor_StepColorX_256,
    288                                    &zclColor_ColorRemainingTime,
    289                                    COLOR_XY_MIN, COLOR_XY_MAX, FALSE );
   \   0000A2                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   0000A2   75..FF       MOV     ?V0 + 0,#-0x1
   \   0000A5   75..FE       MOV     ?V0 + 1,#-0x2
   \   0000A8   78..         MOV     R0,#?V0 + 0
   \   0000AA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000AD   E4           CLR     A
   \   0000AE   F5..         MOV     ?V0 + 0,A
   \   0000B0   F5..         MOV     ?V0 + 1,A
   \   0000B2   78..         MOV     R0,#?V0 + 0
   \   0000B4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B7   75....       MOV     ?V0 + 0,#zclColor_ColorRemainingTime & 0xff
   \   0000BA   75....       MOV     ?V0 + 1,#(zclColor_ColorRemainingTime >> 8) & 0xff
   \   0000BD   78..         MOV     R0,#?V0 + 0
   \   0000BF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C2   75....       MOV     ?V0 + 0,#zclColor_StepColorX_256 & 0xff
   \   0000C5   75....       MOV     ?V0 + 1,#(zclColor_StepColorX_256 >> 8) & 0xff
   \   0000C8   78..         MOV     R0,#?V0 + 0
   \   0000CA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000CD   7900         MOV     R1,#0x0
   \   0000CF   7C..         MOV     R4,#zclColor_CurrentX_256 & 0xff
   \   0000D1   7D..         MOV     R5,#(zclColor_CurrentX_256 >> 8) & 0xff
   \   0000D3   7A..         MOV     R2,#zclColor_CurrentX & 0xff
   \   0000D5   7B..         MOV     R3,#(zclColor_CurrentX >> 8) & 0xff
   \   0000D7   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   0000DA   7408         MOV     A,#0x8
   \   0000DC   12....       LCALL   ?DEALLOC_XSTACK8
    290            if ( zclColor_ColorRemainingTime != 0xFFFF )
   \   0000DF   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   0000E2   E0           MOVX    A,@DPTR
   \   0000E3   F4           CPL     A
   \   0000E4   7003         JNZ     ??zclColor_MoveToColorCB_2
   \   0000E6   A3           INC     DPTR
   \   0000E7   E0           MOVX    A,@DPTR
   \   0000E8   F4           CPL     A
   \                     ??zclColor_MoveToColorCB_2:
   \   0000E9   6003         JZ      ??CrossCallReturnLabel_33
    291            {
    292              zclColor_ColorRemainingTime++;
   \   0000EB   12....       LCALL   ?Subroutine18 & 0xFFFF
    293            }
    294            hwLight_ApplyUpdate16b( &zclColor_CurrentY,
    295                                    &zclColor_CurrentY_256,
    296                                    &zclColor_StepColorY_256,
    297                                    &zclColor_ColorRemainingTime,
    298                                    COLOR_XY_MIN, COLOR_XY_MAX, FALSE );
   \                     ??CrossCallReturnLabel_33:
   \   0000EE                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   0000EE   75..FF       MOV     ?V0 + 0,#-0x1
   \   0000F1   75..FE       MOV     ?V0 + 1,#-0x2
   \   0000F4   78..         MOV     R0,#?V0 + 0
   \   0000F6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F9   E4           CLR     A
   \   0000FA   F5..         MOV     ?V0 + 0,A
   \   0000FC   F5..         MOV     ?V0 + 1,A
   \   0000FE   78..         MOV     R0,#?V0 + 0
   \   000100   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000103   75....       MOV     ?V0 + 0,#zclColor_ColorRemainingTime & 0xff
   \   000106   75....       MOV     ?V0 + 1,#(zclColor_ColorRemainingTime >> 8) & 0xff
   \   000109   78..         MOV     R0,#?V0 + 0
   \   00010B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00010E   75....       MOV     ?V0 + 0,#zclColor_StepColorY_256 & 0xff
   \   000111   75....       MOV     ?V0 + 1,#(zclColor_StepColorY_256 >> 8) & 0xff
   \   000114   78..         MOV     R0,#?V0 + 0
   \   000116   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000119   7900         MOV     R1,#0x0
   \   00011B   7C..         MOV     R4,#zclColor_CurrentY_256 & 0xff
   \   00011D   7D..         MOV     R5,#(zclColor_CurrentY_256 >> 8) & 0xff
   \   00011F   7A..         MOV     R2,#zclColor_CurrentY & 0xff
   \   000121   7B..         MOV     R3,#(zclColor_CurrentY >> 8) & 0xff
   \   000123   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   000126   7408         MOV     A,#0x8
   \   000128   12....       LCALL   ?DEALLOC_XSTACK8
    299          
    300            if ( zclColor_ColorRemainingTime )
   \   00012B   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   00012E   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_98:
   \   000131   6017         JZ      ??zclColor_MoveToColorCB_3
    301            {
    302              //set a timer to make the change over 100ms
    303              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100 );
   \   000133                ; Setup parameters for call to function osal_start_timerEx
   \   000133   90....       MOV     DPTR,#__Constant_64
   \   000136   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000139   7A10         MOV     R2,#0x10
   \   00013B   7B00         MOV     R3,#0x0
   \   00013D   90....       MOV     DPTR,#zclLight_TaskID
   \   000140   E0           MOVX    A,@DPTR
   \   000141   F9           MOV     R1,A
   \   000142   12....       LCALL   ??osal_start_timerEx?relay
   \   000145   7404         MOV     A,#0x4
   \   000147   12....       LCALL   ?DEALLOC_XSTACK8
    304            }
    305          
    306            return ( ZSuccess );
   \                     ??zclColor_MoveToColorCB_3:
   \   00014A   7900         MOV     R1,#0x0
   \   00014C   7F10         MOV     R7,#0x10
   \   00014E   02....       LJMP    ?BANKED_LEAVE_XDATA
    307          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   CB           XCH     A,R3
   \   000001   CC           XCH     A,R4
   \   000002   90....       MOV     DPTR,#zclColor_CurrentX_256
   \   000005   12....       LCALL   ?Subroutine39 & 0xFFFF
   \                     ??CrossCallReturnLabel_71:
   \   000008   90....       MOV     DPTR,#zclColor_CurrentY
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   CB           XCH     A,R3
   \   000001   CC           XCH     A,R4
   \   000002   90....       MOV     DPTR,#zclColor_CurrentY_256
   \   000005   12....       LCALL   ?Subroutine39 & 0xFFFF
   \                     ??CrossCallReturnLabel_70:
   \   000008   90....       MOV     DPTR,#zclColor_ColorMode
   \   00000B   04           INC     A
   \   00000C   F0           MOVX    @DPTR,A
   \   00000D   90....       MOV     DPTR,#zclColor_EnhancedColorMode
   \   000010   12....       LCALL   ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_88:
   \   000013   A3           INC     DPTR
   \   000014   A3           INC     DPTR
   \   000015   A3           INC     DPTR
   \   000016   A3           INC     DPTR
   \   000017   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_135:
   \   00001A   E8           MOV     A,R0
   \   00001B   49           ORL     A,R1
   \   00001C   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   00001F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine39:
   \   000000   12....       LCALL   ?Subroutine46 & 0xFFFF
   \                     ??CrossCallReturnLabel_81:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine47:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8E82         MOV     DPL,R6
   \   000003   8F83         MOV     DPH,R7
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine52_0:
   \   000000   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_121:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine41:
   \   000000   12....       LCALL   ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_124:
   \   000003   E4           CLR     A
   \   000004   F5..         MOV     ?V0 + 2,A
   \   000006   F5..         MOV     ?V0 + 3,A
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine25:
   \   000000   A3           INC     DPTR
   \   000001   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_120:
   \   000004   78..         MOV     R0,#?V0 + 0
   \   000006   22           RET
    308          
    309          /*********************************************************************
    310           * @fn      zclColor_MoveColorCB
    311           *
    312           * @brief   Callback from the ZCL Lighting Cluster Library when
    313           *          it received a Color Control - Move Color Command for
    314           *          this application.
    315           *
    316           * @param   rateX - the movement in steps per second for x, where step is a
    317           *                 change in the device's x of one unit
    318           * @param   rateY - the movement in steps per second for y, where step is a
    319           *                 change in the device's y of one unit
    320           *
    321           * @return  none
    322           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    323          void zclColor_MoveColorCB( zclCCMoveColor_t *pCmd )
   \                     zclColor_MoveColorCB:
    324          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
    325            zclColor_StepColorX_256 = (((int32)pCmd->rateX)<<8)/10;
   \   000005   8A82         MOV     DPL,R2
   \   000007   8B83         MOV     DPH,R3
   \   000009   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_39:
   \   00000C   12....       LCALL   ?L_SHL
   \   00000F   90....       MOV     DPTR,#__Constant_a
   \   000012   78..         MOV     R0,#?V0 + 4
   \   000014   12....       LCALL   ?L_MOV_X
   \   000017   78..         MOV     R0,#?V0 + 0
   \   000019   79..         MOV     R1,#?V0 + 4
   \   00001B   12....       LCALL   ?L_DIV_MOD
   \   00001E   90....       MOV     DPTR,#zclColor_StepColorX_256
   \   000021   78..         MOV     R0,#?V0 + 0
   \   000023   12....       LCALL   ?L_MOV_TO_X
    326            zclColor_StepColorY_256 = (((int32)pCmd->rateY)<<8)/10;
   \   000026   8A82         MOV     DPL,R2
   \   000028   8B83         MOV     DPH,R3
   \   00002A   A3           INC     DPTR
   \   00002B   A3           INC     DPTR
   \   00002C   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_40:
   \   00002F   12....       LCALL   ?L_SHL
   \   000032   90....       MOV     DPTR,#__Constant_a
   \   000035   78..         MOV     R0,#?V0 + 4
   \   000037   12....       LCALL   ?L_MOV_X
   \   00003A   78..         MOV     R0,#?V0 + 0
   \   00003C   79..         MOV     R1,#?V0 + 4
   \   00003E   12....       LCALL   ?L_DIV_MOD
   \   000041   90....       MOV     DPTR,#zclColor_StepColorY_256
   \   000044   78..         MOV     R0,#?V0 + 0
   \   000046   12....       LCALL   ?L_MOV_TO_X
    327          
    328            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_X_Y);
   \   000049                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000049   7901         MOV     R1,#0x1
   \   00004B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    329            zclColor_CurrentX_256 = ((int32)zclColor_CurrentX)<<8;
   \   00004E   90....       MOV     DPTR,#zclColor_CurrentX
   \   000051   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   000054   90....       MOV     DPTR,#zclColor_CurrentX_256
   \   000057   12....       LCALL   ?Subroutine17 & 0xFFFF
    330            zclColor_CurrentY_256 = ((int32)zclColor_CurrentY)<<8;
   \                     ??CrossCallReturnLabel_30:
   \   00005A   90....       MOV     DPTR,#zclColor_CurrentY
   \   00005D   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   000060   90....       MOV     DPTR,#zclColor_CurrentY_256
   \   000063   12....       LCALL   ?Subroutine17 & 0xFFFF
    331            zclColor_ColorMode=COLOR_MODE_CURRENT_X_Y;
   \                     ??CrossCallReturnLabel_31:
   \   000066   90....       MOV     DPTR,#zclColor_ColorMode
   \   000069   04           INC     A
   \   00006A   F0           MOVX    @DPTR,A
    332            zclColor_EnhancedColorMode=COLOR_MODE_CURRENT_X_Y;
   \   00006B   90....       MOV     DPTR,#zclColor_EnhancedColorMode
   \   00006E   F0           MOVX    @DPTR,A
    333          
    334            //Change for ever - level stop call back will stop this command
    335            zclColor_ColorRemainingTime = 0xFFFF;
   \   00006F   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   000072   74FF         MOV     A,#-0x1
   \   000074   F0           MOVX    @DPTR,A
   \   000075   A3           INC     DPTR
   \   000076   F0           MOVX    @DPTR,A
    336          
    337            hwLight_ApplyUpdate16b( &zclColor_CurrentX,
    338                                    &zclColor_CurrentX_256,
    339                                    &zclColor_StepColorX_256,
    340                                    &zclColor_ColorRemainingTime,
    341                                    COLOR_XY_MIN, COLOR_XY_MAX, FALSE );
   \   000077                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   000077   F5..         MOV     ?V0 + 0,A
   \   000079   75..FE       MOV     ?V0 + 1,#-0x2
   \   00007C   78..         MOV     R0,#?V0 + 0
   \   00007E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000081   E4           CLR     A
   \   000082   F5..         MOV     ?V0 + 0,A
   \   000084   F5..         MOV     ?V0 + 1,A
   \   000086   78..         MOV     R0,#?V0 + 0
   \   000088   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00008B   75....       MOV     ?V0 + 0,#zclColor_ColorRemainingTime & 0xff
   \   00008E   75....       MOV     ?V0 + 1,#(zclColor_ColorRemainingTime >> 8) & 0xff
   \   000091   78..         MOV     R0,#?V0 + 0
   \   000093   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000096   75....       MOV     ?V0 + 0,#zclColor_StepColorX_256 & 0xff
   \   000099   75....       MOV     ?V0 + 1,#(zclColor_StepColorX_256 >> 8) & 0xff
   \   00009C   78..         MOV     R0,#?V0 + 0
   \   00009E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A1   7900         MOV     R1,#0x0
   \   0000A3   7C..         MOV     R4,#zclColor_CurrentX_256 & 0xff
   \   0000A5   7D..         MOV     R5,#(zclColor_CurrentX_256 >> 8) & 0xff
   \   0000A7   7A..         MOV     R2,#zclColor_CurrentX & 0xff
   \   0000A9   7B..         MOV     R3,#(zclColor_CurrentX >> 8) & 0xff
   \   0000AB   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   0000AE   7408         MOV     A,#0x8
   \   0000B0   12....       LCALL   ?DEALLOC_XSTACK8
    342            hwLight_ApplyUpdate16b( &zclColor_CurrentY,
    343                                    &zclColor_CurrentY_256,
    344                                    &zclColor_StepColorY_256,
    345                                    &zclColor_ColorRemainingTime,
    346                                    COLOR_XY_MIN, COLOR_XY_MAX, FALSE );
   \   0000B3                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   0000B3   75..FF       MOV     ?V0 + 0,#-0x1
   \   0000B6   75..FE       MOV     ?V0 + 1,#-0x2
   \   0000B9   78..         MOV     R0,#?V0 + 0
   \   0000BB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000BE   E4           CLR     A
   \   0000BF   F5..         MOV     ?V0 + 0,A
   \   0000C1   F5..         MOV     ?V0 + 1,A
   \   0000C3   78..         MOV     R0,#?V0 + 0
   \   0000C5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C8   75....       MOV     ?V0 + 0,#zclColor_ColorRemainingTime & 0xff
   \   0000CB   75....       MOV     ?V0 + 1,#(zclColor_ColorRemainingTime >> 8) & 0xff
   \   0000CE   78..         MOV     R0,#?V0 + 0
   \   0000D0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000D3   75....       MOV     ?V0 + 0,#zclColor_StepColorY_256 & 0xff
   \   0000D6   75....       MOV     ?V0 + 1,#(zclColor_StepColorY_256 >> 8) & 0xff
   \   0000D9   78..         MOV     R0,#?V0 + 0
   \   0000DB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000DE   7900         MOV     R1,#0x0
   \   0000E0   7C..         MOV     R4,#zclColor_CurrentY_256 & 0xff
   \   0000E2   7D..         MOV     R5,#(zclColor_CurrentY_256 >> 8) & 0xff
   \   0000E4   7A..         MOV     R2,#zclColor_CurrentY & 0xff
   \   0000E6   7B..         MOV     R3,#(zclColor_CurrentY >> 8) & 0xff
   \   0000E8   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   0000EB   7408         MOV     A,#0x8
   \   0000ED   12....       LCALL   ?DEALLOC_XSTACK8
    347          
    348            if ( zclColor_ColorRemainingTime )
   \   0000F0   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   0000F3   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_99:
   \   0000F6   6017         JZ      ??zclColor_MoveColorCB_0
    349            {
    350              //set a timer to make the change over 100ms
    351              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100 );
   \   0000F8                ; Setup parameters for call to function osal_start_timerEx
   \   0000F8   90....       MOV     DPTR,#__Constant_64
   \   0000FB   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0000FE   7A10         MOV     R2,#0x10
   \   000100   7B00         MOV     R3,#0x0
   \   000102   90....       MOV     DPTR,#zclLight_TaskID
   \   000105   E0           MOVX    A,@DPTR
   \   000106   F9           MOV     R1,A
   \   000107   12....       LCALL   ??osal_start_timerEx?relay
   \   00010A   7404         MOV     A,#0x4
   \   00010C   12....       LCALL   ?DEALLOC_XSTACK8
    352            }
    353          
    354            return;
   \                     ??zclColor_MoveColorCB_0:
   \   00010F   02....       LJMP    ?Subroutine1 & 0xFFFF
    355          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine28:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FC           MOV     R4,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FD           MOV     R5,A
   \   000005   7E00         MOV     R6,#0x0
   \   000007   EC           MOV     A,R4
   \   000008   CD           XCH     A,R5
   \   000009   CE           XCH     A,R6
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   12....       LCALL   ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_123:
   \   000003   33           RLC     A
   \   000004   95E0         SUBB    A,0xE0 /* A   */
   \   000006   F5..         MOV     ?V0 + 2,A
   \   000008   F5..         MOV     ?V0 + 3,A
   \   00000A   7408         MOV     A,#0x8
   \   00000C   78..         MOV     R0,#?V0 + 0
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   ED           MOV     A,R5
   \   000003   F0           MOVX    @DPTR,A
   \   000004   A3           INC     DPTR
   \   000005   EE           MOV     A,R6
   \   000006   F0           MOVX    @DPTR,A
   \   000007   A3           INC     DPTR
   \   000008   E4           CLR     A
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   22           RET
    356          
    357          /*********************************************************************
    358           * @fn      zclColor_StepColorCB
    359           *
    360           * @brief   Callback from the ZCL Lighting Cluster Library when
    361           *          it received a Color Control -  Step Color Command for
    362           *          this application.
    363           *
    364           * @param   stepX          - X step size
    365           * @param   stepY          - Y step size
    366           * @param   transitionTime - time to perform a single step in 1/10 of second
    367           *
    368           * @return  status
    369           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    370          ZStatus_t zclColor_StepColorCB( zclCCStepColor_t *pCmd )
   \                     zclColor_StepColorCB:
    371          {
   \   000000   74EC         MOV     A,#-0x14
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 20
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    372            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_X_Y);
   \   000009                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000009   7901         MOV     R1,#0x1
   \   00000B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    373            zclColor_CurrentX_256 = ((int32)zclColor_CurrentX)<<8;
   \   00000E   90....       MOV     DPTR,#zclColor_CurrentX
   \   000011   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_53:
   \   000014   12....       LCALL   ?Subroutine11 & 0xFFFF
    374            zclColor_CurrentY_256 = ((int32)zclColor_CurrentY)<<8;
   \                     ??CrossCallReturnLabel_13:
   \   000017   FA           MOV     R2,A
   \   000018   A3           INC     DPTR
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   FB           MOV     R3,A
   \   00001B   7C00         MOV     R4,#0x0
   \   00001D   EA           MOV     A,R2
   \   00001E   12....       LCALL   ?Subroutine4 & 0xFFFF
    375            zclColor_ColorMode=COLOR_MODE_CURRENT_X_Y;
    376            zclColor_EnhancedColorMode=COLOR_MODE_CURRENT_X_Y;
    377          
    378            if ( pCmd->transitionTime == 0 )
   \                     ??CrossCallReturnLabel_1:
   \   000021   7007         JNZ     ??zclColor_StepColorCB_0
    379            {
    380              zclColor_ColorRemainingTime = 1;
   \   000023   7401         MOV     A,#0x1
   \   000025   F0           MOVX    @DPTR,A
   \   000026   A3           INC     DPTR
   \   000027   E4           CLR     A
   \   000028   8004         SJMP    ??zclColor_StepColorCB_1
    381            }
    382            else
    383            {
    384              zclColor_ColorRemainingTime = pCmd->transitionTime;
   \                     ??zclColor_StepColorCB_0:
   \   00002A   E8           MOV     A,R0
   \   00002B   F0           MOVX    @DPTR,A
   \   00002C   A3           INC     DPTR
   \   00002D   E9           MOV     A,R1
   \                     ??zclColor_StepColorCB_1:
   \   00002E   F0           MOVX    @DPTR,A
    385            }
    386          
    387            zclColor_StepColorX_256 = ((((int32)pCmd->stepX)<<8) / zclColor_ColorRemainingTime);
   \   00002F   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   000032   12....       LCALL   ??Subroutine52_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_116:
   \   000035   8E82         MOV     DPL,R6
   \   000037   8F83         MOV     DPH,R7
   \   000039   12....       LCALL   ?Subroutine43 & 0xFFFF
   \                     ??CrossCallReturnLabel_72:
   \   00003C   85....       MOV     ?V0 + 8,?V0 + 4
   \   00003F   F5..         MOV     ?V0 + 9,A
   \   000041   33           RLC     A
   \   000042   95E0         SUBB    A,0xE0 /* A   */
   \   000044   F5..         MOV     ?V0 + 10,A
   \   000046   F5..         MOV     ?V0 + 11,A
   \   000048   7408         MOV     A,#0x8
   \   00004A   78..         MOV     R0,#?V0 + 8
   \   00004C   12....       LCALL   ?L_SHL
   \   00004F   85....       MOV     ?V0 + 4,?V0 + 0
   \   000052   85....       MOV     ?V0 + 5,?V0 + 1
   \   000055   F5..         MOV     ?V0 + 6,A
   \   000057   F5..         MOV     ?V0 + 7,A
   \   000059   78..         MOV     R0,#?V0 + 8
   \   00005B   79..         MOV     R1,#?V0 + 4
   \   00005D   12....       LCALL   ?L_DIV_MOD
   \   000060   90....       MOV     DPTR,#zclColor_StepColorX_256
   \   000063   78..         MOV     R0,#?V0 + 8
   \   000065   12....       LCALL   ?L_MOV_TO_X
    388            zclColor_StepColorY_256 = ((((int32)pCmd->stepY)<<8) / zclColor_ColorRemainingTime);
   \   000068   8E82         MOV     DPL,R6
   \   00006A   8F83         MOV     DPH,R7
   \   00006C   A3           INC     DPTR
   \   00006D   A3           INC     DPTR
   \   00006E   12....       LCALL   ?Subroutine43 & 0xFFFF
   \                     ??CrossCallReturnLabel_73:
   \   000071   12....       LCALL   ?Subroutine35 & 0xFFFF
   \                     ??CrossCallReturnLabel_83:
   \   000074   12....       LCALL   ?L_SHL
   \   000077   78..         MOV     R0,#?V0 + 4
   \   000079   79..         MOV     R1,#?V0 + 0
   \   00007B   12....       LCALL   ?L_DIV_MOD
   \   00007E   90....       MOV     DPTR,#zclColor_StepColorY_256
   \   000081   78..         MOV     R0,#?V0 + 4
   \   000083   12....       LCALL   ?L_MOV_TO_X
    389          
    390            hwLight_ApplyUpdate16b( &zclColor_CurrentX,
    391                                    &zclColor_CurrentX_256,
    392                                    &zclColor_StepColorX_256,
    393                                    &zclColor_ColorRemainingTime,
    394                                    COLOR_XY_MIN, COLOR_XY_MAX, FALSE );
   \   000086                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   000086   75..FF       MOV     ?V0 + 0,#-0x1
   \   000089   75..FE       MOV     ?V0 + 1,#-0x2
   \   00008C   78..         MOV     R0,#?V0 + 0
   \   00008E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000091   E4           CLR     A
   \   000092   F5..         MOV     ?V0 + 0,A
   \   000094   F5..         MOV     ?V0 + 1,A
   \   000096   78..         MOV     R0,#?V0 + 0
   \   000098   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00009B   75....       MOV     ?V0 + 0,#zclColor_ColorRemainingTime & 0xff
   \   00009E   75....       MOV     ?V0 + 1,#(zclColor_ColorRemainingTime >> 8) & 0xff
   \   0000A1   78..         MOV     R0,#?V0 + 0
   \   0000A3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A6   75....       MOV     ?V0 + 0,#zclColor_StepColorX_256 & 0xff
   \   0000A9   75....       MOV     ?V0 + 1,#(zclColor_StepColorX_256 >> 8) & 0xff
   \   0000AC   78..         MOV     R0,#?V0 + 0
   \   0000AE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B1   7900         MOV     R1,#0x0
   \   0000B3   7C..         MOV     R4,#zclColor_CurrentX_256 & 0xff
   \   0000B5   7D..         MOV     R5,#(zclColor_CurrentX_256 >> 8) & 0xff
   \   0000B7   7A..         MOV     R2,#zclColor_CurrentX & 0xff
   \   0000B9   7B..         MOV     R3,#(zclColor_CurrentX >> 8) & 0xff
   \   0000BB   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   0000BE   7408         MOV     A,#0x8
   \   0000C0   12....       LCALL   ?DEALLOC_XSTACK8
    395            if ( zclColor_ColorRemainingTime != 0xFFFF )
   \   0000C3   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   0000C6   E0           MOVX    A,@DPTR
   \   0000C7   F4           CPL     A
   \   0000C8   7003         JNZ     ??zclColor_StepColorCB_2
   \   0000CA   A3           INC     DPTR
   \   0000CB   E0           MOVX    A,@DPTR
   \   0000CC   F4           CPL     A
   \                     ??zclColor_StepColorCB_2:
   \   0000CD   6003         JZ      ??CrossCallReturnLabel_34
    396            {
    397              zclColor_ColorRemainingTime++;
   \   0000CF   12....       LCALL   ?Subroutine18 & 0xFFFF
    398            }
    399            hwLight_ApplyUpdate16b( &zclColor_CurrentY,
    400                                    &zclColor_CurrentY_256,
    401                                    &zclColor_StepColorY_256,
    402                                    &zclColor_ColorRemainingTime,
    403                                    COLOR_XY_MIN, COLOR_XY_MAX, FALSE );
   \                     ??CrossCallReturnLabel_34:
   \   0000D2                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   0000D2   75..FF       MOV     ?V0 + 0,#-0x1
   \   0000D5   75..FE       MOV     ?V0 + 1,#-0x2
   \   0000D8   78..         MOV     R0,#?V0 + 0
   \   0000DA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000DD   E4           CLR     A
   \   0000DE   F5..         MOV     ?V0 + 0,A
   \   0000E0   F5..         MOV     ?V0 + 1,A
   \   0000E2   78..         MOV     R0,#?V0 + 0
   \   0000E4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E7   75....       MOV     ?V0 + 0,#zclColor_ColorRemainingTime & 0xff
   \   0000EA   75....       MOV     ?V0 + 1,#(zclColor_ColorRemainingTime >> 8) & 0xff
   \   0000ED   78..         MOV     R0,#?V0 + 0
   \   0000EF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F2   75....       MOV     ?V0 + 0,#zclColor_StepColorY_256 & 0xff
   \   0000F5   75....       MOV     ?V0 + 1,#(zclColor_StepColorY_256 >> 8) & 0xff
   \   0000F8   78..         MOV     R0,#?V0 + 0
   \   0000FA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000FD   7900         MOV     R1,#0x0
   \   0000FF   7C..         MOV     R4,#zclColor_CurrentY_256 & 0xff
   \   000101   7D..         MOV     R5,#(zclColor_CurrentY_256 >> 8) & 0xff
   \   000103   7A..         MOV     R2,#zclColor_CurrentY & 0xff
   \   000105   7B..         MOV     R3,#(zclColor_CurrentY >> 8) & 0xff
   \   000107   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   00010A   7408         MOV     A,#0x8
   \   00010C   12....       LCALL   ?DEALLOC_XSTACK8
    404          
    405            if ( zclColor_ColorRemainingTime )
   \   00010F   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   000112   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_100:
   \   000115   6017         JZ      ??zclColor_StepColorCB_3
    406            {
    407              //set a timer to make the change over 100ms
    408              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100 );
   \   000117                ; Setup parameters for call to function osal_start_timerEx
   \   000117   90....       MOV     DPTR,#__Constant_64
   \   00011A   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00011D   7A10         MOV     R2,#0x10
   \   00011F   7B00         MOV     R3,#0x0
   \   000121   90....       MOV     DPTR,#zclLight_TaskID
   \   000124   E0           MOVX    A,@DPTR
   \   000125   F9           MOV     R1,A
   \   000126   12....       LCALL   ??osal_start_timerEx?relay
   \   000129   7404         MOV     A,#0x4
   \   00012B   12....       LCALL   ?DEALLOC_XSTACK8
    409            }
    410          
    411            return ( ZSuccess );
   \                     ??zclColor_StepColorCB_3:
   \   00012E   7900         MOV     R1,#0x0
   \   000130   7F0C         MOV     R7,#0xc
   \   000132   02....       LJMP    ?BANKED_LEAVE_XDATA
    412          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine35:
   \   000000   F5..         MOV     ?V0 + 5,A
   \   000002   33           RLC     A
   \   000003                REQUIRE ??Subroutine49_0
   \   000003                ; // Fall through to label ??Subroutine49_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine49_0:
   \   000000   95E0         SUBB    A,0xE0 /* A   */
   \   000002   F5..         MOV     ?V0 + 6,A
   \   000004   F5..         MOV     ?V0 + 7,A
   \   000006   7408         MOV     A,#0x8
   \   000008   78..         MOV     R0,#?V0 + 4
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine43:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F5..         MOV     ?V0 + 4,A
   \   000003   A3           INC     DPTR
   \   000004   E0           MOVX    A,@DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine30:
   \   000000   12....       LCALL   ?Subroutine44 & 0xFFFF
   \                     ??CrossCallReturnLabel_77:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine44:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FB           MOV     R3,A
   \   000005   7C00         MOV     R4,#0x0
   \   000007   EA           MOV     A,R2
   \   000008   22           RET
    413          
    414          /*********************************************************************
    415           * @fn      zclColor_MoveToSaturationCB
    416           *
    417           * @brief   Callback from the ZCL Lighting Cluster Library when
    418           *          it received a Color Control - Move to Hue Command for
    419           *          this application.
    420           *
    421           * @param   hue - target hue value
    422           * @param   direction
    423           * @param   transitionTime - in seconds
    424           *
    425           * @return  status
    426           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    427          ZStatus_t zclColor_MoveToSaturationCB( zclCCMoveToSaturation_t *pCmd )
   \                     zclColor_MoveToSaturationCB:
    428          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    429            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_HUE_SATURATION);
   \   000009                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000009   7900         MOV     R1,#0x0
   \   00000B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    430            zclColor_CurrentSaturation_256 = (uint16)zclColor_CurrentSaturation<<8;
   \   00000E   90....       MOV     DPTR,#zclColor_CurrentSaturation
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   90....       MOV     DPTR,#zclColor_CurrentSaturation_256
   \   000016   12....       LCALL   ?Subroutine14 & 0xFFFF
    431            zclColor_ColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    432            zclColor_EnhancedColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    433          
    434            //if transition time = 0 then do immediately
    435            if( pCmd->transitionTime == 0)
   \                     ??CrossCallReturnLabel_18:
   \   000019   8E82         MOV     DPL,R6
   \   00001B   8F83         MOV     DPH,R7
   \   00001D   A3           INC     DPTR
   \   00001E   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_101:
   \   000021   90....       MOV     DPTR,#zclColor_SaturationRemainingTime
   \   000024   7007         JNZ     ??zclColor_MoveToSaturationCB_0
    436            {
    437              zclColor_SaturationRemainingTime = 1;
   \   000026   7401         MOV     A,#0x1
   \   000028   F0           MOVX    @DPTR,A
   \   000029   A3           INC     DPTR
   \   00002A   E4           CLR     A
   \   00002B   8004         SJMP    ??zclColor_MoveToSaturationCB_1
    438            }
    439            else
    440            {
    441              zclColor_SaturationRemainingTime = pCmd->transitionTime;
   \                     ??zclColor_MoveToSaturationCB_0:
   \   00002D   E8           MOV     A,R0
   \   00002E   F0           MOVX    @DPTR,A
   \   00002F   A3           INC     DPTR
   \   000030   E9           MOV     A,R1
    442            }
   \                     ??zclColor_MoveToSaturationCB_1:
   \   000031   12....       LCALL   ??Subroutine50_0 & 0xFFFF
    443          
    444            zclColor_StepSaturation_256 = ((int32)(pCmd->saturation - zclColor_CurrentSaturation))<<8;
    445            zclColor_StepSaturation_256 /= (int32)zclColor_SaturationRemainingTime;
   \                     ??CrossCallReturnLabel_87:
   \   000034   F8           MOV     R0,A
   \   000035   90....       MOV     DPTR,#zclColor_CurrentSaturation
   \   000038   E0           MOVX    A,@DPTR
   \   000039   FA           MOV     R2,A
   \   00003A   E8           MOV     A,R0
   \   00003B   C3           CLR     C
   \   00003C   9A           SUBB    A,R2
   \   00003D   F5..         MOV     ?V0 + 0,A
   \   00003F   95E0         SUBB    A,0xE0 /* A   */
   \   000041   85....       MOV     ?V0 + 4,?V0 + 0
   \   000044   F5..         MOV     ?V0 + 5,A
   \   000046   12....       LCALL   ??Subroutine49_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_82:
   \   000049   12....       LCALL   ?L_SHL
   \   00004C   90....       MOV     DPTR,#zclColor_SaturationRemainingTime
   \   00004F   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   000052   12....       LCALL   ?L_DIV_MOD
   \   000055   90....       MOV     DPTR,#zclColor_StepSaturation_256
   \   000058   78..         MOV     R0,#?V0 + 4
   \   00005A   12....       LCALL   ?L_MOV_TO_X
    446          
    447            hwLight_ApplyUpdate( &zclColor_CurrentSaturation,
    448                                 &zclColor_CurrentSaturation_256,
    449                                 &zclColor_StepSaturation_256,
    450                                 &zclColor_SaturationRemainingTime,
    451                                 COLOR_SAT_MIN, COLOR_SAT_MAX, FALSE );
   \   00005D                ; Setup parameters for call to function hwLight_ApplyUpdate
   \   00005D   75..00       MOV     ?V0 + 0,#0x0
   \   000060   78..         MOV     R0,#?V0 + 0
   \   000062   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000065   75..FE       MOV     ?V0 + 0,#-0x2
   \   000068   78..         MOV     R0,#?V0 + 0
   \   00006A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00006D   75....       MOV     ?V0 + 0,#zclColor_SaturationRemainingTime & 0xff
   \   000070   75....       MOV     ?V0 + 1,#(zclColor_SaturationRemainingTime >> 8) & 0xff
   \   000073   78..         MOV     R0,#?V0 + 0
   \   000075   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000078   75....       MOV     ?V0 + 0,#zclColor_StepSaturation_256 & 0xff
   \   00007B   75....       MOV     ?V0 + 1,#(zclColor_StepSaturation_256 >> 8) & 0xff
   \   00007E   78..         MOV     R0,#?V0 + 0
   \   000080   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000083   7900         MOV     R1,#0x0
   \   000085   7C..         MOV     R4,#zclColor_CurrentSaturation_256 & 0xff
   \   000087   7D..         MOV     R5,#(zclColor_CurrentSaturation_256 >> 8) & 0xff
   \   000089   7A..         MOV     R2,#zclColor_CurrentSaturation & 0xff
   \   00008B   7B..         MOV     R3,#(zclColor_CurrentSaturation >> 8) & 0xff
   \   00008D   12....       LCALL   ??hwLight_ApplyUpdate?relay
   \   000090   7406         MOV     A,#0x6
   \   000092   12....       LCALL   ?DEALLOC_XSTACK8
    452          
    453            if ( zclColor_SaturationRemainingTime )
   \   000095   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_112:
   \   000098   6017         JZ      ??zclColor_MoveToSaturationCB_2
    454            {
    455              //set a timer to make the change over 100ms
    456              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100 );
   \   00009A                ; Setup parameters for call to function osal_start_timerEx
   \   00009A   90....       MOV     DPTR,#__Constant_64
   \   00009D   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0000A0   7A10         MOV     R2,#0x10
   \   0000A2   7B00         MOV     R3,#0x0
   \   0000A4   90....       MOV     DPTR,#zclLight_TaskID
   \   0000A7   E0           MOVX    A,@DPTR
   \   0000A8   F9           MOV     R1,A
   \   0000A9   12....       LCALL   ??osal_start_timerEx?relay
   \   0000AC   7404         MOV     A,#0x4
   \   0000AE   12....       LCALL   ?DEALLOC_XSTACK8
    457            }
    458          
    459            return ( ZSuccess );
   \                     ??zclColor_MoveToSaturationCB_2:
   \   0000B1   7900         MOV     R1,#0x0
   \   0000B3                REQUIRE ?Subroutine1
   \   0000B3                ; // Fall through to label ?Subroutine1
    460          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_119:
   \   000003   78..         MOV     R0,#?V0 + 4
   \   000005   79..         MOV     R1,#?V0 + 0
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine50_0:
   \   000000   12....       LCALL   ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_89:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   12....       LCALL   ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_78:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine45:
   \   000000   E4           CLR     A
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004   F0           MOVX    @DPTR,A
   \   000005   90....       MOV     DPTR,#zclColor_ColorMode
   \   000008   E4           CLR     A
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   90....       MOV     DPTR,#zclColor_EnhancedColorMode
   \   00000D   F0           MOVX    @DPTR,A
   \   00000E   22           RET
    461          
    462          /*********************************************************************
    463           * @fn      zclColor_MoveSaturationCB
    464           *
    465           * @brief   Callback from the ZCL Lighting Cluster Library when
    466           *          it received a Color Control - Move Hue Command for
    467           *          this application.
    468           *
    469           * @param   moveMode - LIGHTING_MOVE_HUE_STOP, LIGHTING_MOVE_HUE_UP, or
    470           *                     LIGHTING_MOVE_HUE_DOWN
    471           * @param   rate - the movement in steps per second, where step is a
    472           *                 change in the device's hue of one unit
    473           *
    474           * @return  status
    475           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    476          ZStatus_t zclColor_MoveSaturationCB( zclCCMoveSaturation_t *pCmd )
   \                     zclColor_MoveSaturationCB:
    477          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    478            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_HUE_SATURATION);
   \   000009                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000009   7900         MOV     R1,#0x0
   \   00000B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    479            zclColor_CurrentSaturation_256 = (uint16)zclColor_CurrentSaturation<<8;
   \   00000E   90....       MOV     DPTR,#zclColor_CurrentSaturation
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   90....       MOV     DPTR,#zclColor_CurrentSaturation_256
   \   000016   12....       LCALL   ?Subroutine10 & 0xFFFF
    480            zclColor_ColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    481            zclColor_EnhancedColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    482          
    483            switch (pCmd->moveMode)
   \                     ??CrossCallReturnLabel_10:
   \   000019   7003         JNZ     $+5
   \   00001B   02....       LJMP    ??zclColor_MoveSaturationCB_0 & 0xFFFF
   \   00001E   14           DEC     A
   \   00001F   6007         JZ      ??zclColor_MoveSaturationCB_1
   \   000021   24FE         ADD     A,#-0x2
   \   000023   6074         JZ      ??zclColor_MoveSaturationCB_2
   \   000025   02....       LJMP    ??zclColor_MoveSaturationCB_3 & 0xFFFF
    484            {
    485              case LIGHTING_MOVE_SATURATION_UP:
    486                zclColor_StepSaturation_256 = (((int32)pCmd->rate)<<8)/10;
   \                     ??zclColor_MoveSaturationCB_1:
   \   000028   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   00002B   12....       LCALL   ?US_DIV_MOD
   \   00002E   E8           MOV     A,R0
   \   00002F   FC           MOV     R4,A
   \   000030   E9           MOV     A,R1
   \   000031   FD           MOV     R5,A
   \   000032   90....       MOV     DPTR,#zclColor_StepSaturation_256
   \   000035   12....       LCALL   ?Subroutine19 & 0xFFFF
    487                //Change for ever - stop mode stop this command
    488                zclColor_SaturationRemainingTime = 0xFFFF;
   \                     ??CrossCallReturnLabel_35:
   \   000038   90....       MOV     DPTR,#zclColor_SaturationRemainingTime
   \   00003B   74FF         MOV     A,#-0x1
   \                     ??zclColor_MoveSaturationCB_4:
   \   00003D   F0           MOVX    @DPTR,A
   \   00003E   A3           INC     DPTR
   \   00003F   F0           MOVX    @DPTR,A
    489                break;
    490              case LIGHTING_MOVE_SATURATION_DOWN:
    491                zclColor_StepSaturation_256 = ((-(int32)pCmd->rate)<<8)/10;
    492                //Change for ever - stop mode stop this command
    493                zclColor_SaturationRemainingTime = 0xFFFF;
    494                break;
    495              case LIGHTING_MOVE_SATURATION_STOP:
    496                zclColor_StepSaturation_256 = 0;
    497                zclColor_SaturationRemainingTime = 0x0;
    498                break;
    499             default:
    500               return ( ZCL_STATUS_INVALID_FIELD );
    501            }
    502          
    503            hwLight_ApplyUpdate( &zclColor_CurrentSaturation,
    504                                 &zclColor_CurrentSaturation_256,
    505                                 &zclColor_StepSaturation_256,
    506                                 &zclColor_SaturationRemainingTime,
    507                                 COLOR_SAT_MIN, COLOR_SAT_MAX, FALSE );
   \   000040                ; Setup parameters for call to function hwLight_ApplyUpdate
   \   000040   75..00       MOV     ?V0 + 0,#0x0
   \   000043   78..         MOV     R0,#?V0 + 0
   \   000045   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000048   75..FE       MOV     ?V0 + 0,#-0x2
   \   00004B   78..         MOV     R0,#?V0 + 0
   \   00004D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000050   75....       MOV     ?V0 + 0,#zclColor_SaturationRemainingTime & 0xff
   \   000053   75....       MOV     ?V0 + 1,#(zclColor_SaturationRemainingTime >> 8) & 0xff
   \   000056   78..         MOV     R0,#?V0 + 0
   \   000058   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005B   75....       MOV     ?V0 + 0,#zclColor_StepSaturation_256 & 0xff
   \   00005E   75....       MOV     ?V0 + 1,#(zclColor_StepSaturation_256 >> 8) & 0xff
   \   000061   78..         MOV     R0,#?V0 + 0
   \   000063   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000066   7900         MOV     R1,#0x0
   \   000068   7C..         MOV     R4,#zclColor_CurrentSaturation_256 & 0xff
   \   00006A   7D..         MOV     R5,#(zclColor_CurrentSaturation_256 >> 8) & 0xff
   \   00006C   7A..         MOV     R2,#zclColor_CurrentSaturation & 0xff
   \   00006E   7B..         MOV     R3,#(zclColor_CurrentSaturation >> 8) & 0xff
   \   000070   12....       LCALL   ??hwLight_ApplyUpdate?relay
   \   000073   7406         MOV     A,#0x6
   \   000075   12....       LCALL   ?DEALLOC_XSTACK8
    508          
    509          
    510            if ( zclColor_SaturationRemainingTime )
   \   000078   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_113:
   \   00007B   6017         JZ      ??zclColor_MoveSaturationCB_5
    511            {
    512              //set a timer to make the change over 100ms
    513              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100 );
   \   00007D                ; Setup parameters for call to function osal_start_timerEx
   \   00007D   90....       MOV     DPTR,#__Constant_64
   \   000080   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000083   7A10         MOV     R2,#0x10
   \   000085   7B00         MOV     R3,#0x0
   \   000087   90....       MOV     DPTR,#zclLight_TaskID
   \   00008A   E0           MOVX    A,@DPTR
   \   00008B   F9           MOV     R1,A
   \   00008C   12....       LCALL   ??osal_start_timerEx?relay
   \   00008F   7404         MOV     A,#0x4
   \   000091   12....       LCALL   ?DEALLOC_XSTACK8
    514            }
    515          
    516            return ( ZSuccess );
   \                     ??zclColor_MoveSaturationCB_5:
   \   000094   7900         MOV     R1,#0x0
   \                     ??zclColor_MoveSaturationCB_6:
   \   000096   02....       LJMP    ?Subroutine1 & 0xFFFF
   \                     ??zclColor_MoveSaturationCB_2:
   \   000099   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_47:
   \   00009C   12....       LCALL   ?L_NEG
   \   00009F   7408         MOV     A,#0x8
   \   0000A1   78..         MOV     R0,#?V0 + 0
   \   0000A3   12....       LCALL   ?L_SHL
   \   0000A6   90....       MOV     DPTR,#__Constant_a
   \   0000A9   78..         MOV     R0,#?V0 + 4
   \   0000AB   12....       LCALL   ?L_MOV_X
   \   0000AE   78..         MOV     R0,#?V0 + 0
   \   0000B0   79..         MOV     R1,#?V0 + 4
   \   0000B2   12....       LCALL   ?L_DIV_MOD
   \   0000B5   90....       MOV     DPTR,#zclColor_StepSaturation_256
   \   0000B8   78..         MOV     R0,#?V0 + 0
   \   0000BA   12....       LCALL   ?L_MOV_TO_X
   \   0000BD   02....       LJMP    ??CrossCallReturnLabel_35 & 0xFFFF
   \                     ??zclColor_MoveSaturationCB_0:
   \   0000C0   90....       MOV     DPTR,#zclColor_StepSaturation_256
   \   0000C3   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_127:
   \   0000C6   90....       MOV     DPTR,#zclColor_SaturationRemainingTime
   \   0000C9   02....       LJMP    ??zclColor_MoveSaturationCB_4 & 0xFFFF
   \                     ??zclColor_MoveSaturationCB_3:
   \   0000CC   7985         MOV     R1,#-0x7b
   \   0000CE   80C6         SJMP    ??zclColor_MoveSaturationCB_6
    517          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   12....       LCALL   ?Subroutine38 & 0xFFFF
   \                     ??CrossCallReturnLabel_68:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine29:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   F8           MOV     R0,A
   \   000003   E4           CLR     A
   \   000004   C8           XCH     A,R0
   \   000005   F9           MOV     R1,A
   \   000006   7A0A         MOV     R2,#0xa
   \   000008   7B00         MOV     R3,#0x0
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine27:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   F5..         MOV     ?V0 + 0,A
   \   000004   E4           CLR     A
   \   000005   F5..         MOV     ?V0 + 1,A
   \   000007   F5..         MOV     ?V0 + 2,A
   \   000009   F5..         MOV     ?V0 + 3,A
   \   00000B   78..         MOV     R0,#?V0 + 0
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   EC           MOV     A,R4
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   ED           MOV     A,R5
   \   000004   F0           MOVX    @DPTR,A
   \   000005   A3           INC     DPTR
   \   000006   E4           CLR     A
   \   000007   F0           MOVX    @DPTR,A
   \   000008   A3           INC     DPTR
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine38:
   \   000000   12....       LCALL   ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_79:
   \   000003   8E82         MOV     DPL,R6
   \   000005   8F83         MOV     DPH,R7
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   E4           CLR     A
   \   000001                REQUIRE ??Subroutine53_0
   \   000001                ; // Fall through to label ??Subroutine53_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine53_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   F0           MOVX    @DPTR,A
   \   000003   A3           INC     DPTR
   \   000004   F0           MOVX    @DPTR,A
   \   000005   A3           INC     DPTR
   \   000006   F0           MOVX    @DPTR,A
   \   000007   22           RET
    518          
    519          /*********************************************************************
    520           * @fn      zclColor_StepSaturationCB
    521           *
    522           * @brief   Callback from the ZCL Lighting Cluster Library when
    523           *          it received a Color Control -  Step Saturation Command for
    524           *          this application.
    525           *
    526           * @param   stepMode - LIGHTING_STEP_SATURATION_UP,
    527           *                     LIGHTING_STEP_SATURATION_DOWN
    528           * @param   transitionTime - time to perform a single step in 1/10 of second
    529           *
    530           * @return  status
    531           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    532          ZStatus_t zclColor_StepSaturationCB( zclCCStepSaturation_t *pCmd )
   \                     zclColor_StepSaturationCB:
    533          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    534            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_HUE_SATURATION);
   \   000009                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000009   7900         MOV     R1,#0x0
   \   00000B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    535            zclColor_CurrentSaturation_256 = (uint16)zclColor_CurrentSaturation<<8;
   \   00000E   90....       MOV     DPTR,#zclColor_CurrentSaturation
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   90....       MOV     DPTR,#zclColor_CurrentSaturation_256
   \   000016   12....       LCALL   ?Subroutine7 & 0xFFFF
    536            zclColor_ColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    537            zclColor_EnhancedColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    538          
    539            if ( pCmd->transitionTime == 0 )
   \                     ??CrossCallReturnLabel_6:
   \   000019   90....       MOV     DPTR,#zclColor_SaturationRemainingTime
   \   00001C   7002         JNZ     ??zclColor_StepSaturationCB_0
    540            {
    541              zclColor_SaturationRemainingTime = 1;
   \   00001E   7401         MOV     A,#0x1
    542            }
    543            else
    544            {
    545              zclColor_SaturationRemainingTime = pCmd->transitionTime;
   \                     ??zclColor_StepSaturationCB_0:
   \   000020   12....       LCALL   ?Subroutine12 & 0xFFFF
    546            }
    547          
    548            zclColor_StepSaturation_256 = ((((int32)pCmd->stepSize)<<8) / zclColor_SaturationRemainingTime);
   \                     ??CrossCallReturnLabel_14:
   \   000023   90....       MOV     DPTR,#zclColor_SaturationRemainingTime
   \   000026   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_56:
   \   000029   12....       LCALL   ?US_DIV_MOD
   \   00002C   E8           MOV     A,R0
   \   00002D   FA           MOV     R2,A
   \   00002E   E9           MOV     A,R1
   \   00002F   FB           MOV     R3,A
   \   000030   90....       MOV     DPTR,#zclColor_StepSaturation_256
   \   000033   12....       LCALL   ?Subroutine9 & 0xFFFF
    549          
    550            if ( pCmd->stepMode == LIGHTING_STEP_SATURATION_DOWN )
   \                     ??CrossCallReturnLabel_8:
   \   000036   706D         JNZ     ??zclColor_StepSaturationCB_1
    551            {
    552              zclColor_StepSaturation_256 = -zclColor_StepSaturation_256;
   \   000038   90....       MOV     DPTR,#zclColor_StepSaturation_256
   \   00003B   78..         MOV     R0,#?V0 + 0
   \   00003D   12....       LCALL   ?L_MOV_X
   \   000040   78..         MOV     R0,#?V0 + 0
   \   000042   12....       LCALL   ?L_NEG
   \   000045   90....       MOV     DPTR,#zclColor_StepSaturation_256
   \   000048   78..         MOV     R0,#?V0 + 0
   \   00004A   12....       LCALL   ?L_MOV_TO_X
    553            }
    554            else if ( pCmd->stepMode != LIGHTING_STEP_SATURATION_UP )
    555            {
    556              return ( ZCL_STATUS_INVALID_FIELD );
    557            }
    558          
    559          
    560            hwLight_ApplyUpdate( &zclColor_CurrentSaturation,
    561                                 &zclColor_CurrentSaturation_256,
    562                                 &zclColor_StepSaturation_256,
    563                                 &zclColor_SaturationRemainingTime,
    564                                 COLOR_SAT_MIN, COLOR_SAT_MAX, FALSE );
   \                     ??zclColor_StepSaturationCB_2:
   \   00004D                ; Setup parameters for call to function hwLight_ApplyUpdate
   \   00004D   75..00       MOV     ?V0 + 0,#0x0
   \   000050   78..         MOV     R0,#?V0 + 0
   \   000052   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000055   75..FE       MOV     ?V0 + 0,#-0x2
   \   000058   78..         MOV     R0,#?V0 + 0
   \   00005A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00005D   75....       MOV     ?V0 + 0,#zclColor_SaturationRemainingTime & 0xff
   \   000060   75....       MOV     ?V0 + 1,#(zclColor_SaturationRemainingTime >> 8) & 0xff
   \   000063   78..         MOV     R0,#?V0 + 0
   \   000065   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000068   75....       MOV     ?V0 + 0,#zclColor_StepSaturation_256 & 0xff
   \   00006B   75....       MOV     ?V0 + 1,#(zclColor_StepSaturation_256 >> 8) & 0xff
   \   00006E   78..         MOV     R0,#?V0 + 0
   \   000070   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000073   7900         MOV     R1,#0x0
   \   000075   7C..         MOV     R4,#zclColor_CurrentSaturation_256 & 0xff
   \   000077   7D..         MOV     R5,#(zclColor_CurrentSaturation_256 >> 8) & 0xff
   \   000079   7A..         MOV     R2,#zclColor_CurrentSaturation & 0xff
   \   00007B   7B..         MOV     R3,#(zclColor_CurrentSaturation >> 8) & 0xff
   \   00007D   12....       LCALL   ??hwLight_ApplyUpdate?relay
   \   000080   7406         MOV     A,#0x6
   \   000082   12....       LCALL   ?DEALLOC_XSTACK8
    565          
    566            if ( zclColor_SaturationRemainingTime )
   \   000085   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_114:
   \   000088   6017         JZ      ??zclColor_StepSaturationCB_3
    567            {
    568              //set a timer to make the change over 100ms
    569              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100 );
   \   00008A                ; Setup parameters for call to function osal_start_timerEx
   \   00008A   90....       MOV     DPTR,#__Constant_64
   \   00008D   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000090   7A10         MOV     R2,#0x10
   \   000092   7B00         MOV     R3,#0x0
   \   000094   90....       MOV     DPTR,#zclLight_TaskID
   \   000097   E0           MOVX    A,@DPTR
   \   000098   F9           MOV     R1,A
   \   000099   12....       LCALL   ??osal_start_timerEx?relay
   \   00009C   7404         MOV     A,#0x4
   \   00009E   12....       LCALL   ?DEALLOC_XSTACK8
    570            }
    571          
    572            return ( ZSuccess );
   \                     ??zclColor_StepSaturationCB_3:
   \   0000A1   7900         MOV     R1,#0x0
   \                     ??zclColor_StepSaturationCB_4:
   \   0000A3   80..         SJMP    ?Subroutine2
   \                     ??zclColor_StepSaturationCB_1:
   \   0000A5   7401         MOV     A,#0x1
   \   0000A7   68           XRL     A,R0
   \   0000A8   60A3         JZ      ??zclColor_StepSaturationCB_2
   \   0000AA   7985         MOV     R1,#-0x7b
   \   0000AC   80F5         SJMP    ??zclColor_StepSaturationCB_4
    573          
    574          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   7F04         MOV     R7,#0x4
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine40:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002                REQUIRE ??Subroutine50_0
   \   000002                ; // Fall through to label ??Subroutine50_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   E4           CLR     A
   \   000003   12....       LCALL   ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_90:
   \   000006   A3           INC     DPTR
   \   000007   E0           MOVX    A,@DPTR
   \   000008   F8           MOV     R0,A
   \   000009   E4           CLR     A
   \   00000A   C8           XCH     A,R0
   \   00000B   F9           MOV     R1,A
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   EA           MOV     A,R2
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   EB           MOV     A,R3
   \   000004   F0           MOVX    @DPTR,A
   \   000005   A3           INC     DPTR
   \   000006   E4           CLR     A
   \   000007   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_86:
   \   00000A   F8           MOV     R0,A
   \   00000B   7403         MOV     A,#0x3
   \   00000D   68           XRL     A,R0
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   12....       LCALL   ?Subroutine38 & 0xFFFF
   \                     ??CrossCallReturnLabel_69:
   \   000003   A3           INC     DPTR
   \   000004   A3           INC     DPTR
   \   000005   E0           MOVX    A,@DPTR
   \   000006   22           RET
    575          
    576          /*********************************************************************
    577           * @fn      zclTestApp_ColorControlMoveToHueCB
    578           *
    579           * @brief   Callback from the ZCL Lighting Cluster Library when
    580           *          it received a Color Control - Move to Hue Command for
    581           *          this application.
    582           *
    583           * @param   hue - target hue value
    584           * @param   direction
    585           * @param   transitionTime - in seconds
    586           *
    587           * @return  status
    588           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    589          ZStatus_t zclColor_MoveToHueCB( zclCCMoveToHue_t *pCmd )
   \                     zclColor_MoveToHueCB:
    590          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    591            int16 hueDiff;
    592            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_HUE_SATURATION);
   \   000009                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000009   7900         MOV     R1,#0x0
   \   00000B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    593            zclColor_CurrentHue_256 = (uint16)zclColor_CurrentHue<<8;
   \   00000E   90....       MOV     DPTR,#zclColor_CurrentHue
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   90....       MOV     DPTR,#zclColor_CurrentHue_256
   \   000016   12....       LCALL   ?Subroutine10 & 0xFFFF
    594            zclColor_ColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    595            zclColor_EnhancedColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    596          
    597            hueDiff = (int16)pCmd->hue - zclColor_CurrentHue;
   \                     ??CrossCallReturnLabel_11:
   \   000019   F8           MOV     R0,A
   \   00001A   90....       MOV     DPTR,#zclColor_CurrentHue
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   FA           MOV     R2,A
   \   00001F   E8           MOV     A,R0
   \   000020   C3           CLR     C
   \   000021   9A           SUBB    A,R2
   \   000022   F8           MOV     R0,A
   \   000023   95E0         SUBB    A,0xE0 /* A   */
   \   000025   F9           MOV     R1,A
    598            // adjust direction
    599            switch ( pCmd->direction )
   \   000026   8E82         MOV     DPL,R6
   \   000028   8F83         MOV     DPH,R7
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   600B         JZ      ??zclColor_MoveToHueCB_0
   \   00002E   14           DEC     A
   \   00002F   6036         JZ      ??zclColor_MoveToHueCB_1
   \   000031   14           DEC     A
   \   000032   6068         JZ      ??zclColor_MoveToHueCB_2
   \   000034   14           DEC     A
   \   000035   6071         JZ      ??zclColor_MoveToHueCB_3
   \   000037   807E         SJMP    ??zclColor_MoveToHueCB_4
    600            {
    601              case LIGHTING_MOVE_TO_HUE_DIRECTION_SHORTEST_DISTANCE:
    602                if  ( hueDiff > COLOR_HUE_MAX/2 )
   \                     ??zclColor_MoveToHueCB_0:
   \   000039   C3           CLR     C
   \   00003A   E8           MOV     A,R0
   \   00003B   9480         SUBB    A,#-0x80
   \   00003D   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_63:
   \   000040   5036         JNC     ??zclColor_MoveToHueCB_5
    603                {
    604                  hueDiff -= ( COLOR_HUE_MAX + 1 ); // extra step to wrap
    605                }
    606                else if ( hueDiff < -COLOR_HUE_MAX/2 )
   \   000042   C3           CLR     C
   \   000043   E8           MOV     A,R0
   \   000044   9481         SUBB    A,#-0x7f
   \   000046   E9           MOV     A,R1
   \   000047   94FF         SUBB    A,#-0x1
   \   000049   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00004B   65D0         XRL     A,PSW
   \   00004D   33           RLC     A
   \   00004E   4043         JC      ??zclColor_MoveToHueCB_6
    607                {
    608                  hueDiff += COLOR_HUE_MAX + 1; // extra step to wrap
    609                }
    610                break;
    611              case LIGHTING_MOVE_TO_HUE_DIRECTION_LONGEST_DISTANCE:
    612                if ( ( hueDiff > 0 ) && ( hueDiff < COLOR_HUE_MAX/2 ) )
    613                {
    614                  hueDiff -= ( COLOR_HUE_MAX + 1 ); // extra step to wrap
    615                }
    616                else if ( ( hueDiff < 0 ) && ( hueDiff > -COLOR_HUE_MAX/2 ) )
    617                {
    618                  hueDiff += COLOR_HUE_MAX + 1; // extra step to wrap
    619                }
    620                break;
    621              case LIGHTING_MOVE_TO_HUE_DIRECTION_UP:
    622                if ( hueDiff < 0 )
    623                {
    624                  hueDiff += COLOR_HUE_MAX;
    625                }
    626                break;
    627              case LIGHTING_MOVE_TO_HUE_DIRECTION_DOWN:
    628                if ( hueDiff > 0 )
    629                {
    630                  hueDiff -= COLOR_HUE_MAX;
    631                }
    632                break;
    633              default:
    634                return ( ZCL_STATUS_INVALID_FIELD );
    635            }
    636          
    637            //if transition time = 0 then do immediately
    638            if ( pCmd->transitionTime == 0 )
   \                     ??zclColor_MoveToHueCB_7:
   \   000050   8E82         MOV     DPL,R6
   \   000052   8F83         MOV     DPH,R7
   \   000054   A3           INC     DPTR
   \   000055   A3           INC     DPTR
   \   000056   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   000059   EA           MOV     A,R2
   \   00005A   4B           ORL     A,R3
   \   00005B   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   00005E   705B         JNZ     ??zclColor_MoveToHueCB_8
    639            {
    640                zclColor_HueRemainingTime = 1;
   \   000060   7401         MOV     A,#0x1
   \   000062   F0           MOVX    @DPTR,A
   \   000063   A3           INC     DPTR
   \   000064   E4           CLR     A
   \   000065   8058         SJMP    ??zclColor_MoveToHueCB_9
    641            }
   \                     ??zclColor_MoveToHueCB_1:
   \   000067   E8           MOV     A,R0
   \   000068   24FF         ADD     A,#-0x1
   \   00006A   FA           MOV     R2,A
   \   00006B   E9           MOV     A,R1
   \   00006C   34FF         ADDC    A,#-0x1
   \   00006E   FB           MOV     R3,A
   \   00006F   C3           CLR     C
   \   000070   EA           MOV     A,R2
   \   000071   947E         SUBB    A,#0x7e
   \   000073   EB           MOV     A,R3
   \   000074   9400         SUBB    A,#0x0
   \   000076   500A         JNC     ??zclColor_MoveToHueCB_10
   \                     ??zclColor_MoveToHueCB_5:
   \   000078   E8           MOV     A,R0
   \   000079   2401         ADD     A,#0x1
   \   00007B   08           INC     R0
   \                     ??zclColor_MoveToHueCB_11:
   \   00007C   E9           MOV     A,R1
   \   00007D   34FF         ADDC    A,#-0x1
   \                     ??zclColor_MoveToHueCB_12:
   \   00007F   F9           MOV     R1,A
   \   000080   80CE         SJMP    ??zclColor_MoveToHueCB_7
   \                     ??zclColor_MoveToHueCB_10:
   \   000082   E8           MOV     A,R0
   \   000083   247E         ADD     A,#0x7e
   \   000085   FA           MOV     R2,A
   \   000086   E9           MOV     A,R1
   \   000087   3400         ADDC    A,#0x0
   \   000089   FB           MOV     R3,A
   \   00008A   C3           CLR     C
   \   00008B   EA           MOV     A,R2
   \   00008C   947E         SUBB    A,#0x7e
   \   00008E   EB           MOV     A,R3
   \   00008F   9400         SUBB    A,#0x0
   \   000091   50BD         JNC     ??zclColor_MoveToHueCB_7
   \                     ??zclColor_MoveToHueCB_6:
   \   000093   E8           MOV     A,R0
   \   000094   24FF         ADD     A,#-0x1
   \   000096   18           DEC     R0
   \                     ??zclColor_MoveToHueCB_13:
   \   000097   E9           MOV     A,R1
   \   000098   3400         ADDC    A,#0x0
   \   00009A   80E3         SJMP    ??zclColor_MoveToHueCB_12
   \                     ??zclColor_MoveToHueCB_2:
   \   00009C   C3           CLR     C
   \   00009D   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_64:
   \   0000A0   50AE         JNC     ??zclColor_MoveToHueCB_7
   \   0000A2   E8           MOV     A,R0
   \   0000A3   24FE         ADD     A,#-0x2
   \   0000A5   F8           MOV     R0,A
   \   0000A6   80EF         SJMP    ??zclColor_MoveToHueCB_13
   \                     ??zclColor_MoveToHueCB_3:
   \   0000A8   C3           CLR     C
   \   0000A9   E8           MOV     A,R0
   \   0000AA   9401         SUBB    A,#0x1
   \   0000AC   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_65:
   \   0000AF   409F         JC      ??zclColor_MoveToHueCB_7
   \   0000B1   E8           MOV     A,R0
   \   0000B2   2402         ADD     A,#0x2
   \   0000B4   F8           MOV     R0,A
   \   0000B5   80C5         SJMP    ??zclColor_MoveToHueCB_11
   \                     ??zclColor_MoveToHueCB_4:
   \   0000B7   7985         MOV     R1,#-0x7b
   \   0000B9   8078         SJMP    ??zclColor_MoveToHueCB_14
    642            else
    643            {
    644              zclColor_HueRemainingTime = pCmd->transitionTime;
   \                     ??zclColor_MoveToHueCB_8:
   \   0000BB   EA           MOV     A,R2
   \   0000BC   F0           MOVX    @DPTR,A
   \   0000BD   A3           INC     DPTR
   \   0000BE   EB           MOV     A,R3
   \                     ??zclColor_MoveToHueCB_9:
   \   0000BF   F0           MOVX    @DPTR,A
    645            }
    646          
    647            zclColor_StepHue_256 = ((int32)(hueDiff))<<8;
    648            zclColor_StepHue_256 /= (int32)zclColor_HueRemainingTime;
   \   0000C0   88..         MOV     ?V0 + 4,R0
   \   0000C2   E9           MOV     A,R1
   \   0000C3   12....       LCALL   ?Subroutine35 & 0xFFFF
   \                     ??CrossCallReturnLabel_84:
   \   0000C6   12....       LCALL   ?L_SHL
   \   0000C9   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   0000CC   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   0000CF   12....       LCALL   ?L_DIV_MOD
   \   0000D2   90....       MOV     DPTR,#zclColor_StepHue_256
   \   0000D5   78..         MOV     R0,#?V0 + 4
   \   0000D7   12....       LCALL   ?L_MOV_TO_X
    649          
    650            hwLight_ApplyUpdate( &zclColor_CurrentHue,
    651                                 &zclColor_CurrentHue_256,
    652                                 &zclColor_StepHue_256,
    653                                 &zclColor_HueRemainingTime,
    654                                 COLOR_HUE_MIN, COLOR_HUE_MAX, TRUE );
   \   0000DA                ; Setup parameters for call to function hwLight_ApplyUpdate
   \   0000DA   75..01       MOV     ?V0 + 0,#0x1
   \   0000DD   78..         MOV     R0,#?V0 + 0
   \   0000DF   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000E2   75..FE       MOV     ?V0 + 0,#-0x2
   \   0000E5   78..         MOV     R0,#?V0 + 0
   \   0000E7   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000EA   75....       MOV     ?V0 + 0,#zclColor_HueRemainingTime & 0xff
   \   0000ED   75....       MOV     ?V0 + 1,#(zclColor_HueRemainingTime >> 8) & 0xff
   \   0000F0   78..         MOV     R0,#?V0 + 0
   \   0000F2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F5   75....       MOV     ?V0 + 0,#zclColor_StepHue_256 & 0xff
   \   0000F8   75....       MOV     ?V0 + 1,#(zclColor_StepHue_256 >> 8) & 0xff
   \   0000FB   78..         MOV     R0,#?V0 + 0
   \   0000FD   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000100   7900         MOV     R1,#0x0
   \   000102   7C..         MOV     R4,#zclColor_CurrentHue_256 & 0xff
   \   000104   7D..         MOV     R5,#(zclColor_CurrentHue_256 >> 8) & 0xff
   \   000106   7A..         MOV     R2,#zclColor_CurrentHue & 0xff
   \   000108   7B..         MOV     R3,#(zclColor_CurrentHue >> 8) & 0xff
   \   00010A   12....       LCALL   ??hwLight_ApplyUpdate?relay
   \   00010D   7406         MOV     A,#0x6
   \   00010F   12....       LCALL   ?DEALLOC_XSTACK8
    655          
    656            if ( zclColor_HueRemainingTime )
   \   000112   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   000115   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_102:
   \   000118   6017         JZ      ??zclColor_MoveToHueCB_15
    657            {
    658              //set a timer to make the change over 100ms
    659              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100 );
   \   00011A                ; Setup parameters for call to function osal_start_timerEx
   \   00011A   90....       MOV     DPTR,#__Constant_64
   \   00011D   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000120   7A10         MOV     R2,#0x10
   \   000122   7B00         MOV     R3,#0x0
   \   000124   90....       MOV     DPTR,#zclLight_TaskID
   \   000127   E0           MOVX    A,@DPTR
   \   000128   F9           MOV     R1,A
   \   000129   12....       LCALL   ??osal_start_timerEx?relay
   \   00012C   7404         MOV     A,#0x4
   \   00012E   12....       LCALL   ?DEALLOC_XSTACK8
    660            }
    661          
    662            return ( ZSuccess );
   \                     ??zclColor_MoveToHueCB_15:
   \   000131   7900         MOV     R1,#0x0
   \                     ??zclColor_MoveToHueCB_14:
   \   000133   02....       LJMP    ?Subroutine1 & 0xFFFF
    663          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine36:
   \   000000   E9           MOV     A,R1
   \   000001   9400         SUBB    A,#0x0
   \   000003   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000005   65D0         XRL     A,PSW
   \   000007   33           RLC     A
   \   000008   22           RET
    664          
    665          /*********************************************************************
    666           * @fn      zclColor_MoveHueCB
    667           *
    668           * @brief   Callback from the ZCL Lighting Cluster Library when
    669           *          it received a Color Control - Move Hue Command for
    670           *          this application.
    671           *
    672           * @param   moveMode - LIGHTING_MOVE_HUE_STOP, LIGHTING_MOVE_HUE_UP, or
    673           *                     LIGHTING_MOVE_HUE_DOWN
    674           * @param   rate - the movement in steps per second, where step is a
    675           *                 change in the device's hue of one unit
    676           *
    677           * @return  status
    678           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    679          ZStatus_t zclColor_MoveHueCB( zclCCMoveHue_t *pCmd )
   \                     zclColor_MoveHueCB:
    680          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    681            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_HUE_SATURATION);
   \   000009                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000009   7900         MOV     R1,#0x0
   \   00000B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    682            zclColor_CurrentHue_256 = (uint16)zclColor_CurrentHue<<8;
   \   00000E   90....       MOV     DPTR,#zclColor_CurrentHue
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   90....       MOV     DPTR,#zclColor_CurrentHue_256
   \   000016   12....       LCALL   ?Subroutine14 & 0xFFFF
    683            zclColor_ColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    684            zclColor_EnhancedColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    685            zclColor_EnhancedHueRemainingTime = 0x0;
   \                     ??CrossCallReturnLabel_19:
   \   000019   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   00001C   12....       LCALL   ?Subroutine40 & 0xFFFF
    686          
    687            switch (pCmd->moveMode)
   \                     ??CrossCallReturnLabel_85:
   \   00001F   7003         JNZ     $+5
   \   000021   02....       LJMP    ??zclColor_MoveHueCB_0 & 0xFFFF
   \   000024   14           DEC     A
   \   000025   6007         JZ      ??zclColor_MoveHueCB_1
   \   000027   24FE         ADD     A,#-0x2
   \   000029   6072         JZ      ??zclColor_MoveHueCB_2
   \   00002B   02....       LJMP    ??zclColor_MoveHueCB_3 & 0xFFFF
    688            {
    689              case LIGHTING_MOVE_HUE_UP:
    690                zclColor_StepHue_256 = (((int32)pCmd->rate)<<8)/10;
   \                     ??zclColor_MoveHueCB_1:
   \   00002E   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_52:
   \   000031   12....       LCALL   ?US_DIV_MOD
   \   000034   E8           MOV     A,R0
   \   000035   FC           MOV     R4,A
   \   000036   E9           MOV     A,R1
   \   000037   FD           MOV     R5,A
   \   000038   90....       MOV     DPTR,#zclColor_StepHue_256
   \   00003B   12....       LCALL   ?Subroutine19 & 0xFFFF
    691                //Change for ever - stop mode stop this command
    692                zclColor_HueRemainingTime = 0xFFFF;
   \                     ??CrossCallReturnLabel_36:
   \   00003E   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   000041   74FF         MOV     A,#-0x1
   \                     ??zclColor_MoveHueCB_4:
   \   000043   12....       LCALL   ?Subroutine20 & 0xFFFF
    693                break;
    694              case LIGHTING_MOVE_HUE_DOWN:
    695                zclColor_StepHue_256 = ((-(int32)pCmd->rate)<<8)/10;
    696                //Change for ever - stop mode stop this command
    697                zclColor_HueRemainingTime = 0xFFFF;
    698                break;
    699              case LIGHTING_MOVE_HUE_STOP:
    700                zclColor_StepHue_256 = 0;
    701                zclColor_StepEnhancedHue_256 = 0;
    702                zclColor_HueRemainingTime = 0x0;
    703                break;
    704              default:
    705                return ( ZCL_STATUS_INVALID_FIELD );
    706            }
    707          
    708            hwLight_ApplyUpdate( &zclColor_CurrentHue,
    709                                 &zclColor_CurrentHue_256,
    710                                 &zclColor_StepHue_256,
    711                                 &zclColor_HueRemainingTime,
    712                                 COLOR_HUE_MIN, COLOR_HUE_MAX, TRUE );
   \                     ??CrossCallReturnLabel_38:
   \   000046   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000049   75..FE       MOV     ?V0 + 0,#-0x2
   \   00004C   78..         MOV     R0,#?V0 + 0
   \   00004E   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000051   75....       MOV     ?V0 + 0,#zclColor_HueRemainingTime & 0xff
   \   000054   75....       MOV     ?V0 + 1,#(zclColor_HueRemainingTime >> 8) & 0xff
   \   000057   78..         MOV     R0,#?V0 + 0
   \   000059   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005C   75....       MOV     ?V0 + 0,#zclColor_StepHue_256 & 0xff
   \   00005F   75....       MOV     ?V0 + 1,#(zclColor_StepHue_256 >> 8) & 0xff
   \   000062   78..         MOV     R0,#?V0 + 0
   \   000064   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000067   7900         MOV     R1,#0x0
   \   000069   7C..         MOV     R4,#zclColor_CurrentHue_256 & 0xff
   \   00006B   7D..         MOV     R5,#(zclColor_CurrentHue_256 >> 8) & 0xff
   \   00006D   7A..         MOV     R2,#zclColor_CurrentHue & 0xff
   \   00006F   7B..         MOV     R3,#(zclColor_CurrentHue >> 8) & 0xff
   \   000071   12....       LCALL   ??hwLight_ApplyUpdate?relay
   \   000074   7406         MOV     A,#0x6
   \   000076   12....       LCALL   ?DEALLOC_XSTACK8
    713          
    714            if ( zclColor_HueRemainingTime )
   \   000079   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   00007C   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_103:
   \   00007F   6017         JZ      ??zclColor_MoveHueCB_5
    715            {
    716              //set a timer to make the change over 100ms
    717              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100 );
   \   000081                ; Setup parameters for call to function osal_start_timerEx
   \   000081   90....       MOV     DPTR,#__Constant_64
   \   000084   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000087   7A10         MOV     R2,#0x10
   \   000089   7B00         MOV     R3,#0x0
   \   00008B   90....       MOV     DPTR,#zclLight_TaskID
   \   00008E   E0           MOVX    A,@DPTR
   \   00008F   F9           MOV     R1,A
   \   000090   12....       LCALL   ??osal_start_timerEx?relay
   \   000093   7404         MOV     A,#0x4
   \   000095   12....       LCALL   ?DEALLOC_XSTACK8
    718            }
    719          
    720            return ( ZSuccess );
   \                     ??zclColor_MoveHueCB_5:
   \   000098   7900         MOV     R1,#0x0
   \                     ??zclColor_MoveHueCB_6:
   \   00009A   02....       LJMP    ?Subroutine1 & 0xFFFF
   \                     ??zclColor_MoveHueCB_2:
   \   00009D   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   0000A0   12....       LCALL   ?L_NEG
   \   0000A3   7408         MOV     A,#0x8
   \   0000A5   78..         MOV     R0,#?V0 + 0
   \   0000A7   12....       LCALL   ?L_SHL
   \   0000AA   90....       MOV     DPTR,#__Constant_a
   \   0000AD   78..         MOV     R0,#?V0 + 4
   \   0000AF   12....       LCALL   ?L_MOV_X
   \   0000B2   78..         MOV     R0,#?V0 + 0
   \   0000B4   79..         MOV     R1,#?V0 + 4
   \   0000B6   12....       LCALL   ?L_DIV_MOD
   \   0000B9   90....       MOV     DPTR,#zclColor_StepHue_256
   \   0000BC   78..         MOV     R0,#?V0 + 0
   \   0000BE   12....       LCALL   ?L_MOV_TO_X
   \   0000C1   02....       LJMP    ??CrossCallReturnLabel_36 & 0xFFFF
   \                     ??zclColor_MoveHueCB_0:
   \   0000C4   90....       MOV     DPTR,#zclColor_StepHue_256
   \   0000C7   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_128:
   \   0000CA   90....       MOV     DPTR,#zclColor_StepEnhancedHue_256
   \   0000CD   12....       LCALL   ??Subroutine53_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_125:
   \   0000D0   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   0000D3   02....       LJMP    ??zclColor_MoveHueCB_4 & 0xFFFF
   \                     ??zclColor_MoveHueCB_3:
   \   0000D6   7985         MOV     R1,#-0x7b
   \   0000D8   80C0         SJMP    ??zclColor_MoveHueCB_6
    721          }
    722          
    723          /*********************************************************************
    724           * @fn      zclColor_StepHueCB
    725           *
    726           * @brief   Callback from the ZCL Lighting Cluster Library when
    727           *          it received a Color Control -  Step Saturation Command for
    728           *          this application.
    729           *
    730           * @param   stepMode - LIGHTING_STEP_SATURATION_UP,
    731           *                     LIGHTING_STEP_SATURATION_DOWN
    732           * @param   transitionTime - time to perform a single step in 1/10 of second
    733           *
    734           * @return  status
    735           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    736          ZStatus_t zclColor_StepHueCB( zclCCStepHue_t *pCmd )
   \                     zclColor_StepHueCB:
    737          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    738            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_HUE_SATURATION);
   \   000009                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000009   7900         MOV     R1,#0x0
   \   00000B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    739            zclColor_CurrentHue_256 = (uint16)zclColor_CurrentHue<<8;
   \   00000E   90....       MOV     DPTR,#zclColor_CurrentHue
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   90....       MOV     DPTR,#zclColor_CurrentHue_256
   \   000016   12....       LCALL   ?Subroutine7 & 0xFFFF
    740            zclColor_ColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    741            zclColor_EnhancedColorMode=COLOR_MODE_CURRENT_HUE_SATURATION;
    742          
    743            if ( pCmd->transitionTime == 0 )
   \                     ??CrossCallReturnLabel_7:
   \   000019   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   00001C   7002         JNZ     ??zclColor_StepHueCB_0
    744            {
    745              zclColor_HueRemainingTime = 1;
   \   00001E   7401         MOV     A,#0x1
    746            }
    747            else
    748            {
    749              zclColor_HueRemainingTime = pCmd->transitionTime;
   \                     ??zclColor_StepHueCB_0:
   \   000020   12....       LCALL   ?Subroutine12 & 0xFFFF
    750            }
    751          
    752            zclColor_StepHue_256 = ((((int32)pCmd->stepSize)<<8) / zclColor_HueRemainingTime);
   \                     ??CrossCallReturnLabel_15:
   \   000023   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   000026   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_58:
   \   000029   12....       LCALL   ?US_DIV_MOD
   \   00002C   E8           MOV     A,R0
   \   00002D   FA           MOV     R2,A
   \   00002E   E9           MOV     A,R1
   \   00002F   FB           MOV     R3,A
   \   000030   90....       MOV     DPTR,#zclColor_StepHue_256
   \   000033   12....       LCALL   ?Subroutine9 & 0xFFFF
    753          
    754            if ( pCmd->stepMode == LIGHTING_STEP_HUE_DOWN )
   \                     ??CrossCallReturnLabel_9:
   \   000036   7071         JNZ     ??zclColor_StepHueCB_1
    755            {
    756              zclColor_StepHue_256 = -zclColor_StepHue_256;
   \   000038   90....       MOV     DPTR,#zclColor_StepHue_256
   \   00003B   78..         MOV     R0,#?V0 + 0
   \   00003D   12....       LCALL   ?L_MOV_X
   \   000040   78..         MOV     R0,#?V0 + 0
   \   000042   12....       LCALL   ?L_NEG
   \   000045   90....       MOV     DPTR,#zclColor_StepHue_256
   \   000048   78..         MOV     R0,#?V0 + 0
   \   00004A   12....       LCALL   ?L_MOV_TO_X
    757            }
    758            else if ( pCmd->stepMode != LIGHTING_STEP_HUE_UP )
    759            {
    760              return ( ZCL_STATUS_INVALID_FIELD );
    761            }
    762          
    763            hwLight_ApplyUpdate( &zclColor_CurrentHue,
    764                                 &zclColor_CurrentHue_256,
    765                                 &zclColor_StepHue_256,
    766                                 &zclColor_HueRemainingTime,
    767                                 COLOR_HUE_MIN, COLOR_HUE_MAX, TRUE );
   \                     ??zclColor_StepHueCB_2:
   \   00004D                ; Setup parameters for call to function hwLight_ApplyUpdate
   \   00004D   75..01       MOV     ?V0 + 0,#0x1
   \   000050   78..         MOV     R0,#?V0 + 0
   \   000052   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000055   75..FE       MOV     ?V0 + 0,#-0x2
   \   000058   78..         MOV     R0,#?V0 + 0
   \   00005A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00005D   75....       MOV     ?V0 + 0,#zclColor_HueRemainingTime & 0xff
   \   000060   75....       MOV     ?V0 + 1,#(zclColor_HueRemainingTime >> 8) & 0xff
   \   000063   78..         MOV     R0,#?V0 + 0
   \   000065   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000068   75....       MOV     ?V0 + 0,#zclColor_StepHue_256 & 0xff
   \   00006B   75....       MOV     ?V0 + 1,#(zclColor_StepHue_256 >> 8) & 0xff
   \   00006E   78..         MOV     R0,#?V0 + 0
   \   000070   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000073   7900         MOV     R1,#0x0
   \   000075   7C..         MOV     R4,#zclColor_CurrentHue_256 & 0xff
   \   000077   7D..         MOV     R5,#(zclColor_CurrentHue_256 >> 8) & 0xff
   \   000079   7A..         MOV     R2,#zclColor_CurrentHue & 0xff
   \   00007B   7B..         MOV     R3,#(zclColor_CurrentHue >> 8) & 0xff
   \   00007D   12....       LCALL   ??hwLight_ApplyUpdate?relay
   \   000080   7406         MOV     A,#0x6
   \   000082   12....       LCALL   ?DEALLOC_XSTACK8
    768          
    769            if ( zclColor_HueRemainingTime )
   \   000085   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   000088   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_104:
   \   00008B   6017         JZ      ??zclColor_StepHueCB_3
    770            {
    771              //set a timer to make the change over 100ms
    772              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100 );
   \   00008D                ; Setup parameters for call to function osal_start_timerEx
   \   00008D   90....       MOV     DPTR,#__Constant_64
   \   000090   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000093   7A10         MOV     R2,#0x10
   \   000095   7B00         MOV     R3,#0x0
   \   000097   90....       MOV     DPTR,#zclLight_TaskID
   \   00009A   E0           MOVX    A,@DPTR
   \   00009B   F9           MOV     R1,A
   \   00009C   12....       LCALL   ??osal_start_timerEx?relay
   \   00009F   7404         MOV     A,#0x4
   \   0000A1   12....       LCALL   ?DEALLOC_XSTACK8
    773            }
    774          
    775            return ( ZSuccess );
   \                     ??zclColor_StepHueCB_3:
   \   0000A4   7900         MOV     R1,#0x0
   \                     ??zclColor_StepHueCB_4:
   \   0000A6   02....       LJMP    ?Subroutine2 & 0xFFFF
   \                     ??zclColor_StepHueCB_1:
   \   0000A9   7401         MOV     A,#0x1
   \   0000AB   68           XRL     A,R0
   \   0000AC   609F         JZ      ??zclColor_StepHueCB_2
   \   0000AE   7985         MOV     R1,#-0x7b
   \   0000B0   80F4         SJMP    ??zclColor_StepHueCB_4
    776          }
    777          
    778          /*********************************************************************
    779           * @fn      zclColor_StopCB
    780           *
    781           * @brief   Callback from the ZCL General Cluster Library when
    782           *          it received a Color Control - Stop Command for
    783           *          this application.
    784           *
    785           * @param   none
    786           *
    787           * @return  status
    788           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    789          ZStatus_t zclColor_StopCB( void )
   \                     zclColor_StopCB:
    790          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    791              zclColor_SaturationRemainingTime = 0;
   \   000004   90....       MOV     DPTR,#zclColor_SaturationRemainingTime
   \   000007   E4           CLR     A
   \   000008   F0           MOVX    @DPTR,A
   \   000009   A3           INC     DPTR
   \   00000A   F0           MOVX    @DPTR,A
    792              zclColor_EnhancedHueRemainingTime = 0;
   \   00000B   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   00000E   F0           MOVX    @DPTR,A
   \   00000F   A3           INC     DPTR
   \   000010   F0           MOVX    @DPTR,A
    793              zclColor_HueRemainingTime = 0;
   \   000011   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   000014   F0           MOVX    @DPTR,A
   \   000015   A3           INC     DPTR
   \   000016   F0           MOVX    @DPTR,A
    794              zclColor_ColorRemainingTime = 0;
   \   000017   90....       MOV     DPTR,#zclColor_ColorRemainingTime
   \   00001A   F0           MOVX    @DPTR,A
   \   00001B   A3           INC     DPTR
   \   00001C   F0           MOVX    @DPTR,A
    795          
    796              return ( ZSuccess );
   \   00001D   F9           MOV     R1,A
   \   00001E                REQUIRE ?Subroutine3
   \   00001E                ; // Fall through to label ?Subroutine3
    797          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    798          
    799          /*********************************************************************
    800           * @fn      zclColor_MoveToHueAndSaturationCB
    801           *
    802           * @brief   Callback from the ZCL Lighting Cluster Library when
    803           *          it received a Color Control - Move to Hue Command for
    804           *          this application.
    805           *
    806           * @param    uint8 hue;             // a target hue
    807           * @param    uint8 saturation;      // a target saturation
    808           * @param    uint16 transitionTime; // time to move, equal of the value of the field in 1/10 seconds
    809           *
    810           * @return  status
    811           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    812          ZStatus_t zclColor_MoveToHueAndSaturationCB( zclCCMoveToHueAndSaturation_t *pCmd )
   \                     zclColor_MoveToHueAndSaturationCB:
    813          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 7
   \   000005   74F9         MOV     A,#-0x7
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    814            zclCCMoveToHue_t hueCmd;
    815            zclCCMoveToSaturation_t satCmd;
    816          
    817            //Do hue
    818            hueCmd.hue = pCmd->hue;
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   E0           MOVX    A,@DPTR
   \   000013   C0E0         PUSH    A
   \   000015   7403         MOV     A,#0x3
   \   000017   12....       LCALL   ?XSTACK_DISP0_8
   \   00001A   D0E0         POP     A
   \   00001C   F0           MOVX    @DPTR,A
    819            hueCmd.direction = LIGHTING_MOVE_TO_HUE_DIRECTION_SHORTEST_DISTANCE;
   \   00001D   7404         MOV     A,#0x4
   \   00001F   12....       LCALL   ?XSTACK_DISP0_8
   \   000022   E4           CLR     A
   \   000023   F0           MOVX    @DPTR,A
    820            hueCmd.transitionTime = pCmd->transitionTime;
   \   000024   EE           MOV     A,R6
   \   000025   2402         ADD     A,#0x2
   \   000027   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_133:
   \   00002A   7405         MOV     A,#0x5
   \   00002C   12....       LCALL   ?XSTACK_DISP0_8
   \   00002F   12....       LCALL   ?Subroutine16 & 0xFFFF
    821            zclColor_MoveToHueCB( &hueCmd );
   \                     ??CrossCallReturnLabel_22:
   \   000032                ; Setup parameters for call to function zclColor_MoveToHueCB
   \   000032   7403         MOV     A,#0x3
   \   000034   12....       LCALL   ?XSTACK_DISP0_8
   \   000037   AA82         MOV     R2,DPL
   \   000039   AB83         MOV     R3,DPH
   \   00003B   12....       LCALL   ??zclColor_MoveToHueCB?relay
    822          
    823            //Do sat
    824            satCmd.saturation = pCmd->saturation;
   \   00003E   8E82         MOV     DPL,R6
   \   000040   8F83         MOV     DPH,R7
   \   000042   A3           INC     DPTR
   \   000043   E0           MOVX    A,@DPTR
   \   000044   85..82       MOV     DPL,?XSP + 0
   \   000047   85..83       MOV     DPH,?XSP + 1
   \   00004A   12....       LCALL   ?Subroutine15 & 0xFFFF
    825            satCmd.transitionTime = pCmd->transitionTime;
   \                     ??CrossCallReturnLabel_20:
   \   00004D   7401         MOV     A,#0x1
   \   00004F   12....       LCALL   ?XSTACK_DISP0_8
   \   000052   12....       LCALL   ?Subroutine13 & 0xFFFF
    826            zclColor_MoveToSaturationCB( &satCmd );
   \                     ??CrossCallReturnLabel_16:
   \   000055   12....       LCALL   ??zclColor_MoveToSaturationCB?relay
    827          
    828            return ( ZSuccess );
   \   000058   7900         MOV     R1,#0x0
   \   00005A   7407         MOV     A,#0x7
   \   00005C   02....       LJMP    ?Subroutine0 & 0xFFFF
    829          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004   F0           MOVX    @DPTR,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   85..82       MOV     DPL,?V0 + 0
   \   000004   85..83       MOV     DPH,?V0 + 1
   \   000007   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_136:
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   E8           MOV     A,R0
   \   000001   F0           MOVX    @DPTR,A
   \   000002   A3           INC     DPTR
   \   000003   E9           MOV     A,R1
   \   000004   F0           MOVX    @DPTR,A
   \   000005                ; Setup parameters for call to function zclColor_MoveToSaturationCB
   \   000005                ; Setup parameters for call to function zclColor_MoveToSaturationCB
   \   000005   85..82       MOV     DPL,?XSP + 0
   \   000008   85..83       MOV     DPH,?XSP + 1
   \   00000B   AA82         MOV     R2,DPL
   \   00000D   AB83         MOV     R3,DPH
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine34:
   \   000000   F8           MOV     R0,A
   \   000001   EF           MOV     A,R7
   \   000002   3400         ADDC    A,#0x0
   \   000004   F9           MOV     R1,A
   \   000005   88..         MOV     ?V0 + 0,R0
   \   000007   89..         MOV     ?V0 + 1,R1
   \   000009   8882         MOV     DPL,R0
   \   00000B   F583         MOV     DPH,A
   \   00000D                REQUIRE ??Subroutine55_0
   \   00000D                ; // Fall through to label ??Subroutine55_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine55_0:
   \   000000   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_140:
   \   000003   22           RET
    830          
    831          /*********************************************************************
    832           * @fn      zclColor_EnhMoveToHueCB
    833           *
    834           * @brief   This callback is called to process a enhance Move To Hue
    835           *          Request command.
    836           *
    837           * @param   pCmd - command
    838           *                   uint16 enhancedHue;    // target enhanced hue value
    839           *                   uint8 direction;       // direction field shall be set to 0x01, meaning linear transition through XY space
    840           *                   uint16 transitionTime; // tame taken to move to the target hue in 1/10 sec increments
    841           *
    842           * @return  status
    843           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    844          ZStatus_t zclColor_EnhMoveToHueCB( zclCCEnhancedMoveToHue_t *pCmd )
   \                     zclColor_EnhMoveToHueCB:
    845          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    846            int32 hueDiff;
    847            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_HUE_SATURATION);
   \   000009                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000009   7900         MOV     R1,#0x0
   \   00000B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    848            zclColor_EnhancedCurrentHue_256 = (uint32)zclColor_EnhancedCurrentHue<<8;
   \   00000E   12....       LCALL   ?Subroutine5 & 0xFFFF
    849            zclColor_ColorMode = COLOR_MODE_CURRENT_HUE_SATURATION;
    850            zclColor_EnhancedColorMode = ENHANCED_COLOR_MODE_ENHANCED_CURRENT_HUE_SATURATION;
    851          
    852            hueDiff = (int32)pCmd->enhancedHue - zclColor_EnhancedCurrentHue;
   \                     ??CrossCallReturnLabel_2:
   \   000011   F5..         MOV     ?V0 + 0,A
   \   000013   A3           INC     DPTR
   \   000014   E0           MOVX    A,@DPTR
   \   000015   F5..         MOV     ?V0 + 1,A
   \   000017   E4           CLR     A
   \   000018   F5..         MOV     ?V0 + 2,A
   \   00001A   F5..         MOV     ?V0 + 3,A
   \   00001C   90....       MOV     DPTR,#zclColor_EnhancedCurrentHue
   \   00001F   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   000022   12....       LCALL   ?L_SUB
    853            // adjust direction
    854            switch ( pCmd->direction )
   \   000025   8E82         MOV     DPL,R6
   \   000027   8F83         MOV     DPH,R7
   \   000029   A3           INC     DPTR
   \   00002A   A3           INC     DPTR
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   601D         JZ      ??zclColor_EnhMoveToHueCB_0
   \   00002E   14           DEC     A
   \   00002F   601A         JZ      ??zclColor_EnhMoveToHueCB_0
   \   000031   14           DEC     A
   \   000032   6005         JZ      ??zclColor_EnhMoveToHueCB_1
   \   000034   14           DEC     A
   \   000035   602A         JZ      ??zclColor_EnhMoveToHueCB_2
   \   000037   8037         SJMP    ??zclColor_EnhMoveToHueCB_3
    855            {
    856              case LIGHTING_MOVE_TO_HUE_DIRECTION_SHORTEST_DISTANCE:
    857                if  ( hueDiff > COLOR_ENH_HUE_MAX/2 )
    858                {
    859                  hueDiff -= ( COLOR_ENH_HUE_MAX + 1 ); // extra step to wrap
    860                }
    861                else if ( hueDiff < -COLOR_ENH_HUE_MAX/2 )
    862                {
    863                  hueDiff += COLOR_ENH_HUE_MAX + 1; // extra step to wrap
    864                }
    865                break;
    866              case LIGHTING_MOVE_TO_HUE_DIRECTION_LONGEST_DISTANCE:
    867                if ( ( hueDiff > 0 ) && ( hueDiff < COLOR_ENH_HUE_MAX/2 ) )
    868                {
    869                  hueDiff -= ( COLOR_ENH_HUE_MAX + 1 ); // extra step to wrap
    870                }
    871                else if ( ( hueDiff < 0 ) && ( hueDiff > -COLOR_ENH_HUE_MAX/2 ) )
    872                {
    873                  hueDiff += COLOR_HUE_MAX + 1; // extra step to wrap
    874                }
    875                break;
    876              case LIGHTING_MOVE_TO_HUE_DIRECTION_UP:
    877                if ( hueDiff < 0 )
   \                     ??zclColor_EnhMoveToHueCB_1:
   \   000039   90....       MOV     DPTR,#__Constant_0
   \   00003C   78..         MOV     R0,#?V0 + 0
   \   00003E   12....       LCALL   ?SL_GE_X
   \   000041   4008         JC      ??zclColor_EnhMoveToHueCB_0
    878                {
    879                  hueDiff += COLOR_ENH_HUE_MAX;
   \   000043   90....       MOV     DPTR,#__Constant_ffff
   \                     ??zclColor_EnhMoveToHueCB_4:
   \   000046   78..         MOV     R0,#?V0 + 0
   \   000048   12....       LCALL   ?L_ADD_X
    880                }
    881                break;
    882              case LIGHTING_MOVE_TO_HUE_DIRECTION_DOWN:
    883                if ( hueDiff > 0 )
    884                {
    885                  hueDiff -= COLOR_ENH_HUE_MAX;
    886                }
    887                break;
    888              default:
    889                return ( ZCL_STATUS_INVALID_FIELD );
    890            }
    891          
    892            //if transition time = 0 then do immediately
    893            if ( pCmd->transitionTime == 0 )
   \                     ??zclColor_EnhMoveToHueCB_0:
   \   00004B   8E82         MOV     DPL,R6
   \   00004D   8F83         MOV     DPH,R7
   \   00004F   A3           INC     DPTR
   \   000050   A3           INC     DPTR
   \   000051   A3           INC     DPTR
   \   000052   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_105:
   \   000055   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   000058   701B         JNZ     ??zclColor_EnhMoveToHueCB_5
    894            {
    895                zclColor_EnhancedHueRemainingTime = 1;
   \   00005A   7401         MOV     A,#0x1
   \   00005C   F0           MOVX    @DPTR,A
   \   00005D   A3           INC     DPTR
   \   00005E   E4           CLR     A
   \   00005F   8018         SJMP    ??zclColor_EnhMoveToHueCB_6
    896            }
   \                     ??zclColor_EnhMoveToHueCB_2:
   \   000061   90....       MOV     DPTR,#__Constant_1
   \   000064   78..         MOV     R0,#?V0 + 0
   \   000066   12....       LCALL   ?SL_GE_X
   \   000069   50E0         JNC     ??zclColor_EnhMoveToHueCB_0
   \   00006B   90....       MOV     DPTR,#__Constant_ffff0001
   \   00006E   80D6         SJMP    ??zclColor_EnhMoveToHueCB_4
   \                     ??zclColor_EnhMoveToHueCB_3:
   \   000070   7985         MOV     R1,#-0x7b
   \   000072   02....       LJMP    ??zclColor_EnhMoveToHueCB_7 & 0xFFFF
    897            else
    898            {
    899              zclColor_EnhancedHueRemainingTime = pCmd->transitionTime;
   \                     ??zclColor_EnhMoveToHueCB_5:
   \   000075   E8           MOV     A,R0
   \   000076   F0           MOVX    @DPTR,A
   \   000077   A3           INC     DPTR
   \   000078   E9           MOV     A,R1
   \                     ??zclColor_EnhMoveToHueCB_6:
   \   000079   F0           MOVX    @DPTR,A
    900            }
    901          
    902            zclColor_StepEnhancedHue_256 = ((int32)(hueDiff))<<8;
    903            zclColor_StepEnhancedHue_256 /= (int32)zclColor_EnhancedHueRemainingTime;
   \   00007A   7408         MOV     A,#0x8
   \   00007C   78..         MOV     R0,#?V0 + 0
   \   00007E   12....       LCALL   ?L_SHL
   \   000081   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   000084   12....       LCALL   ?Subroutine43 & 0xFFFF
   \                     ??CrossCallReturnLabel_74:
   \   000087   F5..         MOV     ?V0 + 5,A
   \   000089   78..         MOV     R0,#?V0 + 0
   \   00008B   79..         MOV     R1,#?V0 + 4
   \   00008D   12....       LCALL   ?L_DIV_MOD
   \   000090   90....       MOV     DPTR,#zclColor_StepEnhancedHue_256
   \   000093   78..         MOV     R0,#?V0 + 0
   \   000095   12....       LCALL   ?L_MOV_TO_X
    904          
    905            hwLight_ApplyUpdate16b( &zclColor_EnhancedCurrentHue,
    906                                    &zclColor_EnhancedCurrentHue_256,
    907                                    &zclColor_StepEnhancedHue_256,
    908                                    &zclColor_EnhancedHueRemainingTime,
    909                                    COLOR_ENH_HUE_MIN, COLOR_ENH_HUE_MAX, TRUE );
   \   000098                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   000098   75..FF       MOV     ?V0 + 0,#-0x1
   \   00009B   75..FF       MOV     ?V0 + 1,#-0x1
   \   00009E   78..         MOV     R0,#?V0 + 0
   \   0000A0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A3   E4           CLR     A
   \   0000A4   F5..         MOV     ?V0 + 0,A
   \   0000A6   F5..         MOV     ?V0 + 1,A
   \   0000A8   78..         MOV     R0,#?V0 + 0
   \   0000AA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000AD   75....       MOV     ?V0 + 0,#zclColor_EnhancedHueRemainingTime & 0xff
   \   0000B0   75....       MOV     ?V0 + 1,#(zclColor_EnhancedHueRemainingTime >> 8) & 0xff
   \   0000B3   78..         MOV     R0,#?V0 + 0
   \   0000B5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B8   75....       MOV     ?V0 + 0,#zclColor_StepEnhancedHue_256 & 0xff
   \   0000BB   75....       MOV     ?V0 + 1,#(zclColor_StepEnhancedHue_256 >> 8) & 0xff
   \   0000BE   78..         MOV     R0,#?V0 + 0
   \   0000C0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C3   7901         MOV     R1,#0x1
   \   0000C5   7C..         MOV     R4,#zclColor_EnhancedCurrentHue_256 & 0xff
   \   0000C7   7D..         MOV     R5,#(zclColor_EnhancedCurrentHue_256 >> 8) & 0xff
   \   0000C9   7A..         MOV     R2,#zclColor_EnhancedCurrentHue & 0xff
   \   0000CB   7B..         MOV     R3,#(zclColor_EnhancedCurrentHue >> 8) & 0xff
   \   0000CD   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   0000D0   7408         MOV     A,#0x8
   \   0000D2   12....       LCALL   ?DEALLOC_XSTACK8
    910          
    911            if ( zclColor_EnhancedHueRemainingTime )
   \   0000D5   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   0000D8   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_106:
   \   0000DB   6017         JZ      ??zclColor_EnhMoveToHueCB_8
    912            {
    913              //set a timer to make the change over 100ms
    914              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100 );
   \   0000DD                ; Setup parameters for call to function osal_start_timerEx
   \   0000DD   90....       MOV     DPTR,#__Constant_64
   \   0000E0   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0000E3   7A10         MOV     R2,#0x10
   \   0000E5   7B00         MOV     R3,#0x0
   \   0000E7   90....       MOV     DPTR,#zclLight_TaskID
   \   0000EA   E0           MOVX    A,@DPTR
   \   0000EB   F9           MOV     R1,A
   \   0000EC   12....       LCALL   ??osal_start_timerEx?relay
   \   0000EF   7404         MOV     A,#0x4
   \   0000F1   12....       LCALL   ?DEALLOC_XSTACK8
    915            }
    916          
    917            return ( ZSuccess );
   \                     ??zclColor_EnhMoveToHueCB_8:
   \   0000F4   7900         MOV     R1,#0x0
   \                     ??zclColor_EnhMoveToHueCB_7:
   \   0000F6   02....       LJMP    ?Subroutine1 & 0xFFFF
    918          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   90....       MOV     DPTR,#zclColor_EnhancedCurrentHue
   \   000003   12....       LCALL   ?Subroutine44 & 0xFFFF
   \                     ??CrossCallReturnLabel_76:
   \   000006   12....       LCALL   ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_66:
   \   000009   8E82         MOV     DPL,R6
   \   00000B   8F83         MOV     DPH,R7
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   12....       LCALL   ?Subroutine43 & 0xFFFF
   \                     ??CrossCallReturnLabel_75:
   \   000003   F5..         MOV     ?V0 + 5,A
   \   000005   E4           CLR     A
   \   000006   F5..         MOV     ?V0 + 6,A
   \   000008   F5..         MOV     ?V0 + 7,A
   \   00000A   78..         MOV     R0,#?V0 + 0
   \   00000C   79..         MOV     R1,#?V0 + 4
   \   00000E   22           RET
    919          
    920          
    921          /*********************************************************************
    922           * @fn      zclColor_MoveEnhHueCB
    923           *
    924           * @brief   Callback from the ZCL Lighting Cluster Library when
    925           *          it received a Color Control - Move Hue Command for
    926           *          this application.
    927           *
    928           * @param   moveMode - LIGHTING_MOVE_HUE_STOP, LIGHTING_MOVE_HUE_UP, or
    929           *                     LIGHTING_MOVE_HUE_DOWN
    930           * @param   rate - the movement in steps per second, where step is a
    931           *                 change in the device's hue of one unit
    932           *
    933           * @return  status
    934           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    935          ZStatus_t zclColor_MoveEnhHueCB( zclCCEnhancedMoveHue_t *pCmd )
   \                     zclColor_MoveEnhHueCB:
    936          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    937            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_HUE_SATURATION);
   \   000009                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000009   7900         MOV     R1,#0x0
   \   00000B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    938            zclColor_EnhancedCurrentHue_256 = (uint32)zclColor_EnhancedCurrentHue<<8;
   \   00000E   12....       LCALL   ?Subroutine5 & 0xFFFF
    939            zclColor_ColorMode = COLOR_MODE_CURRENT_HUE_SATURATION;
    940            zclColor_EnhancedColorMode = ENHANCED_COLOR_MODE_ENHANCED_CURRENT_HUE_SATURATION;
    941          
    942            switch (pCmd->moveMode)
   \                     ??CrossCallReturnLabel_3:
   \   000011   7003         JNZ     $+5
   \   000013   02....       LJMP    ??zclColor_MoveEnhHueCB_0 & 0xFFFF
   \   000016   14           DEC     A
   \   000017   600A         JZ      ??zclColor_MoveEnhHueCB_1
   \   000019   24FE         ADD     A,#-0x2
   \   00001B   7003         JNZ     $+5
   \   00001D   02....       LJMP    ??zclColor_MoveEnhHueCB_2 & 0xFFFF
   \   000020   02....       LJMP    ??zclColor_MoveEnhHueCB_3 & 0xFFFF
    943            {
    944              case LIGHTING_MOVE_HUE_UP:
    945                zclColor_StepEnhancedHue_256 = (((int32)pCmd->rate)<<8)/10;
   \                     ??zclColor_MoveEnhHueCB_1:
   \   000023   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_117:
   \   000026   7408         MOV     A,#0x8
   \   000028   78..         MOV     R0,#?V0 + 0
   \   00002A   12....       LCALL   ?L_SHL
   \   00002D   90....       MOV     DPTR,#__Constant_a
   \   000030   78..         MOV     R0,#?V0 + 4
   \   000032   12....       LCALL   ?L_MOV_X
   \   000035   78..         MOV     R0,#?V0 + 0
   \   000037   79..         MOV     R1,#?V0 + 4
   \   000039   12....       LCALL   ?L_DIV_MOD
   \   00003C   90....       MOV     DPTR,#zclColor_StepEnhancedHue_256
   \   00003F   78..         MOV     R0,#?V0 + 0
   \   000041   12....       LCALL   ?L_MOV_TO_X
    946                //Change for ever - stop mode stop this command
    947                zclColor_EnhancedHueRemainingTime = 0xFFFF;
   \   000044   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   000047   74FF         MOV     A,#-0x1
   \                     ??zclColor_MoveEnhHueCB_4:
   \   000049   F0           MOVX    @DPTR,A
   \   00004A   A3           INC     DPTR
   \   00004B   F0           MOVX    @DPTR,A
    948                break;
    949              case LIGHTING_MOVE_HUE_DOWN:
    950                zclColor_StepEnhancedHue_256 = ((-(int32)pCmd->rate)<<8)/10;
    951                //Change for ever - stop mode stop this command
    952                zclColor_EnhancedHueRemainingTime = 0xFFFF;
    953                break;
    954              case LIGHTING_MOVE_HUE_STOP:
    955                zclColor_StepEnhancedHue_256 = 0;
    956                zclColor_StepHue_256 = 0;
    957                zclColor_EnhancedHueRemainingTime = 0x0;
    958                break;
    959              default:
    960                return ( ZCL_STATUS_INVALID_FIELD );
    961            }
    962          
    963            hwLight_ApplyUpdate16b( &zclColor_EnhancedCurrentHue,
    964                                    &zclColor_EnhancedCurrentHue_256,
    965                                    &zclColor_StepEnhancedHue_256,
    966                                    &zclColor_EnhancedHueRemainingTime,
    967                                    COLOR_ENH_HUE_MIN, COLOR_ENH_HUE_MAX, TRUE );
   \   00004C                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   00004C   75..FF       MOV     ?V0 + 0,#-0x1
   \   00004F   75..FF       MOV     ?V0 + 1,#-0x1
   \   000052   78..         MOV     R0,#?V0 + 0
   \   000054   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000057   E4           CLR     A
   \   000058   F5..         MOV     ?V0 + 0,A
   \   00005A   F5..         MOV     ?V0 + 1,A
   \   00005C   78..         MOV     R0,#?V0 + 0
   \   00005E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000061   75....       MOV     ?V0 + 0,#zclColor_EnhancedHueRemainingTime & 0xff
   \   000064   75....       MOV     ?V0 + 1,#(zclColor_EnhancedHueRemainingTime >> 8) & 0xff
   \   000067   78..         MOV     R0,#?V0 + 0
   \   000069   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006C   75....       MOV     ?V0 + 0,#zclColor_StepEnhancedHue_256 & 0xff
   \   00006F   75....       MOV     ?V0 + 1,#(zclColor_StepEnhancedHue_256 >> 8) & 0xff
   \   000072   78..         MOV     R0,#?V0 + 0
   \   000074   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000077   7901         MOV     R1,#0x1
   \   000079   7C..         MOV     R4,#zclColor_EnhancedCurrentHue_256 & 0xff
   \   00007B   7D..         MOV     R5,#(zclColor_EnhancedCurrentHue_256 >> 8) & 0xff
   \   00007D   7A..         MOV     R2,#zclColor_EnhancedCurrentHue & 0xff
   \   00007F   7B..         MOV     R3,#(zclColor_EnhancedCurrentHue >> 8) & 0xff
   \   000081   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   000084   7408         MOV     A,#0x8
   \   000086   12....       LCALL   ?DEALLOC_XSTACK8
    968          
    969            if ( zclColor_EnhancedHueRemainingTime )
   \   000089   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   00008C   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_107:
   \   00008F   6017         JZ      ??zclColor_MoveEnhHueCB_5
    970            {
    971              //set a timer to make the change over 100ms
    972              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100);
   \   000091                ; Setup parameters for call to function osal_start_timerEx
   \   000091   90....       MOV     DPTR,#__Constant_64
   \   000094   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000097   7A10         MOV     R2,#0x10
   \   000099   7B00         MOV     R3,#0x0
   \   00009B   90....       MOV     DPTR,#zclLight_TaskID
   \   00009E   E0           MOVX    A,@DPTR
   \   00009F   F9           MOV     R1,A
   \   0000A0   12....       LCALL   ??osal_start_timerEx?relay
   \   0000A3   7404         MOV     A,#0x4
   \   0000A5   12....       LCALL   ?DEALLOC_XSTACK8
    973            }
    974          
    975            return ( ZSuccess );
   \                     ??zclColor_MoveEnhHueCB_5:
   \   0000A8   7900         MOV     R1,#0x0
   \                     ??zclColor_MoveEnhHueCB_6:
   \   0000AA   02....       LJMP    ?Subroutine1 & 0xFFFF
   \                     ??zclColor_MoveEnhHueCB_2:
   \   0000AD   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   0000B0   12....       LCALL   ?L_NEG
   \   0000B3   02....       LJMP    ??CrossCallReturnLabel_117 & 0xFFFF
   \                     ??zclColor_MoveEnhHueCB_0:
   \   0000B6   90....       MOV     DPTR,#zclColor_StepEnhancedHue_256
   \   0000B9   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_129:
   \   0000BC   90....       MOV     DPTR,#zclColor_StepHue_256
   \   0000BF   12....       LCALL   ??Subroutine53_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_126:
   \   0000C2   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   0000C5   8082         SJMP    ??zclColor_MoveEnhHueCB_4
   \                     ??zclColor_MoveEnhHueCB_3:
   \   0000C7   7985         MOV     R1,#-0x7b
   \   0000C9   80DF         SJMP    ??zclColor_MoveEnhHueCB_6
    976          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine26:
   \   000000   A3           INC     DPTR
   \   000001                REQUIRE ??Subroutine52_0
   \   000001                ; // Fall through to label ??Subroutine52_0
    977          
    978          
    979          /*********************************************************************
    980           * @fn      zclColor_StepEnhHueCB
    981           *
    982           * @brief   Callback from the ZCL Lighting Cluster Library when
    983           *          it received a Color Control -  Step Saturation Command for
    984           *          this application.
    985           *
    986           * @param   stepMode - LIGHTING_STEP_SATURATION_UP,
    987           *                     LIGHTING_STEP_SATURATION_DOWN
    988           * @param   transitionTime - time to perform a single step in 1/10 of second
    989           *
    990           * @return  status
    991           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    992          ZStatus_t zclColor_StepEnhHueCB( zclCCEnhancedStepHue_t *pCmd )
   \                     zclColor_StepEnhHueCB:
    993          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    994            hwLight_UpdateColorMode(COLOR_MODE_CURRENT_HUE_SATURATION);
   \   000009                ; Setup parameters for call to function hwLight_UpdateColorMode
   \   000009   7900         MOV     R1,#0x0
   \   00000B   12....       LCALL   ??hwLight_UpdateColorMode?relay
    995            zclColor_EnhancedCurrentHue_256 = (uint32)zclColor_EnhancedCurrentHue<<8;
   \   00000E   90....       MOV     DPTR,#zclColor_EnhancedCurrentHue
   \   000011   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_54:
   \   000014   12....       LCALL   ?Subroutine6 & 0xFFFF
    996            zclColor_ColorMode = COLOR_MODE_CURRENT_HUE_SATURATION;
    997            zclColor_EnhancedColorMode = ENHANCED_COLOR_MODE_ENHANCED_CURRENT_HUE_SATURATION;
    998          
    999            if ( pCmd->transitionTime == 0 )
   \                     ??CrossCallReturnLabel_5:
   \   000017   8E82         MOV     DPL,R6
   \   000019   8F83         MOV     DPH,R7
   \   00001B   A3           INC     DPTR
   \   00001C   A3           INC     DPTR
   \   00001D   A3           INC     DPTR
   \   00001E   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_108:
   \   000021   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   000024   7007         JNZ     ??zclColor_StepEnhHueCB_0
   1000            {
   1001              zclColor_EnhancedHueRemainingTime = 1;
   \   000026   7401         MOV     A,#0x1
   \   000028   F0           MOVX    @DPTR,A
   \   000029   A3           INC     DPTR
   \   00002A   E4           CLR     A
   \   00002B   8004         SJMP    ??zclColor_StepEnhHueCB_1
   1002            }
   1003            else
   1004            {
   1005              zclColor_EnhancedHueRemainingTime = pCmd->transitionTime;
   \                     ??zclColor_StepEnhHueCB_0:
   \   00002D   E8           MOV     A,R0
   \   00002E   F0           MOVX    @DPTR,A
   \   00002F   A3           INC     DPTR
   \   000030   E9           MOV     A,R1
   1006            }
   \                     ??zclColor_StepEnhHueCB_1:
   \   000031   12....       LCALL   ?Subroutine47 & 0xFFFF
   1007          
   1008            zclColor_StepEnhancedHue_256 = ((((int32)pCmd->stepSize)<<8) / zclColor_EnhancedHueRemainingTime);
   \                     ??CrossCallReturnLabel_91:
   \   000034   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_118:
   \   000037   7408         MOV     A,#0x8
   \   000039   78..         MOV     R0,#?V0 + 0
   \   00003B   12....       LCALL   ?L_SHL
   \   00003E   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   000041   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   000044   12....       LCALL   ?L_DIV_MOD
   \   000047   90....       MOV     DPTR,#zclColor_StepEnhancedHue_256
   \   00004A   78..         MOV     R0,#?V0 + 0
   \   00004C   12....       LCALL   ?L_MOV_TO_X
   1009          
   1010            if ( pCmd->stepMode == LIGHTING_STEP_HUE_DOWN )
   \   00004F   8E82         MOV     DPL,R6
   \   000051   8F83         MOV     DPH,R7
   \   000053   E0           MOVX    A,@DPTR
   \   000054   F8           MOV     R0,A
   \   000055   7403         MOV     A,#0x3
   \   000057   68           XRL     A,R0
   \   000058   7076         JNZ     ??zclColor_StepEnhHueCB_2
   1011            {
   1012              zclColor_StepEnhancedHue_256 = -zclColor_StepEnhancedHue_256;
   \   00005A   90....       MOV     DPTR,#zclColor_StepEnhancedHue_256
   \   00005D   78..         MOV     R0,#?V0 + 0
   \   00005F   12....       LCALL   ?L_MOV_X
   \   000062   78..         MOV     R0,#?V0 + 0
   \   000064   12....       LCALL   ?L_NEG
   \   000067   90....       MOV     DPTR,#zclColor_StepEnhancedHue_256
   \   00006A   78..         MOV     R0,#?V0 + 0
   \   00006C   12....       LCALL   ?L_MOV_TO_X
   1013            }
   1014            else if ( pCmd->stepMode != LIGHTING_STEP_HUE_UP )
   1015            {
   1016              return ( ZCL_STATUS_INVALID_FIELD );
   1017            }
   1018          
   1019            hwLight_ApplyUpdate16b( &zclColor_EnhancedCurrentHue,
   1020                                    &zclColor_EnhancedCurrentHue_256,
   1021                                    &zclColor_StepEnhancedHue_256,
   1022                                    &zclColor_EnhancedHueRemainingTime,
   1023                                    COLOR_ENH_HUE_MIN, COLOR_ENH_HUE_MAX, TRUE );
   \                     ??zclColor_StepEnhHueCB_3:
   \   00006F                ; Setup parameters for call to function hwLight_ApplyUpdate16b
   \   00006F   75..FF       MOV     ?V0 + 0,#-0x1
   \   000072   75..FF       MOV     ?V0 + 1,#-0x1
   \   000075   78..         MOV     R0,#?V0 + 0
   \   000077   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007A   E4           CLR     A
   \   00007B   F5..         MOV     ?V0 + 0,A
   \   00007D   F5..         MOV     ?V0 + 1,A
   \   00007F   78..         MOV     R0,#?V0 + 0
   \   000081   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000084   75....       MOV     ?V0 + 0,#zclColor_EnhancedHueRemainingTime & 0xff
   \   000087   75....       MOV     ?V0 + 1,#(zclColor_EnhancedHueRemainingTime >> 8) & 0xff
   \   00008A   78..         MOV     R0,#?V0 + 0
   \   00008C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00008F   75....       MOV     ?V0 + 0,#zclColor_StepEnhancedHue_256 & 0xff
   \   000092   75....       MOV     ?V0 + 1,#(zclColor_StepEnhancedHue_256 >> 8) & 0xff
   \   000095   78..         MOV     R0,#?V0 + 0
   \   000097   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00009A   7901         MOV     R1,#0x1
   \   00009C   7C..         MOV     R4,#zclColor_EnhancedCurrentHue_256 & 0xff
   \   00009E   7D..         MOV     R5,#(zclColor_EnhancedCurrentHue_256 >> 8) & 0xff
   \   0000A0   7A..         MOV     R2,#zclColor_EnhancedCurrentHue & 0xff
   \   0000A2   7B..         MOV     R3,#(zclColor_EnhancedCurrentHue >> 8) & 0xff
   \   0000A4   12....       LCALL   ??hwLight_ApplyUpdate16b?relay
   \   0000A7   7408         MOV     A,#0x8
   \   0000A9   12....       LCALL   ?DEALLOC_XSTACK8
   1024          
   1025            if ( zclColor_EnhancedHueRemainingTime )
   \   0000AC   90....       MOV     DPTR,#zclColor_EnhancedHueRemainingTime
   \   0000AF   12....       LCALL   ??Subroutine51_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_109:
   \   0000B2   6017         JZ      ??zclColor_StepEnhHueCB_4
   1026            {
   1027              //set a timer to make the change over 100ms
   1028              osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 100 );
   \   0000B4                ; Setup parameters for call to function osal_start_timerEx
   \   0000B4   90....       MOV     DPTR,#__Constant_64
   \   0000B7   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0000BA   7A10         MOV     R2,#0x10
   \   0000BC   7B00         MOV     R3,#0x0
   \   0000BE   90....       MOV     DPTR,#zclLight_TaskID
   \   0000C1   E0           MOVX    A,@DPTR
   \   0000C2   F9           MOV     R1,A
   \   0000C3   12....       LCALL   ??osal_start_timerEx?relay
   \   0000C6   7404         MOV     A,#0x4
   \   0000C8   12....       LCALL   ?DEALLOC_XSTACK8
   1029            }
   1030          
   1031            return ( ZSuccess );
   \                     ??zclColor_StepEnhHueCB_4:
   \   0000CB   7900         MOV     R1,#0x0
   \                     ??zclColor_StepEnhHueCB_5:
   \   0000CD   02....       LJMP    ?Subroutine1 & 0xFFFF
   \                     ??zclColor_StepEnhHueCB_2:
   \   0000D0   7401         MOV     A,#0x1
   \   0000D2   68           XRL     A,R0
   \   0000D3   609A         JZ      ??zclColor_StepEnhHueCB_3
   \   0000D5   7985         MOV     R1,#-0x7b
   \   0000D7   80F4         SJMP    ??zclColor_StepEnhHueCB_5
   1032          }
   1033          
   1034          /*********************************************************************
   1035           * @fn      zclColor_MoveToHueAndSaturationCB
   1036           *
   1037           * @brief   Callback from the ZCL Lighting Cluster Library when
   1038           *          it received a Color Control - Move to Hue Command for
   1039           *          this application.
   1040           *
   1041           * @param    uint8 hue;             // a target hue
   1042           * @param    uint8 saturation;      // a target saturation
   1043           * @param    uint16 transitionTime; // time to move, equal of the value of the field in 1/10 seconds
   1044           *
   1045           * @return  status
   1046           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1047          ZStatus_t zclColor_MoveToEnhHueAndSaturationCB( zclCCEnhancedMoveToHueAndSaturation_t *pCmd )
   \                     zclColor_MoveToEnhHueAndSaturationCB:
   1048          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 8
   \   000005   74F8         MOV     A,#-0x8
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   1049            zclCCEnhancedMoveToHue_t hueCmd;
   1050            zclCCMoveToSaturation_t satCmd;
   1051          
   1052            //Do sat - do this first so color mode is correct.
   1053            satCmd.saturation = pCmd->saturation;
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   E0           MOVX    A,@DPTR
   \   000015   85..82       MOV     DPL,?XSP + 0
   \   000018   85..83       MOV     DPH,?XSP + 1
   \   00001B   F0           MOVX    @DPTR,A
   1054            satCmd.transitionTime = pCmd->transitionTime;
   \   00001C   EE           MOV     A,R6
   \   00001D   2403         ADD     A,#0x3
   \   00001F   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_134:
   \   000022   7401         MOV     A,#0x1
   \   000024   12....       LCALL   ?XSTACK_DISP0_8
   \   000027   12....       LCALL   ?Subroutine13 & 0xFFFF
   1055            zclColor_MoveToSaturationCB( &satCmd );
   \                     ??CrossCallReturnLabel_17:
   \   00002A   12....       LCALL   ??zclColor_MoveToSaturationCB?relay
   1056          
   1057            //Do hue
   1058            hueCmd.enhancedHue = pCmd->enhancedHue;
   \   00002D   8E82         MOV     DPL,R6
   \   00002F   8F83         MOV     DPH,R7
   \   000031   12....       LCALL   ??Subroutine55_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_130:
   \   000034   7403         MOV     A,#0x3
   \   000036   12....       LCALL   ?XSTACK_DISP0_8
   \   000039   12....       LCALL   ?Subroutine16 & 0xFFFF
   1059            hueCmd.direction = LIGHTING_MOVE_TO_HUE_DIRECTION_SHORTEST_DISTANCE;
   \                     ??CrossCallReturnLabel_23:
   \   00003C   7405         MOV     A,#0x5
   \   00003E   12....       LCALL   ?XSTACK_DISP0_8
   \   000041   E4           CLR     A
   \   000042   12....       LCALL   ?Subroutine15 & 0xFFFF
   1060            hueCmd.transitionTime = pCmd->transitionTime;
   \                     ??CrossCallReturnLabel_21:
   \   000045   7406         MOV     A,#0x6
   \   000047   12....       LCALL   ?XSTACK_DISP0_8
   \   00004A   12....       LCALL   ?Subroutine16 & 0xFFFF
   1061            zclColor_EnhMoveToHueCB( &hueCmd );
   \                     ??CrossCallReturnLabel_24:
   \   00004D                ; Setup parameters for call to function zclColor_EnhMoveToHueCB
   \   00004D   7403         MOV     A,#0x3
   \   00004F   12....       LCALL   ?XSTACK_DISP0_8
   \   000052   AA82         MOV     R2,DPL
   \   000054   AB83         MOV     R3,DPH
   \   000056   12....       LCALL   ??zclColor_EnhMoveToHueCB?relay
   1062          
   1063            return ( ZSuccess );
   \   000059   7900         MOV     R1,#0x0
   \   00005B   7408         MOV     A,#0x8
   \   00005D                REQUIRE ?Subroutine0
   \   00005D                ; // Fall through to label ?Subroutine0
   1064          }
   1065          
   1066          /*********************************************************************
   1067           * @fn      zclColor_SetColorLoopCB
   1068           *
   1069           * @brief   Callback from the ZCL Lighting Cluster Library when
   1070           *          it received a Color Control - Color Loop Set Command for
   1071           *          this application.
   1072           *
   1073           * @param   updateFlags - which color loop attributes to update before the color loop is started.
   1074           * @param   action - action to take for the color loop
   1075           * @param   direction - direction for the color loop (decrement or increment)
   1076           * @param   time - number of seconds over which to perform a full color loop
   1077           * @param   startHue - starting hue to use for the color loop
   1078           *
   1079           * @return  status
   1080           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1081          ZStatus_t zclColor_SetColorLoopCB( zclCCColorLoopSet_t *pCmd )
   \                     zclColor_SetColorLoopCB:
   1082          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   1083            if ( pCmd->updateFlags.bits.direction )
   \   000004   8A82         MOV     DPL,R2
   \   000006   8B83         MOV     DPH,R3
   \   000008   E0           MOVX    A,@DPTR
   \   000009   5402         ANL     A,#0x2
   \   00000B   6008         JZ      ??zclColor_SetColorLoopCB_0
   1084            {
   1085              zclColor_ColorLoopDirection = pCmd->direction;
   \   00000D   A3           INC     DPTR
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   90....       MOV     DPTR,#zclColor_ColorLoopDirection
   \   000014   F0           MOVX    @DPTR,A
   1086            }
   1087            if  ( pCmd->updateFlags.bits.time )
   \                     ??zclColor_SetColorLoopCB_0:
   \   000015   8A82         MOV     DPL,R2
   \   000017   8B83         MOV     DPH,R3
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   5404         ANL     A,#0x4
   \   00001C   600D         JZ      ??CrossCallReturnLabel_25
   1088            {
   1089              zclColor_ColorLoopTime = pCmd->time;
   \   00001E   A3           INC     DPTR
   \   00001F   A3           INC     DPTR
   \   000020   A3           INC     DPTR
   \   000021   A3           INC     DPTR
   \   000022   12....       LCALL   ??Subroutine55_0 & 0xFFFF
   1090            }
   \                     ??CrossCallReturnLabel_131:
   \   000025   90....       MOV     DPTR,#zclColor_ColorLoopTime
   \   000028   12....       LCALL   ?Subroutine16 & 0xFFFF
   1091            if  ( pCmd->updateFlags.bits.startHue )
   \                     ??CrossCallReturnLabel_25:
   \   00002B   8A82         MOV     DPL,R2
   \   00002D   8B83         MOV     DPH,R3
   \   00002F   E0           MOVX    A,@DPTR
   \   000030   5408         ANL     A,#0x8
   \   000032   600F         JZ      ??CrossCallReturnLabel_26
   1092            {
   1093              zclColor_ColorLoopStartEnhancedHue = pCmd->startHue;
   \   000034   A3           INC     DPTR
   \   000035   A3           INC     DPTR
   \   000036   A3           INC     DPTR
   \   000037   A3           INC     DPTR
   \   000038   A3           INC     DPTR
   \   000039   A3           INC     DPTR
   \   00003A   12....       LCALL   ??Subroutine55_0 & 0xFFFF
   1094            }
   \                     ??CrossCallReturnLabel_132:
   \   00003D   90....       MOV     DPTR,#zclColor_ColorLoopStartEnhancedHue
   \   000040   12....       LCALL   ?Subroutine16 & 0xFFFF
   1095            if  ( pCmd->updateFlags.bits.action )
   \                     ??CrossCallReturnLabel_26:
   \   000043   8A82         MOV     DPL,R2
   \   000045   8B83         MOV     DPH,R3
   \   000047   E0           MOVX    A,@DPTR
   \   000048   A2E0         MOV     C,0xE0 /* A   */.0
   \   00004A   504D         JNC     ??zclColor_SetColorLoopCB_1
   1096            {
   1097              switch ( pCmd->action )
   \   00004C   A3           INC     DPTR
   \   00004D   A3           INC     DPTR
   \   00004E   E0           MOVX    A,@DPTR
   \   00004F   6008         JZ      ??zclColor_SetColorLoopCB_2
   \   000051   14           DEC     A
   \   000052   604A         JZ      ??zclColor_SetColorLoopCB_3
   \   000054   14           DEC     A
   \   000055   6066         JZ      ??zclColor_SetColorLoopCB_4
   \   000057   8069         SJMP    ??zclColor_SetColorLoopCB_5
   1098              {
   1099                case LIGHTING_COLOR_LOOP_ACTION_DEACTIVATE:
   1100                  if ( zclColor_ColorLoopActive )
   \                     ??zclColor_SetColorLoopCB_2:
   \   000059   90....       MOV     DPTR,#zclColor_ColorLoopActive
   \   00005C   E0           MOVX    A,@DPTR
   \   00005D   603A         JZ      ??zclColor_SetColorLoopCB_1
   1101                  {
   1102                    osal_stop_timerEx( zclLight_TaskID, COLOR_LOOP_PROCESS_EVT );
   \   00005F                ; Setup parameters for call to function osal_stop_timerEx
   \   00005F   7A20         MOV     R2,#0x20
   \   000061   7B00         MOV     R3,#0x0
   \   000063   90....       MOV     DPTR,#zclLight_TaskID
   \   000066   E0           MOVX    A,@DPTR
   \   000067   F9           MOV     R1,A
   \   000068   12....       LCALL   ??osal_stop_timerEx?relay
   1103                    zclColor_ColorLoopActive = 0;
   \   00006B   90....       MOV     DPTR,#zclColor_ColorLoopActive
   \   00006E   E4           CLR     A
   \   00006F   F0           MOVX    @DPTR,A
   1104                    // reset to previous
   1105                    zclColor_EnhancedCurrentHue = zclColor_ColorLoopStoredEnhancedHue;
   \   000070   90....       MOV     DPTR,#zclColor_ColorLoopStoredEnhancedHue
   \   000073   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_59:
   \   000076   12....       LCALL   ?Subroutine16 & 0xFFFF
   1106                    zclColor_HueRemainingTime = 1;
   \                     ??CrossCallReturnLabel_27:
   \   000079   90....       MOV     DPTR,#zclColor_HueRemainingTime
   \   00007C   7401         MOV     A,#0x1
   \   00007E   F0           MOVX    @DPTR,A
   \   00007F   A3           INC     DPTR
   \   000080   E4           CLR     A
   \   000081   F0           MOVX    @DPTR,A
   1107                    osal_start_timerEx( zclLight_TaskID, COLOR_PROCESS_EVT , 0 );
   \   000082                ; Setup parameters for call to function osal_start_timerEx
   \   000082   90....       MOV     DPTR,#__Constant_0
   \   000085   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000088   7A10         MOV     R2,#0x10
   \                     ??zclColor_SetColorLoopCB_6:
   \   00008A   7B00         MOV     R3,#0x0
   \   00008C   90....       MOV     DPTR,#zclLight_TaskID
   \   00008F   E0           MOVX    A,@DPTR
   \   000090   F9           MOV     R1,A
   \   000091   12....       LCALL   ??osal_start_timerEx?relay
   \   000094   7404         MOV     A,#0x4
   \   000096   12....       LCALL   ?DEALLOC_XSTACK8
   1108                  }
   1109                  break;
   1110          
   1111                case LIGHTING_COLOR_LOOP_ACTION_ACTIVATE_FROM_START_HUE:
   1112                  zclColor_ColorLoopStoredEnhancedHue = zclColor_EnhancedCurrentHue;
   1113                  zclColor_EnhancedCurrentHue = zclColor_ColorLoopStartEnhancedHue;
   1114                  zclColor_ColorLoopActive = 1;
   1115                  osal_start_timerEx( zclLight_TaskID, COLOR_LOOP_PROCESS_EVT , 100 );
   1116                  break;
   1117          
   1118                case LIGHTING_COLOR_LOOP_ACTION_ACTIVATE_FROM_ENH_CURR_HUE:
   1119                  zclColor_ColorLoopStoredEnhancedHue = zclColor_EnhancedCurrentHue;
   1120                  zclColor_ColorLoopActive = 1;
   1121                  osal_start_timerEx( zclLight_TaskID, COLOR_LOOP_PROCESS_EVT , 100 );
   1122                  break;
   1123          
   1124               default:
   1125                 return ( ZCL_STATUS_INVALID_FIELD );
   1126              }
   1127            }
   1128            return ( ZSuccess );
   \                     ??zclColor_SetColorLoopCB_1:
   \   000099   7900         MOV     R1,#0x0
   \                     ??zclColor_SetColorLoopCB_7:
   \   00009B   02....       LJMP    ?Subroutine3 & 0xFFFF
   \                     ??zclColor_SetColorLoopCB_3:
   \   00009E   12....       LCALL   ?Subroutine33 & 0xFFFF
   \                     ??CrossCallReturnLabel_61:
   \   0000A1   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   0000A4   90....       MOV     DPTR,#zclColor_ColorLoopStartEnhancedHue
   \   0000A7   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_60:
   \   0000AA   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   0000AD   90....       MOV     DPTR,#zclColor_ColorLoopActive
   \   0000B0   7401         MOV     A,#0x1
   \   0000B2   F0           MOVX    @DPTR,A
   \   0000B3                ; Setup parameters for call to function osal_start_timerEx
   \   0000B3   90....       MOV     DPTR,#__Constant_64
   \   0000B6   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   0000B9   7A20         MOV     R2,#0x20
   \   0000BB   80CD         SJMP    ??zclColor_SetColorLoopCB_6
   \                     ??zclColor_SetColorLoopCB_4:
   \   0000BD   12....       LCALL   ?Subroutine33 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   0000C0   80E8         SJMP    ??CrossCallReturnLabel_60
   \                     ??zclColor_SetColorLoopCB_5:
   \   0000C2   7985         MOV     R1,#-0x7b
   \   0000C4   80D5         SJMP    ??zclColor_SetColorLoopCB_7
   1129          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine33:
   \   000000   90....       MOV     DPTR,#zclColor_EnhancedCurrentHue
   \   000003   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_138:
   \   000006   90....       MOV     DPTR,#zclColor_ColorLoopStoredEnhancedHue
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine32:
   \   000000   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_137:
   \   000003   90....       MOV     DPTR,#zclColor_EnhancedCurrentHue
   \   000006   22           RET

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_64:
   \   000000   64000000     DD 100

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_a:
   \   000000   0A000000     DD 10

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_0:
   \   000000   00000000     DD 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_ffff:
   \   000000   FFFF0000     DD 65535

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1:
   \   000000   01000000     DD 1

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_ffff0001:
   \   000000   0100FFFF     DD -65535

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_process?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_process

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_processColorLoop?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_processColorLoop

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_MoveToColorCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_MoveToColorCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_MoveColorCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_MoveColorCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_StepColorCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_StepColorCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_MoveToSaturationCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_MoveToSaturationCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_MoveSaturationCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_MoveSaturationCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_StepSaturationCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_StepSaturationCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_MoveToHueCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_MoveToHueCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_MoveHueCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_MoveHueCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_StepHueCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_StepHueCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_StopCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_StopCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_MoveToHueAndSaturationCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_MoveToHueAndSaturationCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_EnhMoveToHueCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_EnhMoveToHueCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_MoveEnhHueCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_MoveEnhHueCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_StepEnhHueCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_StepEnhHueCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_MoveToEnhHueAndSaturationCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_MoveToEnhHueAndSaturationCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zclColor_SetColorLoopCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclColor_SetColorLoopCB
   1130          
   1131          #endif //ZCL_COLOR_CTRL
   1132          /****************************************************************************
   1133          ****************************************************************************/
   1134          
   1135          

   Maximum stack usage in bytes:

   ISTACK PSTACK XSTACK Function
   ------ ------ ------ --------
       0      0     42  zclColor_EnhMoveToHueCB
                          0 0 24 -> hwLight_ApplyUpdate16b
                          0 0 16 -> hwLight_UpdateColorMode
                          0 0 20 -> osal_start_timerEx
       0      0     24  zclColor_MoveColorCB
                          0 0 24 -> hwLight_ApplyUpdate16b
                          0 0 16 -> hwLight_UpdateColorMode
                          0 0 20 -> osal_start_timerEx
       0      0     24  zclColor_MoveEnhHueCB
                          0 0 24 -> hwLight_ApplyUpdate16b
                          0 0 16 -> hwLight_UpdateColorMode
                          0 0 20 -> osal_start_timerEx
       0      0     22  zclColor_MoveHueCB
                          0 0 22 -> hwLight_ApplyUpdate
                          0 0 16 -> hwLight_UpdateColorMode
                          0 0 20 -> osal_start_timerEx
       0      0     22  zclColor_MoveSaturationCB
                          0 0 22 -> hwLight_ApplyUpdate
                          0 0 16 -> hwLight_UpdateColorMode
                          0 0 20 -> osal_start_timerEx
       0      0     32  zclColor_MoveToColorCB
                          0 0 32 -> hwLight_ApplyUpdate16b
                          0 0 24 -> hwLight_UpdateColorMode
                          0 0 28 -> osal_start_timerEx
       1      0     18  zclColor_MoveToEnhHueAndSaturationCB
                          0 0 18 -> zclColor_EnhMoveToHueCB
                          0 0 18 -> zclColor_MoveToSaturationCB
       1      0     17  zclColor_MoveToHueAndSaturationCB
                          0 0 17 -> zclColor_MoveToHueCB
                          0 0 17 -> zclColor_MoveToSaturationCB
       0      0     39  zclColor_MoveToHueCB
                          0 0 22 -> hwLight_ApplyUpdate
                          0 0 16 -> hwLight_UpdateColorMode
                          0 0 20 -> osal_start_timerEx
       0      0     40  zclColor_MoveToSaturationCB
                          0 0 22 -> hwLight_ApplyUpdate
                          0 0 16 -> hwLight_UpdateColorMode
                          0 0 20 -> osal_start_timerEx
       2      0      4  zclColor_SetColorLoopCB
                          2 0  4 -> osal_start_timerEx
                          2 0  0 -> osal_stop_timerEx
       0      0     28  zclColor_StepColorCB
                          0 0 28 -> hwLight_ApplyUpdate16b
                          0 0 20 -> hwLight_UpdateColorMode
                          0 0 24 -> osal_start_timerEx
       0      0     24  zclColor_StepEnhHueCB
                          0 0 24 -> hwLight_ApplyUpdate16b
                          0 0 16 -> hwLight_UpdateColorMode
                          0 0 20 -> osal_start_timerEx
       0      0     18  zclColor_StepHueCB
                          0 0 18 -> hwLight_ApplyUpdate
                          0 0 12 -> hwLight_UpdateColorMode
                          0 0 16 -> osal_start_timerEx
       0      0     18  zclColor_StepSaturationCB
                          0 0 18 -> hwLight_ApplyUpdate
                          0 0 12 -> hwLight_UpdateColorMode
                          0 0 16 -> osal_start_timerEx
       2      0      0  zclColor_StopCB
       0      0     16  zclColor_init
                          0 0 16 -> hwLight_ApplyUpdate
       0      0     18  zclColor_process
                          0 0 16 -> hwLight_ApplyUpdate
                          0 0 18 -> hwLight_ApplyUpdate16b
                          0 0 14 -> osal_start_timerEx
       0      0     26  zclColor_processColorLoop
                          0 0 26 -> hwLight_ApplyUpdate16b
                          0 0 18 -> hwLight_UpdateColorMode
                          0 0 22 -> osal_start_timerEx


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
      11  ??Subroutine49_0
       5  ??Subroutine50_0
       6  ??Subroutine51_0
       4  ??Subroutine52_0
       8  ??Subroutine53_0
       5  ??Subroutine54_0
       4  ??Subroutine55_0
       6  ??zclColor_EnhMoveToHueCB?relay
       6  ??zclColor_MoveColorCB?relay
       6  ??zclColor_MoveEnhHueCB?relay
       6  ??zclColor_MoveHueCB?relay
       6  ??zclColor_MoveSaturationCB?relay
       6  ??zclColor_MoveToColorCB?relay
       6  ??zclColor_MoveToEnhHueAndSaturationCB?relay
       6  ??zclColor_MoveToHueAndSaturationCB?relay
       6  ??zclColor_MoveToHueCB?relay
       6  ??zclColor_MoveToSaturationCB?relay
       6  ??zclColor_SetColorLoopCB?relay
       6  ??zclColor_StepColorCB?relay
       6  ??zclColor_StepEnhHueCB?relay
       6  ??zclColor_StepHueCB?relay
       6  ??zclColor_StepSaturationCB?relay
       6  ??zclColor_StopCB?relay
       6  ??zclColor_init?relay
       6  ??zclColor_process?relay
       6  ??zclColor_processColorLoop?relay
       3  ?Subroutine0
       5  ?Subroutine1
       5  ?Subroutine10
      13  ?Subroutine11
      13  ?Subroutine12
      16  ?Subroutine13
       4  ?Subroutine14
      11  ?Subroutine15
       6  ?Subroutine16
      11  ?Subroutine17
      13  ?Subroutine18
      11  ?Subroutine19
       5  ?Subroutine2
       9  ?Subroutine20
       3  ?Subroutine21
      15  ?Subroutine22
       8  ?Subroutine23
      15  ?Subroutine24
       7  ?Subroutine25
       1  ?Subroutine26
      14  ?Subroutine27
      11  ?Subroutine28
      11  ?Subroutine29
       7  ?Subroutine3
       4  ?Subroutine30
       6  ?Subroutine31
       7  ?Subroutine32
      10  ?Subroutine33
      13  ?Subroutine34
       3  ?Subroutine35
       9  ?Subroutine36
      19  ?Subroutine37
       8  ?Subroutine38
       4  ?Subroutine39
      32  ?Subroutine4
       2  ?Subroutine40
       9  ?Subroutine41
       6  ?Subroutine42
       6  ?Subroutine43
       9  ?Subroutine44
      15  ?Subroutine45
      11  ?Subroutine46
       6  ?Subroutine47
       8  ?Subroutine48
      15  ?Subroutine5
       4  ?Subroutine6
       7  ?Subroutine7
       1  ?Subroutine8
      15  ?Subroutine9
       4  __Constant_0
       4  __Constant_1
       4  __Constant_64
       4  __Constant_a
       4  __Constant_ffff
       4  __Constant_ffff0001
       2  zclColor_CurrentHue_256
       2  zclColor_CurrentSaturation_256
       4  zclColor_CurrentX_256
       4  zclColor_CurrentY_256
     249  zclColor_EnhMoveToHueCB
       4  zclColor_EnhancedCurrentHue_256
       2  zclColor_EnhancedHueRemainingTime
       2  zclColor_HueRemainingTime
     274  zclColor_MoveColorCB
     203  zclColor_MoveEnhHueCB
     218  zclColor_MoveHueCB
     208  zclColor_MoveSaturationCB
     337  zclColor_MoveToColorCB
      93  zclColor_MoveToEnhHueAndSaturationCB
      95  zclColor_MoveToHueAndSaturationCB
     310  zclColor_MoveToHueCB
     179  zclColor_MoveToSaturationCB
       2  zclColor_SaturationRemainingTime
     198  zclColor_SetColorLoopCB
     309  zclColor_StepColorCB
       4  zclColor_StepColorX_256
       4  zclColor_StepColorY_256
     217  zclColor_StepEnhHueCB
       4  zclColor_StepEnhancedHue_256
     178  zclColor_StepHueCB
       4  zclColor_StepHue_256
     174  zclColor_StepSaturationCB
       4  zclColor_StepSaturation_256
      30  zclColor_StopCB
     130  zclColor_init
     445  zclColor_process
     251  zclColor_processColorLoop
       1  zclLight_TaskID

 
 4 587 bytes in segment BANKED_CODE
   114 bytes in segment BANK_RELAYS
    24 bytes in segment XDATA_ROM_C
    43 bytes in segment XDATA_Z
 
 4 701 bytes of CODE  memory
     0 bytes of CONST memory (+ 24 bytes shared)
    43 bytes of XDATA memory

Errors: none
Warnings: none
